<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Math 305 Advanced Linear Algebra</title>
    <link href="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/"/>
    <url>/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/</url>
    
    <content type="html"><![CDATA[<h1 id="math-305-advanced-linear-algebra">Math 305 Advanced LinearAlgebra</h1><h2 id="logic-and-set-theory">Logic and Set Theory</h2><h3 id="introduction">Introduction</h3><p><strong>Proof:</strong></p><ul><li>In Mathematics, a <strong>proof</strong> is a demonstration thatassuming certain axioms, some statements is necessarily true.</li><li>A proof is a logical argument, not an empirical one</li><li>One must demonstrate that a proposition is true in <strong>allcases</strong> before it is considered a theorem of mathematics. Anunproven proposition for which there is some sort of empirical evidenceis known as a <strong>conjecture</strong></li></ul><h3 id="statement"><ahref="#Math%20305%20Advanced%20Linear%20Algebra">1.1 Statement</a></h3><h4 id="what-is-statement"><ahref="#Math%20305%20Advanced%20Linear%20Algebra">What isStatement</a></h4><p>An Statement (assertion) that is true <strong>or</strong> false, butnot both.</p><p><u>Example</u></p><ul><li>Fred is twenty years old</li><li>3 + x = 12 ---&gt; This is NOT a statement since it cannot bedecided as True or Fasle.</li></ul><blockquote><p>Remark:</p><p><strong>Law of excluded middle:</strong> For any proposition, eitherthat proposition is true of its negation is true.</p></blockquote><h4 id="combining-statements"><a href="#media">CombiningStatements</a></h4><p><strong>Five</strong> ways of forming new statements based onstatements P and Q.</p><ol type="1"><li><p>Conjunctions (P and Q)</p><ul><li><p>Denotes <span class="math inline">\(P\wedge Q\)</span></p></li><li><p>Is true only if both statements are true, and is falseotherwise</p><table><thead><tr class="header"><th>P</th><th>Q</th><th><span class="math inline">\(P\wedge Q\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T</td><td><strong>T</strong></td></tr><tr class="even"><td>T</td><td>F</td><td><strong>F</strong></td></tr><tr class="odd"><td>F</td><td>T</td><td><strong>F</strong></td></tr><tr class="even"><td>F</td><td>F</td><td><strong>F</strong></td></tr></tbody></table></li></ul></li><li><p>Disjunction (P or Q)</p><ul><li><p>Denote <span class="math inline">\(P\vee Q\)</span></p></li><li><p>Is true if either statement is true, and false otherwise</p><table><thead><tr class="header"><th>P</th><th>Q</th><th><span class="math inline">\(P\vee Q\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T</td><td><strong>T</strong></td></tr><tr class="even"><td>T</td><td>F</td><td><strong>T</strong></td></tr><tr class="odd"><td>F</td><td>T</td><td><strong>T</strong></td></tr><tr class="even"><td>F</td><td>F</td><td><strong>F</strong></td></tr></tbody></table></li></ul></li><li><p>Negation (Not P)</p><ul><li><p>Denotes <span class="math inline">\(\neg P\)</span></p></li><li><p>Is true if the statement is false, and is true otherwise</p><table><thead><tr class="header"><th>P</th><th><span class="math inline">\(\neg P\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td><strong>F</strong></td></tr><tr class="even"><td>F</td><td><strong>T</strong></td></tr></tbody></table></li></ul></li><li><p>Conditional Connective (If P then Q; P only if Q; Q if P)</p><ul><li><p>Denotes <span class="math inline">\(P\to Q\)</span></p></li><li><p>Is <strong>false if P (condition) is true and Q (result) isfalse, and is true otherwise</strong>.(Only this case)</p></li><li><p>P is called the <strong>antecedent</strong> and Q is called the<strong>consequent</strong></p></li><li><p>Think <span class="math inline">\(P\to Q\)</span> as a<strong>promise</strong> that <strong>Q is true whenever P istrue</strong>. When P is false, the promise is kept by default.</p></li><li><p><u>Example:</u> suppose your friend promises ‚Äúif it is sunnytomorrow, I will ride my bike". We will say this is true if they keeptheir promise. If it rains and they don't ride their bike, most peoplewould agree that they have still kept their promise.</p><table><thead><tr class="header"><th>P</th><th>Q</th><th><span class="math inline">\(P\to Q\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T</td><td><strong>T</strong></td></tr><tr class="even"><td><strong>T</strong></td><td><strong>F</strong></td><td><strong>F</strong></td></tr><tr class="odd"><td>F</td><td>T</td><td><strong>T</strong></td></tr><tr class="even"><td>F</td><td>F</td><td><strong>T</strong></td></tr></tbody></table></li><li><p>Variations of <span class="math inline">\(P\to Q\)</span></p><ul><li><p><strong>Converse</strong>: <span class="math inline">\(Q\toP\)</span></p></li><li><p><strong>Inverse:</strong> <span class="math inline">\(\neg P\to\neg Q\)</span> (If not P, if not Q)</p></li><li><p><strong>Contrapositive:</strong> <span class="math inline">\(\negQ \to \neg P\)</span></p><table><thead><tr class="header"><th>P</th><th>Q</th><th>$ PQ$</th><th><span class="math inline">\(Q\to P\)</span></th><th><span class="math inline">\(\neg P \to \neg Q\)</span></th><th><span class="math inline">\(\neg Q \to \neg P\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T</td><td>T <strong>T</strong> T</td><td>T <strong>T</strong> T</td><td>F <strong>T</strong> F</td><td>F <strong>T</strong> F</td></tr><tr class="even"><td>T</td><td>F</td><td>T <strong>F</strong> F</td><td>F <strong>T</strong> T</td><td>F <strong>T</strong> T</td><td>T <strong>F</strong> F</td></tr><tr class="odd"><td>F</td><td>T</td><td>F <strong>T</strong> T</td><td>T <strong>F</strong> F</td><td>T <strong>F</strong> F</td><td>F <strong>T</strong> T</td></tr><tr class="even"><td>F</td><td>F</td><td>F <strong>T</strong> F</td><td>F <strong>T</strong> F</td><td>T <strong>T</strong> T</td><td>T <strong>T</strong> T</td></tr></tbody></table></li></ul></li></ul></li><li><p>Biconditional (P if and only if Q)</p><ul><li><p>Denotes <span class="math inline">\(P \leftrightarrowQ\)</span></p></li><li><p>True if P and Q have the same truth value, and falseotherwise</p><table><thead><tr class="header"><th>P</th><th>Q</th><th><span class="math inline">\(P\leftrightarrow Q\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T</td><td><strong>T</strong></td></tr><tr class="even"><td>T</td><td>F</td><td><strong>F</strong></td></tr><tr class="odd"><td>F</td><td>T</td><td><strong>F</strong></td></tr><tr class="even"><td>F</td><td>F</td><td><strong>T</strong></td></tr></tbody></table></li></ul></li></ol><h4 id="compound-logical-statements">Compound Logical Statements</h4><ul><li>Form more complicated compound statements based on the abovefive.</li><li><strong>Parentheses to avoid ambiguity</strong></li><li>Convention: <span class="math inline">\(\neg\)</span> <strong>takesprecedence over the other four operations</strong>.</li></ul><p><u>Example</u></p><p><span class="math inline">\((P\to R)\wedge (Q \vee \negR)\)</span></p><p>Step:</p><ol type="1"><li>Copy values</li><li>Negation</li><li><span class="math inline">\(P\to R\)</span></li><li><span class="math inline">\(Q \vee \neg R\)</span></li><li><span class="math inline">\(\wedge\)</span></li></ol><p>By truth table:</p><table><thead><tr class="header"><th>P</th><th>Q</th><th>R</th><th><span class="math inline">\((P\to R)\wedge (Q \vee \negR)\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T</td><td>T</td><td>T <strong>T</strong> T <strong>T</strong> T <strong>T</strong>F</td></tr><tr class="even"><td>T</td><td>T</td><td>F</td><td>T <strong>F</strong> F <strong>F</strong> T <strong>T</strong>T</td></tr><tr class="odd"><td>T</td><td>F</td><td>T</td><td>T <strong>T</strong> T <strong>F</strong> F <strong>F</strong>F</td></tr><tr class="even"><td>T</td><td>F</td><td>F</td><td>T <strong>F</strong> F <strong>F</strong> F <strong>T</strong>T</td></tr><tr class="odd"><td>F</td><td>T</td><td>T</td><td>F <strong>T</strong> T <strong>T</strong> T <strong>T</strong>F</td></tr><tr class="even"><td>F</td><td>T</td><td>F</td><td>F <strong>T</strong> F <strong>T</strong> T <strong>T</strong>T</td></tr><tr class="odd"><td>F</td><td>F</td><td>T</td><td>F <strong>T</strong> T <strong>F</strong> F <strong>F</strong>F</td></tr><tr class="even"><td>F</td><td>F</td><td>F</td><td>F <strong>T</strong> F <strong>T</strong> F <strong>T</strong>T</td></tr><tr class="odd"><td></td><td></td><td></td><td>1 3 1 5 1 4 2</td></tr></tbody></table><h4 id="applications">Applications</h4><p>Translating language to mathematical symbols.</p><p><u>Example</u></p><ol type="1"><li><p><u>You can access the Internet from campus</u> only if <u>you area computer sciecne magjor</u> or <u>you are not a freshman</u></p><p>P = "You can access the Internet from campus"</p><p>Q = "You are a computer science major"</p><p>R = "You are a freshman"</p><blockquote><p><span class="math inline">\(P\to Q\)</span>: P only if Q; Q if P</p></blockquote><p><span class="math inline">\(P\to (Q\vee \neg R)\)</span></p></li><li><p><u>You cannot ride the roller coaster</u> if <u>you are under 4feet tall</u> unless <u>you are older than 16 years old</u></p><p>P = "You can ride the roller coaster"</p><p>Q = "You are under 4 feet tall"</p><p>R = "You are older than 16 years old"</p><p><span class="math inline">\(\neg P\)</span> = " You cannot ride theroller coaster" --&gt; This is the result</p><p>The condition for the result is: You are under 4 feet tall and Youare younger than 16 years old, which means that, if you are under 4 feettall but older than 16, then you can ride the roller coaster.</p><p><span class="math inline">\((Q\wedge \neg R)\to \negP\)</span></p></li></ol><h4 id="tautology-and-contradiction">Tautology and Contradiction</h4><ul><li><p><strong>Tautology</strong> is a statement that us true by logicalnecessity, regardless of whether the component statements are true orfalse</p><p><u>Example</u></p><p><span class="math inline">\(P\vee (\neg P)\)</span></p><table><thead><tr class="header"><th>P</th><th><span class="math inline">\(P\vee \neg P\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T <strong>T</strong> F</td></tr><tr class="even"><td>F</td><td>F <strong>T</strong> F</td></tr></tbody></table></li><li><p><strong>Contradiction</strong> is a statement that is alwaysfalse by logical necessity, regardless of whether the componentstatements are true or false.</p><p><u>Example</u></p><p><span class="math inline">\(P\wedge (\neg P)\)</span></p><table><thead><tr class="header"><th>P</th><th><span class="math inline">\(P\wedge (\neg P)\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T <strong>F</strong> F</td></tr><tr class="even"><td>F</td><td>F <strong>F</strong> T</td></tr></tbody></table><p>Try to show whether the following statement is tautology, acontradiction or neither?</p><p><span class="math inline">\(((P\wedge Q)\to R)\to (P\to(Q\toR))\)</span></p><table><thead><tr class="header"><th>P</th><th style="text-align: left;">Q</th><th>R</th><th><span class="math inline">\(((P\wedge Q)\to R)\to (P\to(Q\toR))\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td style="text-align: left;">T</td><td>T</td><td>T <strong>T</strong> T <strong>T</strong> T <strong>T</strong> T T<strong>T</strong> <strong>T</strong> T</td></tr><tr class="even"><td>T</td><td style="text-align: left;">T</td><td>F</td><td>T <strong>T</strong> T <strong>F</strong> F <strong>T</strong> T T<strong>F</strong> <strong>F</strong> F</td></tr><tr class="odd"><td>T</td><td style="text-align: left;">F</td><td>T</td><td>T <strong>F</strong> F <strong>T</strong> T <strong>T</strong> T F<strong>T</strong> <strong>T</strong> T</td></tr><tr class="even"><td>T</td><td style="text-align: left;">F</td><td>F</td><td>T <strong>F</strong> F <strong>T</strong> F T <strong>T</strong> F<strong>T</strong> <strong>T</strong> F</td></tr><tr class="odd"><td>F</td><td style="text-align: left;">T</td><td>T</td><td>F <strong>F</strong> T <strong>T</strong> T F <strong>T</strong> T<strong>T</strong> <strong>T</strong> T</td></tr><tr class="even"><td>F</td><td style="text-align: left;">T</td><td>F</td><td>F <strong>F</strong> T <strong>T</strong> F F <strong>T</strong> T<strong>T</strong> <strong>F</strong> F</td></tr><tr class="odd"><td>F</td><td style="text-align: left;">F</td><td>T</td><td>F <strong>F</strong> F <strong>T</strong> T F <strong>T</strong> F<strong>T</strong> <strong>T</strong> T</td></tr><tr class="even"><td>F</td><td style="text-align: left;">F</td><td>F</td><td>F <strong>F</strong> F <strong>T</strong> F F <strong>T</strong> F<strong>T</strong> <strong>T</strong> F</td></tr><tr class="odd"><td></td><td style="text-align: left;"></td><td></td><td>1 2 1 3 1 1 4 1 3 2 1</td></tr></tbody></table></li></ul><h3 id="relations-between-statements">1.2 Relations BetweenStatements</h3><h4 id="meta-statement">Meta Statement</h4><p>A <strong>meta statement</strong> is a logical statement aboutlogical statements.</p><p><u>Example</u></p><p>If the statement "Ethel is tall and Agnes is short" is true, then thestatement "Ethel is tall" is true.</p><h4 id="implication">Implication</h4><p>For two compound statements P and Q, and implication <spanclass="math inline">\(P\implies Q\)</span>,states that Q is truewhenever P is true. To judge a implication, <spanclass="math inline">\(P\to Q\)</span> is tautology.</p><p><u>Example</u></p><ul><li><p>My thumb will hurt if I hit it with a hammer</p></li><li><p><span class="math inline">\(x=2\)</span> implies <spanclass="math inline">\(x+1=3\)</span></p></li><li><p><span class="math inline">\(\neg (P\to Q)\implies P\veeQ\)</span></p><p>To solve this, only need to justify whether <spanclass="math inline">\((\neg (P\to Q))\to(P\vee Q)\)</span> is tautologyby turth table.</p></li></ul><blockquote><p>Remark:</p><ul><li><p>The difference between <span class="math inline">\(P\toQ\)</span> and <span class="math inline">\(P\implies Q\)</span></p><p><span class="math inline">\(P\to Q\)</span> is a compound statementthat <strong>may or may not be true</strong>.</p><p><span class="math inline">\(P\implies Q\)</span> is a relationstating that the compound statement <span class="math inline">\(P\toQ\)</span> is <strong>true under all instances</strong> of the externalpropositions.</p></li><li><p>Be careful <strong>not to allow contradictions</strong> inlogical arguments because, starting from a contradiction, anything canbe proven true.</p><p><u>Example</u></p><p><span class="math inline">\(P\wedge \neg P\implies Q\)</span> is avalid logical equvalence. But Q doesn't appear on the LHS.</p><p><em>Thus, a contradiction in your assumptions can lead to a ‚Äúcorrectùë°proof for an arbitrary statement.</em></p></li><li><p>Logical implication is <strong>NOT</strong> always revisable</p><p><u>Example</u></p><p><span class="math inline">\(\neg (P\to Q)\implies P\veeQ\)</span></p><p>But <span class="math inline">\(P\vee Q\)</span> does not imply <spanclass="math inline">\(\neg (P\to Q)\)</span> Since as P and Q are bothTrue, <span class="math inline">\(P\vee Q\)</span> is True, but <spanclass="math inline">\(\neg (P\to Q)\)</span> is Flase.</p></li></ul></blockquote><h4 id="fact-1.2.1-implication">Fact 1.2.1 Implication</h4><p>Let P, Q, R and S be statements</p><ol type="1"><li><span class="math inline">\((P\to Q)\wedge P \implies Q\)</span>(Modus Ponens)</li><li><span class="math inline">\((P\to Q)\wedge \neg Q\implies \negP\)</span> (Modus Tollens)</li><li><span class="math inline">\(P\wedge Q\implies P\)</span>(Simplification)</li><li><span class="math inline">\(P\wedge Q\implies Q\)</span>(Simpification)</li><li><span class="math inline">\(P\implies P\vee Q\)</span>(Addition)</li><li><span class="math inline">\(Q\implies P\vee Q\)</span>(Addition)</li><li><span class="math inline">\((P\vee Q)\wedge \neg P\impliesQ\)</span> (Modus Tollendo Ponens)</li><li><span class="math inline">\((P\vee Q)\wedge \neg Q\impliesP\)</span> (Modus Tollendo Ponens)</li><li><span class="math inline">\(P\longleftrightarrow Q\implies P\toQ\)</span> (Biconditional-Conditional)</li><li><span class="math inline">\(P\longleftrightarrow Q\implies Q\toP\)</span> (Biconditional-Conditional)</li><li><span class="math inline">\((P\to Q)\wedge(Q\to P)\impliesP\longleftrightarrow Q\)</span> (Conditional-Biconditional)</li><li><span class="math inline">\((P\to Q)\wedge(Q\to R)\implies P\toR\)</span></li><li><span class="math inline">\((P\to Q)\wedge(R\to S)\wedge(P\veeR)\implies Q\vee S\)</span> (Constructive Dilemma)</li></ol><h4 id="equivance">Equivance</h4><p>A <strong>equivalent</strong> <spanclass="math inline">\(P\Longleftrightarrow Q\)</span>, states that P istrue <strong>if and only if</strong> Q is true. To justify, <spanclass="math inline">\(P\longleftrightarrow Q\)</span> (biconditional) isa tautology.</p><p><u>Example</u></p><p><span class="math inline">\(P\to Q \Longleftrightarrow \neg P\veeQ\)</span></p><h4 id="fact-1.2.2-equivance">Fact 1.2.2 Equivance</h4><ol type="1"><li><span class="math inline">\(\neg (\neg P)\LongleftrightarrowP\)</span> (Double Negation)</li><li><span class="math inline">\(P\vee Q\Longleftrightarrow Q\veeP\)</span> (Commutative Law)</li><li><span class="math inline">\(P \wedge Q \Longleftrightarrow Q\wedgeP\)</span> (Commutative Law)</li><li><span class="math inline">\((P\vee Q)\vee R\LongleftrightarrowP\vee(Q\vee R)\)</span> (Associative Law)</li><li><span class="math inline">\((P\wedge Q)\wedge R \LongleftrightarrowP\wedge(Q\wedge R)\)</span> (Associative Law)</li><li><span class="math inline">\(P\wedge(Q\veeR)\Longleftrightarrow(P\wedge Q)\vee(P\wedge R)\)</span> (DistributiveLaw)</li><li><span class="math inline">\(P\vee(Q\wedgeR)\Longleftrightarrow(P\vee Q)\wedge(P\vee R)\)</span> (DistributiveLaw)</li><li><span class="math inline">\(P\to Q\Longleftrightarrow\neg P\veeQ\)</span></li><li><span class="math inline">\(P\to Q\Longleftrightarrow \neg Q\to \negP\)</span> (Contrapositive)</li><li><span class="math inline">\(P\longleftrightarrow Q\Longleftrightarrow Q\longleftrightarrow P\)</span></li><li><span class="math inline">\(P\longleftrightarrowQ\Longleftrightarrow (P\to Q)\wedge(Q\to P)\)</span></li><li><span class="math inline">\(\neg (P\wedge Q)\Longleftrightarrow \negP \vee \neg Q\)</span> (De Morgan's Law)</li><li><span class="math inline">\(\neg (P\vee Q)\Longleftrightarrow \neg P\wedge \neg Q\)</span> (De Morgan's Law)</li><li><span class="math inline">\(\neg (P\to Q)\Longleftrightarrow P\wedge\neg Q\)</span></li><li><span class="math inline">\(\neg (P\longleftrightarrowQ)\Longleftrightarrow (P\wedge \neg Q)\vee (\neg P \wedgeQ)\)</span></li></ol><h4 id="application">Application</h4><p><u>Example</u></p><p>Three boxes with messages on each:</p><p>The first box: "This box is empty"</p><p>The second box: "This box is empty"</p><p>The third box: "Box 2 is not empty"</p><p>Only one of these messages are true. Which box is not empty?</p><blockquote><p>Sol:</p><p>Denote <span class="math inline">\(P_i\)</span> as "Box i is notempty", i = 1,2,3.</p><p>Then the messages of boxes become <span class="math inline">\(\negP_1, \neg P_2, P_2\)</span></p><p>Then we have, since one of them are true, we consider three cases<span class="math display">\[(\neg P_1\wedge \neg (\neg P_2)\wedge \neg P_2)\vee(\neg(\negP_1)\wedge\neg P_2\wedge\neg P_2)\vee(\neg(\neg P_1)\wedge \neg (\negP_2)\wedge P_2)\\\Longleftrightarrow (\neg P_1 \wedge P_2 \wedge \neg P_2)\vee (P_1\wedge\neg P_2)\vee (P_1\wedge P_2\wedge P_2)\\\Longleftrightarrow (P_1\wedge \neg P_2)\vee (P_1 \wedge P_2)\\\Longleftrightarrow P_1\wedge (\neg P_2\vee P_2)\\\Longleftrightarrow P_1\]</span> Note that the term <span class="math inline">\((\neg P_1\wedge P_2 \wedge \neg P_2)\)</span> is canceled since <spanclass="math inline">\((P_2 \wedge \neg P_2)\)</span> is alwaysfalse.</p></blockquote><h3 id="quantifiers">1.3 Quantifiers</h3><p>Expression <span class="math inline">\(x^3 \geq8\)</span> Is not astatement.</p><p>Expression <span class="math inline">\(x3 \geq8, for\ all\ real\numbers\ x\geq2\)</span> is a statement.</p><h4 id="definition">Definition</h4><p>Quantifiers tell us about the variables under condition.</p><p><u>Example</u></p><ul><li><span class="math inline">\(for\ all\ real\ numbers\x\geq2\)</span></li><li><span class="math inline">\(there\ exits\ a\ real\ number\ x\ such\that\ x^2=9\)</span></li></ul><h4 id="first-order-predicate-logic">First-order Predicate Logic</h4><p>A <strong>predicate</strong> is an expression that contains variables(predicate variables), and they may be true of false depending on thevalues of these variables.</p><p><u>Example</u></p><ul><li><span class="math inline">\(x^2 \ is\ greater\ than\ x\)</span></li></ul><p>The <strong>domain</strong> of a predicate variable is the collectionof all possible values that variable may take.</p><p><u>Example</u></p><p>Let <span class="math inline">\(U\)</span> be a collection ofelements and <span class="math inline">\(P(x)\)</span> be a predicate,that can be applied to any <span class="math inline">\(x\inU\)</span></p><p>Then <span class="math inline">\(P(x)=&quot;x\ has\ 4\tires&quot;\)</span> for all the collection <spanclass="math inline">\(U\)</span> of all vehicles.</p><h4 id="universal-quantifier">Universal Quantifier</h4><ul><li>The statement "<span class="math inline">\(\forall x \inU,P(x)\)</span> is true for all values of <spanclass="math inline">\(x\)</span> in <spanclass="math inline">\(U\)</span>"</li><li><span class="math inline">\(\forall x\in U,P(x)\Longleftrightarrow\wedge_{x\in U}P(x)\)</span></li></ul><p><u>Example</u></p><p><span class="math inline">\(\forall x\in U,P(x)\)</span> = "allvehicles have 4 tires"</p><h4 id="existential-quantifer">Existential Quantifer</h4><ul><li>The statement "<span class="math inline">\(\exist x \in U,P(x)\)</span> is true if <span class="math inline">\(P(x)\)</span> istrue for at least one value of <span class="math inline">\(x\)</span> in<span class="math inline">\(U\)</span>"</li><li><span class="math inline">\(\exist x \in U,P(x)\Longleftrightarrow\vee_{x\in U}P(x)\)</span></li><li><strong>Natural implication:</strong> $x U, P(x)x U,P(x) $</li></ul><p><u>Example</u></p><ul><li><span class="math inline">\(\exist x \in U,P(x)\)</span> = "there isone vehicle with 4 tires"</li><li><span class="math inline">\(D=\{ birds\},P(x)= x \ is\angry\)</span>, "some birds are angry"<spanclass="math inline">\(\longleftrightarrow\)</span>"<spanclass="math inline">\(\exist x \in D,P(x)\)</span>"</li></ul><blockquote><p>Remark</p><ul><li>If <span class="math inline">\(U=\empty\)</span> is the empty set,then<ul><li><span class="math inline">\(\forall x \in U, P(x)\)</span> isvacuously true by convention since there are no elements in <spanclass="math inline">\(U\)</span> to test with <spanclass="math inline">\(P(x)\)</span></li><li><span class="math inline">\(\exist x \in U,P(x)\)</span> Is false byconvention because there are no elements in U</li></ul></li><li>If we have <span class="math inline">\(P(x)=\)</span>"x is aperson", <span class="math inline">\(Q(x)=\)</span> "x is mortal". Thenwe can write the statement "Every person is mortal" as <spanclass="math inline">\(\forall x,(P(x)\to Q(x))\)</span></li></ul></blockquote><h4 id="negation-de-morgans-law">Negation (De Morgan's law)</h4><ul><li><span class="math inline">\(\neg (\forall x \inU,P(x)\Longleftrightarrow \exist x\in U,\neg P(x))\)</span></li><li><span class="math inline">\(\neg(\exist x\inU,P(x)\Longleftrightarrow\forall x \in U,\neg P(x))\)</span></li></ul><blockquote><p>Remark:</p><p><span class="math inline">\(\neg(\forall x\inU,P(x))\Longleftrightarrow\neg(\wedge_{x\inU}P(x))\Longleftrightarrow\vee_{x\in U}\negP(x)\Longleftrightarrow\exist x\in U, \neg P(x)\)</span></p></blockquote><h4 id="nested-quantification">Nested Quantification</h4><p>"Every rabbit is faster than some tortoise"</p><p><strong>Domains:</strong> <spanclass="math inline">\(R=\{rabbits\},T=\{tortoises\}\)</span></p><p><strong>Prdicate C(x,y):</strong> Rabbit x is faster than tortoisey</p><p><strong>Nested quantifiers</strong> are quantifiers that occur withinthe scope of other quantifiers.</p><h4 id="multiple-quantifiers">Multiple Quantifiers</h4><p>Consider predicate P(x,y) with <strong>free variables</strong> x andy:</p><ul><li>In statement "<span class="math inline">\(\exist x \inU,P(x)\)</span>", the variable <span class="math inline">\(x\)</span> iscalled a <strong>bound variable</strong> becasue its value cannot bechosen freely.</li><li>In statement "<span class="math inline">\(\exist y\inU,P(x,y\)</span>", <span class="math inline">\(x\)</span> is a<strong>free variable</strong> and y is a <strong>boundvariable</strong></li></ul><p><u>Example</u></p><p>Let <span class="math inline">\(I\)</span> be a collection of imagesand <span class="math inline">\(C\)</span> be a collection of colors.Define predicate P(x,y) = "x contains y" for <spanclass="math inline">\(x\in I,y\in C\)</span></p><p>Then</p><p>"<span class="math inline">\(\forall x \in I,\forall y\inC,P(x,y)\)</span>" = "For any images in I, it contain any color inC"</p><p>"<span class="math inline">\(\forall x\in I,\exist y\inC,P(x,y)\)</span>" = "For any images in I, there is a color in Ccontained in it"</p><ul><li><p><strong>The order of Quantifiers</strong></p><ul><li><p>"<span class="math inline">\(\exist y\in C,\forall x \inI,P(x,y)\)</span>"<span class="math inline">\(\implies\)</span>"<spanclass="math inline">\(\forall x \in I,\exist y\in C,P(x,y)\)</span>"</p><p><u>Example</u></p><p>"<span class="math inline">\(\forall x \in I,\exist y\inC,P(x,y)\)</span>" = "For any images in I, there is a color in Ccontained in it"</p><p>"<span class="math inline">\(\exist y\in C,\forall x \inI,P(x,y)\)</span>" = "There is at least one color in C exist in allimgaes in I"</p></li><li><p>"<span class="math inline">\(\exist x \in I,\forall y \inC,P(x,y)\)</span>" <span class="math inline">\(\implies\)</span>"<spanclass="math inline">\(\forall y \in C,\exist x \inI,P(x,y)\)</span>"</p><p><u>Example</u></p><p>"<span class="math inline">\(\exist x \in I,\forall y \inC,P(x,y)\)</span>" = "There is a image in I containing all color inC"</p><p>"<span class="math inline">\(\exist y\in C,\forall x \inI,P(x,y)\)</span>" = "For each color in C there is an image containingthat color"</p></li></ul></li><li><p><strong>8 total possibilities</strong> to choose order andquantifiers for each variable.</p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211031124918996-7272558-7272569.png"alt="image-20211031124918996" /><figcaption aria-hidden="true">image-20211031124918996</figcaption></figure></li><li><p><strong>Negation</strong></p><ul><li><span class="math inline">\(\neg(\forall x \in I,\forall y \inC,P(x,y))\Longleftrightarrow\exist x \in I,\exist y \in C,\negP(x,y)\)</span></li><li><span class="math inline">\(\neg(\forall x \in I,\exist y\inC,P(x,y))\Longleftrightarrow \exist x\in I,\forall y\in C,\negP(x,y)\)</span></li></ul></li><li><p><strong>Multiple Quantifiers Application</strong></p><p><u>Example</u></p><p>Use quntifiers to express the definition of the limit of areal-valued function <span class="math inline">\(f(x)\)</span> Of a realvariables <span class="math inline">\(x\)</span> at a point <spanclass="math inline">\(a\)</span> in its domain. And express when <spanclass="math inline">\(lim_{x\to a}f(x)\)</span> does not exist.</p><blockquote><p>Sol:</p><p>Recall the definition of the statement <spanclass="math inline">\(\lim_{x\to a}f(x)=L\)</span> Is "for every realnumber</p><p><span class="math inline">\(\epsilon&gt;0\)</span> such that <spanclass="math inline">\(|f(x)-L|&lt;\epsilon\)</span> Whenever <spanclass="math inline">\(0&lt;|x-a|&lt;\delta\)</span>"</p><p>Using quantifiers: <span class="math inline">\(\exist L,\forall\epsilon&gt;0,\exist \delta&gt;0,\forall x\inD:(|x-a|&lt;\delta\implies|f(x)-L|&lt;\epsilon)\)</span></p><p>Negation: <span class="math inline">\(\forall L,\exist\epsilon&gt;0,\forall\delta&gt;0,\existx:|x-a|&lt;\delta\wedge|f(x)-L|\geq\epsilon\)</span></p><p>Note that by Negation of implication: <spanclass="math inline">\(\neg[|x-a|&lt;\delta\implies|f(x)-L|&lt;\epsilon]\Longleftrightarrow|x-a|&lt;\delta\wedge|f(x)-L|\geq\epsilon\)</span></p></blockquote></li></ul><h3 id="strategies-for-proofs">1.4 Strategies for Proofs</h3><ul><li>A <strong>mathematical proof</strong> is a convincing argument that<strong>starts from the premises</strong>, and logically deduces thedesired conclusion.</li><li>A <strong>theorem</strong> is a statement that can be proved on thebasis of explicitly stated or previously agreed assumptions.</li><li>A <strong>proposition</strong> is a statement <strong>not associatedwith any particular theorem</strong>; this term sometimes connotes astatement with a simple proof.</li><li>A <strong>lemma</strong> is a <strong>proven proposition</strong>which is used as a <strong>stepping stone to a larger result</strong>rather than an independent statement in itself.</li><li>A <strong>corollary</strong> is a mathematical statement whichfollows easily from a previously proven statement, typically amathematical theorem.</li></ul><h4 id="direct">Direct</h4><p>Assume P true and give steps that lead to Q:</p><blockquote><p>If P is true</p><p>.... some arguments ...</p><p>them Q is true</p></blockquote><h4 id="contrapositive">Contrapositive</h4><p>Proof of equivalent statement <span class="math inline">\(\neg Q \to\neg P\)</span></p><blockquote><p><span class="math inline">\(P\to Q \Longleftrightarrow\neg Q\to\negP\)</span></p><p>If <span class="math inline">\(\neg Q\)</span> is true</p><p>... some argument ...</p><p><span class="math inline">\(\neg P\)</span> is true</p><p><span class="math inline">\(P\to Q\)</span> is true</p></blockquote><p><u>Example</u></p><p>Let n be an integer, proof if <spanclass="math inline">\(n^2\)</span> is odd, then <spanclass="math inline">\(n\)</span> is odd.</p><blockquote><p>Sol: Denote P = "<span class="math inline">\(n^2\)</span> is odd", Q= "<span class="math inline">\(n\)</span> is odd", then we have <spanclass="math inline">\(\neg Q\)</span> = "n is even", <spanclass="math inline">\(\neg P\)</span> = "<spanclass="math inline">\(n^2\)</span> is even". By proving if <spanclass="math inline">\(\neg Q\)</span> then <spanclass="math inline">\(\neg P\)</span>, we can prove <spanclass="math inline">\(P\to Q\)</span>.</p><p>Suppose we have <span class="math inline">\(\exist k \in\N:n=2k\)</span></p><p><span class="math inline">\(\impliesn^2=(2k)^2=4k^2=2(2k^2)\)</span></p><p><span class="math inline">\(\implies n^2\)</span> is an even number<span class="math inline">\(\implies \neg P\)</span></p><p>Which means we have $Q PPQ $</p></blockquote><h4 id="contradiction">Contradiction</h4><p>Using <span class="math inline">\(\neg(P\to Q)\LongleftrightarrowP\wedge\neg Q\)</span>, one supposes that both P and <spanclass="math inline">\(\neg Q\)</span> are true and then gives stepsleading to a contradiction.</p><blockquote><p>Since <span class="math inline">\((P\to Q)\Longleftrightarrow\neg(\neg (P\to Q))\)</span></p><p>To prove <span class="math inline">\(P\to Q\)</span> is true is toprove <span class="math inline">\(\neg(P\to Q)\)</span> is false.</p><p>Since <span class="math inline">\(\neg(P\to Q)\Longleftrightarrow\neg(\neg P \vee Q)\Longleftrightarrow P\wedge\neg Q\)</span></p><p>To prove <span class="math inline">\(P\to Q\)</span> is true is toprove <span class="math inline">\(P\wedge\neg Q\)</span> is false.</p><p>Then assume <span class="math inline">\(P\wedge\neg Q\)</span> issatisfied, find contradiction</p></blockquote><p><u>Example</u></p><p>Prove if <span class="math inline">\(x\in \R, x^2=2\)</span>, then<span class="math inline">\(x\)</span> is an irrational number.</p><blockquote><p>Sol:</p><p>P = "<span class="math inline">\(x\in \R, x^2=2\)</span>", Q = "x isan irrational number"</p><p>To prove the statement true, we prove <spanclass="math inline">\(P\wedge\neg Q\)</span> is false.</p><p>If we have <span class="math inline">\(x\in \R, x^2=2\)</span> and xis a rational number:</p><p><span class="math inline">\(\implies \exist n,m\in\N:x=\frac{n}{m}\)</span>, m‚â†0. m and n does not have common factors</p><p><span class="math inline">\(\implies x^2=(\frac{n}{m})^2=2\impliesn^2=2m^2\)</span></p><p><span class="math inline">\(\implies n^2\)</span> is even <spanclass="math inline">\(\implies n\)</span> is even</p><p><span class="math inline">\(\implies \exist k \in \N, n=2k\implies4k^2=2m^2\implies m^2=2k^2\)</span></p><p><span class="math inline">\(\implies m^2\)</span> is even <spanclass="math inline">\(\implies m\)</span> is even</p><p>Since both n and m are even, there must be a common factor 2, whichcontradictes with "m and n does not have common factors".</p><p>Thus, the statement is true.</p></blockquote><h4 id="induction">Induction</h4><p>Let P(n) be a logical statement for each <spanclass="math inline">\(n\in N\)</span>. The principle of<strong>mathematical induction</strong> states that P(n) is true for all<span class="math inline">\(n\in N\)</span> if:</p><p>P(1) is true, and</p><p><span class="math inline">\(P(n)\to P(n+1)\)</span> for all <spanclass="math inline">\(n\in \N\)</span></p><p><u>Example</u></p><p>Prove <spanclass="math inline">\(\sum_{i=1}^ni^2=\frac{n(n+1)(2n+1)}{6}\)</span></p><blockquote><p>Sol:</p><p><span class="math inline">\(n=1,S(1)=\frac{1\times 2\times3}{6}=1\)</span></p><p>Assume <span class="math inline">\(S(n)=\sum_{i=1}^ni^2=\frac{n(n+1)(2n+1)}{6}\)</span></p><p>Then <spanclass="math inline">\(S(n+1)=\sum_{i=1}^{n+1}i^2=\frac{n(n+1)(2n+1)}{6}+(n+1)^2=\frac{(n+1)(n+1+1)(2(n+1)+1)}{6}\)</span></p></blockquote><h3 id="set-theory">1.5 Set Theory</h3><h4 id="basics">Basics</h4><p>A <strong>set</strong> is an <strong>unordered</strong> collection of<strong>distinct</strong> objects, called elements or members of theset.</p><p><span class="math inline">\(a\in A\)</span>: A is a set and a is anelement of A</p><p><span class="math inline">\(a\notin A\)</span>: A is a set and a isnot an element of A</p><ul><li>Element order is irrelevent</li><li>Repeated elements have no effect</li><li><strong>Singleton:</strong> a set containing exactly<strong>one</strong> element.</li><li><strong>Empty set <spanclass="math inline">\(\emptyset\)</span>:</strong> (null set) the setthat does not have any elements in it</li><li><strong>Standard sets:</strong> Integers <spanclass="math inline">\(\Z\)</span>, Rational numbers <spanclass="math inline">\(\Q\)</span>, Real numbers <spanclass="math inline">\(\R\)</span>, Complex numbers <spanclass="math inline">\(\C\)</span></li></ul><h4 id="bounding">Bounding</h4><p><strong>Open bounded interval:</strong> <spanclass="math inline">\((a,b)=\{ x\in \R|a&lt;x&lt;b\}\)</span></p><p><strong>Close bounded interval:</strong> <spanclass="math inline">\([a,b]=\{x\in \R|a\leq x\leq b\}\)</span></p><p><strong>Half-open bounded:</strong> <spanclass="math inline">\((a,b]=\{x\in \R|a&lt;x \leq b\}\)</span> or <spanclass="math inline">\([a,b)=\{x\in \R|a\leq x&lt;b\}\)</span></p><p><strong>Open unbounded:</strong> <spanclass="math inline">\((a,\infty)=\{x\in \R|a&lt;x\}\)</span> or <spanclass="math inline">\((-\infty,b)=\{x\in R|x&lt;b\}\)</span> Or <spanclass="math inline">\((-\infty,\infty)=\R\)</span></p><p><strong>Close unbounded:</strong> <spanclass="math inline">\([a,\infty)=\{x\in \R|x\geq a\}\)</span> or <spanclass="math inline">\((-\infty,b]=\{x\in \R|x\leq b\}\)</span></p><h4 id="subset">Subset</h4><p>Set A is a <strong>subset</strong> of set B: If <spanclass="math inline">\(x\in A\implies x\in B\)</span>, we have <spanclass="math inline">\(A\subseteq B\)</span></p><p>If set A is not a subset of set B: <spanclass="math inline">\(A\not\subseteq B\)</span> <spanclass="math display">\[A\subseteq B \Longleftrightarrow ((x\in A)\to(x\in B))\]</span> <u>Example</u></p><ul><li>If <span class="math inline">\(A=\{a,b,c\}\)</span> then <spanclass="math inline">\(a\in A, \{a\}\subseteq A\)</span></li><li>If <span class="math inline">\(B=\{\{a\},b,c\}\)</span> then <spanclass="math inline">\(\{\{a\}\}\subseteq B, \{a\}\in B\)</span></li></ul><blockquote><p><strong>Lemma:</strong> Let A, B and C be sets</p><ul><li><span class="math inline">\(A\subseteq A\)</span></li><li><span class="math inline">\(\emptyset\subseteq A\)</span></li><li>If <span class="math inline">\(A\subseteq B\)</span>, and <spanclass="math inline">\(B\subseteq C\)</span>, then <spanclass="math inline">\(A\subseteq C\)</span></li></ul></blockquote><h4 id="equivalence-and-proper-subset">Equivalence and ProperSubset</h4><p>Let A and B be sets:</p><p><span class="math inline">\(A=B\)</span>: If <spanclass="math inline">\(A\subseteq B, B\subseteq A\)</span>, set A<strong>equals</strong> the set B.</p><p><span class="math inline">\(A\subsetneq B\)</span>: If <spanclass="math inline">\(A\subseteq B, A\not= B\)</span>, set A is a<strong>proper subset</strong> of set B <span class="math display">\[A=B\Longleftrightarrow\forall x((x\in A)\longleftrightarrow (x\in B))\]</span></p><blockquote><p><strong>Lemma:</strong> Let A, B and C be sets</p><ul><li>A = A</li><li>If A = B, then B = A</li><li>If A = B, and B = C, then A = C</li></ul></blockquote><h4 id="cardinality">Cardinality</h4><p>For set A, the <strong>cardinality</strong> |A| is the number ofelements in A.</p><p><strong>Countably Infinite:</strong> If there is a one-to-onecorrespondence between A and the natural numbers <spanclass="math inline">\(\N\)</span>, then A is called <strong>countablyinfinite</strong> and |A| = <spanclass="math inline">\(\infty\)</span></p><p><u>Example</u></p><p>Set of rational numbers <spanclass="math inline">\(\Q=\{\frac{p}{q}|p\in \Z,q\in\N\}\)</span>, iscountably infinite.</p><p><strong>Uncountably Infinite:</strong> If |A| = <spanclass="math inline">\(\infty\)</span> but not countably infinte, then Ais <strong>uncountably infinite</strong></p><p><u>Example</u></p><p>The set of real numbers is uncountably infinite by Cantor's diagonalargument.</p><h4 id="power-set">Power Set</h4><p>Let A be a set. The power set of A, denoted <spanclass="math inline">\(P(A)\)</span>, defined by <spanclass="math inline">\(P(A)=\{X|X\subseteq A\}\)</span></p><p><u>Example</u></p><ul><li><span class="math inline">\(x\in P(A)\)</span> while <spanclass="math inline">\(x\subseteq A\)</span></li><li><span class="math inline">\(P(\emptyset)=\{\empty\}\)</span></li><li><spanclass="math inline">\(P(P(\empty))=\{\empty,\{\empty\}\}\)</span></li></ul><h4 id="set-operations">Set Operations</h4><p><strong>Union:</strong> <span class="math inline">\(A\cup B =\{x|x\in A \vee x\in B\}\)</span></p><p><strong>Intersection:</strong> <span class="math inline">\(A\capB=\{x|x\in A\wedge\ x\in B\}\)</span></p><p><strong>Disjoint:</strong> <span class="math inline">\(A\capB=\empty\)</span></p><blockquote><p>Remark:</p><ul><li><p>If <span class="math inline">\(P(A\cup B)=P(A)\cup P(B)\)</span>,then <span class="math inline">\((A\subseteq B)\cup(B\subseteqA)\)</span></p><p>Proof:</p><p>Since <span class="math inline">\(P(A\cup B)=P(A)\cupP(B)\)</span></p><p>We have <span class="math inline">\(A\cup B\in P(A)\cupP(B)\)</span></p><p>Then <span class="math inline">\((A\cup B)\in P(A)\vee ((A\cup B)\inP(B))\)</span></p><p>Then <span class="math inline">\(((A\cup B)\subseteq A)\vee((A\cupB)\subseteq B)\)</span></p><p>Thus, <span class="math inline">\((B\subseteq A)\vee(A\subseteqB)\)</span></p></li><li><p><span class="math inline">\(P(A\cap B)=P(A)\cap P(B)\)</span></p><p>Proof:</p><p><span class="math inline">\(\Longrightarrow\)</span> <spanclass="math inline">\(\forall v\in P(A\cap B)\)</span>, then <spanclass="math inline">\(v\subseteq A\cap B\)</span></p><p>‚Äã <span class="math inline">\((v\subseteq A)\)</span> and <spanclass="math inline">\((v\subseteq B)\)</span></p><p>‚Äã then we have <span class="math inline">\((v\in P(A))\)</span> and<span class="math inline">\((v\in P(B))\)</span></p><p>‚Äã Thus, <span class="math inline">\(v\in (P(A)\cap P(B)\)</span></p><p><span class="math inline">\(\Longleftarrow\)</span> if <spanclass="math inline">\(x\in P(A)\cap P(B)\)</span>, then <spanclass="math inline">\(x\in P(A)\)</span> And <spanclass="math inline">\(x\in P(B)\)</span></p><p>‚Äã then we have <span class="math inline">\(x\subseteq A\)</span> and<span class="math inline">\(x\subseteq B\)</span>, which means <spanclass="math inline">\(x\subseteq A\cap B\)</span></p><p>‚Äã <span class="math inline">\(x\in P(A\cap B)\)</span></p></li></ul></blockquote><p><strong>Difference:</strong> <span class="math inline">\(A-B=\{x|x\inA\wedge x\not\in B\}\)</span></p><blockquote><p>Remark: <span class="math inline">\(A-B=A-(A\cap B)\)</span></p></blockquote><p><strong>Complement:</strong> <span class="math inline">\(A^C=\{x|x\inU\wedge x\not\in A\}=U-A\)</span></p><blockquote><p>Theorems: (Can be intuitively prove by Venn Diagram)</p><ul><li><span class="math inline">\(A-B\subseteq A\)</span></li><li><span class="math inline">\((A-B)\cap B=\empty\)</span></li><li><span class="math inline">\(A-B=\empty \longleftrightarrowA\subseteq B\)</span></li><li>If <span class="math inline">\(A\subseteq B\)</span>, then <spanclass="math inline">\(A-C=A\cap(B-C)\)</span></li><li>If <span class="math inline">\(A\subseteq B\)</span>, then <spanclass="math inline">\(C-B\subseteq C-A\)</span></li><li><span class="math inline">\(C-(A\cup B)=(C-A)\cap(C-B)\)</span></li><li><span class="math inline">\(C-(A\cap B)=(C-A)\cup(C-B)\)</span></li><li><span class="math inline">\((A\cup B)^C=A^C\cap B^C\)</span></li><li><span class="math inline">\((A\cap B)^C=A^C\cup B^C\)</span></li></ul></blockquote><p><strong>For arbitratrily many set:</strong></p><p><span class="math inline">\(\bigcup_{\alpha\in I}S_\alpha=\{x|x\inS_\alpha \ for\ some\ \alpha\in I\}\)</span></p><p><span class="math inline">\(\bigcap_{\alpha\in I}S_\alpha=\{x|x\inS_\alpha \ for\ all\ \alpha\in I\}\)</span></p><p><strong>Cartesian Product:</strong></p><p><span class="math inline">\(A\times B=\{(a,b)|a\in A, b\inB\}\)</span></p><blockquote><p>Remark:</p><ul><li>Normally, <span class="math inline">\(A\times B\not= B\timesA\)</span>, since the order matters</li><li>For a set A with m elements, the number of elelments in <spanclass="math inline">\(A^n\)</span> is <spanclass="math inline">\(m^n\)</span></li></ul><p>Theorems: (Can be intuitively proved by x-y coordinate)</p><ul><li><p>If <span class="math inline">\(A\subseteq B,C\subseteqD\)</span>, then <span class="math inline">\((A\timesC)\subseteq(B\times D)\)</span></p></li><li><p><span class="math inline">\(A\times(B\cup C)=(A\timesB)\cup(A\times C)\)</span></p><p><span class="math inline">\((B\cup A)\times A=(B\times A)\cup(C\timesA)\)</span></p></li><li><p><span class="math inline">\(A\times(B\cap C)=(A\timesB)\cap(A\times C)\)</span></p><p><span class="math inline">\((B\cap C)\times A=(B\times A)\cap(C\timesA)\)</span></p></li><li><p><span class="math inline">\(A\times\empty=\empty\)</span></p><p><span class="math inline">\(\empty \times A=\empty\)</span></p></li><li><p><span class="math inline">\((A\cap B)\times(C\cap D)=(A\timesC)\cap (B\times D)\)</span></p></li></ul></blockquote><h4 id="relation">Relation</h4><h5 id="defintion">Defintion</h5><p>Let A and B be sets. A <strong>relation</strong> R from A to B is<span class="math inline">\(R\subseteq A\times B\)</span>. If <spanclass="math inline">\(a\in A, b\in B\)</span>, we write <spanclass="math inline">\(aRb\)</span> if <spanclass="math inline">\((a,b)\in R\)</span>. A relation on <spanclass="math inline">\(A\)</span> is a relation from <spanclass="math inline">\(A\)</span> to <spanclass="math inline">\(A\)</span>.</p><p><u>Example</u></p><ul><li><p>A linear relation <span class="math inline">\(R^2=\{(a,b)|a\in R,b\in R\}\)</span></p><p><span class="math inline">\(R_1\)</span> is a relation such that<span class="math inline">\(R_1=\{(a,a+1)|a\in R\}\subseteqR^2\)</span></p></li><li><p>The symbols <span class="math inline">\(&lt;\)</span> and <spanclass="math inline">\(\leq\)</span> both represent relations on <spanclass="math inline">\(\R\)</span></p></li><li><p>We have set <span class="math inline">\(A=\{1,2,3\}\)</span> and<span class="math inline">\(B=\{x,y,z\}\)</span></p><p><span class="math inline">\(R_1\)</span> is a relation such that<span class="math inline">\(R_1=\{(1,x),(1,y),(2,z)\}\subseteq A\timesB\)</span></p><p>Thus we have <span class="math inline">\(1R_1x\)</span>, <spanclass="math inline">\(1R_1y\)</span>,<span class="math inline">\(1\notR_{1} z\)</span></p></li></ul><h5 id="relation-class">Relation Class</h5><p>Relation class of x with respect to R, <spanclass="math inline">\(R[x]=\{y\in B|xRy\}=\{y\in R|(x,y)\inR\}\)</span>, which is the set of y that corresponding to x.</p><p><u>Example</u></p><ul><li><p>We have set <span class="math inline">\(A=\{1,2,3\}\)</span> and<span class="math inline">\(B=\{x,y,z\}\)</span></p><p><span class="math inline">\(R_1\)</span> is a relation such that<span class="math inline">\(R_1=\{(1,x),(1,y),(2,z)\}\subseteq A\timesB\)</span></p><p><span class="math inline">\(R_1[1]=\{x,y\}\)</span>, <spanclass="math inline">\(R_1[2]=\{z\}\)</span></p></li><li><p>For relation <spanclass="math inline">\(R_&lt;=\{(x,y)|x&lt;y\}\subseteq R^2\)</span></p><p>so <span class="math inline">\(R_&lt;[x]=\{y&gt;x|y\inR\}=(x,\infty)\)</span></p><p>For relation <spanclass="math inline">\(R_{\leq}=\{(x,y)|x&lt;y\}\subseteqR^2\)</span></p><p>so <span class="math inline">\(R_{\leq}[x]=\{y&gt;x|y\inR\}=[x,\infty)\)</span></p></li></ul><h5 id="relation-properties">Relation Properties</h5><p>A relation R on none empty set A is said to be: (<spanclass="math inline">\(A\times A\)</span>)</p><p><strong>Reflexive:</strong> if <spanclass="math inline">\(xRx\)</span> holds for all <spanclass="math inline">\(x\in A\)</span>---&gt; <spanclass="math inline">\((x,x)\in R, \forall x\in A\)</span></p><p><strong>Symmetric:</strong> if <spanclass="math inline">\(xRy\)</span> implies <spanclass="math inline">\(yRx\)</span>, for all <spanclass="math inline">\(x,y\in A\)</span> ---&gt; <spanclass="math inline">\((x,y)\in R\wedge (y,x)\in R\)</span></p><p><strong>Transitive:</strong> if <spanclass="math inline">\(xRy\)</span> and <spanclass="math inline">\(yRz\)</span>, then <spanclass="math inline">\(xRz\)</span>, for all <spanclass="math inline">\(x,y,z\in A\)</span> ---&gt; <spanclass="math inline">\((x,y)\in R\wedge(y,z)\in R\to(x,z)\inR\)</span></p><p><u>Example</u></p><ul><li><table><thead><tr class="header"><th></th><th><span class="math inline">\(\leq\)</span></th><th><span class="math inline">\(&lt;\)</span></th></tr></thead><tbody><tr class="odd"><td>Reflexive</td><td>Yes. Since <span class="math inline">\(x\leq x\)</span></td><td>No</td></tr><tr class="even"><td>Symmetric</td><td>No</td><td>No</td></tr><tr class="odd"><td>Transitive</td><td>Yes</td><td>Yes</td></tr></tbody></table></li><li><p>Set <span class="math inline">\(B=\{x,y,z\}\)</span>. Let E bethe relation defined on B by <spanclass="math inline">\(E=\{(x,x),(y,y),(z,z),(x,y),(y,z)\}\)</span>, thenthe relation E is:</p><p>Reflexive?</p><p>Since {x,x},{y,y},{z,z}<span class="math inline">\(\in E\)</span>,Yes</p><p>Symmetric?</p><p>We have {x,y},{y,z}<span class="math inline">\(\in E\)</span>, but wedon't have {y,x}{z,y}<span class="math inline">\(\in E\)</span>. Thus,NO.</p><p>Transitive?</p><p>We have {x,y},{y,z}<span class="math inline">\(\in E\)</span>, but wedon't have {x,z}<span class="math inline">\(\in E\)</span>. Thus,No.</p></li></ul><h5 id="equivalence">Equivalence</h5><p>A relation is call <strong>equivalence</strong> relation if it isreflexive, symmetric, and transitive.</p><p><u>Example</u></p><p>Suppose X and Y are sets and that <span class="math inline">\(f:X\toY\)</span> is a function. Let us define a relation ~ on X by <spanclass="math inline">\(x_1\sim x_2\)</span> if and only if <spanclass="math inline">\(f(x_1)=f(x_2)\)</span>. Show that ~ is anequivalence relation.</p><blockquote><p>Solution:</p><p>Reflexive: Since <span class="math inline">\(f(x)=f(x)\)</span> forevery <span class="math inline">\(x\in X\)</span>, then we have <spanclass="math inline">\(x\sim x\)</span></p><p>Symmetric: If <span class="math inline">\(x_1 \sim x_2\)</span>, then<span class="math inline">\(f(x_1)=f(x_2)\)</span>. But then <spanclass="math inline">\(f(x_2)=f(x_1)\)</span>, hence <spanclass="math inline">\(x_2\sim x_1\)</span></p><p>Transitive: If <span class="math inline">\(x_1\sim x_2\)</span> and<span class="math inline">\(x_2\sim x_3\)</span>, then <spanclass="math inline">\(f(x_1)=f(x_2)\)</span> and <spanclass="math inline">\(f(x_2)=f(x_3)\)</span>. But then <spanclass="math inline">\(f(x_1)=f(x_3)\)</span>, hence <spanclass="math inline">\(x_1\sim x_3\)</span>.</p></blockquote><h5 id="equivalence-class">Equivalence Class</h5><p>The relation classes of set A with respect to the equivalencerelation ~ are called **equivalence classes*</p><blockquote><p>Theorem:</p><p>Let A be a non-empty set, and let ~ be an equivalence relation onA</p><ul><li>Let <span class="math inline">\(x,y\in A\)</span>. If <spanclass="math inline">\(x\sim y\)</span>, then <spanclass="math inline">\([x]=[y].\)</span> If <spanclass="math inline">\(x\not\sim y\)</span>, then <spanclass="math inline">\([x]\cap[y]=\empty\)</span></li><li><span class="math inline">\(\bigcup_{x]\in A}=A\)</span></li><li><span class="math inline">\([x]=[y]\)</span> if an only if <spanclass="math inline">\(x\not\sim y\)</span></li></ul></blockquote><h5 id="quotient-set">Quotient Set</h5><p>Let A be a non-empty set, and let ~ be an equivalence relation on A.The <strong>quotient set</strong> is <spanclass="math inline">\(A/\sim=\{[x]|x\in A\}\)</span></p><p><u>Example</u></p><p>Let P be the set of all people, and let be the relation on P definedby ùë•~ ùë¶ if and only if ùë• and ùë¶ are the same age (in years). If person ùë•is 19 years old, then the equivalence class of ùë• is the set of all19-year-olds. Each element of the quotient set P/~ is itself a set,where there is one such set consisting of all 1- yearolds, anotherconsisting of all 2-year-olds, and so on. Although there are billions ofpeople in ùëÉùëÉ, there are fewer than 125 elements in P/~ ,because nocurrently living person has reached the age of 125.</p><blockquote><p>Remark:</p><p>The quotient set is in fact a partition of A</p></blockquote><h5 id="partition">Partition</h5><p>Let A be a non-empty set. A <strong>partition</strong> of A is afamily <span class="math inline">\(D\)</span> of non-empty subsets of Asuch that:</p><ul><li>If <span class="math inline">\(P,Q\in D\)</span> and <spanclass="math inline">\(P‚â† Q\)</span>, then <spanclass="math inline">\(P\cap Q=\empty\)</span></li><li><span class="math inline">\(\bigcup_{P\in D}=A\)</span></li></ul><p><u>Example</u></p><ul><li>Let <span class="math inline">\(C=\{[n,n+1)\}_{n\in Z}\)</span>.Then C is a partition of R.</li></ul><h4 id="function">1.6 Function</h4><h5 id="definition-1">Definition</h5><p>A <strong>function</strong> from X to Y denote <spanclass="math inline">\(f:X\to Y\)</span>, is a subset <spanclass="math inline">\(F\subseteq X\times Y\)</span> such that for<strong>each</strong> <span class="math inline">\(x\in X\)</span>, thereis <strong>one and only one pair</strong> in F of the form <spanclass="math inline">\((x,y)\)</span>.</p><blockquote><p>Remark:</p><ul><li><strong>Domain:</strong> X</li><li><strong>Codomain:</strong> Y</li><li><strong>Range:</strong> <span class="math inline">\(\{f(x)\in Y|x\inX\}\)</span></li><li>Two function are <strong>equal</strong> if they have the samedomain, range, and value for all elements of the domain.</li></ul></blockquote><h5id="injectivesurjectivebijective">Injective/Surjective/Bijective</h5><p>Let X and Y be sets, and let <span class="math inline">\(f:X\toY\)</span> be a function:</p><p><strong>Injection (One-to-one):</strong> If <spanclass="math inline">\(x_1‚â†x_2\)</span> implies <spanclass="math inline">\(f(x_1)‚â†f(x_2)\)</span>, for all <spanclass="math inline">\(x_1,x_2\in X\)</span>; equivalently, if <spanclass="math inline">\(f(x_1)=f(x_2)\)</span> Implies <spanclass="math inline">\(x_1=x_2\)</span> for all <spanclass="math inline">\(x_1,x_2\in X\)</span></p><p><strong>Surjection (Onto):</strong> If for every <spanclass="math inline">\(y\in Y\)</span>, there exist some <spanclass="math inline">\(x\in X\)</span> such that <spanclass="math inline">\(f(x)=y\)</span>; equivalently, the range equals Y,which is <span class="math inline">\(\{f(x)|x\in X\}=Y\)</span></p><p><strong>Bijective:</strong> If it is both injective andsurjective</p><p><u>Example</u></p><ul><li>Let <span class="math inline">\(k:[0,\infty)\to[0,\infty)\)</span>be defined by <span class="math inline">\(k(x)=x^2\)</span> for all<span class="math inline">\(x\in [0,\infty)\)</span> --&gt;Bijective</li><li>Let <span class="math inline">\(g:[0,\infty)\to\R\)</span> bedefined by <span class="math inline">\(g(x)=x^2\)</span> for all <spanclass="math inline">\(x\in [0,\infty)\)</span> --&gt; Injective</li><li>Let <span class="math inline">\(h:\R\to[0,\infty)\)</span> bedefined by <span class="math inline">\(h(x)=x^2\)</span> for all <spanclass="math inline">\(x\in[0,\infty)\)</span> --&gt; Surjective</li></ul><h5 id="composition">Composition</h5><p>Let A, B, C be sets, and let <span class="math inline">\(f:A\toB\)</span> and <span class="math inline">\(g:B\to C\)</span> befunctions. The <strong>composition</strong> of <spanclass="math inline">\(f\)</span> and <spanclass="math inline">\(g\)</span> is the function <spanclass="math inline">\((g\circ f):A\to C\)</span> defined by <spanclass="math display">\[(g\circ f)(x)=g(f(x))\]</span></p><blockquote><p>Remark: The <strong>codomain</strong> of the first function muchequal the <strong>domain </strong> of the second function, if thecomposition of two functions is defined.</p></blockquote><p><u>Example</u></p><p><span class="math inline">\(k:\R\to\R\)</span> is defined by <spanclass="math inline">\(k(x)=\sin x\)</span> for all <spanclass="math inline">\(x\in \R\)</span>.</p><p><span class="math inline">\(h:(0,\infty)\to \R\)</span> is defined by<span class="math inline">\(h(x)=ln x\)</span></p><p>Then <span class="math inline">\((k\circh)(x)=k(h(x))=sin(lnx)\)</span> is defined for all <spanclass="math inline">\(x\in(0,\infty)\)</span></p><p>However, <span class="math inline">\(h\circ k\)</span> cannot bedefined since <span class="math inline">\(ln(sinx)\)</span> is notdefined for all <span class="math inline">\(x\in\R\)</span></p><blockquote><p>Lemma: Let A, B, C and D be sets, and let <spanclass="math inline">\(f:A\to B\)</span> and <spanclass="math inline">\(g:B\to C\)</span> and <spanclass="math inline">\(h:C\to D\)</span> be functions:</p><ul><li><p><span class="math inline">\((h\circ g)\circ f=h\circ(g\circf)\)</span> (Association Law)</p></li><li><p><span class="math inline">\(f\circ 1_A= f\)</span> and <spanclass="math inline">\(1_B\circ f=f\)</span> (Identity Law)</p><p>Where <span class="math inline">\(1_A:A\to A\)</span> is the identityfunction defined by <span class="math inline">\(1_A(x)=x\)</span>, forall <span class="math inline">\(x\in A\)</span></p></li></ul><p>Proof:</p><p><span class="math inline">\(m(a)=(h\circ g)\circ f(a)=(h\circg)(f(a))=h(g(f(a)))\)</span></p><p><span class="math inline">\(n(a)=h\circ(g\circ f)(a)=h((g\circf)(a))=h(g(f(a)))\)</span></p><p>Lemma: Let A, B and C be sets, and let <spanclass="math inline">\(f:A\to B\)</span> and <spanclass="math inline">\(g:B\to C\)</span> be functions:</p><ul><li>If <span class="math inline">\(f\)</span> and <spanclass="math inline">\(g\)</span> are <strong>injective</strong>, then<span class="math inline">\(g\circ f\)</span> is<strong>injective</strong></li><li>If <span class="math inline">\(f\)</span> and <spanclass="math inline">\(g\)</span> are <strong>surjective</strong>, then<span class="math inline">\(g\circ f\)</span> is<strong>surjective</strong></li><li>If <span class="math inline">\(f\)</span> and <spanclass="math inline">\(g\)</span> are <strong>bijective</strong>, then<span class="math inline">\(g\circ f\)</span> is<strong>bijective</strong></li></ul><p>Proof:</p><p>We need to prove <span class="math inline">\(\forall x, y\inA\)</span>, if <span class="math inline">\((g\circ f)(x)=(g\circf)(y)\)</span>, then <span class="math inline">\(x=y\)</span></p><p>Given <span class="math inline">\((g\circ f)(x)=(g\circf)(y)\)</span>, since <span class="math inline">\(g\)</span> isinjective, then <span class="math inline">\(f(x)=f(y)\)</span></p><p>Given <span class="math inline">\(f(x)=f(y)\)</span>, sicne <spanclass="math inline">\(f\)</span> is injective, then <spanclass="math inline">\(x=y\)</span>.</p><p>We need to prove <span class="math inline">\(\forall c\in C\)</span>,there exist <span class="math inline">\(a\in A\)</span> such that <spanclass="math inline">\((g\circ f)(a)=c\)</span></p><p>Since <span class="math inline">\(g\)</span> is surjective, then<span class="math inline">\(\forall c\in C\)</span>, there is <spanclass="math inline">\(b\in B\)</span> such that <spanclass="math inline">\(g(b)=c\)</span></p><p>Since <span class="math inline">\(f\)</span> is surjective, then<span class="math inline">\(\forall b\in B\)</span>, there is <spanclass="math inline">\(a\in A\)</span> such that <spanclass="math inline">\(f(a)=b\)</span></p></blockquote><h5 id="inverse-function">Inverse Function</h5><p>A <strong>bijective</strong> function has a unique<strong>inverse</strong> function <spanclass="math inline">\(f^{-1}:Y\to X\)</span>, satisfying: <spanclass="math display">\[\forall x\in X, f^{-1}(f(x))=x \ and\ \forall y\in Y, f(f^{-1}(y))=y\]</span> Any one-to-one function <span class="math inline">\(f:X\toY\)</span> defines a bijection <span class="math inline">\(g:X\toR\)</span>, where R is the range of <spanclass="math inline">\(f\)</span> and <spanclass="math inline">\(g(x)=f(x),\forall x \in X\)</span></p><p><u>Example</u></p><p>Suppose we have <spanclass="math inline">\(f(x)=sinx,x\in(-\infty,\infty)\)</span>. For <spanclass="math inline">\(x\in[-\frac{\pi}{2},\frac{\pi}{2}]\)</span>, thefunction is bijective and hence it has inverse function.</p><h5 id="image">Image</h5><p>For a function <span class="math inline">\(f:A\to B\)</span> andsubset <span class="math inline">\(P\subseteq A\)</span> the<strong>image</strong> of P under <spanclass="math inline">\(f\)</span>, denoted <spanclass="math inline">\(f(P)\)</span> is <span class="math display">\[f(P)=\{f(p)|p\in P\}\subseteq B (codomain)\]</span> The <strong>range</strong> of <spanclass="math inline">\(f\)</span> is the set <spanclass="math inline">\(f(A)\)</span></p><p>Let <span class="math inline">\(Q\subseteq B\)</span>. The<strong>inverse image</strong> or <strong>preimage</strong> of Q under<span class="math inline">\(f\)</span>, denoted <spanclass="math inline">\(f^{-1}(Q)\)</span> Is the set defined by <spanclass="math display">\[f^{-1}(Q)=\{a\in A|f(a)\in Q\}\subseteq A (domain)\]</span><img src="Math 305 Advanced Linear Algebra/image-20211106001706118-7307712.png" alt="image-20211106001706118" style="zoom: 33%;" /></p><p><u>Example</u></p><pre><code class=" mermaid">graph TBsubgraph Aa1(1)a2(2)a3(3)enda1--&gt;b1a2--&gt;b1a3--&gt;b2subgraph Bb1(x)b2(y)b3(z)end</code></pre><p>Then the following would be:</p><p><spanclass="math inline">\(f(A)=\{f(1),f(2),f(3)\}=\{x,y\}\)</span></p><p><span class="math inline">\(f(\{1,3\})=\{x,y\}\)</span></p><p><span class="math inline">\(f^{-1}(\{x\})=\{1,2\}\)</span></p><p><span class="math inline">\(f^{-1}(B)=\{1,2,3\}\)</span></p><p><span class="math inline">\(f^{-1}(\{x,y\})=\{1,2,3\}\)</span></p><p><span class="math inline">\(f^{-1}(\{z\})=\empty\)</span></p><blockquote><p>Remark:</p><ul><li><p>In general, we have <span class="math display">\[f(f^{-1}(B))\subseteq B \ and\ f^{-1}(f(A))\supseteq A\]</span> <u>Example</u></p><pre><code class=" mermaid">graph TBsubgraph X123end1--&gt;a2--&gt;b3--&gt;csubgraph Yabcdeend</code></pre><p>We have <span class="math inline">\(B=\{a,b,c,d\}\)</span></p><p>thus <span class="math inline">\(f^{-1}(B)=\{1,2,3\}\)</span></p><p>then <spanclass="math inline">\(f(f^{-1}(B))=\{f(1),f(2),f(3)\}=\{a,b,c\}\subseteqB\)</span></p><pre><code class=" mermaid">graph TBsubgraph X123end1--&gt;a2--&gt;b3--&gt;bsubgraph Yabend</code></pre><p><span class="math inline">\(A=\{1,3\}\)</span></p><p><span class="math inline">\(f(A)=\{a,b\}\)</span></p><p><spanclass="math inline">\(f^{-1}(f(A))=f^{-1}(\{a,b\})=\{1,2,3\}\supseteqA\)</span></p></li><li><p><spanclass="math inline">\(f(\empty)=\empty,f^{-1}(\empty)=\empty\)</span></p></li><li><p>For a <strong>bijective</strong> function <spanclass="math inline">\(f:A\to B\)</span>, the preimage of a singlton set<span class="math inline">\(\{f(x)\}\in B\)</span> is a singlton set<span class="math inline">\(\{x\}\in A\)</span></p></li></ul><p>Theorem:</p><ul><li><p>Let <span class="math inline">\(f:A\to B,C\subseteq A,S\subseteqB\)</span>, then <span class="math inline">\(f(C)\subseteq S\)</span> ifan only if <span class="math inline">\(C\subseteq f^{-1}(S)\)</span></p><p>Proof:</p><p>If <span class="math inline">\(f(C)\subseteq S\)</span>,</p><p><span class="math inline">\(\forall x\in C\)</span>, then <spanclass="math inline">\(f(x)\in S\)</span></p><p>Thus <span class="math inline">\(x\in f^{-1}(S)\)</span> and <spanclass="math inline">\(C\subseteq f^{-1}(S)\)</span></p><p>If <span class="math inline">\(C\subseteq f^{-1}(S)\)</span></p><p><span class="math inline">\(\forall y\in f(C)\)</span>, then <spanclass="math inline">\(\exist x\in C\)</span> such that <spanclass="math inline">\(f(x)=y\)</span></p><p>Since <span class="math inline">\(C\subseteq f^{-1}(S)\)</span></p><p><span class="math inline">\(x\in f^{-1}(S),f(x)\in S,y\in S,f(C)\inS\)</span></p></li><li><p>If <span class="math inline">\(A_1,A_2\)</span> are two subset ofA, and <span class="math inline">\(A_1\subseteq A_2\)</span>, then <spanclass="math inline">\(f(A_1)\subseteq f(A_2)\)</span></p><p>Note that if <span class="math inline">\(f(A_1)\subseteqf(A_2)\not\implies A_1\subseteq A_2\)</span></p><p><img src="Math 305 Advanced Linear Algebra/image-20211106125044228-7307732.png" alt="image-20211106125044228" style="zoom:33%;" /></p></li><li><p><span class="math inline">\(f:A\to B\)</span>, if <spanclass="math inline">\(S,T\subseteq B\)</span> and <spanclass="math inline">\(S\subseteq T\)</span>, then <spanclass="math inline">\(f^{-1}(S)\subseteq f^{-1}(T)\)</span></p><p>Note that if <span class="math inline">\(f^{-1}(S)\subseteqf^{-1}(T)\not\implies S\subseteq T\)</span></p><p>Proof:</p><p><span class="math inline">\(\forall x\in f^{-1}(S)\implies f(x)\inS\subseteq T\)</span></p><p>thus <span class="math inline">\(f(x)\in T, x\inf^{-1}(T)\)</span></p><p>Thus <span class="math inline">\(f^{-1}(S)\subseteqf^{-1}(T)\)</span></p></li></ul><p>Theorem:</p><p>Let <span class="math inline">\(f:A\to B, C\subseteq A, D\subseteqB\)</span></p><ul><li><p><span class="math inline">\(x\in C\implies f(x)\inf(C)\)</span></p></li><li><p><span class="math inline">\(y\in f(C)\implies \exist x\in C \st.\ f(x)=y\)</span></p></li><li><p><span class="math inline">\(x\in f^{-1}(D)\Longleftrightarrowf(x)\in D, x\in A\)</span></p><p><img src="Math 305 Advanced Linear Algebra/image-20211108141545470.png" alt="image-20211108141545470" style="zoom: 25%;" /></p></li></ul><p>Theorem:</p><p>Let <span class="math inline">\(f:A\to B\)</span>, and let <spanclass="math inline">\(C\subseteq A, D\subseteq B\)</span>. Further, let<span class="math inline">\(C_1, C_2\subseteq A\)</span> and <spanclass="math inline">\(D_1,D_2\subseteq B\)</span>, then</p><ul><li><p><span class="math inline">\(C\subseteq f^{-1}(f(C))\)</span>--&gt; Not necessarily equal</p><p>The equality holds for all subsets C of A <strong>if and onlyif</strong> <span class="math inline">\(f\)</span> is<strong>injective</strong></p><p>Proof:</p><p>If <span class="math inline">\(f\)</span> Is injective, we need toshow <span class="math inline">\(f^{-1}(f(C))\subseteq C\)</span> and<span class="math inline">\(C\subseteq f^{-1}(f(C))\)</span></p><p><span class="math inline">\(\forall x \in C, f(x)\inf(C)\)</span></p><p>thus <span class="math inline">\(x\in f^{-1}(f(C))\)</span> then<span class="math inline">\(C\subseteq f^{-1}(f(C))\)</span></p><p>Also, <span class="math inline">\(\forall x\in f^{-1}(f(C))\)</span>,we have <span class="math inline">\(f(x)\in f(C)\)</span></p><p>since <span class="math inline">\(f\)</span> is injective, we have<span class="math inline">\(x\in C\)</span></p><p>Thus, <span class="math inline">\(f^{-1}f(C)\subseteq C\)</span></p><p>If <span class="math inline">\(f^{-1}(f(C))\subseteq C\)</span>, weneed to show <span class="math inline">\(f\)</span> is injective. Proveby contrapositive. We assume <span class="math inline">\(f\)</span> isnot injective</p><p>then, <span class="math inline">\(\exist x_1, x_2\in A\)</span> and<span class="math inline">\(x_1‚â†x_2\)</span> but <spanclass="math inline">\(f(x_1)=f(x_2)=a\)</span></p><p>then, let <span class="math inline">\(C=\{x_1\}\)</span>, we have<spanclass="math inline">\(f^{-1}(f(C))=f^{-1}(a)=\{x_1,x_2\}‚â†C\)</span></p></li><li><p><span class="math inline">\(f(f^{-1}(D))\subseteq D\)</span>--&gt; Not necessarily equal</p><p>The equality holds for all subsets D of B <strong>if and onlyif</strong> <span class="math inline">\(f\)</span> is<strong>surjective</strong></p></li><li><p><span class="math inline">\(f(C_1\cap C_2)\subseteq f(C_1)\capf(C_2)\)</span> --&gt; Not necessarily equal</p><p>The equality holds for all subsets <spanclass="math inline">\(C_1,C_2\)</span> of A <strong>if and onlyif</strong> <span class="math inline">\(f\)</span> is<strong>injective</strong></p></li><li><p><span class="math inline">\(f(C_1\cup C_2)=f(C_1)\cupf(C_2)\)</span></p><p>Proof:</p><p><span class="math inline">\(\Longrightarrow\)</span> <spanclass="math inline">\(\forall y\in f(C_1\cup C_2)\)</span>, we have<span class="math inline">\(\exist x\in C_1\cup C_2\)</span> such that<span class="math inline">\(f(x)=y\)</span></p><p>‚Äã thus, we have <span class="math inline">\(x\in C_1, f(x)= y\)</span>or <span class="math inline">\(x\in C_2, f(x)=y\)</span>, implies that<span class="math inline">\(y\in f(C_1)\)</span> or <spanclass="math inline">\(y\in f(C_2)\)</span></p><p>‚Äã so we have <span class="math inline">\(y\in f(C_1)\cupf(C_2)\)</span></p><p><span class="math inline">\(\Longleftarrow\)</span> <spanclass="math inline">\(\forall y\in f(C_1)\cup f(C_2)\)</span></p><p>‚Äã then we have <span class="math inline">\(y\in f(C_1)\)</span> or<span class="math inline">\(y\in f(C_2)\)</span>, implies that <spanclass="math inline">\(\exist x_1\in C_1\)</span> such that <spanclass="math inline">\(f(x_1)\in C\)</span> or <spanclass="math inline">\(\exist x_2\in C_2\)</span> such that <spanclass="math inline">\(f(x_2)=C\)</span></p><p>‚Äã thus, <span class="math inline">\(y\in f(C_1\cupC_2)\)</span></p></li><li><p><span class="math inline">\(f^{-1}(D_1\cap D_2)=f^{-1}(D_1)\capf^{-1}(D_2)\)</span></p></li><li><p><span class="math inline">\(f^{-1}(D_1\cup D_2)=f^{-1}(D_1)\cupf^{-1}(D_2)\)</span></p><p>Proof:</p><p>We have:</p><p><span class="math inline">\(D_1\subseteq D_1\cup D_2\)</span> and<span class="math inline">\(D_2\subseteq D_1\cup D_2\)</span>,impliesthat:</p><p><span class="math inline">\(f^{-1}(D_1)\subseteq f^{-1}(D_1\cupD_2)\)</span> and <span class="math inline">\(f^{-1}(D_2)\subseteqf^{-1}(D_1\cup D_2)\)</span></p><p>thus, <span class="math inline">\(f^{-1}(D_1)\cupf^{-1}(D_2)\subseteq f^{-1}(D_1\cup D_2)\)</span></p><p>At the same time,</p><p><span class="math inline">\(\forall x\in f^{-1}(D_1\cup D_2)\impliesf(x)\in D_1\cup D_2\)</span></p><p><span class="math inline">\(f(x)\in D_1\)</span> or <spanclass="math inline">\(f(x)\in D_2\)</span></p><p>then <span class="math inline">\(x\in f^{-1}(D_1)\)</span> or <spanclass="math inline">\(x\in f^{-1}(D_2)\)</span></p><p><span class="math inline">\(x\in f^{-1}(D_1)\cupf^{-1}(D_2)\)</span></p><p><span class="math inline">\(f^{-1}(D_1\cup D_2)\subseteqf^{-1}(D_1)\cup f^{-1}(D_2)\)</span></p></li></ul><p><u>Example</u></p><ul><li>Let the function <span class="math inline">\(f:\R\to \R\)</span> Bedefined by <span class="math inline">\(f(x)=x^2\)</span>. Let <spanclass="math inline">\(A=[1,2]\)</span> then <spanclass="math inline">\(B=f(A)=[1,4]\)</span>. And <spanclass="math inline">\(f^{-1}(B)=f^{-1}([1,4])=[-2,-1]\cup[1,2]\subseteqA\)</span></li><li>Let the function <span class="math inline">\(f:\R\to \R\)</span> bedefined by <span class="math inline">\(f(x)=x^2+1\)</span>. Let <spanclass="math inline">\(B=[0,2]\)</span> and notice that <spanclass="math inline">\(A=f^{-1}(B)=[-1,1]\)</span> Then <spanclass="math inline">\(f(A)=f([-1,1])=[1,2]\subseteq B\)</span></li></ul><p>Theorem:</p><p>Let <span class="math inline">\(f:X\to Y, A_i\subseteq X,\forall i\inI, B_i\subseteq Y\)</span> for all <span class="math inline">\(i\inI\)</span>, then,</p><ul><li><span class="math inline">\(f(\bigcup_{i\in I}A_i)=\bigcup_{i\inI}f(A_i)\)</span></li><li><span class="math inline">\(f(\bigcap_{i\in I}A_i)\subseteq\bigcap_{i\in I}f(A_i)\)</span></li><li><span class="math inline">\(f^{-1}(\bigcup_{i\inI}B_i)=\bigcup_{i\in I}f^{-1}(B_i)\)</span></li><li><span class="math inline">\(f^{-1}(\bigcap_{i\inI}B_i)=\bigcap_{i\in I}f^{-1}(B_i)\)</span></li></ul></blockquote><h2 id="metric-spaces-and-topology">Metric Spaces and Topology</h2><h3 id="metric-sapces">2.1 Metric Sapces</h3><p>A <strong>metric space</strong> (X,d) is a set X along a well-definedmetric d</p><h4 id="distance">Distance</h4><h5 id="definition-2">Definition</h5><p>A <strong>metric</strong> on a set <spanclass="math inline">\(X\)</span> is a function <spanclass="math inline">\(d:X\times X\to \R\)</span> satisfies the followingproperties:</p><ul><li><span class="math inline">\(d(x,y)\geq 0, \forall x, y\inX\)</span>; equality holds <strong>if and only if</strong> <spanclass="math inline">\(x=y\)</span></li><li>$d(x,y)=d(y,x),x, yX</li><li><span class="math inline">\(d(x,y)+d(y,z)\geq d(x,z),\forallx,y,z\in X\)</span></li></ul><p>Then <span class="math inline">\(d(x,y)\)</span> is called<strong>distance</strong> between points x and y.</p><p><u>Example</u></p><p>The set of real numbers equipped with the metric of absolute distance<span class="math inline">\(d(x,y)=|x-y|\)</span> defines the<strong>standard metric space</strong> of real numbers <spanclass="math inline">\(\R\)</span>.</p><h5 id="l2-distance-euclidean-distance">L2 Distance / EuclideanDistance</h5><p>Given <spanclass="math inline">\(x=(x_1,\dots,x_n),y=(y_1,\dots,y_n)\in\R^n\)</span>, note that here <span class="math inline">\(x\)</span> arecolumn vectors <span class="math display">\[d_2(x,y)=\sqrt{ \sum_{i=1}^{n}(x_i-y_i)^2}\]</span> Proof:</p><blockquote><p>Remark: Cauchy-Schwarz inequality</p><p>For column vectors <span class="math inline">\(\vecp=\left[\begin{matrix}x_1 \\ x_2 \\ .\\.\\x_n\end{matrix}\right],\vecq=\left[\begin{matrix}y_1 \\ y_2 \\.\\.\\y_n\end{matrix}\right]\)</span></p><p>we have <span class="math display">\[\vec{p} \cdot \vec{q} = |p|\cdot|q|\cdot cos\theta\\|\vec p\cdot \vec q|\leq |p||q|\\|\vec p\cdot \vec q|^2\leq |p|^2\cdot|q|^2\]</span></p></blockquote><ol type="1"><li><p><span class="math inline">\(d_2(\vec x,\vec y)\geq 0,d_2(\vecx,\vec y)=0\implies x_i=y_i\forall i=1,\dots,n\implies \vec x=\vecy\)</span></p></li><li><p><span class="math inline">\(d_2(\vec x,\vec y)=d_2(\vec y,\vecx)\)</span></p></li><li><p>Prove <span class="math inline">\(d_2(\vec x,\vec y)\leq d_2(\vecx,\vec z)+d_2(\vec z,\vec y)\)</span></p><p>let <span class="math inline">\(\vec p=\vec x - \vec z,\vec q=\vecz-\vec y,\vec p+\vec q=\vec x-\vec y\)</span></p><p><img src="Math 305 Advanced Linear Algebra/image-20211110220717113.png" alt="image-20211110220717113" style="zoom:25%;" /></p><p><span class="math display">\[d_2(\vec x,\vec y)^2=|\vec x-\vec y|^2=|\vec p+\vec q|^2\\=|\vec p|^2+2\vec p\cdot\vec q+|\vec q|^2\\\leq |\vec p|^2 +2|\vec p||\vec q|+|\vec q|^2\\by\ Cauchy\_Schwartz\ Inequality\\=(|\vec p|+|\vec q|)^2=(d_2(\vec x,\vec z)+d_2(\vec y +\vec z))^2\\\implies d_2(\vec x,\vec y)\leq d_2(\vec x,\vec z)+d_2(\vec z,\vec y)\]</span></p></li></ol><h5 id="l1-distance-manhattan-distance">L1 Distance / ManhattanDistance</h5><p>Given <spanclass="math inline">\(x=(x_1,\dots,x_n),y=(y_1,\dots,y_n)\in\R^n\)</span>, note that here <span class="math inline">\(x\)</span> arecolumn vectors <span class="math display">\[d_1(x,y)=\sum_{i=1,\cdot n}|x_i-y_i|\]</span></p><h5 id="l-infinity-chebyshev-distance">L Infinity / ChebyshevDistance</h5><p>Given <spanclass="math inline">\(x=(x_1,\dots,x_n),y=(y_1,\dots,y_n)\in\R^n\)</span>, note that here <span class="math inline">\(x\)</span> arecolumn vectors <span class="math display">\[d_{\infty}(x,y)=max_{i=1,\cdot n}\{|x_i-y_i|\}\]</span></p><h5 id="l0-distance-discrete-distance">L0 Distance / DiscreteDistance</h5><p>Let <span class="math inline">\(Z\)</span> be any non-empty setwhatsoever, and <span class="math display">\[d(x,y)=\begin{cases}1&amp; x‚â†y\\0&amp; x=y\end{cases}\]</span> <span class="math inline">\(d(x,y)\)</span> is called<strong>discrete distance</strong> on <spanclass="math inline">\(Z\)</span></p><p>Proof:</p><ol type="1"><li><p><span class="math inline">\(d(x,y)=0\Longleftrightarrowx=y\)</span></p></li><li><p><span class="math inline">\(d(x,y)=d(y,x)\)</span></p></li><li><p>Prove <span class="math inline">\(d(x,y)\leqd(x,z)+d(z,y)\)</span></p><ol type="a"><li>When <span class="math inline">\(x=y=z\)</span></li></ol><p>‚Äã <span class="math inline">\(0\leq 0+ 0\)</span></p><ol start="2" type="a"><li>When <span class="math inline">\(x‚â†y,z=x \ or\ z=y\)</span></li></ol><p>‚Äã <span class="math inline">\(1\leq 0+1\)</span></p><ol start="3" type="a"><li>When <span class="math inline">\(x‚â†y‚â†z\)</span></li></ol><p>‚Äã <span class="math inline">\(1\leq 1+ 1\)</span></p><p>Thus, True.</p></li></ol><h5 id="jaccard-distance">Jaccard Distance</h5><p><span class="math inline">\(d_J(A,B)=1-\frac{|A\cap B|}{|A\cupB|}=\frac{|A\cup B|-|A\cap B|}{|A\cup B|}=\frac{|A\bigtriangleupB|}{|A\cup B|}\)</span></p><ol type="1"><li><p><span class="math inline">\(d_J(A,B)\geq 0,d(A,B)=0\ iff\A=B\)</span></p></li><li><p><span class="math inline">\(d_J(A,B)=d_J(B,A)\)</span></p></li><li><p>Prove <span class="math inline">\(d_J(A,B)\leqd_J(A,C)+d_J(B,C)\)</span></p><p>When A=B=C --&gt; True</p><p>When <span class="math inline">\(C\subseteq A, C\subseteqB\)</span></p><p><span class="math inline">\(d_J(C,A)+d_J(C,B)=\frac{|C\cup A|-|C\capA|}{|C\cup A|}+\frac{|C\cup B|-|C\cap B|}{|C\cupB|}=\frac{|A-C|}{|A|}+\frac{|B-C|}{|B|}\geq \frac{|A-C|+|B-C|}{|A\cupB|}\geq\frac{|A\bigtriangleup B|}{||A\cup B}=d_J(A,B)\)</span></p><p>When in other cases, True.</p></li></ol><h5 id="cosine-distance-not-distance">Cosine Distance (Notdistance)</h5><p><span class="math inline">\(d_{cos}(a,b)=1-\frac{\vec a\cdot \vecb}{||\vec a||||\vec b||}=1-\frac{\sum a_i b_i}{||\vec a||||\vecb||}\)</span></p><ol type="1"><li><span class="math inline">\(d_{cos}(\vec a,\vec b)\geq0,d_{cos}(\vec a,\vec b)=0\Longleftrightarrow cos0=1\)</span> hold whenthe direction is the same, thus is not a "if and only if" --&gt;False</li><li><span class="math inline">\(d_{cos}(\vec a,\vec b)=d_{cos}(\vecb,\vec a)\)</span></li><li>Triangular Inequality --&gt; False by conterexample</li></ol><h5 id="example-of-distances">Example of Distances</h5><ul><li><p>Given <spanclass="math inline">\(x=(0,0)^T,y=(2,1)^T\)</span></p><p>Then</p><p><span class="math inline">\(d_2(x,y)=\sqrt{2^2+1^2}=\sqrt5\)</span></p><p><span class="math inline">\(d_1(x,y)=|2|+|1|=3\)</span></p><p><spanclass="math inline">\(d_\infty(x,y)=max(2,1)=2\)</span></p></li><li><p>An interval [a,b], let <spanclass="math inline">\(C[a,b]\)</span> be the set of all continuousfunctions on [a,b]. Show that, <span class="math display">\[\rho(x(t),y(t))=max_{a\leq t\leq b}|x(t)-y(t)|\]</span> is a distance between two functions <spanclass="math inline">\(x(t), y(t)\)</span>.</p><blockquote><p>Sol</p><ol type="1"><li><p><span class="math inline">\(\rho(x(t),y(t))\geq 0\)</span> if<span class="math inline">\(\rho(x(t),y(t))=max_{a\leq t\leqb}|x(t)-y(t)|=0\implies \forall t x(t)=y(t)\)</span></p></li><li><p><span class="math inline">\(\rho(x(t),y(t))=\rho(y(t),x(t))\)</span></p></li><li><p>Note that <span class="math inline">\(|a+b|\leq|a|+|b|\)</span><span class="math display">\[\rho(x(t),y(t))=max_{a\leq t\leq b}|x(t)-y(t)|\\=max_{a\leq t\leqb}|x(t)-z(t)+z(t)-y(t)|\\ \leq \max_{a\leq t\leqb}(|x(t)-z(t)|+|z(t)-y(t)|)\\=\rho(x,z)+\rho(z,y)\]</span></p></li></ol></blockquote></li></ul><h2 id="linear-algebra">Linear Algebra</h2><h3 id="fields">3.1 Fields</h3><h4 id="abelian-group">Abelian Group</h4><p>Consider a set G of <strong>objects</strong> and <strong>oneoperation <span class="math inline">\(\cdot\)</span></strong> on theelements of G, the set and operation <spanclass="math inline">\((G,\cdot)\)</span> is called <strong>Abelian group/ communtative group</strong> if:</p><p><strong>Closure:</strong> <span class="math inline">\(\forall a,b\inG\)</span>, then <span class="math inline">\(a\cdot b\in G\)</span></p><p><strong>Associativity:</strong> <span class="math inline">\(\foralla,b,c\in G\)</span>, then <span class="math inline">\((a\cdot b)\cdotc=a\cdot(b\cdot c)\)</span></p><p><strong>Identity element:</strong> <span class="math inline">\(\existe\in G\)</span> such that <span class="math inline">\(a\cdote=a\)</span> for <span class="math inline">\(\forall a\in G\)</span></p><p><strong>Inverse element:</strong> <span class="math inline">\(\foralla\in G,\exist b\in G\)</span> such that <spanclass="math inline">\(a\cdot b=e\)</span></p><p><strong>Commutativity:</strong> <span class="math inline">\(\foralla,b\in G\)</span> then <span class="math inline">\(a\cdot b=b\cdota\)</span></p><p><u>Example</u></p><ul><li>The integers and the operation addition "+", denote (Z, +), while<span class="math inline">\((Z,\times)\)</span> is not defined sincethere is no inverse element in <spanclass="math inline">\(\N\)</span></li></ul><h4 id="field">Field</h4><p>Consider a set F of objects and <strong>two</strong> operations onthe elements of F, addition <span class="math inline">\(+\)</span> andmultiplication <span class="math inline">\(\cdot\)</span>. The set withtwo operation <span class="math inline">\((F,+,\cdot)\)</span> is a<strong>field</strong> if:</p><p><strong>Closure:</strong> <span class="math inline">\(\forall a,b\inF\)</span> then <span class="math inline">\(a+b\in F,a\cdot b\inF\)</span></p><p><strong>Associativity:</strong> <span class="math inline">\(\foralla,b,c\in F\)</span> then <spanclass="math inline">\((a+b)+c=a+(b+c),(a\cdot b)\cdot c=a\cdot (b\cdotc)\)</span></p><p><strong>Identity element:</strong> <span class="math inline">\(\exist0,1\in F\)</span> such that <span class="math inline">\(a+0=a,a\cdot1=a\)</span> for <span class="math inline">\(\forall a\in F\)</span></p><p><strong>Additive Inverse:</strong> <spanclass="math inline">\(\forall a\in F\)</span>, exist a unique element<span class="math inline">\(-a\in F\)</span> such that <spanclass="math inline">\(a+(-a)=0\)</span></p><p><strong>Multiplicative Inverse:</strong> <spanclass="math inline">\(\forall a‚â†0\in F,\)</span> exist a unique element<span class="math inline">\(a^{-1}\in F\)</span> such that <spanclass="math inline">\(a\cdot a^{-1}=1\)</span></p><p><strong>Distribution of multiplication over addition:</strong> <spanclass="math inline">\(\forall a,b,c\in F\)</span> such that <spanclass="math inline">\(a\cdot(b+c)=a\cdot b+a\cdot c\)</span></p><blockquote><p>Remark</p><p>If there is no inverse element for multiplication, <spanclass="math inline">\((F,+,\cdot)\)</span> is called <strong>commutativering</strong></p></blockquote><h3 id="vector-space">3.2 Vector Space</h3><h4 id="vector-space-1"><a href="#media">Vector Space</a></h4><p>A <strong>vector space</strong> (essentially a set) consists of thefollowing:</p><ol type="1"><li>A field <span class="math inline">\(F\)</span> of<strong>scalars</strong></li><li>A set <span class="math inline">\(V\)</span> of<strong>obejects</strong></li><li>A binary <strong>operation</strong> called <strong>vectoraddition</strong>, which maps any pair of vectors <spanclass="math inline">\(\vec v,\vec w\in V\)</span> a vector <spanclass="math inline">\(\vec v+\vec w\in V\)</span> such that:<ol type="1"><li><strong>Commutative:</strong> <spanclass="math inline">\(v+w=w+v\)</span></li><li><strong>Associative:</strong> <spanclass="math inline">\(u+(v+w)=(u+v)+w\)</span></li><li>There is a <strong>unique</strong> vector such that <spanclass="math inline">\(v+\vec 0=v,\forall v\in V\)</span></li><li>To each <span class="math inline">\(v\in V\)</span>, there is a<strong>unique</strong> vector <span class="math inline">\(-v\inV\)</span>, such that <span class="math inline">\(v+(-v)=\vec0\)</span></li></ol></li><li>An <strong>operation</strong> called <strong>scalarmultiplication</strong>, which associates with each <spanclass="math inline">\(s\in F\)</span> and <spanclass="math inline">\(\vec v\in V\)</span> a vector <spanclass="math inline">\(s\vec v\in V\)</span> such that:<ol type="1"><li><span class="math inline">\(1v=v,\forall v\in V\)</span></li><li><span class="math inline">\((s_1s_2)\vec v=s_1(s_2\vecv)\)</span></li><li><span class="math inline">\(s(\vec v+\vec w)=s\vec v+s\vecw\)</span></li><li><span class="math inline">\((s_1+s_2)\vec v=s_1\vec v+s_2\vecv\)</span></li></ol></li></ol><p><u>Example</u></p><p>Standard vector space of functions:</p><p>Let <span class="math inline">\(X\)</span> be a non-empty set and<span class="math inline">\(Y\)</span> be a vector space over <spanclass="math inline">\(F\)</span>. Consider the set <spanclass="math inline">\(V\)</span> of all function mapping from <spanclass="math inline">\(X\)</span> to <spanclass="math inline">\(Y\)</span>.</p><p>The vector addition of two functions <spanclass="math inline">\(f,g\in V\)</span> is the function from <spanclass="math inline">\(X\)</span> into <spanclass="math inline">\(Y\)</span> denoted by: <spanclass="math display">\[(f+g)(x)=f(x)+g(x)\]</span> where the RHS uses vector addition from <spanclass="math inline">\(Y\)</span>.</p><p>The scalar product of <span class="math inline">\(s\in F\)</span> andthe function <span class="math inline">\(f\in V\)</span> is the function<span class="math inline">\(sf\)</span> denoted by : <spanclass="math display">\[(sf)(x)=sf(x),\forall x\in X\]</span> where the RHS uses scalar mulitiplication from <spanclass="math inline">\(Y\)</span>.</p><p>Check whether is a vector space.</p><ul><li><span class="math inline">\((f+0)(x)=f(x)+0(x)=f(x)\)</span>, where<span class="math inline">\(o(x)\)</span> is the zero function</li><li><span class="math inline">\(f(x)+(-f(x))=0(x)\)</span></li></ul><h4 id="subspace"><a href="#media">Subspace</a></h4><h5 id="definition-3">Definition</h5><p>Let <span class="math inline">\(V\)</span> be a vector space over<span class="math inline">\(F\)</span>. A <strong>subspace</strong>(subset of vector space) of <span class="math inline">\(V\)</span> is asubset <span class="math inline">\(W\subsetneq V\)</span> which is<strong>itself a vector space over F</strong>.</p><blockquote><p>Theorem:</p><p>A non-empty subset <span class="math inline">\(W\subsetneq V\)</span>is a subset of <span class="math inline">\(V\)</span> if <spanclass="math inline">\(W\)</span> satisfies the following conditions:</p><ul><li><span class="math inline">\(\vec 0\in W\)</span></li><li><span class="math inline">\(\forall \vec u,\vec v\in W,\vec u+\vecv\in W\)</span></li><li><span class="math inline">\(\forall s\in F,\vec u\in W,s\vec u\inW\)</span></li></ul></blockquote><p><u>Example</u></p><ul><li><p>Let <span class="math inline">\(A\)</span> be an <spanclass="math inline">\(m\times n\)</span> matrix over <spanclass="math inline">\(F\)</span>. The set of all <spanclass="math inline">\(n\times 1\)</span> column vectors <spanclass="math inline">\(V\)</span> such that <spanclass="math inline">\(\vec v\in V\)</span> and <spanclass="math inline">\(A\vec v=0\)</span> is a subspace of <spanclass="math inline">\(F^{n\times 1}\)</span></p><blockquote><p>Prove:</p><p><span class="math inline">\(W=\{\vec v|A\vec v=\vec 0\}\)</span></p><ol type="1"><li><span class="math inline">\(A\vec 0=0\)</span> True</li><li>when <span class="math inline">\(A(\vec v_1+\vec v_2)=A\vecv_1+A\vec v_2=\vec 0\in W\)</span> True</li><li><span class="math inline">\(A(x\vec v)=xA\vec v=\vec 0\in W\)</span>True</li></ol></blockquote></li><li><p>The subspace of <span class="math inline">\(\R^2\)</span> areprecisely <span class="math inline">\(\{\vec 0\},\R^2\)</span> and alllines in <span class="math inline">\(\R^2\)</span> through theorigin.</p></li><li><p>Prove that: <span class="math inline">\(b\inF,V=\{(x_1,x_2,x_3,x4)^T\in F^4|x_4=5x_3+b\}\)</span> is a subspace of<span class="math inline">\(F^4\)</span> if and onle of <spanclass="math inline">\(b=0\)</span></p><blockquote><p>Sol:</p><p>If <span class="math inline">\(b=0\)</span>, then <spanclass="math inline">\(b\in F,V=\{(x_1,x_2,x_3,x4)^T\inF^4|x_4=5x_3\}\)</span></p><ol type="1"><li><span class="math inline">\((0,0,0,0)^T\in V\)</span></li><li><span class="math inline">\(\vec v_1=[x_1,x_2,x_3,x_4]^T,\vecv_2=[y_1,y_2,y_3,y_4]^2,\vec v_1+\vecv_2=[x_1+y_1,x_2+y_2,x_3+y_3,x_4+y_4]\)</span> and we have <spanclass="math inline">\(x_4=5x_3,y_4=5y_3\impliesx_4+y_4=5(x_3+y_3)\)</span></li><li><span class="math inline">\(\lambda v_1,x_4=5x_3,\lambda x_4=\lambda5x_3\)</span></li></ol><p>If <span class="math inline">\(V\)</span> is subspace,</p><p>there should be <span class="math inline">\(\vec 0\in V\)</span> suchthat <span class="math inline">\(0=5\cdot 0+b,b=0\)</span></p></blockquote></li></ul><blockquote><p>Remark:</p><ul><li><span class="math inline">\(\{\vec 0\}\)</span> is the<strong>smallest subspace</strong> of <spanclass="math inline">\(V\)</span></li><li><span class="math inline">\(V\)</span> itself is the <strong>largestsubspace</strong> of <span class="math inline">\(V\)</span></li><li>The empty set is <strong>NOT</strong> a subspace of <spanclass="math inline">\(V\)</span> since a vector space must contain<strong>at least one</strong> element.</li></ul></blockquote><h5 id="sum-of-subspaces">Sum Of Subspaces</h5><p>Suppose <span class="math inline">\(U_1,U_2,U_3,...,U_m\)</span> arethe subspaces of <span class="math inline">\(V\)</span>. <strong>The sumof subspaces</strong> is the set of all possible sums of elements of<span class="math inline">\(U_1,..,U_m\)</span>: <spanclass="math display">\[U_1+\cdots+U_m=\{u_1+\cdots+u_m|u_1\in U_1,\cdots u_m\in U_m\}\]</span> <u>Example</u></p><ul><li><p><span class="math inline">\(U=\{(x,0,0)^T\in F^3\},W=\{(0,y,0)^T\in F^3|y\in F^3\}\)</span>, then <spanclass="math inline">\(U+F=\{(x,y,0)^T|x,y\in F^3\}\)</span></p></li><li><p>For <span class="math inline">\(U=\{(x,y,y)\in F^3,x,y\in F\},W=\{(x,x,y)\in F^3,x,y\in F\}\)</span>, prove that <spanclass="math inline">\(U+W=\{(x,y,z)\in F^3,x,y,z\in F\}\)</span> is asum of subspace.</p><p>Sol:</p><p>We have the following decomposition,</p><p><span class="math inline">\((x,y,z)=(0,0,z-y)\in W+(x,y,y)\inU\)</span></p><p>and <span class="math inline">\((1,1,1)=(1,1,1)\in W + (0,0,0)\inU\)</span></p></li></ul><blockquote><p>Remark: Sum of subspaces in the theory of vector spaces are analogousto unions of subsets in set theory.</p></blockquote><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(U_1,U_2,...,U_m\)</span> are thesubspaces of <span class="math inline">\(V\)</span>. Then <spanclass="math inline">\(U_1+\cdots+U_m\)</span> is the<strong>smallest</strong> subspaces of <spanclass="math inline">\(V\)</span> containing <spanclass="math inline">\(U_1,...,U_m\)</span></p><p>Proof:</p><p><span class="math inline">\(0\in U_1+U_2+\cdots+U_m\)</span> and<span class="math inline">\(U_1+U_2+\cdots+U_m\)</span> is closed underaddition and multipliaction, thus it is a subspace.</p><p>At the same time,</p><p>we have <span class="math inline">\(U_1,U_2,...U_m\subseteqU_1+U_2+\cdots+U_m\)</span>.</p><p>And conversely, every subspace of <spanclass="math inline">\(V\)</span> containing <spanclass="math inline">\(U_1,U_2...,U_m\)</span> contains <spanclass="math inline">\(U_1+U_2+\cdots +U_m\)</span> because subspaces areclosed for sum. Thus, <span class="math inline">\(U_1+U_2+\cdots+U_m\)</span> is the smallest subspace.</p></blockquote><h5 id="direct-sum"><a href="#media">Direct Sum</a></h5><p>Suppose <span class="math inline">\(U_1,U_2,...,U_m\)</span> are thesubspaces of <span class="math inline">\(V\)</span>. The sum <spanclass="math inline">\(U_1+\cdots+U_m\)</span> is called a <strong>directsum</strong> denoted by <span class="math inline">\(U_1\oplus\cdots\oplus U_m\)</span> if each element <span class="math inline">\(u\inU_1+\cdots +U_m\)</span> can be written <strong>in only way (decomposeduniquely)</strong> as <spanclass="math inline">\(u=u_1+\cdots+u_m\)</span> where <spanclass="math inline">\(u_j\in U_j\)</span></p><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(U_1,U_2,...,U_m\)</span> aresubspaces of <span class="math inline">\(V\)</span>. The sum <spanclass="math inline">\(U_1+\cdots+U_m\)</span> is a <strong>directsum</strong> <strong>if and only if</strong> the only way to write <spanclass="math inline">\(\vec 0\)</span> as sum <spanclass="math inline">\(u_1+\cdots+u_m\)</span> with <spanclass="math inline">\(u_j\in U_j\)</span>, is by taking each <spanclass="math inline">\(u_j\)</span> equal to <spanclass="math inline">\(\vec0\)</span></p><p><span class="math inline">\(\implies\)</span> Obversely by thedefinition of direct sum.</p><p><span class="math inline">\(\Longleftarrow\)</span> if <spanclass="math inline">\(\vec 0\in u_1+\cdots+u_m\)</span> could berepresented in two ways.</p><p>‚Äã Then <span class="math inline">\(\vec0=u_1+\cdots+u_m=u_1&#39;+\cdots+u_m&#39;,u_i,u_i&#39;\inU_i\)</span></p><p>‚Äã Then <spanclass="math inline">\((u_1-u_1&#39;)+\cdots+(u_m-u_m&#39;)=\vec0\)</span></p><p>‚Äã Since <span class="math inline">\(\vec 0\)</span> could only bewritten as <span class="math inline">\(0+0+0...+0\)</span></p><p>‚Äã We have <span class="math inline">\(u_i=u_i&#39;\)</span></p></blockquote><p><u>Example</u></p><ul><li><p>Let <span class="math inline">\(U=\{(x,y,0)\in F^3:x,y\inF\},W=\{(0,0,z)\in F^3:x,y\in F\}\)</span>, then show that <spanclass="math inline">\(F^3=U\oplus W\)</span></p><blockquote><p>Sol:</p><ol type="1"><li><p>Show is a subspace</p><p><span class="math inline">\(\forall (x,y,z)\in F^3,(x,y,z)=(x,y,0)\inW+(0,0,z)\in W\)</span></p></li><li><p>Show ii has unique decomposition</p><p>If <spanclass="math inline">\((x,y,z)=(x_1,y_1,0)+(0,0,z_1)=(x_2,y_2,0)+(0,0,z_2)\)</span></p><p>then <spanclass="math inline">\((x_1-x_2,y_1-y_2,0)=(0,0,z_2-z_1)\)</span></p><p>then <spanclass="math inline">\(x_1-x_2=0,y_1-y_2=0,z_2-z_1=0\)</span></p></li></ol></blockquote></li><li><p>Let <span class="math inline">\(U_1=\{(x,y,0)\in F^3:x,y\inF\}\\U_2=\{(0,0,z)\in F^3:z\in F\}\\U_3=\{(0,y,y)\in F^3:y\inF\}\)</span>, then is <span class="math inline">\(U_1+U_2+U_3\)</span> adirect sum?</p></li></ul><blockquote><p>Sol:</p><p><spanclass="math inline">\((x,y,z)=(x,y,0)+(0,0,z)+(0,0,0)\\(0,0,0)=(0,1,0)+(0,0,1)+(0,-1,-1)=(0,0,0)+(0,0,0)+(0,0,0)\)</span></p><p>Thus, NO</p></blockquote><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(U\)</span> and W are subspaces of<span class="math inline">\(V\)</span>. Then <spanclass="math inline">\(U+W\)</span> is a direct sum <strong>if and onlyif</strong> <span class="math inline">\(U\cap W=0\)</span>.</p><p>Note that the result above deals only wiht the case of <strong>twosubspaces</strong></p><p>Proof:</p><p>If <span class="math inline">\(U+W\)</span> is a direct sum, then<span class="math inline">\(\forall v\in U\cap W,-v\in U\capW\)</span>,</p><p><span class="math inline">\(\vec 0=v+(-v),v\in U,(-v)\inW\)</span></p><p>then by the unique decomposition, we have <spanclass="math inline">\(v=0\implies U\cap W=\{\vec 0\}\)</span></p><p>If <span class="math inline">\(U\cap W=\{\vec 0\}\)</span></p><p>suppose <span class="math inline">\(\vec 0=u+w\)</span>, with <spanclass="math inline">\(u\in U,w\in W\)</span>, we have <spanclass="math inline">\(u=-w\)</span></p><p>Then <span class="math inline">\(w=-u\in U,u=-w\in W\)</span>, thus<span class="math inline">\(u,w\in U\cap W\)</span></p><p>thus <span class="math inline">\(u=w=0\)</span></p><p><span class="math inline">\(U+W\)</span> is a direct sum.</p></blockquote><p><u>Example</u></p><p>we have <span class="math inline">\(U_1=\{(x,y,0)\in F^3|x,y\inF\}\\U_2=\{(0,0,z)\in F^3|z\in F\}\\U_3=\{(0,y,y)\in F^3|y\inF\}\)</span></p><p>then <span class="math inline">\(U_1\cap U_2 \cap U_3=\{0\}\)</span>but <span class="math inline">\(U_1+U_2+U_3\)</span> is not a direct sumbeacuse</p><p><spanclass="math inline">\((0,0,0)=(0,1,0)+(0,0,1)+(0,-1,-1)=(0,0,0)+(0,0,0)+(0,0,0)\)</span></p><h4 id="span">Span</h4><h5 id="linear-combination">Linear Combination</h5><p>A vector <span class="math inline">\(w\in V\)</span> is said to be a<strong>linear combination</strong> of vectors <spanclass="math inline">\(v_1,...,v_n\in V\)</span> provided that thereexist scalars <span class="math inline">\(s_1,...,s_n\in F\)</span> suchthat <span class="math display">\[w=\sum_{i=1}^{n}s_iv_i\]</span> Let <span class="math inline">\(S\)</span> and <spanclass="math inline">\(T\)</span> be two subsets of vector spaces <spanclass="math inline">\(V\)</span>. S and <spanclass="math inline">\(T\)</span> are said to be<strong>equivalent</strong> if any element in S could be a linearcombination of T, and any element in T could be a linear combination ofS.</p><p><u>Example</u></p><ul><li><spanclass="math inline">\((17,-4,2)^T=6(2,1,-3)^T+5(1,-2,4)^T\)</span></li><li>But for <span class="math inline">\((17,-4,5)\)</span> there do notexist numbers <span class="math inline">\(a_1,a_2\in F\)</span> suchthat <spanclass="math inline">\((17,-4,5)^T=a_1(2,1,-3)^T+a_2(1,-2,4)^T\)</span></li></ul><h5 id="span-1">Span</h5><p>Let <span class="math inline">\(U\)</span> be a list or set ofvectors in <span class="math inline">\(V\)</span>. Then the<strong>span</strong> of <span class="math inline">\(U\)</span>,<spanclass="math inline">\(span(U)\)</span> is defined to be <strong>the setof all finite linear combinations of the vectors in U</strong>: <spanclass="math display">\[span(U)=\{v|v=\sum\lambda_i u_i,\lambda_i\in F,u_i\in U\}\]</span></p><blockquote><p>Remark:</p><p><span class="math inline">\(\vec 0\in span(U)\)</span></p></blockquote><p><u>Example</u></p><ul><li><span class="math inline">\((17,-4,2)^T\inspan((2,1,-3)^T,(1,-2,4)^T)\)</span> while <spanclass="math inline">\((17,-4,5)^T\not \inspan((2,1,-3)^T,(1,-2,4)^T\)</span></li><li>Span of empty set: <span class="math inline">\(\{0\}\)</span></li></ul><blockquote><p>Theorm:</p><p>For a vector space <span class="math inline">\(V\)</span>, the spanof any list or set of vectors in <span class="math inline">\(V\)</span>Form a subspace.</p></blockquote><p><u>Example</u></p><p>For <span class="math inline">\(U=\vec e_1,\vec e_2\)</span>, where<span class="math inline">\(\vec e_1=(1,0)^T,\vece_2=(0,1)^T\)</span></p><p><span class="math inline">\(span(U)=\R^2\)</span></p><blockquote><p>Theorem:</p><p>The span of a list of vectors <span class="math inline">\(U\)</span>in V is the <strong>intersection</strong> of all subspaces of <spanclass="math inline">\(V\)</span> that contain <spanclass="math inline">\(U\)</span>. Which is the <strong>smallest</strong>subspaces of V containing U.</p><p>Proof:</p><p>Let <span class="math inline">\(v_1,v_2,...,v_m\)</span> be a list ofvectors in V</p><ol type="1"><li><p>Show that <span class="math inline">\(span(v_1,...,v_m)\)</span>is a subspace.</p><ol type="a"><li><p><span class="math inline">\(\vec 0=0\cdot v_1+\cdots+0\cdotv_m\in span(v_1,...,v_m)\)</span></p></li><li><p><spanclass="math inline">\((a_1v_1+\cdots+a_mv_m)+(b_1v_1+\cdots+b_mv_m)=(a_1+b_1)v_1+\cdots+(a_m+b_m)v_m\inspan(v_1,...,v_m)\)</span></p></li><li><p><span class="math inline">\(\lambda(a_1v_1+\cdots+a_mv_m)=\lambda a_1v_1+\cdots+\lambda a_mv_m\inspan(v_1,...,v_m)\)</span></p></li></ol></li><li><p>Show it is the smallest one</p><p><span class="math inline">\(\forall \vec v_j, v_j\inspan(v_1,...,v_m)\)</span></p><p>For any subspaces <span class="math inline">\(U\subseteq V\)</span>,and <span class="math inline">\(v_j\in U,j=1,...,m\)</span>, then thelinear combination of <spanclass="math inline">\(\sum_{i=1}^{m}\lambda_j v_j\in U\)</span></p></li></ol></blockquote><p>If <span class="math inline">\(span(v_1,...,v_m)\)</span> equals<span class="math inline">\(V\)</span>, we say that <spanclass="math inline">\(v_1,...,v_m\)</span> <strong>spans</strong> <spanclass="math inline">\(V\)</span>.</p><p><u>Example</u></p><p><spanclass="math inline">\((1,0,\cdots,0)^T,(0,1,\cdots,0)^T,\cdots,(0,0,\cdots,1)^T\)</span>spans <span class="math inline">\(F^n\)</span></p><p>A vector space is called <strong>finite-dimensional</strong> if somefinite number of vectors span the space.</p><p>A vector space is called <strong>infinte-dimensional</strong> if itis not finite-dimensional.</p><p><u>Example</u></p><p>A function <span class="math inline">\(p:F\to F\)</span> is called apolynomial with coefficients in <span class="math inline">\(F\)</span>if there exist <span class="math inline">\(a_0,\cdots,a_m\in F\)</span>such that, <span class="math display">\[p(z)=a_0+a_1z+\cdots+a_mz^m\]</span> For all <span class="math inline">\(z\in F\)</span></p><p><span class="math inline">\(p(F)\)</span> is the set of allpolynomials with coefficients in F, is infinite-dimensional.</p><p><span class="math inline">\(p_m(F)\)</span> is the set of allpolynomials with coefficients in F and degree at most m, is afinite-dimension vector space for each non-negative integer m.</p><h5 id="linear-dependence-and-independence">Linear Dependence andIndependence</h5><p>Let V be a vector space over F. A list of vectors <spanclass="math inline">\(u_1,\cdots,u_n\in V\)</span> is called<strong>linearly dependent</strong> if there are scalars <spanclass="math inline">\(s_1,...,s_n\in F\)</span>, <strong>not all equalto 0</strong>, such that <spanclass="math inline">\(\sum_{i=1}^{n}s_iu_i=0\)</span></p><ul><li>A list that is not linearly dependent is called <strong>linearlyindependent</strong></li><li>A subset <span class="math inline">\(U\subseteq V\)</span> is calledlinearly dependent if there is a finite list <spanclass="math inline">\(u_1,...,u_n\in U\)</span> of distinct vectors thatis linearly dependent.</li></ul><p><u>Example</u></p><ul><li>For <span class="math inline">\(V=\R^4\)</span>, vectors <spanclass="math inline">\(v_1=(1,1,0,0),v_2=(0,1,1,0),v_3=(0,0,1,1)\)</span>Are linearly independent.</li><li><img src="Math 305 Advanced Linear Algebra/IMG_77AFD9C7E5FE-1.jpeg" alt="IMG_77AFD9C7E5FE-1" style="zoom:67%;" /></li></ul><blockquote><p>Remark:</p><ul><li>Any subset of a linearly independent set is also linearlyindependent</li><li>Any set which contains the <span class="math inline">\(\vec0\)</span> is linearly dependent.</li><li>A set <span class="math inline">\(U\subsetneq V\)</span> Is linearlyindependent <strong>if and only if</strong> each finite subset of U islinearly independent.</li></ul></blockquote><h5 id="steinitz-exchange-lemma">Steinitz Exchange Lemma</h5><p>Let <span class="math inline">\(V\)</span> be a vector space over<span class="math inline">\(F\)</span>. Suppose that <spanclass="math inline">\(\alpha_1\cdots\alpha_s\)</span> is a<strong>linearly independent</strong> set of vectors in <spanclass="math inline">\(V\)</span>, and could be <strong>linearcombiniations</strong> of <spanclass="math inline">\(\beta_1\cdots\beta_2\in V\)</span> (<spanclass="math inline">\(\beta\)</span> havs more information), then</p><ul><li><span class="math inline">\(s\leq t\)</span></li><li><span class="math inline">\(\alpha_1\cdots \alpha_s\)</span> couldexchange <span class="math inline">\(s\)</span> of vectors in <spanclass="math inline">\(\beta_1\cdots \beta_t\)</span> such that <spanclass="math inline">\(\alpha_1 \cdots \alpha_s,\beta_{s+1}\cdots\beta_t=\beta_1\cdots\beta_t\)</span></li></ul><p><a href="#%20Dimension">Back to Dimension</a></p><p><u>Example</u></p><p><spanclass="math inline">\(\vec\alpha_1=[1,0]^T,\vec\alpha_2=[0,1]^T\\\vec\beta_1=[0,1]^T,\vec\beta_2=[1,1]^T,\vec\beta_3=[2,3]^T\)</span></p><p>Then <spanclass="math inline">\((\vec\alpha_1,\vec\alpha_2,\vec\beta_3)\)</span>is equivalent with <spanclass="math inline">\((\vec\beta_1,\vec\beta_2,\vec\beta_3)\)</span>--&gt; <a href="#Linear%20Combination">How to Check Equivalence?</a></p><h4 id="basis"><a href="#media">Basis</a></h4><p>A <strong>basis</strong> of <span class="math inline">\(V\)</span> isa list of vectors in V that is <strong>linearly independent</strong> and<strong>spans V</strong>. The vector space is<strong>finite-dimensional</strong> if it has a finite basis.</p><h5 id="check-a-basis">Check a Basis</h5><ol type="1"><li><span class="math inline">\(V=span(v_1\cdots v_n),\forall v_n\inV\)</span></li><li><span class="math inline">\(v_1\cdots v_n\)</span> Are linearlyindependent.</li></ol><p><u>Example</u></p><p>Check <span class="math inline">\((1,-1,0),(1,0,-1)\)</span> is thebasis of <span class="math inline">\(V=\{(x,y,z)^T\inF^3|x+y+z=0\}\)</span>. Note that all vectors are coloumn vectors.</p><blockquote><p>Sol:</p><ol type="1"><li><p>Check span</p><p>Since <span class="math inline">\((x,y,z)=(-y-z,y,z)\)</span>, wehave</p><p><spanclass="math inline">\((-y-z,y,z)=(-y,y,0)+(-z,0,z)=-y(1,-1,0)-z(1,0,-1)\)</span></p></li><li><p>Check linear dependency</p><p><spanclass="math inline">\(\lambda_1(1,-1,0)+\lambda_2(1,0,-1)=(0,0,0)=(\lambda_1+\lambda_2,-\lambda_1,-\lambda_2)=(0,0,0)\implies\lambda_1=\lambda_2=0\)</span></p></li></ol></blockquote><blockquote><p>Remark:</p><p>Basis of a vector space V contains:</p><ul><li>The <strong>most</strong> vectors that are linearly indepedent.</li><li>THe <strong>least</strong> vectors that span the vector spaceV.</li></ul></blockquote><blockquote><p>Theorem: Every spanning list in a vector space can be reduced to forma basis of the vector space.</p><p>Proof:</p><p>If <span class="math inline">\(V=span(\vec v_1,\vec v_2,...,\vecv_3)\)</span>, we want to remove some vectors to form the basis of <spanclass="math inline">\(V\)</span>.</p><p>Let <span class="math inline">\(B=\{\vec v_1,...,\vecv_n\}\)</span></p><p>Step 1: If <span class="math inline">\(\vec v_1=\vec 0\)</span>, thenremove <span class="math inline">\(\vec v_1\)</span>, else keep <spanclass="math inline">\(\vec v_{1}\)</span>.</p><p>Step 2: If <span class="math inline">\(\vec v_j\)</span> is in <spanclass="math inline">\(span(\vec v_1,...,\vec v_{j-1})\)</span>, delete<span class="math inline">\(\vec v_{j}\)</span> from B</p><p>‚Äã If <span class="math inline">\(\vec v_j\)</span> is not in <spanclass="math inline">\(span(\vec v_1,...,\vec v_{j-1})\)</span>, keep<span class="math inline">\(\vec v_{j}\)</span> In B</p><p>Finally we will have a set of linearly independent vectors such that<span class="math inline">\(span(\vec v_1,...,\vec v_m)=span(\vecv_1,...,\vec v_m)\)</span></p><p><u>Example</u></p><p><span class="math inline">\(V=span\{(1,1),(0,1),(1,0)\}\)</span>, wewant to find the basis of V.</p><ol type="1"><li>Check <span class="math inline">\((1,1)\)</span> is not <spanclass="math inline">\(\vec 0\)</span>.</li><li>Check whether <span class="math inline">\((1,1)\)</span> and <spanclass="math inline">\((0,1)\)</span> are linearly independent --&gt;Yes</li><li>Check whether <span class="math inline">\(\{(1,1),(0,1)\}\)</span>and <span class="math inline">\((1,0)\)</span> are linearly independent--&gt; No, since <spanclass="math inline">\((1,0)=(1,1)-(0,1)\)</span></li></ol><p>Thus, the basis is <spanclass="math inline">\(V=span(v_1,v_2)\)</span>.</p><p>But, by changing the order of checking, we can find other basis suchas: <span class="math inline">\(V=span\{(1,0),(0,1)\}\)</span></p></blockquote><blockquote><p>Theorem:</p><p>Every vector space has a basis.</p></blockquote><blockquote><p>Theorem:</p><p>Every linearly independent <strong>finite</strong> number of vectorsin a finite-dimensional vector space can be <strong>extended to abasis</strong> of the vector space.</p></blockquote><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(V\)</span> is finite-dimensionaland <span class="math inline">\(U\)</span> is subspace of <spanclass="math inline">\(V\)</span>. Then there is a subspace <spanclass="math inline">\(W\)</span> Of <spanclass="math inline">\(V\)</span>, such that <spanclass="math inline">\(V=U\oplus W\)</span>.</p><p>Proof:</p><p>SInce <span class="math inline">\(V\)</span> is finite-dimensional,<span class="math inline">\(W\)</span> is also finite-dimensional.</p><p>Let <span class="math inline">\(\vec u_1,...,\vec u_m\)</span> be thebasis of <span class="math inline">\(U\)</span>, we have <spanclass="math inline">\(span(\vec u_1,...,\vec u_m)=U\)</span> and <spanclass="math inline">\(\exist \vec w_1,...,\vec w_n\in V\)</span> suchthat, by the thorem bi extension, <span class="math inline">\(\vecu_1,...,\vec u_m,\vec w_1,...,\vec w_n\)</span> is the basis of <spanclass="math inline">\(V\)</span></p><p>Thus, we define <span class="math inline">\(W=span(\vec w_1,...,\vecw_n)\)</span> then <span class="math inline">\(W\sub V\)</span> is asubspace.</p><p>Next we prove <span class="math inline">\(U\oplus W=V\)</span></p><ol type="1"><li><p>Since <span class="math inline">\(\vec u_1,...,\vec u_m,\vecw_1,...,\vec w_n\)</span> is the basis of <spanclass="math inline">\(V\)</span>,</p><p><span class="math inline">\(\forall \vec v\in V, \vec v=\lambda_1\vecu_1+\cdots+\lambda_m\vec u_m+\beta_1\vec w_1+\cdots+\beta_n\vecw_n\\=\vec u+\vec w\)</span>,where <span class="math inline">\(\vec u\inU,\vec w\in W\)</span></p></li><li><p><span class="math inline">\(\forall \vec v\in U\cap W\\ \implies\vec v=\lambda_1\vec u_1+\cdots+\lambda_m\vec u_m=\beta_1\vecw_1+\cdots+\beta_n\vec w_n=0\)</span></p><p>since <span class="math inline">\(\vec u_1...\vec u_m,\vecw_1,...,\vec w_n\)</span> is basis of V, which means they are linearlyindependent.</p><p>we have <spanclass="math inline">\(\lambda_1=...=\lambda_m=\beta_1=...=\beta_n\implies\vec v=0\)</span></p></li></ol><p><u>Example</u></p><p>For <span class="math inline">\(V=P_5,U=span\{1,x^2\}\)</span>, find<span class="math inline">\(W\)</span> such that <spanclass="math inline">\(V=U\oplus W\)</span></p><p>Sol:</p><p><spanclass="math inline">\(P_5=a_0+a_1x+a_2x^2+a_3x^3+a_4x^4+a_5x^5\)</span></p><p>which means <spanclass="math inline">\(V=span\{1,x,x^2,x^3,x^4,x^5\}\)</span></p><p>Since we have <span class="math inline">\(U=span\{1,x^2\}\)</span>,we have <span class="math inline">\(W=\{x,x^3,x^4,x^5\}\)</span></p></blockquote><h4 id="dimension"><a href="#media">Dimension</a></h4><p>By <a href="#Steinitz%20Exchange%20Lemma">Stinitz exchange lemma</a>,if <span class="math inline">\(V\)</span> is a finite-dimensional vectorspace, then any two bases of <span class="math inline">\(V\)</span> havethe <strong>same</strong> number of element.</p><h5 id="definition-4">Definition</h5><p>The <strong>dimension</strong> of a finite-dimensional vector spaceis the <strong>number of elements</strong> in any basis for <spanclass="math inline">\(V\)</span>, denoted by <spanclass="math inline">\(dim V\)</span></p><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(V\)</span> is finite-demensional,then <strong>every</strong> linearly independent list of vectors in<span class="math inline">\(V\)</span> with length <spanclass="math inline">\(dimV\)</span> is a basis for <spanclass="math inline">\(V\)</span>.</p></blockquote><blockquote><p>Theorem:</p><p>If <span class="math inline">\(V\)</span> is finite-demensional and<span class="math inline">\(U\)</span> is subspace of <spanclass="math inline">\(V\)</span>, then <spanclass="math inline">\(dimU\leq dimV\)</span>.</p></blockquote><p><u>Example</u></p><p>Show that <span class="math inline">\(1,(x-5)^2,(x-5)^3\)</span> is abasis of the subspace <span class="math inline">\(U\)</span> of <spanclass="math inline">\(P_3(R)\)</span> defined by <spanclass="math inline">\(U=\{p\in P_3(\R):p&#39;(5)=0\}\)</span>.</p><blockquote><p>Sol:</p><p>Since <span class="math inline">\(p&#39;(5)=0\)</span>, we have P isthe factor of <span class="math inline">\((x-5)^2\)</span>, which is</p><p><spanclass="math inline">\(P=g(x)(x-5)^2\\P&#39;=g&#39;(x)(x-5)^2+2g(x)(x-5)\)</span>,thus <span class="math inline">\(g(x)\)</span> Has three potentialvalues <spanclass="math inline">\(g(x)=(x-5)\\g(x)=C\\g(x)=0\)</span></p><p>then we have <span class="math inline">\((x-5)^3,(x-5)^2,1\)</span>can represent the <span class="math inline">\(P_3\)</span> and they arelinearly independent. Thus they are a basis of <spanclass="math inline">\(U\)</span>.</p></blockquote><blockquote><p>Theorem (Dimesion of a sum)</p><p>If <span class="math inline">\(U_1\)</span> and <spanclass="math inline">\(U_2\)</span> are subspaces of finite-dimensionalvector spcace, then: <span class="math display">\[dim(U_1+U_2)=dimU_1+dim_2-dim(U_1\cap U_2)\]</span></p></blockquote><blockquote><p>Suppose <span class="math inline">\(U_1,U_2,...,U_m\)</span> are thesubspaces of <span class="math inline">\(V\)</span>. The sum <spanclass="math inline">\(U_1+\cdots+U_m\)</span> is a <strong>direct sum ifand only if</strong> <span class="math display">\[dim(U_1+\cdots+U_m)=dimU_1+\cdots+dimU_m\]</span></p></blockquote><p><u>Example</u></p><p>Let <span class="math inline">\(U=\{p\in P_4(F: p(6)=0\}\)</span></p><ol type="a"><li>Find the basis of U</li></ol><blockquote><p>Since we have <span class="math inline">\(p(6)=0\)</span>, <spanclass="math inline">\((x-6)\)</span> is a factor of P, thus we have<span class="math inline">\(P=g(x)(x-6)\in P_4\)</span>, where <spanclass="math inline">\(g(x)=1,x,x^2,x^3\in P_3\)</span> (note that thezero function is included, by taking them equal to zero). finally wehave <span class="math inline">\((x-6),x(x-6),x^2(x-6),x^3(x-6)\)</span>as basis.</p><p><strong>General Method:</strong></p><p>The standard form of <span class="math inline">\(P_4\)</span> is<spanclass="math inline">\(P_4=a_0+a_1x+a_2x^2+a_3x^3+a_4x^4\)</span></p><p>For <span class="math inline">\(P(6)=0\)</span> we have: <spanclass="math inline">\(P(6)=a_0+a_16+a_26^2+a_36^3+a_46^4=0\)</span>, thesolution of the equation are:</p><p><spanclass="math inline">\((-6,1,0,0,0)^T,(-6^2,0,1,0,0)^T,(-6^3,0,0,1,0)^T,(-6^4,0,0,0,1)\)</span>,plug these solutions in, we have: <spanclass="math inline">\(P_4=x-6,x^2-6^2,x^3-6^3,x^4-6^4\)</span></p></blockquote><h3 id="matrices"><a href="#media">3.3 Matrices</a></h3><h4 id="definition-5"><a href="#media">Definition</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211122235900578.png"alt="image-20211122235900578" /><figcaption aria-hidden="true">image-20211122235900578</figcaption></figure><h5 id="matrix-multiplication"><a href="#media">MatrixMultiplication</a></h5><p>Let A be an <span class="math inline">\(m\times n\)</span> matrixover F and let B be an <span class="math inline">\(n\times p\)</span>Matrix over F. The <strong>matrix product</strong> AB is the <spanclass="math inline">\(m\times p\)</span> matrix C: <spanclass="math display">\[c_{ij}=\sum_{k=1}^na_{ik}b_{kj}\]</span></p><blockquote><p>Remark:</p><ul><li><p>The j-th column vector of C <span class="math inline">\(\vecc_j\)</span> is the linear combination of columns of A</p><p><span class="math inline">\((A\cdot B)_j=\vec a_1 b_{1j}+\vec a_2b_{2j}+\cdots+\vec a_nb_{nj}\)</span>, where <spanclass="math inline">\(\vec a_n\)</span> are column vectors of A</p></li><li><p>The i-th row vector of C <span class="math inline">\(\vecc^*\)</span> is the linear combination of the rows of B</p><p><span class="math inline">\((A\cdot B)_i=a_{i1}\vec b_1^*+a_{i2}\vecb_2^*+\cdots +a_{in}\vec b_n^*\)</span>, where <spanclass="math inline">\(\vec b_n^*\)</span> are row vectors of B</p></li><li><p><span class="math inline">\(Rank(A)=Rank(A^T)\)</span></p></li></ul></blockquote><blockquote><p>Lemma:</p><p>If <span class="math inline">\(\vec a=\begin{bmatrix}a_1\\a_2\\\vdots\\ a_m \end{bmatrix}\in F^m, \vec b^*=(b_1,b_2,...,b_n)\inF^n\)</span> are two vectors and <span class="math inline">\(A=\veca\times \vec b_n^*\)</span>, then <spanclass="math inline">\(Rank(A)=1\)</span>.</p><p>Note: This lemma means that all other columns of A can be representedby the first column of A.</p><p>Then for <span class="math inline">\(A\times B\)</span>, we have<span class="math inline">\(A\times B=\sum_{k=1}^n\)</span> where <spanclass="math inline">\(\vec a_k=\begin{bmatrix}a_{1k}\\a_{2k}\\ \vdots\\a_{mk} \end{bmatrix}_{m\times 1}, \vecb_k^*=(b_{k1},b_{k2},...,b_{k3})_{1\times p}\)</span>, we know the foreach k, <span class="math inline">\(Rank(\vec a_k \vecb_k^*)=1\)</span>, meaning that <span class="math inline">\(AB\)</span>is <strong>n rank 1 matrix sum</strong></p></blockquote><blockquote><p>Theorem</p><p>Let <span class="math inline">\(A\)</span> be an <spanclass="math inline">\(m\times n\)</span> matrix over <spanclass="math inline">\(F\)</span> and let <spanclass="math inline">\(B\)</span> be an <spanclass="math inline">\(n\times p\)</span>, then:</p><ul><li><span class="math inline">\(Rank(AB)\leq min\{Rank(A),Rank(B)\}\)</span></li><li><span class="math inline">\(Rank(A+B)\leqRank(A)+Rank(B)\)</span></li><li><spanclass="math inline">\(Rank(A^TA)=Rank(AA^T)=Rank(A)=Rank(A^T)\)</span></li><li>If <span class="math inline">\(P\in F^{m\times m}, Q\in F ^{n\timesn}\)</span> and invertible, then <spanclass="math inline">\(Rank(PAQ)=Rank(PA)=Rank(AQ)=Rank(A)\)</span></li></ul></blockquote><h4 id="echelon-forms"><a href="#media">Echelon Forms</a></h4><p><strong>Row Echelon Form:</strong></p><p><img src="Math 305 Advanced Linear Algebra/image-20211123022302822.png" alt="image-20211123022302822" style="zoom: 33%;" /></p><p><strong>Reduced Row Echelon Form:</strong></p><p><img src="Math 305 Advanced Linear Algebra/image-20211123022408248.png" alt="image-20211123022408248" style="zoom:33%;" /></p><blockquote><p>Remark:</p><p><img src="Math 305 Advanced Linear Algebra/image-20211123025404848.png" alt="image-20211123025404848" style="zoom:50%;" /></p><ul><li>Elementary matrix is square matrix</li><li>Multiplying elementry matrix on the left of A means elementary<strong>row operations</strong> on A</li><li>Multiplying elementary matrix on the right of A means elementary<strong>column operations</strong> on A</li><li>Elementary matrix is invertible</li><li><strong>Elementary operation does not change the rank ofmatrix</strong></li></ul></blockquote><blockquote><p>Lemma:</p><p>For any <span class="math inline">\(m\times n\)</span> matrix A overF, there is an <strong>invertible</strong> <spanclass="math inline">\(m\times m\)</span> matrix <spanclass="math inline">\(P\)</span> over <spanclass="math inline">\(F\)</span> such that <spanclass="math inline">\(R=PA\)</span> is the reduced row echelon form.</p><p>Remark:</p><ul><li>This is the first factorization of <spanclass="math inline">\(A=P^{-1}R\)</span>, where R is the reduced rowechelon form.</li><li>If <span class="math inline">\(Rank(A)=r\)</span> and let <spanclass="math inline">\(R&#39;\)</span> be the matrix by removing thosezero rows of R, then <span class="math inline">\(A=CR&#39;\)</span>,where <span class="math inline">\(C\in F^{m\times r}\)</span> be thefirst <span class="math inline">\(r\)</span> Columns of <spanclass="math inline">\(P^{-1}\)</span>. (Zeros in RREF are trivial)</li></ul></blockquote><blockquote><p>Lemma:</p><p>Let <span class="math inline">\(A\)</span> be an <spanclass="math inline">\(m\times n\)</span> Matrix over <spanclass="math inline">\(F\)</span> with <span class="math inline">\(m\ltn\)</span> (#row &lt; #colunm). Then, there exists a<strong>length-n</strong> column vector <spanclass="math inline">\(x‚â†0\)</span> such that <spanclass="math inline">\(A\vec x=0\)</span></p><p>Remark: If the <strong>unkonwn number n</strong> is larger than<strong>equation number m</strong>, there is <strong>always</strong>notrivial solution for <span class="math inline">\(A\vecx=0\)</span>.</p></blockquote><blockquote><p>Theorem:</p><p>Let <span class="math inline">\(A\in F^{m\times n}\)</span>, with<span class="math inline">\(Rank(A)=r\)</span>, then there existinvertible matrix <span class="math inline">\(P\in F^{m\timesm}\)</span> and <span class="math inline">\(Q\in F^{n\times n}\)</span>such that <span class="math inline">\(A=P\begin{bmatrix}I_{r\times r}&amp; 0_{r\times (n-r) }\\ 0_{(m-r)\times r}&amp;0_{(m-r)\times (n-r)}\end{bmatrix}Q\)</span>. (P as row operation, Q as column operation)</p><p>Corollary 1:</p><p>A matrix <span class="math inline">\(A\in F^{n\times n}\)</span> is<strong>invertible</strong> if and only if it could be written as aproduction of elementary matrix.</p><p>Corollary 2:</p><p>A matrix <span class="math inline">\(A\in F^{n\times n}\)</span> is<strong>invertible</strong> if and only if A could be changed to be a<span class="math inline">\(n\times n\)</span> identity matrix afterfinite elementary operation: <span class="math inline">\(PA_{n\timesn}Q=I_{n\times n}\)</span></p></blockquote><blockquote><p>Theorem (Rank Factorization): Let <span class="math inline">\(A\inF^{m\times n}\)</span>, then <span class="math inline">\(Rank(A)=r\geq1\)</span> <strong>if and only if</strong> there exist a full columnrank matrix <span class="math inline">\(B\in F^{m\times r}\)</span> anda full row rank matrix <span class="math inline">\(C\in F^{r\timesn}\)</span> such that <span class="math inline">\(A_{m\timesn}=B_{m\times r}C_{r\times n}\)</span> (B and C are <strong>NOT</strong>unique)</p></blockquote><h3 id="linear-transformation"><a href="#media">3.4 LinearTransformation</a></h3><h4 id="definition-6"><a href="#media">Definition</a></h4><p>Let <span class="math inline">\(V\)</span> adn <spanclass="math inline">\(W\)</span> be vector sapce. A <strong>lineartransformation</strong> from <span class="math inline">\(V\)</span> to<span class="math inline">\(W\)</span> is a function <spanclass="math inline">\(T:V\to W\)</span> with the followingproperties:</p><ul><li>Additivity: <span class="math inline">\(T(u+v)=Tu+Tv,\forall u,v\inV\)</span></li><li>Homogeneity: <span class="math inline">\(T(\lambda v)=\lambdaT(v),\forall \lambda\in F,\forall v\in V\)</span></li></ul><p><u>Example</u></p><ul><li><p>Let A be a fixed $ mn$ matrix over F. the function T is definedby <span class="math inline">\(T(v)=Av\)</span> is a lineartransformation from <span class="math inline">\(F^m\to F^n\)</span>.</p><p><span class="math inline">\(\vec v_{n\times 1}\in V,A_{m\times n}\vecv_{n\times 1}=\vec w_{m\times 1}\in W\)</span></p><p><span class="math inline">\(T:F^n\to F^m,T\vec v=A\vec v\)</span></p><pre><code class=" mermaid">graph LRsubgraph F^nvendv--Tv--&gt;Avsubgraph F^mAvend</code></pre></li><li><p>Let V be the subspace of contiuous functions from <spanclass="math inline">\(\R\to\R\)</span>, and define <spanclass="math inline">\(T\)</span> by <spanclass="math inline">\(Tf(x)=\int_0^xf(t)dt\)</span>. then T is a lineartransforamtion from V to V. The function <spanclass="math inline">\(Tf\)</span> is continous and differentiable.</p><p><spanclass="math inline">\(T(f_1+f_2)=\int_0^x(f_1(t)+f_2(t))dt=Tf_1(x)+Tf_2(x)\)</span></p></li><li><p>Zero map: <span class="math inline">\(0\in L(v,w),0(\vec v)=\vec0, \forall\vec v\in V\)</span></p></li><li><p>Idenity map: <span class="math inline">\(I\in L(V,V),I(\vecv)=\vec v\)</span></p></li><li><p>Differentiation: <span class="math inline">\(D\in L(P(R),P(R)),DP=P&#39;\)</span></p></li><li><p>Integration: <span class="math inline">\(T\in L(P(R),R),TP=\int_0^1P(x)dx\)</span></p></li><li><p>Multiplication by <span class="math inline">\(x^2\)</span>: <spanclass="math inline">\(T\inL(P(R),P(R)),(TP)(x)=x^2P(x)\)</span></p></li><li><p>Backword Shift: <span class="math inline">\(T\inL(R^{\infty},R^{\infty}),T(x_1,x_2,...)^T=(x_2,x_3,...)^T\)</span></p></li></ul><p>Let <span class="math inline">\(L(V,W)\)</span> denote the collectionof all linear transformation from <span class="math inline">\(V\)</span>into <span class="math inline">\(W\)</span>, where V and W are vectorsspaces over a field F.</p><p>Suppose <span class="math inline">\(S,T\in L:(V,W)\)</span> and <spanclass="math inline">\(\lambda \in F\)</span>. The sum <spanclass="math inline">\(S+T\)</span> and the product <spanclass="math inline">\(\lambda T\)</span> are linear maps from V to Wdefined by: <span class="math inline">\((S+T)\vec v=S\vec v+T\vecv\)</span> and <span class="math inline">\((\lambda T)\vec v=\lambda(T\vec v),\forall \vec v\in V\)</span></p><blockquote><p>Remark:</p><ul><li><span class="math inline">\(L(V,W)\)</span> is a vector space.(Idenity element: zero function)</li><li>If <span class="math inline">\(T\)</span> is a lineartransformation, then <span class="math inline">\(T(0)=0\)</span></li><li>If <span class="math inline">\(a_1,a_2,...,a_k\in V\)</span> are<strong>linear dependent</strong>, then the under linear transformationT, <span class="math inline">\(T(a_1),T(a_2),...,T(a_k)\)</span> are<strong>linearly dependent</strong></li><li>If <span class="math inline">\(T(a_1),T(a_2),...T(a_k)\)</span> are<strong>linearly independent</strong>, then <spanclass="math inline">\(a_1,a_2,...a_k\)</span> are <strong>linearlyindependent</strong></li></ul></blockquote><p>If <span class="math inline">\(T\in (U,V)\)</span> and <spanclass="math inline">\(S\in L(V,W)\)</span>, then the product <spanclass="math inline">\(ST\in L(V,W)\)</span> is defined by <spanclass="math display">\[(ST)u=S(Tu)\]</span> For <span class="math inline">\(u\in U\)</span>. Note that<strong>multiplication is not commutative: ST‚â†TS</strong></p><blockquote><p>Remark:</p><ul><li>It is just the composition <span class="math inline">\(S\circT\)</span> Of two functions.</li><li>The product satisfies the following properties:<ul><li>Associativity: <spanclass="math inline">\((T_1T_2)T_3=T_1(T_2T_3)\)</span></li><li>Identity: <span class="math inline">\(TI=IT=T\)</span></li><li>Distributive: <spanclass="math inline">\((S_1+S_2)T=S_1T+S_2T\)</span> and <spanclass="math inline">\(S(T_1+T_2)=ST_1+ST_2\)</span> whenever <spanclass="math inline">\(T,T_1,T_2\in L(U,V)\)</span> and <spanclass="math inline">\(S,S_1,S_2\in L(V,W)\)</span></li></ul></li></ul></blockquote><blockquote><p>Theorem: Suppose <span class="math inline">\(v_1,...v_n\)</span> isthe basis of V and <span class="math inline">\(w_1,...w_n\in W\)</span>.Then there exist a <strong>unique</strong> transformation <spanclass="math inline">\(T:V\to W\)</span>, such that <spanclass="math display">\[T\vec v_j=\vec w_j, for\ each\ j=1,...n\]</span> Proof:</p><p>Since <span class="math inline">\(\vec v_1,...\vec v_n\)</span> isthe basis of V <span class="math inline">\(\implies \forall \vec v\inV,\vec v=\sum_{i=1}^n\lambda_i\vec v_i\)</span></p><p>Then we define <span class="math inline">\(T(\vecv)=T(\sum_{i=1}^n\lambda_i\vec v_i)=\sum_{i=1}^n \lambda_i\vec w_i\inW\)</span></p><p>Such that <span class="math inline">\(\forall \vecv_j,\exist\lambda_i=0,i‚â†j,\lambda_j=1\)</span> St <spanclass="math inline">\(T(\vec v_j)=\vec w_j\)</span></p><p>Next we need to show T is a linear transformation</p><p>Then show its uniqueness</p></blockquote><h4 id="ranges-and-null-space"><a href="#media">Ranges and NullSpace</a></h4><p>Range ((collection of output))</p><p>For a linear transforamtion <span class="math inline">\(T:V\toW\)</span>, the range of T is the set of all vectors <spanclass="math inline">\(\vec v\in W\)</span> such that <spanclass="math inline">\(\vec w=T\vec v\)</span> for some <spanclass="math inline">\(\vec v\in V\)</span>. <spanclass="math display">\[R(T)=\{\vec w\in W|\exist \vec v\in V,s.t. T\vec v=\vec w\}=\{T\vecv|\vec v\in V\}\]</span> Nullspace/Kernal: <span class="math display">\[Null(T)=\{\vec v\in V|T\vec v=\vec 0\}\]</span><img src="Math 305 Advanced Linear Algebra/image-20211124232010680.png" alt="image-20211124232010680" style="zoom:25%;" /></p><p><u>Example</u></p><ul><li>If <span class="math inline">\(T\)</span> is the zero transformationfrom <span class="math inline">\(V\)</span> to <spanclass="math inline">\(W\)</span> such that <spanclass="math inline">\(T\vec v=0,\forall \vec v\in V\)</span>, then <spanclass="math inline">\(NullT=V,R(T)=\{\vec 0\}\)</span></li><li>Suppose <span class="math inline">\(S\)</span> is the transformationfrom <span class="math inline">\(F^{\infty}\)</span> to <spanclass="math inline">\(F^{\infty }\)</span> is the backward shift definedby <span class="math inline">\(T(x_1,x_2,...)=(x_2,x_3,...)\)</span>.Then <span class="math inline">\(T(x1,x_2,...)=0\)</span> iff <spanclass="math inline">\(x_2,x_3,...\)</span> are all 0.. Thus, <spanclass="math inline">\(NullT=\{(a,0,...)|a\inF\},R(T)=F^{\infty}\)</span></li><li>For <span class="math inline">\(D:P_4\to P_4\)</span>, <spanclass="math inline">\(R(D)=P_3\subseteq P_4, Null(D)=\{C|C\inF\}\)</span></li></ul><blockquote><p>Theorem:</p><p>For a linaer transformation <span class="math inline">\(T:V\toW\)</span>, Null T i s a <strong>subspace</strong> of V and R(T) is a<strong>subspace</strong> of W</p></blockquote><blockquote><p>Theorem: For a linear transformation <spanclass="math inline">\(T:V\to W\)</span>, T is <strong>injective</strong>if and only if <span class="math inline">\(NullT=\{0\}\)</span>; T is<strong>surjective</strong> if and only if its range <spanclass="math inline">\(R(T)=W\)</span></p><p><u>Example</u></p><p>The differential transformation <span class="math inline">\(D\inL(P_5(\R),P_5(\R))\)</span> is not surjective; <spanclass="math inline">\(S\in L(P_5(\R),P_4(\R))\)</span> is surjective</p></blockquote><h4 id="rank-and-nullity"><a href="#media">Rank and Nullity</a></h4><p><span class="math display">\[Rank(T)=dim(range(T))\\nullity(T)=dim(Null(T))\]</span></p><blockquote><p>Fundamental Theorem of Linear Transformation</p><p>Suppose <span class="math inline">\(V\)</span> is finite dimensionland <span class="math inline">\(T\in L(V,W)\)</span>. Then range <spanclass="math inline">\(T\)</span> is finite dimensional and <spanclass="math display">\[dimV=rank(T)+nullity(T)\]</span> Proof:</p><p><span class="math inline">\(Null(T)\)</span> is a subspace of V <spanclass="math inline">\(\implies \exist subspace\ U \subseteq V\)</span>such that <span class="math inline">\(V=Null(T)\oplus U\)</span></p><p>Then we have <spanclass="math inline">\(dim(V)=dim(Null(T))+dim(U)\)</span></p><p>We need to prove <spanclass="math inline">\(dim(U)=dim(R(T))\)</span></p><p>If <span class="math inline">\(\vec u_1,...\vec u_m\)</span> is thebasis of U, since 0 are excluded, then <span class="math inline">\(T\vecu_1,...T\vec u_m\)</span> is the basis of R(T).</p><p><u>Example</u></p><ul><li><p>For <span class="math inline">\(D\in L(P_5(\R),P_5(\R)),Dp(x)=p&#39;(x)\)</span></p><p><spanclass="math inline">\(R(D)=P_4(\R),dim(R(D))=5\\Null(D)=P_0(\R),dim(Null(T))=1\\dim(V)=dim(P_5)=6\)</span></p></li><li><p>For <span class="math inline">\(T\in L(F^m,F^n),T\vecx=A_{n\times m}\vec x_{m\times 1},rank(A)=8\)</span></p><p><span class="math inline">\(Null(T)=\{\vec x| A\vec x=0\}\\R(T=\{A\vec x\})\\dim(R(T))=rank(T)=rank(A)=8\\dim(Null T)=NullityT=n-8\)</span></p></li></ul></blockquote><blockquote><p>Corollary</p><p>Suppose <span class="math inline">\(V\)</span> and <spanclass="math inline">\(W\)</span> are fine-dimensional vector spaces</p><ul><li>If <span class="math inline">\(dimV&gt;dimW\)</span>, then no linearmap from <span class="math inline">\(V\)</span> to <spanclass="math inline">\(W\)</span> is injective</li><li>If <span class="math inline">\(dimV&lt;dimW\)</span> then no linearmap from <span class="math inline">\(V\)</span> to <spanclass="math inline">\(W\)</span> is surjective</li></ul><p><u>Application</u></p><p>A homogeneous system of linear equations with <strong>more variablesthan equations</strong> have nonzero solutions</p><p>A inhomogeneous system of linear equations with <strong>moreequations than variables</strong> have no solution for some choice ofconstant terms.</p></blockquote><h4 id="linear-transformation-and-matrix"><a href="#media">LinearTransformation and Matrix</a></h4><p>Assume <span class="math inline">\(V\in F^n\)</span> and <spanclass="math inline">\(W\in F^m\)</span> are two vector spaces. <spanclass="math inline">\(T:V\to W\)</span> is a linear transformation.<span class="math inline">\(\{\alpha_1,...\alpha_n\}\)</span> and <spanclass="math inline">\(\{\beta_1,...\beta_m\}\)</span> are the basis of Vand W. Since <span class="math inline">\(T(\alpha_i)\in W\)</span> and<span class="math inline">\(\{\beta_1,..\beta_m\}\)</span> are the basisof W, then</p><p><img src="Math 305 Advanced Linear Algebra/image-20211125225957369.png" alt="image-20211125225957369" style="zoom:33%;" /></p><p><img src="Math 305 Advanced Linear Algebra/image-20211125230058806.png" alt="image-20211125230058806" style="zoom:33%;" /></p><p>The matrix A depends on the basis of V, the basis of W and the lineartransformation T. In general, the matrix of T respect to differenc basisis denote <spanclass="math inline">\(M(T,(v_1,...v_n),(w_1,...w_m))\)</span>, which is<strong>uniquely</strong> defined by the three elements.</p><p><u>Example</u></p><ul><li><p>Suppose <span class="math inline">\(T\in L(F^2,F^3)\)</span> isdefined by <spanclass="math inline">\(T(x,y)=(x+3y,2x+5y,7x+9y)\)</span>. Find thematrix of T with respect to the standard basis of <spanclass="math inline">\(F^2\)</span> and <spanclass="math inline">\(F^3\)</span>.</p><blockquote><p>Sol:</p><p><spanclass="math inline">\(A=M(T,(\begin{bmatrix}1\\0\end{bmatrix}\begin{bmatrix}0\\1\end{bmatrix}),(\begin{bmatrix}1\\0\\0\end{bmatrix}\begin{bmatrix}0\\1\\0\end{bmatrix}\begin{bmatrix}0\\0\\1\end{bmatrix}))\)</span></p><p>We have <span class="math inline">\(\vece_1=\begin{bmatrix}1\\0\end{bmatrix},\vece_2=\begin{bmatrix}0\\1\end{bmatrix}\)</span> are basis of <spanclass="math inline">\(F^2\)</span> and <spanclass="math inline">\(\beta_1=\begin{bmatrix}1\\0\\0\end{bmatrix},\beta_2=\begin{bmatrix}0\\1\\0\end{bmatrix},\beta_3=\begin{bmatrix}0\\0\\1\end{bmatrix}\)</span>are basis of <span class="math inline">\(F^3\)</span></p><p>Then <span class="math inline">\(T\vece_1=T\begin{bmatrix}1\\0\end{bmatrix}=\begin{bmatrix}1\\2\\7\end{bmatrix}(plug\  in\x=1,y=0)=\vec \beta_1+\vec 2\beta_2+\vec 7\beta_3=(\vec\beta_1,\vec\beta_2,\vec\beta_3)\begin{bmatrix}1\\2\\7\end{bmatrix}\\T\vece_2=\begin{bmatrix}3\\5\\9\end{bmatrix}=(\vec \beta_1,\vec\beta_2,\vec\beta_3)\begin{bmatrix}3\\5\\7\end{bmatrix}\)</span></p><p>Thus, <span class="math inline">\(T(\vec e_1,\vece_2)=(\vec\beta_1,\vec\beta_2,\vec\beta_3)\begin{bmatrix}1&amp;3\\2&amp;5\\7&amp;7\end{bmatrix}\)</span></p></blockquote></li><li><p>Suppose <span class="math inline">\(D\inL(P_3(\R),P_2(\R)),Dp=p&#39;\)</span> find the matrix of D with respectto the standard basis of <span class="math inline">\(P_2(\R)\)</span>and <span class="math inline">\(P_3(\R)\)</span>.</p><blockquote><p>Sol:</p><p><spanclass="math inline">\(A=M(D,(1,x,x^2,x^3),(1,x,x^2))\)</span></p><p>Basis of <span class="math inline">\(P_3(\R):1,x,x^2,x^3\)</span></p><p>Basisi of <span class="math inline">\(P_2(\R):1,x,x^2\)</span></p><p><spanclass="math inline">\(D1=0=(1,x,x^2)\begin{bmatrix}0\\0\\0\end{bmatrix}\\Dx=1=(1,x,x^2)\begin{bmatrix}1\\0\\0\end{bmatrix}\\Dx^2=2x=(1,x,x^2)\begin{bmatrix}0\\2\\0\end{bmatrix}\\Dx^3=3x^2=(1,x,x^2)\begin{bmatrix}0\\0\\3\end{bmatrix}\\\impliesD(1,x,x^2,x^3)=(1,x,x^2)\begin{bmatrix}0&amp;1&amp;0&amp;0\\0&amp;0&amp;2&amp;0\\0&amp;0&amp;0&amp;3\end{bmatrix}\)</span></p></blockquote></li></ul><p>Assume for <span class="math inline">\(\alpha\in U\)</span>, underthe basis <spanclass="math inline">\((\alpha_1,\alpha_2,...\alpha_n)\)</span>, thecoordinate is <span class="math inline">\((x_1,x_2,...x_n)\)</span>,i.e. <span class="math inline">\(\alpha=\sum_{i=1}^nx_i\alpha_i\)</span>(<span class="math inline">\(\alpha\)</span> is a linear combination of<span class="math inline">\(\alpha_i\)</span>), then <spanclass="math display">\[T\alpha=T(x_1\alpha_1+\cdots x_n\alpha_n)=x_1T\alpha_1+\cdotsx_nT\alpha_n=T(\alpha_1,\alpha_2\cdots\alpha_n)\vecx=(\beta_1,\beta_2,...\beta_m)A\vec x\\ \implies T\alpha=(\beta_1,\beta_2,...\beta_m)A\vec x\]</span></p><blockquote><p>Theorem</p><p>Suppose <span class="math inline">\(S,T\in L(V,W),\lambda\inF\)</span>, (basis are fixed) then</p><ul><li><p><span class="math inline">\(M(S+T)=M(S)+M(T)\)</span></p></li><li><p><span class="math inline">\(M(\lambda S)=\lambda M(S)\)</span><span class="math display">\[A=M(T,\vec\alpha,\vec\beta)\\B=M(S,\vec\alpha,\vec\beta)\\A+B=M(T+S,\vec\alpha,\vec\beta)\]</span></p></li></ul><p>Suppose <span class="math inline">\(T\in L(U,V),S\in L(V,W)\)</span>then</p><ul><li><span class="math inline">\(M(ST)=M(S)M(T)\)</span> <spanclass="math display">\[A=M(T,\vec\alpha,\vec\beta)\\B=M(S,\vec\beta,\vec\gamma)\\B\cdot A=M(ST,\vec\alpha,\vec\gamma)\]</span></li></ul></blockquote><h4 id="invertibility"><a href="#media">Invertibility</a></h4><p>A linear transformation <span class="math inline">\(T\inL(V,W)\)</span> is called <strong>invertible</strong> if there exists alinear map <span class="math inline">\(S\in L(W,V)\)</span> such that<span class="math inline">\(ST\)</span> equals the identity function on<span class="math inline">\(V\)</span> and <spanclass="math inline">\(TS\)</span> equals the identity function on <spanclass="math inline">\(W\)</span>. Then <spanclass="math inline">\(S\)</span> is called an <strong>inverse</strong>of <span class="math inline">\(T\)</span>. If <spanclass="math inline">\(T\)</span> is invertible, the fucntion <spanclass="math inline">\(S\)</span> Is unique and is denoted by <spanclass="math inline">\(T^{-1}\)</span>.</p><blockquote><p>Theorem: A linear transforamtion is invertible <strong>if and onlyif</strong> it is injective and surjective. (<spanclass="math inline">\(Null(T)=0,Range(T)=W\)</span>)</p></blockquote><p><u>Example</u></p><ul><li>The multiplication by <span class="math inline">\(x^2\)</span>linear transforamtion from <span class="math inline">\(P(\R)\toP(\R)\)</span> is not invertible becasue it is not surjective. (1 is notin the range)</li><li>The backward shif linear map from <spanclass="math inline">\(F^{\infty}\to F^{\infty}\)</span> is notinvertible because it is not injecticv. (<spanclass="math inline">\((1,0,...)\)</span> is in the null space)</li></ul><h4 id="isomorphic-vector-space"><a href="#media">Isomorphic VectorSpace</a></h4><p>An <strong>isomorphism</strong> is an invertible lineartransformation two vector spaces are called <strong>isomorphic</strong>if there is an isomorphism from one vector space onto the other one.</p><blockquote><p>Theorem:</p><p>Two finite-dimensional vector spaces ovber <spanclass="math inline">\(F\)</span> are <strong>isomorphic</strong> if andonly if they have the <strong>same dimension</strong></p></blockquote><blockquote><p>Theorem;</p><p>Suppose <span class="math inline">\(v_1...v_n\)</span> is a basis of<span class="math inline">\(V\)</span> and <spanclass="math inline">\(w_1,...w_m\)</span> is a basis of <spanclass="math inline">\(W\)</span>. Then <spanclass="math inline">\(M\)</span> is an isomorphism between <spanclass="math inline">\(L(V,W)\)</span> and <spanclass="math inline">\(F^{m,n}\)</span></p><p>Note:</p><p>This means that for <spanclass="math inline">\(A=M(T,\vec\alpha,\vec\beta)\)</span>, M is alinear map such that <span class="math inline">\(M:T\to A\)</span> andis injective and surjective</p><p>Proof:</p><ul><li><p>If <span class="math inline">\(T\in L(V,M),M(T)=0\)</span> (here0 is matrix), then <span class="math inline">\(T\vec v_k=\vec 0,\forall\vec v_k\in V\)</span>, where <span class="math inline">\(\vecv_1,...\vec v_k\)</span> is the basis of V.</p><p>Thus, <span class="math inline">\(T\vec v=0,\forall v\in V\)</span>,then <span class="math inline">\(T=0,Null(M)=0\)</span></p></li></ul></blockquote><blockquote><p>Theroem:</p><p>Suppose V and W are finte-dimensional. Then <spanclass="math inline">\(dimL(V,W)=dimV\cdot dimW\)</span></p></blockquote><blockquote><p>Theorem:</p><p>Let <span class="math inline">\(T\in L(V,W)\)</span> and <spanclass="math inline">\(A=M(T,\vec\alpha,\vec\beta)\)</span>,then <spanclass="math inline">\(R(T)=dim(range(T))=Rank(A),NullityT=dim(Null(T))=n-Rank(A)\)</span></p></blockquote><h4 id="matrix-equivalent"><a href="#media">Matrix Equivalent</a></h4><p>Let <span class="math inline">\(T\in L(V,W)\)</span>. <spanclass="math inline">\(A=M(T,\vec\alpha_1,...\vec\alpha_n),(\vec\beta_1,...\vec\beta_m),B=M(T,(\vec\alpha_1&#39;,...\vec\alpha_n&#39;),(\vec\beta_1&#39;,...\vec\beta_m&#39;))\)</span></p><p>Then there are two <strong>invertible matrix</strong> <spanclass="math inline">\(P\in F^{mm},Q\in F^{nn}\)</span> such that <spanclass="math display">\[(\vec\alpha_1&#39;,...\vec\alpha_n&#39;)=(\alpha_1,...\alpha_n)Q\\(\vec\beta_1,...\vec\beta_m)=(\vec\beta_1&#39;,...\vec\beta_m&#39;)P\]</span> Then this means that <span class="math display">\[T(\vec\alpha_1&#39;,...\vec\alpha_n&#39;)=T(\vec\alpha_1,...\vec\alpha_n)Q=(\vec\beta_1,...\vec\beta_m)AQ=(\vec\beta_1&#39;,...\vec\beta_m&#39;)PAQ\\B=PAQ\]</span> i.e. <strong>The matrix of linear transformation T isequivalent</strong></p><p><u>Example</u></p><p>For <span class="math inline">\(D:P_3\to P_2\)</span></p><p>Basis of <span class="math inline">\(P_3:1,x,x^2,x^3\)</span></p><p>Basis of <span class="math inline">\(P_2:1,x,x^2\)</span></p><p><spanclass="math inline">\(D(1,x,x^2,x^3)=(1,x,x^2)\begin{bmatrix}0&amp;1&amp;0&amp;0\\0&amp;0&amp;2&amp;0\\0&amp;0&amp;0&amp;3\end{bmatrix}\)</span></p><p>For another basis of <spanclass="math inline">\(P_3:1,x,x^2,x^3+x^2\)</span>, we have <spanclass="math inline">\(Q:(1,x,x^2,x^3+x^2)=(1,x,x^2,x^3)\begin{bmatrix}1&amp;0&amp;0&amp;0\\0&amp;1&amp;0&amp;0\\0&amp;0&amp;1&amp;1\\0&amp;0&amp;0&amp;1\end{bmatrix}\)</span></p><p>For another baisi of <spanclass="math inline">\(P_2:1+x,x,x^2\)</span>, we have <spanclass="math inline">\(P:(1,x,x^2)=(1+x,x,x^2)\begin{bmatrix}1&amp;0&amp;0\\-1&amp;1&amp;0\\0&amp;0&amp;1\end{bmatrix}\)</span></p><p>If we directly write D with the alternative basis, <spanclass="math inline">\(D(1,x,x^2,x^2+x^3)=(0,1,2x,2x+3x^2)=(1+x,x,x^2)\begin{bmatrix}0&amp;1&amp;0&amp;0\\0&amp;-1&amp;2&amp;2\\0&amp;0&amp;0&amp;3\end{bmatrix}\)</span></p><p>And then we can verify that <spanclass="math inline">\(B=PAQ\)</span></p><blockquote><p>Theorem:</p><p>A linear transformation <span class="math inline">\(T\inL(V,W)\)</span>. <spanclass="math inline">\(A=M(T,\vec\alpha,\vec\beta)\)</span> and <spanclass="math inline">\(rank(A)=r\)</span>, then there exists a basis<span class="math inline">\((\vec\alpha&#39;)\)</span> in V and a basis<span class="math inline">\((\vec\beta&#39;)\)</span> in W such that<span class="math display">\[T(\vec\alpha&#39;)=(\vec\beta&#39;)\begin{bmatrix}I_r&amp;0\\0&amp;0\end{bmatrix}\]</span></p></blockquote><h4 id="operator"><a href="#media">Operator</a></h4><p>A <strong>linear transforamtion</strong> from a vector space toitself is called an <strong>operator</strong>. <spanclass="math inline">\(L(V)=L(V,V)\)</span></p><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(V\)</span> is finite-dimensionaland <span class="math inline">\(T\in L(V)\)</span>. Then the followingare equivalent:</p><ul><li>T is <strong>inveritible</strong>.</li><li>T is <strong>injective</strong></li><li>T is <strong>surjective</strong></li></ul></blockquote><blockquote><p>Corollary:</p><p>Suppose <span class="math inline">\(V\)</span> is finite-dimensionaland <span class="math inline">\(T\in L(V)\)</span>. Then <spanclass="math inline">\(T\)</span> is invertible/bijective <strong>if andonly if</strong> <span class="math inline">\(T\)</span> transforms thebasis of <span class="math inline">\(V\)</span> to the basis of <spanclass="math inline">\(V\)</span>. i.e. if <spanclass="math inline">\(v_1,...v_n\)</span> is the basisi of <spanclass="math inline">\(V\)</span> then <spanclass="math inline">\(Tv_1,...Tv_2\)</span> is also the basis of <spanclass="math inline">\(V\)</span>.</p></blockquote><blockquote><p>Remark: Suppose <span class="math inline">\(V\)</span> isfinite-dimensional and <span class="math inline">\(T\in L(V)\)</span>.If T is invertible and A is a matrix under the basis <spanclass="math inline">\(\{\alpha_1,...\alpha_n\}\)</span>, i.e. <spanclass="math display">\[T(\alpha_1,...\alpha_n)=(\alpha_1,...\alpha_n)A\]</span> then, the matrix of the invert operator <spanclass="math inline">\(T^{-1}\)</span> under the same basis is <spanclass="math inline">\(A^{-1}\)</span> <span class="math display">\[M(T,\vec\alpha,\vec\alpha)=A\\M(T^{-1},\vec\alpha,\vec\alpha)=A^{-1}\]</span></p></blockquote><h4 id="similar-matrix"><a href="#media">Similar Matrix</a></h4><p><span class="math inline">\(A,B\in F^{n\times n}\)</span>, we say<span class="math inline">\(B\)</span> is <strong>similar</strong> to<span class="math inline">\(A\)</span> if there exist an<strong>invertible matrix</strong> <span class="math inline">\(P\inF^{n\times n}\)</span> such that <span class="math display">\[B=P^{-1}AP\]</span></p><blockquote><p>Theorem:</p><p>Let <span class="math inline">\(T\in L(V)\)</span>, then the matriceswith different basisi are similar to each other.</p><p>Proof: <span class="math inline">\(V\in F^n\)</span> is a vectorspace. <span class="math inline">\((\vec a_1,...\vec a_n)\)</span> is abassi of V, and <span class="math inline">\(T\)</span> is an operator onV.</p><p>A is the matrix of T under basis <span class="math inline">\((\veca_1,...\vec a_n)\)</span> i.e. <span class="math inline">\(T(\veca_1,...\vec a_n)=(\vec a_1,...\vec a_n)A\)</span></p><p><span class="math inline">\((\vec b_1,...\vec b_n)\)</span> Isanother basis and B is the matrix under this basis <spanclass="math inline">\(T(\vec b_1,...\vec b_n)=(\vec b_1,...\vecb_n)B\)</span></p><p>Then we have an <strong>invertible</strong> matrix <spanclass="math inline">\(P\in F^{n\times n}\)</span> such that <spanclass="math inline">\((\vec b_1,..\vec b_n)=(\vec a_1,...\veca_n)P\)</span></p><p>Since <span class="math inline">\(T(\vec b_1,...\vec b_n)=T(\veca_1,...\vec a_n)P=(\vec a_1,...\vec a_n)AP=(\vec b_1,...\vecb_n)P^{-1}AP\)</span></p><p>we have <span class="math inline">\(B=P^{-1}AP\)</span></p></blockquote><blockquote><p>Remark:</p><p>Matrix similarity is an equvalance</p></blockquote><h4 id="functional"><a href="#media">Functional</a></h4><p>A <strong>linear functional</strong> on V is a linear map from V toF. In other words, a linear functional is an element of <spanclass="math inline">\(L(V,F)\)</span></p><p><u>Example</u></p><ul><li>Define <span class="math inline">\(\phi:R^3\to R\)</span> by <spanclass="math inline">\(\phi(x,y,z)=4x-5y+2z\)</span>. Then <spanclass="math inline">\(\phi\)</span> is a linear functional on <spanclass="math inline">\(R^3\)</span></li><li>Fix <span class="math inline">\((c_1,...,c_n)^T\in F^n\)</span>Define <span class="math inline">\(\phi:F^n\to F\)</span> by <spanclass="math inline">\(\phi=((x_1,...x_n)^T)=\sum_{i=1}^nc_ix_i\)</span></li><li>Define <span class="math inline">\(\phi:P(R)\to R\)</span> by <spanclass="math inline">\(\phi(p)=3p&#39;&#39;(5)+7p(4)\)</span>. Then <spanclass="math inline">\(\phi\)</span> is a linear functional on <spanclass="math inline">\(P(R)\)</span></li><li>Define <span class="math inline">\(\phi:P(R)\to R\)</span> by <spanclass="math inline">\(\phi(p)=\int_0^1\phi dx\)</span>. Then <spanclass="math inline">\(\phi\)</span> is a linear functional on <spanclass="math inline">\(P(R)\)</span></li></ul><h4 id="dual-space"><a href="#media">Dual Space</a></h4><p>The <strong>dual space</strong> of <spanclass="math inline">\(V\)</span>, denoted <spanclass="math inline">\(V&#39;\)</span>, is the <strong>vector space ofall linear functional on V</strong>. In other words, <spanclass="math inline">\(V&#39;=L(V,F)\)</span></p><blockquote><p>Theorem:</p><p>Suppose V is a finite dimensional. The <spanclass="math inline">\(V&#39;\)</span> is also finite-dimensional and<span class="math inline">\(dimV&#39;=dimV\)</span></p><p>Proof:</p><p><span class="math inline">\(dim(L(V,W))=dimV\cdot dimW\)</span></p><p><span class="math inline">\(dim(L(V,F))=dimV\cdot dimF\)</span></p><p><span class="math inline">\(dimV&#39;=dimV\)</span></p></blockquote><h4 id="dual-basis"><a href="#media">Dual Basis</a></h4><p>If <span class="math inline">\(\vec v_1,...\vec v_n\)</span> is abasis of V, then the <strong>dual basis</strong> of <spanclass="math inline">\(\vec v_1,...\vec v_n\)</span> is the list <spanclass="math inline">\(\vec\phi_1,...\vec\phi_n\)</span> of the elementsof <span class="math inline">\(V&#39;\)</span>, where each <spanclass="math inline">\(\phi_j\)</span> is the <strong>linear functionalon V</strong> such that <span class="math display">\[\phi_j(\vec v_k)=\begin{cases}1&amp;j=k\\0&amp;j‚â†k\end{cases}\]</span> <u>Example</u></p><p>What is the dual basis of the standard basis <spanclass="math inline">\(\vec e_1,...\vec e_n\)</span> of <spanclass="math inline">\(F^n\)</span>.</p><blockquote><p>Sol:</p><p>For <span class="math inline">\(1\leq j\leq n\)</span> , define <spanclass="math inline">\(\phi_j\)</span> to be the linear functional on<span class="math inline">\(F^n\)</span> and defined as <spanclass="math inline">\(\phi_j((x_1,x_2,...x_n)^T)=x_j\)</span></p><p>then <span class="math inline">\(\phi(\vece_k)=\begin{cases}1&amp;j=k\\0&amp;j‚â†k\end{cases}\implies\phi_j(\vece_j)\)</span></p></blockquote><blockquote><p>Theorem:</p><p>Suppose V is a finite-dimensional. Then the dual basis fo a basis ofV is a basis of <span class="math inline">\(V&#39;\)</span></p><p>Proof:</p><p>Suppose <span class="math inline">\(\vec v_1...\vec v_n\)</span> isthe basis of V. <spanclass="math inline">\(\vec\phi_1...\vec\phi_n\)</span> is the dualbasis.</p><p>Let <spanclass="math inline">\(\lambda_1\phi_1+\cdots+\lambda_n\phi_n=0\)</span>(Here 0 is a zero map), then we have <span class="math inline">\(\forallv\in V,0(v)=0\in F\)</span></p><p>Then <span class="math inline">\(\forallv_j,j=1...n,\lambda_1\phi_1(v_j)+\lambda_2\phi_2(v_j)+\cdots\lambda_j\phi_j(v_j)+\cdots\lambda_n\phi_n(v_j)\)</span>=0</p><p>Since only <span class="math inline">\(\phi_j(v_j)=1\)</span>, and<span class="math inline">\(\lambda_j\phi_j(v_j)=0\)</span></p><p><span class="math inline">\(\lambda_j=0,j=1...n\)</span>, thus, <spanclass="math inline">\(\phi_j\)</span> is linearly independent</p><p>Also <spanclass="math inline">\(dim(\phi_1...\phi_n)=n=dim(V&#39;)\)</span></p><p>Therefore, <span class="math inline">\(\phi_1...\phi_n\)</span> is abasis of <span class="math inline">\(V&#39;\)</span></p></blockquote><h4 id="dual-map"><a href="#media">Dual Map</a></h4><p>If <span class="math inline">\(T\in L(V,W)\)</span>, then the<strong>dual map</strong> of <span class="math inline">\(T\)</span> isthe linear map <span class="math inline">\(T&#39;\inL(W&#39;,V&#39;)\)</span> defined by <spanclass="math inline">\(T&#39;(\phi)=\phi\circ T\)</span> for <spanclass="math inline">\(\phi\in W&#39;\)</span></p><blockquote><p>Remark:</p><ul><li><span class="math inline">\(\phi \in W&#39;=L(W,F)\)</span>,different <span class="math inline">\(\phi\in W&#39;\)</span> as input,<span class="math inline">\(\phi\circ T\in V&#39;\)</span> as output,which means <span class="math inline">\(T&#39;(\phi)\in V&#39;\)</span>i.e. <span class="math inline">\(T&#39;(\phi):V\to F\)</span></li><li>If <span class="math inline">\(\phi,\psi\in W&#39;\)</span> then<span class="math inline">\(T&#39;(\phi+\psi)=(\phi+\psi)\circT=\phi\circ T+\psi\circ T=T&#39;(\phi)+T&#39;(\psi)\)</span></li><li>If <span class="math inline">\(\lambda\in F\)</span> and <spanclass="math inline">\(\phi \in W&#39;\)</span>, then <spanclass="math inline">\(T&#39;(\lambda\phi)=\lambda\phi\circT=\lambda(\phi\circ T)=\lambda T&#39;(\phi)\)</span></li></ul></blockquote><p><u>Example</u></p><p>Define <span class="math inline">\(D:P(R)\to P(R)\)</span> by <spanclass="math inline">\(Dp=p&#39;\)</span>. <spanclass="math inline">\(\phi\)</span> is linear functional on <spanclass="math inline">\(P(R)\)</span></p><p>Then if <span class="math inline">\(\phi(p)=p(3)\)</span>. Then <spanclass="math inline">\(D&#39;(\phi)\)</span> is the linear functional on<span class="math inline">\(P(R)\)</span> given by <spanclass="math inline">\((D&#39;(\phi))(p)=(\phi\circD)(p)=\phi(D(p))=\phi(p&#39;)=p&#39;(3)\)</span></p><h4 id="algebraic-properties-of-dual-maps"><a href="#media">AlgebraicProperties of Dual Maps</a></h4><ul><li><p><span class="math inline">\((S+T)&#39;=S&#39;+T,\forall S,T\inL(V,W)\)</span></p></li><li><p><span class="math inline">\((\lambda T)&#39;=\lambdaT&#39;,\forall \lambda\in F,T\in L(V,W)\)</span></p></li><li><p><span class="math inline">\((ST)&#39;=T&#39;S&#39;,\forall T\inL(U,V),S\in L(V,W)\)</span></p><ul><li><blockquote><p><spanclass="math inline">\((ST)&#39;(\phi)=\phi\circ(ST)=\phi\circ(S\circT)=(\phi\circ S)\circ T=T&#39;(\phi\circS)=T&#39;(S&#39;(\phi))=(T&#39;S&#39;)(\phi)\)</span></p></blockquote></li></ul></li></ul><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(T\in L(V,W)\)</span>. then <spanclass="math inline">\(M(T&#39;)=(M(T))^T\)</span> i.e.</p><p><span class="math inline">\(T:V\to W\)</span>, where <spanclass="math inline">\(\vec\alpha_1...\vec\alpha_n\)</span> is basis of<span class="math inline">\(V\)</span> and <spanclass="math inline">\(\vec\beta_1..\vec\beta_m\)</span> is the basis ofW</p><p><span class="math inline">\(T&#39;:W&#39;\to V&#39;\)</span>, where<span class="math inline">\(\vec\psi_1...\vec\psi_m\)</span> is thebasis of W' and <spanclass="math inline">\(\vec\phi_1...\vec\phi_n\)</span> is the basis ofV'</p><p>if <spanclass="math inline">\(A=M(T,(\vec\alpha_1...\vec\alpha_n),(\vec\beta_1...\vec\beta_m))\)</span></p><p>then <spanclass="math inline">\(A^T=M(T&#39;,(\vec\psi_1...\vec\psi_m),(\vec\phi_1...\vec\phi_n))\)</span></p></blockquote><h4 id="annihilator"><a href="#media">Annihilator</a></h4><p>For <span class="math inline">\(U\sub V\)</span>, the<strong>annihilator</strong> of <span class="math inline">\(U\)</span>,denoted <span class="math inline">\(U^0\)</span> is defined by <spanclass="math display">\[U^0=\{\phi\in V&#39;|\phi(u)=0,\forall u\in U\}\]</span> Note that here 0 is number.</p><p><u>Example</u></p><ul><li><p>Suppose <span class="math inline">\(U\)</span> is the subspace of<span class="math inline">\(P(R)\)</span> consisting of all polynomialmultiples of <span class="math inline">\(x^2\)</span>. IF <spanclass="math inline">\(\phi\)</span> is the linear functional on <spanclass="math inline">\(P(R)\)</span> defined by <spanclass="math inline">\(\phi(p)=p&#39;(0)\)</span>, show that <spanclass="math inline">\(\phi\in U^0\)</span></p><blockquote><p>Sol:</p><p>We have <span class="math inline">\(U=\{p(x)\inP(R)|p(x)=x^2g(x),g(x)\in p(x)\}\)</span></p><p>we need to show that <span class="math inline">\(\forall p\in U,\phi(p)=0\)</span></p><p><spanclass="math inline">\(\phi(p)=p&#39;(0)=(x^2g(x)&#39;)|_{x=0}=2xg(x)+x^2g&#39;(x)|_{x=0}=0\)</span></p></blockquote></li><li><p>Let <span class="math inline">\(e_1,e_2,e_3,e_4,e_5\)</span>denote the standard basisi of <span class="math inline">\(R^5\)</span>,and let <spanclass="math inline">\(\phi_1,\phi_2,\phi_3,\phi_4,\phi_5\)</span> denotethe dual basis of $(R^5)'. Suppose <span class="math display">\[U=span(e_1,e_2)\]</span> Show that <spanclass="math inline">\(U^0=span(\phi_3,\phi_4,\phi_5)\)</span></p><blockquote><p>Sol:</p><ol type="1"><li><p>we need to show <spanclass="math inline">\(span(\phi_3,\phi_4,\phi_5)\subseteq U^0\)</span>,then show that <span class="math inline">\(\forall\phi\inspan(\phi_3,\phi_4,\phi_5),\phi\in U^0\)</span></p><p>we have <spanclass="math inline">\(\phi=\lambda_3\phi_3+\lambda_4\phi_4+\lambda_5\phi_5\)</span></p><p><span class="math inline">\(\forall v\in U=span(e_1,e_2),v=\lambda_1e_1+\lambda_2e_2\)</span></p><p><spanclass="math inline">\(\phi(v)=\phi(\lambda_1e_1+\lambda_2e_2)=\lambda_1\phi(e_1)+\lambda_2\phi(e_2)=\lambda_1(\lambda_3\phi_3(e_1)+\lambda_4\phi_4(e_1)+\lambda_5\phi_5(e_1))+\lambda_2(\lambda_3\phi_3(e_1)+\lambda_4\phi_4(e_1)+\lambda_5\phi_5(e_1))\)</span></p><p>Since <spanclass="math inline">\(\phi_3(e_1)=\phi_4(e_1)=\phi_5(e_1)=0\)</span></p><p><span class="math inline">\(\phi(v)=0\in U^0\)</span></p></li><li><p>We need to show <spanclass="math inline">\(span(\phi_3,\phi_4,\phi_5)\subseteq U^0\)</span>,then show that <span class="math inline">\(\forall \phi\in U^0, \phi\inspan(\phi_3,\phi_4,\phi_5)\)</span></p><p>Since <span class="math inline">\(\phi\in U^0\subseteq(R^5)&#39;,\phi=\lambda_1\phi_1(e_1)+\lambda_2\phi_2(e_1)+\lambda_3\phi_3(e_1)+\lambda_4\phi_4(e_1)+\lambda_5\phi_5(e_1)\)</span></p><p>Since only <spanclass="math inline">\(\phi_1(e_1)=1,\phi_2(e_2)=1\)</span>, but <spanclass="math inline">\(\phi(e_1)=0,\phi(e_2)=0\)</span> since <spanclass="math inline">\(\phi\in U^0\)</span> , we have <spanclass="math inline">\(\lambda_1=0,\lambda_2=0\)</span></p><p>Thus, <spanclass="math inline">\(\phi=span(\phi_3,\phi_4,\phi_5)\)</span></p><p>Then we will find that:</p><p><span class="math inline">\(V:e_1,e_2,e_3,e_4,e_5\)</span></p><p><spanclass="math inline">\(V&#39;:\phi_1,\phi_2,\phi_3,\phi_4,\phi_5\)</span></p><p><span class="math inline">\(e_1,e_2,\in U,\phi_1\phi_2\inU&#39;,\phi_3\phi_4\phi_5\in U^0\)</span></p><p><span class="math inline">\(dimV=dimU+dimU^0=2+3=5\)</span></p></li></ol></blockquote><blockquote><p>Theorem:</p><p>Suppose V is finite-dimensional and U is subspace of V. Then <spanclass="math display">\[dimU+dimU^0=dimV=dimV&#39;\]</span> Note:</p><p><span class="math inline">\(U\subseteq V,U^0\subseteqV&#39;\)</span>. They are in difference spaces.</p></blockquote><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(U\subseteq V\)</span>. then <spanclass="math inline">\(U^0\)</span> is a subsapce of <spanclass="math inline">\(V&#39;\)</span>.</p></blockquote></li></ul><h4 id="the-null-space-of-t"><a href="#media">The Null Space ofT'</a></h4><p>For <span class="math inline">\(T&#39;\in(L(W&#39;,V&#39;))\)</span>‚Äã<span class="math display">\[Null(T&#39;)=\{\phi\in W&#39;.T&#39;(\phi)=0(zero\ map)\}=\{\phi\inW&#39;,\forall v\in V,\phi(T(v))=0\}\subseteq W&#39;\]</span></p><blockquote><p>Theorem:</p><p>Suppose V and W are finite-dimensional and <spanclass="math inline">\(T\in L(V,W)\)</span>. Then,</p><ul><li><span class="math inline">\(NullT&#39;=(RangeT)^0\)</span></li><li><spanclass="math inline">\(dim(NullT&#39;)=dim((RangeT)^0)=dimW-dim(RangeT)=dim(NullT)+dimW-dimV\)</span></li></ul></blockquote><p><img src="Math 305 Advanced Linear Algebra/image-20211201081836911.png" alt="image-20211201081836911" style="zoom:25%;" /></p><blockquote><p>Theorem:</p><p>Suppose V and W are finite-diemensional and <spanclass="math inline">\(T\in L(V,W)\)</span>.Then <spanclass="math inline">\(T\)</span> is <strong>surjective</strong> if andonly if <span class="math inline">\(T&#39;\)</span> is injective.</p></blockquote><h4 id="the-range-space-of-t"><a href="#media">The Range Space ofT'</a></h4><p>For <span class="math inline">\(T&#39;\in L(V,W)\)</span> <spanclass="math display">\[Range(T&#39;)=\{T&#39;(\phi)|\forall \phi\in W&#39;\}\subseteq V&#39;\]</span><img src="Math 305 Advanced Linear Algebra/Êà™Â±è2021-12-01 ‰∏äÂçà8.22.05.png" alt="Êà™Â±è2021-12-01 ‰∏äÂçà8.22.05" style="zoom:25%;" /></p><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(V\)</span> and <spanclass="math inline">\(W\)</span> are finite-dimensional and <spanclass="math inline">\(T\in L(V,W)\)</span>. Then,</p><ul><li><span class="math inline">\(dimRangeT&#39;=dimRangeT\)</span></li><li><span class="math inline">\(RangT&#39;=(NullT^0)\)</span></li></ul></blockquote><blockquote><p>Theorem:</p><p>Suppose V and W are finite-dimensional and <spanclass="math inline">\(T\in L(V,W)\)</span>.Then <spanclass="math inline">\(T\)</span> is <strong>injective</strong> if andonly if <span class="math inline">\(T&#39;\)</span> is<strong>surjective</strong><img src="Math 305 Advanced Linear Algebra/IMG_8EC4C15E9609-1.jpeg" alt="IMG_8EC4C15E9609-1" style="zoom: 50%;" /></p></blockquote><h4 id="rank-and-nullity-1"><a href="#media">Rank and Nullity</a></h4><p><img src="Math 305 Advanced Linear Algebra/Êà™Â±è2021-12-01 ‰∏äÂçà10.16.20.png" alt="Êà™Â±è2021-12-01 ‰∏äÂçà10.16.20" style="zoom: 50%;" /></p><h3 id="norm-and-vector-space"><a href="#media">3.5 Norm and VectorSpace</a></h3><h4 id="norm-definition"><a href="#media">Norm Definition</a></h4><p>A <strong>norm</strong> on vector space <spanclass="math inline">\(V\)</span> is a <strong>real-valued</strong>function <span class="math inline">\(\Vert\cdot\rVert:V\to \R\)</span>that satisfies the following properties:</p><ul><li>Nonnegativity: <span class="math inline">\(\lVert v\rVert\geq0,\forall v\in V\)</span>, equality holds if and only if <spanclass="math inline">\(\vec v=\vec 0\)</span></li><li>Homogeneity: <span class="math inline">\(\lVert s\vecv\rVert=|s|\lVert\vec v\rVert,\forall \vec v\in V,s\in F\)</span></li><li>Triangular Inequality: <span class="math inline">\(\lVert\vec v+\vecw\rVert\leq\lVert\vec v\rVert+\lVert\vec w\rVert,\forall \vec v,\vecw\in V\)</span></li></ul><blockquote><p>Remark:</p><ul><li>Avector space V with norm <spanclass="math inline">\(\lVert\cdot\rVert:V\to \R\)</span> is callednormed vector space.</li><li>The concept of norm is closely related to that of a matrix. Forinstance, a metric can be defined from any norm. Let <spanclass="math inline">\(\lVert\vec v\rVert\)</span> be a norm on vectorspace V, then <span class="math inline">\(d(v,w)=\lVert \vec v-\vecw\rVert\)</span> is the mertric(distance ) induced by the norm.</li></ul></blockquote><p><u>Example</u></p><ul><li><p>Standard norms for <span class="math inline">\(\R^n\)</span> and<span class="math inline">\(\C^n\)</span></p><ul><li><span class="math inline">\(l^1\)</span> norm: <spanclass="math inline">\(\lVert\vec v \rVert_1=\sum_{i=1}^n|\vecv_i|\)</span></li><li><span class="math inline">\(l^p\)</span> norm: <spanclass="math inline">\(\lVert\vec v \rVert_p=(\sum_{i=1}^n|\vecv_i|^p)^{\frac{1}{p}}\)</span></li><li><span class="math inline">\(l^{\infty}\)</span> norm: <spanclass="math inline">\(\lVert\vec v \rVert_{\infty}=max_{i=1...n}\{\vecv_i\}\)</span></li></ul></li><li><p>Standard norms for the vector space of function from <spanclass="math inline">\([a,b]\)</span> to <spanclass="math inline">\(\R\)</span></p><ul><li><span class="math inline">\(L^1\)</span> norm: <spanclass="math inline">\(\lVert f(t)\rVert_1=\int_a^b|f(t)|dt\)</span></li><li><span class="math inline">\(L^p\)</span> norm: <spanclass="math inline">\(\lVertf(t)\rVert_p=(\int_a^b|f(t)|^pdt)^{\frac{1}{p}}\)</span></li><li><span class="math inline">\(L^\infty\)</span> norm: <spanclass="math inline">\(\lVertf(t)\rVert_\infty=essup_{[a,b]}\{|f(t)|\}\)</span></li></ul><p>Note that here the integral notation refers to the <strong>Lebesgueintegral</strong> instead of the Riemann integral</p></li><li><p>Consider vectors in <span class="math inline">\(\R^n\)</span>with the Euclidean metric <spanclass="math inline">\(d(v,w)=\sqrt{\sum_{i=1}^n(v_i-w_i)^2}\)</span>.Let <span class="math inline">\(\bar d(v,w)=min\{d(v,w),1\}\)</span> anddefine <span class="math inline">\(f(v)=\bar d(v,0)\)</span>. Is <spanclass="math inline">\(f\)</span> a norm?</p><blockquote><p>Sol:</p><p>We know that <spanclass="math inline">\(f(v)=min(d(v,0),1)\)</span></p><p>Checking homogeneity to see if <span class="math inline">\(f(\lambdav)=|\lambda|f(v)\)</span></p><p><span class="math inline">\(f(\lambda v)=min(d(\lambdav,0),1)=min(|\lambda|d(v,0),1)\)</span> (This is becasue the homogeneityis satisfied for <span class="math inline">\(d(v,w)\)</span>)</p><p><span class="math inline">\(\lambda f(v)=\lambdamin(d(v,0),1)\)</span></p><p>Let <span class="math inline">\(\vec v=\vec e,\lambda=2\)</span> then<span class="math inline">\(\begin{cases}f(2\vec e)=min(2d(\vece,0),1)=1\\2f(\vec e)=2\end{cases}\)</span>, meaning that <spanclass="math inline">\(f\)</span> is not a norm.</p></blockquote></li></ul><h4 id="complete-normed-spaces"><a href="#media">Complete NormedSpaces</a></h4><p>A vector <span class="math inline">\(\vec v\in V\)</span> is said tobe <strong>normalized</strong> if <span class="math inline">\(\Vert\vecv\rVert=1\)</span>. Any <strong>nonzero</strong> vector could benormalized by <span class="math display">\[\vec u=\frac{\vec v}{\lVert \vec v\rVert}\]</span> has norm <span class="math inline">\(\lVert \vecu\rVert=1\)</span>. A normalized vector is also referred to as a<strong>unit vector</strong>.</p><h3 id="operator-norms"><a href="#media">3.6 Operator Norms</a></h3><p><strong>Supermum:</strong> least upper bound, <spanclass="math inline">\(supX\)</span>.</p><ul><li>The smallest extended real number <span class="math inline">\(M\in\R\cup\{-\infty,\infty\}\)</span> such that <spanclass="math inline">\(x\leq M,\forall x\in X\)</span>.</li><li>It is always well-defined and equals <spanclass="math inline">\(-\infty\)</span> if <spanclass="math inline">\(X=\empty\)</span></li></ul><p><strong>Maximum:</strong> the largest value achieved by the set.</p><ul><li>It equals <span class="math inline">\(supX\)</span> If <spanclass="math inline">\(supX\in X\)</span></li></ul><p><strong>Infimum:</strong> greatest lower bound, <spanclass="math inline">\(infX\)</span></p><ul><li>The largest extended real number <spanclass="math inline">\(m\in\R\cup\{-\infty,\infty\}\)</span> such that<span class="math inline">\(x\geq M,\forall x\in X\)</span></li><li>It is always well-defiend and equals <spanclass="math inline">\(\infty\)</span> if <spanclass="math inline">\(X=\empty\)</span></li></ul><p><strong>Minimum:</strong> the smallest value achieved by the set.</p><ul><li>It equals <span class="math inline">\(infX\)</span> if <spanclass="math inline">\(infX\in X\)</span></li></ul><p><u>Example</u></p><ul><li><spanclass="math inline">\(E_1=(1,\frac{1}{2},\frac{1}{3},...\frac{1}{n},...),\begin{cases}maxE_1=1\\minE_1=NA\\infE_1=0\\supE_1=1\end{cases}\)</span></li><li><span class="math inline">\(E_4=\{x\in\R|0&lt;x\leq1\},\begin{cases}maxE_4=1\\minE_4=NA\\infE_4=0\\supE_4=1\end{cases}\)</span></li></ul><h4 id="induced-operator-norm"><a href="#media">Induced OperatorNorm</a></h4><p>Let <span class="math inline">\(V\)</span> and <spanclass="math inline">\(W\)</span> be two normed vector spaces and let<span class="math inline">\(T:V\to W\)</span> be a lineartransformation. The <strong>induced operator norm</strong> of <spanclass="math inline">\(T\)</span> is defiend as <spanclass="math display">\[\lVert T\rVert=sup_{v\in V-\{0\}}\frac{\lVert Tv\rVert}{\lVertv\rVert}=sup_{v\in V,\lVert v\rVert=1}\lVert T v\rVert=sup_{\lVertu\rVert=1}\lVert Tu\rVert_w\]</span></p><blockquote><p>Proof:</p><p><span class="math inline">\(\lVert T\rVert=sup_{v\inV-\{0\}}\frac{\lVert Tv\rVert}{\lVert v\rVert}=sup_{v\in V-\{0\}}\lVertT\frac{v}{\lVert v\rVert_V}\rVert_W\)</span></p><p>Let <span class="math inline">\(u=\frac{v}{\lVert v\rVert},\lVert u\rVert=1\)</span>, we have <spanclass="math inline">\(Tu=\frac{Tv}{\lVert v\rVert_V}\)</span></p></blockquote><blockquote><p>Remark:</p><p>Induced operator norm inequation: <span class="math display">\[\lVert Tu\rVert\leq\lVert T\rVert\lVert u\rVert\]</span></p></blockquote><p>For the space $L(V,V) $ of linear operators on <spanclass="math inline">\(V\)</span>, a norm is called<strong>submultiplicative</strong> if <span class="math inline">\(\lVertTU\rVert\leq\lVert T\rVert\lVert U\rVert,\forall T,U\inL(V,V)\)</span></p><blockquote><p>Remark:</p><p>The <strong>induced operator norm inequality</strong> shows that allinduced operator norms are submultiplicative beacuse <spanclass="math display">\[\lVert UTu\rVert\leq \lVert U\rVert\lVert Tu\rVert\leq\lVertU\rVert\lVert T\rVert\lVert u\rVert\]</span></p></blockquote><p>Because for any linear functional <spanclass="math inline">\(\varphi\)</span>, we have <spanclass="math inline">\(\operatorname{dim}\operatorname{range}\varphi \leq\operatorname{dim}\mathbb{F} = 1\)</span></p><h4 id="matrix-norm"><a href="#media">Matrix Norm</a></h4><p>A norm of a vector space of matrices is called a matrix norm.</p><p>For <span class="math inline">\(A\in F^{m\times n}\)</span>, themaxtrix norm induced by the <span class="math inline">\(l^p\)</span>vector norm <span class="math inline">\(\lVert\cdot\rVert_p\)</span> is<span class="math display">\[\lVert A\rVert_p=max_{\lVert\vec v\rVert_p}\lVert A\vec v \rVert_p\]</span> In special cases:</p><ul><li><span class="math inline">\(\lVert A\rVert_\infty=max_{\lVert\vecv\rVert_\infty}\lVert A\vec v \rVert_\infty=max_i\sum_j|a_{ij}|\)</span>(Max row sum)</li><li><span class="math inline">\(\lVert A\rVert_1=max_{\lVert\vecv\rVert_1}\lVert A\vec v \rVert_1=max_j\sum_i|a_{ij}|\)</span> (Maxcolumn sum)</li><li><span class="math inline">\(\lVert A\rVert_2=\sqrt{\rho(A^HA)}\)</span>, where <span class="math inline">\(\rho(B)\)</span> is themaximum absolute value of all eigenvalues</li><li><span class="math inline">\(\lVertA\rVert_F=(\sum_i^n\sum_j^m|a_{ij}|^2)^{\frac{1}{2}}\)</span> (Frobeniusnorm / Euclidean norm)</li></ul><p><u>Example</u></p><p><spanclass="math inline">\(A=\begin{bmatrix}1&amp;1\\2&amp;1\end{bmatrix}\)</span>,then <spanclass="math inline">\(A^TA=\begin{bmatrix}5&amp;3\\3&amp;2\end{bmatrix}\)</span>and the eigenvalues of this matrix are <spanclass="math inline">\(\sigma_1^2=6.8541,\sigma_2^2=0.1459\)</span></p><ul><li><span class="math inline">\(\lVertA\rVert_\infty=max(2,3)=3\)</span></li><li><span class="math inline">\(\lVertA\rVert_1=max(3,2)=3\)</span></li><li><span class="math inline">\(\lVertA\rVert_2=\sqrt{max(\sigma_1^2,\sigma_2^2)}\)</span></li><li><span class="math inline">\(\lVertA\rVert_F=\sqrt{1^2+1^2+2^2+1^2}=\sqrt7=\sqrt{\sigma_1^2+\sigma_2^2}\)</span></li></ul><h4 id="coordinate-system"><a href="#media">Coordinate System</a></h4><p>Let <span class="math inline">\(\{\vec v_1,\vec v_2...\vecv_n\}\)</span> be a basis for the n dimensional vector space V, then forany vector <span class="math inline">\(\vec w\in V\)</span> can beexpressed <strong>uniquely</strong> as <span class="math display">\[\vec w=\sum_{i=1}^ns_i\vec v_i\]</span> Ordering this set <spanclass="math inline">\((v_1,v_2,...v_n)\)</span> allows the first elementin the coordinate vector to be associated with the first vector in ourbasis and so on.</p><p>If <span class="math inline">\(V\)</span> is a finite-dimensionalvector space, an <strong>ordered basis</strong> for V is a finite set ofvectors that <strong>is linearly independent and spans V</strong>.</p><p>The <strong>ordered basis</strong> <spanclass="math inline">\(B\)</span>, denoted by <spanclass="math inline">\((\vec v_1,...\vec v_n)\)</span> defines the setand <strong>a spcific ordering of the vectors</strong>. Based on thisordered basis, a vector <span class="math inline">\(v\in V\)</span> canbe <strong>unambiguously </strong> represneted as an <spanclass="math inline">\(n-tuple(s_1,...,s_n)\in F^n\)</span> such that<span class="math display">\[\vec v=\sum_n^i s_i\vec v_i\]</span> For a finite-dimensional vector space V with <strong>orderedspace</strong> <span class="math inline">\(B=(\vec v_1,...\vecv_n)\)</span>, the <strong>coordinate vector</strong> of <spanclass="math inline">\(\vec v\in V\)</span> is denoted by <spanclass="math inline">\([\vec v]_B\)</span> and equals the <strong>uniquevector</strong> <span class="math inline">\(\vec s=F^n\)</span> suchthat <span class="math display">\[\vec v=\sum_i^n s_i\vec v_i\]</span> <u>Example</u></p><p>Suppose that <span class="math inline">\(A=\vec v_1,...\vecv_n\)</span> is an ordered basis for V. Let <spanclass="math inline">\(P\)</span> be an <spanclass="math inline">\(n\times n\)</span> invertible matrix. Show thatthere exists an ordered basisi <span class="math inline">\(B=\vecw_1,...\vec w_n\)</span> for <span class="math inline">\(V\)</span> suchthat <span class="math inline">\([u]_A=[u]_B\)</span></p><blockquote><p>Sol:</p><p>Let <span class="math inline">\((\vec w_1,...\vec w_n)=(\vecv_1,...\vec v_n)P\)</span></p><p>then we have <span class="math inline">\(\vec u=(\vec v_1,...\vecv_n)[\vec u]_A\\=(\vec w_1,...\vec w_n)P^{-1}[\vec u]_A\)</span></p><p>Since <span class="math inline">\(\vec u=(\vec w_1,...\vec w_n)[\vecu]_B\)</span></p><p>We have <span class="math inline">\([\vec u]_B=P^{-1}[\vecu]_A\)</span></p><p>Which means <span class="math inline">\([\vec u]_A=P[\vecu]_B\)</span></p><p>More spcifically:</p><p><span class="math inline">\(A=(1,x,x^2),B=(1,x+x^2),x^2\)</span></p><p>We have <spanclass="math inline">\((1,x+x^2,x^2)=(1,x,x^2)\begin{bmatrix}1&amp;0&amp;0\\0&amp;1&amp;0\\0&amp;1&amp;1\end{bmatrix}\)</span></p><p>Suppose <span class="math inline">\(\vecv=1+3x+5x^2=(1,x,x^2)(1,3,5)^T,[\vec v]_A=(1,3,5)^T\)</span></p><p>we have <span class="math inline">\(\vec v=(1,x+x^2,x^2)(1,3,2)^T,[\vec v]_B=(1,3,2)^T\)</span></p><p>then we can verify that <span class="math inline">\([\vec v]_A=P[\vecv]_B\)</span></p></blockquote><h3 id="inner-products"><a href="#media">3.7 Inner Products</a></h3><h4 id="definition-7"><a href="#media">Definition</a></h4><p>Let <span class="math inline">\(F\)</span> be the field of<strong>real number </strong> or the field of <strong>complexnumbers</strong>, and assume <span class="math inline">\(V\)</span> is avector space over <span class="math inline">\(F\)</span>. An<strong>inner product</strong> on <span class="math inline">\(V\)</span>is a <strong>function</strong> which assigns to each ordered pair ofvectors <span class="math inline">\(\vec v,\vec w\in V\)</span> a<strong>saclar</strong> <span class="math inline">\(&lt;\vec v,\vecw&gt;\in F\)</span> in such a way that for all <spanclass="math inline">\(\vec u,\vec v,\vec w\in V,\forall s\inF\)</span>:</p><ul><li><span class="math inline">\(&lt;\vec v,\vec v&gt;\geq0,\forall \vecv\in V\)</span> with equality iff <span class="math inline">\(\vecv=0\)</span></li><li><span class="math inline">\(&lt;\vec u,\vec v,\vec w&gt;=&lt;\vecu,\vec w&gt;+&lt;\vec v,\vec w&gt;\)</span></li><li><span class="math inline">\(&lt;\lambda \vec v,\vecw&gt;=\lambda&lt;\vec v,\vec w&gt;\)</span></li><li><span class="math inline">\(&lt;\vec v,\vec w&gt;=\overline{&lt;\vecw,\vec v&gt;}\)</span></li></ul><blockquote><p>Remark:</p><ul><li><p><span class="math inline">\(&lt;\lambda \vec v_1 + \vec v_2, \vecw&gt;=\lambda&lt;\vec v_1,\vec w&gt;+&lt;\vec v_2,\vecw&gt;\)</span></p></li><li><p><span class="math inline">\(&lt;\vec v,s\vec w_1+\vecw_2&gt;=\overline{s}&lt;\vec v,\vec w_1&gt;+&lt;\vec v,\vecw_2&gt;\)</span></p><p><spanclass="math inline">\(&lt;u,v+w&gt;=\overline{&lt;v+w,u&gt;}=\overline{&lt;v,u&gt;+&lt;w,u&gt;}=\overline{&lt;v,u&gt;}+\overline{&lt;w,u&gt;}=&lt;u,v&gt;+&lt;u,w&gt;\)</span></p><p><spanclass="math inline">\(&lt;v_1,sv_2&gt;=\overline{s}&lt;v_1,v_2&gt;\)</span></p></li></ul></blockquote><p><u>Example</u></p><ul><li><p>The <strong>Eucliden inner product</strong> on <spanclass="math inline">\(F^n\)</span> is defined by <spanclass="math display">\[&lt;(w_1,...w_n)^T,(z_1,...z_n)^T&gt;=w_1\overline{z_1}+\cdotsw_n\overline{z_n}\]</span> For column vector, <spanclass="math inline">\(&lt;v,w&gt;=w^H\cdot v\)</span></p></li><li><p>The <strong>inner product on a function space</strong> is: let Vbe the vector space os all continuous complex-values functions on theunit interval <span class="math inline">\([0,1]\)</span>. Then thefollowubng denotes an inner product <span class="math display">\[&lt;f,g&gt;=\int_0^1 f\overline{g}dx\]</span></p><blockquote><p>Proof:</p><p>other proves are simple, note this one:</p><p><span class="math inline">\(&lt;\overline{g,f}&gt;=\overline{\int_0^1g\bar{f}dx}=\int_0^1 f\overline{g}dx=&lt;f,g&gt;\)</span></p></blockquote></li></ul><h4 id="orthogonal"><a href="#media">Orthogonal</a></h4><p>Two vectors <span class="math inline">\(\vec u.\vec v\in V\)</span>are called <strong>orthogonal</strong> if <spanclass="math inline">\(&lt;\vec u,\vec v&gt;=0\)</span></p><blockquote><p>Remark:</p><ul><li><span class="math inline">\(\vec 0\)</span> is orthogonal to everyvector in V</li><li><span class="math inline">\(\vec 0\)</span> is the only vector in Vthat is orthogonal to itself</li></ul></blockquote><h4 id="inner-products-and-matrix"><a href="#media">Inner Products andMatrix</a></h4><blockquote><p>Theorem:</p><p>Let V be a finite-dimensional vector space, and suppose that <spanclass="math inline">\(B=w_1,...w_n\)</span> is an ordered basis for V.Any inner product on V is determiend by the values <spanclass="math inline">\(G_{ij}=&lt;w_j,w_i&gt;\)</span> that is takes onpairs of vectors in B.</p><p>Proof:</p><p>Let <span class="math inline">\(\vec u,\vec v\in V, \vecu=\sum_{j=1}^Ns_j\vec w_j,\vec v=\sum_{i=1}^n t_i\vec w_i,[\vecu]_A=\begin{bmatrix}s_1\\ \vdots\\s_n\end{bmatrix},[\vecv]_A=\begin{bmatrix}t_1\\\vdots\\t_n\end{bmatrix}\)</span></p><p><span class="math inline">\(&lt;\vec u,\vecv&gt;=&lt;\sum_{i=1}^ns_jw_j,\sum_{i=1}^nt_iw_i&gt;\\=\sum_{j=1}^ns_j&lt;w_j,\sum_{j=1}^nt_iw_i&gt;\\=\sum_{i=1}^n\sum_{j=1}^ns_j\bar{t_i}&lt;w_j,w_i&gt;\\=(\bar t_1,...\bart_n)G\begin{bmatrix}s_1\\\vdots\\s_n\end{bmatrix}\\=[\vec v]_A^H G[\vecu]_A\)</span></p></blockquote><blockquote><p>Remark:</p><ul><li>The matrix G is called the <strong>weight (Gram) matrix</strong> ofthe inner product in the ordered basis B.</li><li><span class="math inline">\(G=G^H\LongleftrightarrowG_{ij}=&lt;w_i,w_j&gt;=\overline{&lt;w_j,w_i&gt;}=\overline{G_{ji}}\)</span></li><li>For any <span class="math inline">\(\vec x\in F^n,\vec x^HG\vecx\geq 0\)</span>, with equality iff <span class="math inline">\(\vecx=0\)</span> (<strong>positive defiend</strong>)</li></ul></blockquote><blockquote><p>Theorem: If <span class="math inline">\(S\in F^{n,n}\)</span> is apositive defined, <spanclass="math inline">\(A=(\alpha_1,...\alpha_n)\)</span> is a basis ofvector space V, for any <span class="math inline">\(\alpha,\beta\inV\)</span> with coordinates x,y,under basis <spanclass="math inline">\((\alpha_1,...\alpha_n)\)</span>, then the dunction<span class="math inline">\(&lt;\alpha,\beta&gt;\)</span> defined as<span class="math inline">\(&lt;\alpha,\beta&gt;=y^HGx\)</span> is ainner product,a nd under this basis the Grame matrix is S. <spanclass="math display">\[f(\alpha,\beta)=[\beta]^H_AG[\alpha]_A\]</span> Remark:</p><p>For finte-dimensional vector space <spanclass="math inline">\(V^n\)</span> and basis <spanclass="math inline">\((\alpha_1,...\alpha_n)\)</span>, we define afunction <span class="math inline">\(\sigma:&lt;\alpha,\beta&gt;\toG\)</span>. then the previous throem show that this function is a<strong>injection and surjection</strong>.</p></blockquote><h4 id="induced-norm"><a href="#media">Induced Norm</a></h4><p>Let V be an inner-product space with inner product <spanclass="math inline">\(&lt;\cdot&gt;\)</span>. This inner productnatrually denotes the <strong>induced norm</strong> <spanclass="math display">\[\lVert u\rVert^2=&lt;u,u&gt;\]</span> <strong>Projection:</strong></p><p>Let <span class="math inline">\(w,v\)</span> be vectors in aninner-product space V with inner product <spanclass="math inline">\(&lt;\cdot&gt;\)</span>. The<strong>projection</strong> of <span class="math inline">\(w\)</span>onto <span class="math inline">\(v\)</span> is defined to be (projectionof <span class="math inline">\(\vec w\)</span> on <spanclass="math inline">\(\vec v\)</span> with direction <spanclass="math inline">\(\vec v\)</span>) <span class="math display">\[u=\frac{&lt;w,v&gt;}{\lVert v\rVert}(norm/length)\frac{v}{\lVertv\rVert}(direction)\]</span></p><blockquote><p>Lemma:</p><p>Let <span class="math inline">\(u\)</span> be the projection of <spanclass="math inline">\(w\)</span> onto <spanclass="math inline">\(v\)</span>. Then <spanclass="math inline">\(&lt;w-u,u&gt;=0\)</span> and <spanclass="math inline">\(\lVert w\rVert^2=\lVert u\rVert^2+\lVertw-u\rVert^2\)</span></p><p>Proof:</p><p><span class="math inline">\(\lVertw\rVert=&lt;w,w&gt;=&lt;u+(w-u),u+(w-u)&gt;=&lt;u,u&gt;+&lt;w-u,u&gt;+&lt;u,w-u&gt;+&lt;w-u,w-u&gt;=\lVertu\rVert^2+\lVert w-u\rVert^2\)</span></p></blockquote><blockquote><p>Cauchy-Schwarz Inqeuality:</p><p>Suppose <span class="math inline">\(\vec u,\vec v\in V\)</span>, then<span class="math inline">\(|&lt;\vec u,\vec v&gt;|\leq \lVert\vecu\rVert\lVert\vec v\rVert,|&lt;\vec u,\vec v&gt;|^2\leq &lt;\vec u,\vecu&gt;&lt;\vec v,\vec v&gt;\)</span>. This inequality is an equality ifand only if <span class="math inline">\(\vec u=\lambda\vec v\)</span>for some <span class="math inline">\(\lambda \in F\)</span></p><p>Proof:</p><p>if <span class="math inline">\(\vec v=0,or\ \vec u=0\)</span>, thenit is true</p><p>if <span class="math inline">\(\vec v\not=0,\vec u\not=0\)</span>,then we have, by Orthogonal Decomposition,</p><p><span class="math inline">\(\vec u=\frac{&lt;\vec u,\vecv&gt;}{\lVert \vec v\rVert^2}\vec v+\vec w\)</span>, where <spanclass="math inline">\(\vec w\)</span> is the residual, <spanclass="math inline">\(&lt;\vec v,\vec w&gt;=0\)</span></p><blockquote><p>Orthogonal Decomposition:</p><p>Suppose <span class="math inline">\(\vec w,\vec v\in V\)</span>, with<span class="math inline">\(\vec v\not=0,\)</span> then <spanclass="math display">\[\vec w=c\vec v(projection)+\vec u(residual),with\ c=\frac{&lt;\vecw,\vec v&gt;}{\lVert \vec v\rVert^2},and\ &lt;\vec u,\vec v&gt;=0\]</span></p></blockquote><p>then <span class="math inline">\(\lvert \vec u\rVert^2=\lVert\frac{&lt;\vec u,\vec v&gt;}{\lVert\vec v\rVert^2}\vecv\rVert^2+\lVert\vec w\rVert^2\\=\frac{|&lt;\vec u,\vec v&gt;|^2}{\lVert\vec v\rVert^2}+\lVert\vec w\rVert^2\geq \frac{|&lt;\vec u,\vecv&gt;|^2}{\lVert \vec v\rVert^2}\)</span>, by Pythagorean Theorem</p><blockquote><p>Pythagorean theorem:</p><p>Suppose <span class="math inline">\(\vec u,\vec v\)</span> areorthogonal vectors in V. Then <span class="math display">\[\lVert\vec u+\vec v\rVert^2=\lVert\vec u\rVert^2+\lVert\vec v\lVert^2\]</span></p></blockquote><p>Then, <span class="math inline">\(|&lt;\vec u,\vecv&gt;|^2\leq\lVert\vec u\rVert^2\cdot\lVert\vecv\rVert^2\implies|&lt;\vec u,\vec v&gt;|\leq\lVert\vecu\rVert\cdot\lVert\vec v\rVert\)</span></p><p>The equality is true when <span class="math inline">\(\lVert\vecw\rVert^2=0\)</span></p></blockquote><p><u>Example:</u></p><ul><li><p>If <span class="math inline">\((x_1,x_2...,x_n),(y_1,...y_n)\inR^n\)</span> then <span class="math display">\[|&lt;\vec x,\vecy&gt;|^2=|x_1y_1+...+x_ny_n|^2\leq(x_1^2+...x_n^2)\cdot(y_1^2+...+y_n^2)\]</span></p></li><li><p>If <span class="math inline">\(f\)</span> and <spanclass="math inline">\(g\)</span> are continous real-valuesd functions on<span class="math inline">\([-1,1]\)</span> then <spanclass="math display">\[|&lt;f,g&gt;|^2=|\int_{-1}^1fgdx|^2\leq|\int_{-1}^1f^2dx||\int_{-1}^1g^2dx|=&lt;f,f&gt;\cdot&lt;g,g&gt;=\lVertf\rVert^2\lVert g\rVert^2\]</span></p></li></ul><h4 id="inner-product-and-norm"><a href="#media">Inner Product andNorm</a></h4><p>If <span class="math inline">\(V\)</span> is an inner-product spaceover <span class="math inline">\(F\)</span> and <spanclass="math inline">\(\lVert\vec v \rVert=\sqrt{&lt;\vec v,\vecv&gt;}\)</span>, then for any <span class="math inline">\(\vec v,\vecw\in V\)</span> and any <span class="math inline">\(s\in F\)</span></p><ul><li><span class="math inline">\(\lVert s\vec v\rVert=|s|\lVert\vecv\rVert\)</span></li><li><span class="math inline">\(\lVert\vec v \rVert\geq 0,for\ \vecv‚â†0\)</span></li><li><span class="math inline">\(|&lt;\vec v,\vec w&gt;|\leq \lVert\vecv\rVert\lVert\vec w\rVert\)</span> with equality iff <spanclass="math inline">\(\vec v=0,\vec w=0,or\ \vec v=s\vec w\)</span></li><li><span class="math inline">\(\lVert\vec v+\vec w\rVert\leq \lVert\vecv\rVert+\lVert\vec w\rVert\)</span> with equality iff <spanclass="math inline">\(\vec v=0,\vec w=0,or\ \vec v=s\vec w\)</span></li></ul><h3 id="sets-of-orthogonal-vectors"><a href="#media">3.8 Sets ofOrthogonal Vectors</a></h3><h4 id="orthonormal"><a href="#media">Orthonormal</a></h4><p>A list of vectors is called <strong>orthonormal</strong> if eachvectors in the list has <strong>norm 1</strong> and is<strong>orthogonal to all the other vectors in the list</strong>. Inother words, a list of <span class="math inline">\(e_1,...e_m\)</span>vectors is orthonomal if <span class="math display">\[&lt;e_i,e_j&gt;=\begin{cases}1&amp;if\ i=j\\0&amp;if\ i‚â†j\end{cases}\]</span></p><blockquote><p>Properties:</p><p>If <span class="math inline">\(e_1,...e_m\)</span> is an orthonomallist of vectors in V, then</p><ul><li><p><span class="math inline">\(\lVert a_1\vec e_1+\cdots+a_m\vece_m\rVert^2=|a_1|^2+\cdots+|a_m|^2\)</span></p><blockquote><p><span class="math inline">\(\lVert a_1\vec e_1+\cdots+a_m\vece_m\rVert^2\\=&lt;a_1e_1+...+a_me_m,a_1e_1+...+a_me_m&gt;\\=&lt;a_1e_1,a_1e_1&gt;+...+&lt;a_me_m,a_me_m&gt;&amp;(&lt;e_i,e_j&gt;=\begin{cases}1&amp;if\i=j\\0&amp;if\ i‚â†j\end{cases})\\=\lVert a_1e_1\rVert^2+...+\lVerta_me_m\rVert^2\\=|a_1|^2+...+|a_m|^2&amp;(\lVerte_i\rVert^2=0)\)</span></p></blockquote></li><li><p><strong>Orthonomal list is linearly independent</strong></p><blockquote><p>Suppose there is <span class="math inline">\(\lVerta_1e_1+...+a_me_m\rVert^2=|0|^2=0\)</span></p><p>which means <span class="math inline">\(|a_1|^2+...+|a_m|^2=0\implies\exist a_j=0\implies linearly\ independent\)</span></p></blockquote></li></ul></blockquote><h4 id="orthonormal-basis"><a href="#media">Orthonormal Basis</a></h4><p>An <strong>orthonormal basis</strong> of <spanclass="math inline">\(V\)</span> is an orthonormal list of vectors in Vthat is also <strong>a basis of V</strong>.</p><blockquote><p>Remark:</p><p>Orthonomal basis shares two properties:</p><ul><li>orthonormal <span class="math inline">\(\implies&lt;e_i,e_j&gt;=\begin{cases}1&amp;if\ i=j\\0&amp;if\i‚â†j\end{cases}\)</span></li><li>Basis <span class="math inline">\(\implies\)</span> linearlyindependent and spans the vector space</li></ul></blockquote><blockquote><p>Theorem:</p><p>Every orthonormal list of vectors in <spanclass="math inline">\(V\)</span> with length <spanclass="math inline">\(dim V\)</span> is an <strong>orthonormalbasis</strong> of V.</p></blockquote><p><u>Example</u></p><ul><li><p>Standard orthonormal basis of <spanclass="math inline">\(R^4:(1,0,0,0)^T,(0,1,0,0)^T,(0,0,0,1)^T,(0,0,0,1)^T\)</span></p></li><li><p>Let V be the vector space over <spanclass="math inline">\(\C\)</span> of continous complex-valued functionson the interval <span class="math inline">\(0\leq x\leq 1\)</span> withthe inner product <span class="math display">\[&lt;f,g&gt;=\int_0^1f\bar gdx\]</span> Let <span class="math inline">\(f_n=\sqrt{2}cos2\pinx,g_n=\sqrt{2}sin 2\pi nx\)</span>. Then <spanclass="math inline">\(\{1,f_1,g_1,f_1,g_2\cdots\}\)</span> is acountable infinte orthonormal set that is a Scauder basis for thisvector space.</p><blockquote><p>Proof: <span class="math inline">\(&lt;g_n,f_n&gt;=\int_0^1 \sqrt{2}sin(2n\pi x)\sqrt 2 cos(2n\pi x)dx=0 \ \ (Integration\ by\part)\)</span></p><p><span class="math inline">\(&lt;f_n,f_n&gt;=\int_0^1\sqrt 2 cos(2n\pix)\sqrt 2cos(2n\pi x)dx=1\)</span></p></blockquote></li></ul><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(\vec e_1,...\vec e_n\)</span> isan orthonormal basis of V and <span class="math inline">\(\vec v\inV\)</span>. Then <span class="math display">\[v=&lt;v,e_1&gt;e_1+&lt;v,e_2&gt;e_2+\cdots+&lt;v,e_n&gt;e_n\\and\ \lVertv\rVert^2=|&lt;v,e_1&gt;|^2+|&lt;v,e_2&gt;|^2+\cdots+|&lt;v,e_n&gt;|^2\]</span> Proof:</p><p>Since <span class="math inline">\(e_1,...e_n\)</span> are basis, wehave</p><p><span class="math inline">\(v=\sum_{i=1}^n\lambda_i e_i\)</span></p><p>we need to figure out that <spanclass="math inline">\(\lambda\)</span> is</p><p><span class="math inline">\(&lt;v,e_j&gt;=&lt;\lambda_1e_1+...+\lambda_n e_n,e_j&gt; \ (plug\ in\ \vecv)\\\lambda_1&lt;e_1,e_j&gt;+...+\lambda_n&lt;e_n,e_j&gt;\(Distribution\ law)\\=\lambda_j&lt;e_j,e_j&gt;\(&lt;e_i,e_j&gt;=\begin{cases}1&amp;if\ i=j\\0&amp;if\i‚â†j\end{cases})\)</span></p><p>Thus, <span class="math inline">\(\lambda_j=&lt;\vec v,\vece_j&gt;\)</span></p></blockquote><blockquote><p>Gram-Schmidt orthogonalization process:</p><p>Let <span class="math inline">\(V\)</span> be an inner-product spaceand assume <span class="math inline">\(\vec v_1,...\vec v_n\)</span> are;inearly independent vectors in <span class="math inline">\(V\)</span>.Then it is possible to construct an orthogonal sequence of vectors <spanclass="math inline">\(\vec w_1,...\vec w_n\in V\)</span> such that foreach <span class="math inline">\(k=1,...,n\)</span> then set <spanclass="math inline">\(\{\vec w_1,...\vec w_n\}\)</span> is a basisi ofthe subspace spanned by <span class="math inline">\(\vec v_1,...\vecv_k\)</span></p><p><img src="https://slideplayer.com/slide/7266051/24/images/9/Gram-Schmidt+Algorithm.jpg" alt="Gram-Schmidt Orthogonalization - ppt download" style="zoom:50%;" /></p></blockquote><blockquote><p>Corollary</p><p>every finite-dimensional inner-production space has a basis oforthonormal vector.</p></blockquote><blockquote><p>Remark: Let <span class="math inline">\(V\)</span> be aninner-product space. Then every orthonrmal list of vectors in V can beextended to an orthonormal basis of V</p></blockquote><p><u>Example</u></p><p>Find an orthonormal basisi of <spanclass="math inline">\(P_2(\R)\)</span>, where the inner product is givenby <spanclass="math inline">\(&lt;p,q&gt;=\int_{-1}^1p(x)q(x)dx\)</span>.</p><blockquote><p>Sol: The standard basis of <spanclass="math inline">\(P_2(\R)\)</span> is <spanclass="math inline">\(\vec v_1=1,\vec v_2=x,\vec v_3=x^2\)</span></p><p>Then we use the Gram-Schmidt process to get the orthonormal:</p><p><span class="math inline">\(v_1=1,\beta_1=v_1=1,\vece_1=\frac{\beta}{\lVert\beta\rVert}=\frac{1}{\sqrt{\int_{-1}^11^2dx}}=\frac{\sqrt{2}}{2}\)</span></p><p><span class="math inline">\(v_2=x,\beta_2=v_2-&lt;v_2,\vece_1&gt;\vec e_1=x-\int^1_{-1}x\cdot\frac{\sqrt 2}{2}dx\cdot \frac{\sqrt2}{2}=x\\\vece_2=\frac{\beta_2}{\lVert\beta_2\rVert}=\frac{x}{\int_{-1}^1x^2dx}=\sqrt{\frac{3}{2}}x \\\dots\)</span></p></blockquote><h4 id="orthogonal-complment"><a href="#media">OrthogonalComplment</a></h4><p>Let <span class="math inline">\(V\)</span> be an inner-product spaceand <span class="math inline">\(W\)</span> be any set of vectors in<span class="math inline">\(V\)</span>. Then, the <strong>orthogonalcomplement</strong> of <span class="math inline">\(W\)</span>, denoted<span class="math inline">\(W^{\bot}\)</span> is <strong>the set of allvectors in V that are orthogonal to every vector in W</strong> <spanclass="math display">\[W^{\bot}=\{v\in V|&lt;v.w&gt;=0,\forall w\in W\}\]</span></p><blockquote><p>Remark:</p><p>Let <span class="math inline">\(W\)</span> be any<strong>subset</strong> of vector space <spanclass="math inline">\(V\)</span>. Then <spanclass="math inline">\(W^{\bot}\)</span> is a closed subspace of <spanclass="math inline">\(V\)</span> and that any vector in the subspacespanned by <span class="math inline">\(W\)</span> is orthogonal to anyvector in <span class="math inline">\(W^{\bot}\)</span></p><ul><li><p><span class="math inline">\(\{\vec 0\}^{\bot}=V \ and\V^{\bot}=\{\vec 0\}\)</span></p></li><li><p>If <span class="math inline">\(U\)</span> is a subset of V then<span class="math inline">\(U\cap U^{\bot}\subseteq \{\vec0\}\)</span></p></li><li><p>If <span class="math inline">\(U\)</span> and <spanclass="math inline">\(W\)</span> are subset of <spanclass="math inline">\(V\)</span> And <spanclass="math inline">\(U\subseteq W\)</span>, then <spanclass="math inline">\(W^{\bot}\subseteq U^{\bot}\)</span></p><blockquote><p><u>Example</u></p><p>For <span class="math inline">\(\R^3\)</span></p><p><span class="math inline">\(W=span\{\vec e_1,\vec e_2\}\toW^{\bot}=span\{\vec e_3\}\)</span></p><p><span class="math inline">\(U=span\{\vec e_2\}\to U^{\bot}=span\{\vece_1,\vec e_3\}\)</span></p></blockquote></li></ul></blockquote><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(U\)</span> is afinite-dimensional subspace of <span class="math inline">\(V\)</span>.Then <span class="math inline">\(V=U\oplus U^{\bot}\)</span></p><p>Proof: Let <span class="math inline">\(\vec e_1,...\vec e_m\)</span>be an orthonormal basisi of <span class="math inline">\(U\)</span>, thenit can be extended to be an orthonomal basis of <spanclass="math inline">\(V\)</span>, <span class="math inline">\(\vece_1...\vec e_m,\vec e_{m+1}...\vec e_n\)</span></p><p>Then we need to show <span class="math inline">\(\vec e_{m+1}...\vece_n\)</span> is the basisi of <spanclass="math inline">\(U^{\bot}\)</span></p><ul><li>since orthonormal <spanclass="math inline">\(&lt;e_j,e_k&gt;=0,j&gt; m,k\leq m\implies \vece_j\in U^{\bot}\)</span></li><li><span class="math inline">\(\forall \vec v\in U^{\bot}, \vec v\inV\implies \vec v=\lambda_1 e_1+...+\lambda_me_m+\lambda_{m+1}e_{m+1}+...+\lambda_n e_n\)</span>, since orthonormal,<span class="math inline">\(\lambda_i=&lt;\vecv,e_i&gt;=0,i=1...m\implies \vecv=\lambda_{m+1}+...\lambda_me_n\)</span></li></ul><p>Thus, <span class="math inline">\(U^{\bot} \cap U=\{0\}\impliesV=U\oplus U^{\bot}\)</span></p><p>This means we have <span class="math display">\[\vec v=&lt;\vec v,\vec e_1&gt;\vec e_1+...+&lt;\vec v,\vec e_m&gt;\vece_m+&lt;\vec v,\vec e_{m+1}&gt;\vec e_{m+1}+...+&lt;\vec v,\vece_n&gt;\vec e_n=\vec u+\vec w,\vec u\in U,\vec w\in U^{\bot}\]</span></p></blockquote><blockquote><p>Corollary:</p><p>Suppose <span class="math inline">\(V\)</span> is finite-dimenmsionaland <span class="math inline">\(U\)</span> ia subspace of <spanclass="math inline">\(V\)</span>, then <span class="math display">\[dimV=dimU+dimU^{\bot}\]</span></p></blockquote><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(U\)</span> is afinite-dimensional subspace of <span class="math inline">\(V\)</span>.Then <span class="math display">\[(U^{\bot})^{\bot}=U\]</span></p></blockquote><blockquote><p>Remark:</p><p>Suppose <span class="math inline">\(U\subseteq V\)</span> ia afinite-dimensional subspcae</p><ul><li><p><span class="math inline">\(V=U\oplus W_1=U\oplus W_2\)</span>,since the decomposition is not unique</p></li><li><p>However, <span class="math inline">\(V=U\oplus U^{\bot}\)</span>is unique, i.e. if <span class="math inline">\(\vec u\)</span> is fixed,there is a unique <span class="math inline">\(\vec w\)</span> such that<span class="math inline">\(\vec v=\vec u+\vec w\)</span></p><blockquote><p>Proof:</p><p>We need to show that if <span class="math inline">\(V=U\oplusT_1=U\oplus T_2\)</span>, where <span class="math inline">\(T_1,T_2\)</span> are both orthogonal to <spanclass="math inline">\(U\)</span>, then $ T_1=T_2$</p><p>Suppose we have <span class="math inline">\(V=U\oplus T_2\)</span>,let <span class="math inline">\(\vec t_1\in T_1\subseteq V\)</span>,then there is <span class="math inline">\(\vec u\in U,\vec t_2\inT_2\)</span> such that <span class="math inline">\(\vec t_1=\vec u+\vect_2\)</span></p><p>then we have <span class="math inline">\(&lt;\vec t_1,\vecu&gt;=&lt;\vec u,\vec u&gt;+&lt;\vec t_2,\vec u&gt;=0\\0=&lt;\vec u,\vecu&gt;\Longleftrightarrow \vec u=0\)</span> since orhtogonal</p><p>Thus, <span class="math inline">\(\vec t_1=\vec t_2\inT_2,T_1\subseteq T_2\)</span></p><p>Similarly <span class="math inline">\(T_2\subseteq T_1\)</span></p></blockquote></li></ul></blockquote><h4 id="orthogonal-projection"><a href="#media">OrthogonalProjection</a></h4><p>Suppose <span class="math inline">\(V\)</span> is finite-dimensionalvector space, and <span class="math inline">\(U\)</span> is a subspaceof <span class="math inline">\(V\)</span>.</p><p>Then there is <strong>orthogonal decomposition</strong> <spanclass="math display">\[V=U\oplus U^{\bot}\]</span></p><ul><li><span class="math inline">\(\forall \vec v\in V, \vec v=\vec u+\vecw, where\ \vec u\in U,\vec w\in W, and\ &lt;\vec u,\vecw&gt;=0\)</span></li><li>Both <span class="math inline">\(U\)</span> and <spanclass="math inline">\(U^{\bot}\)</span> are close, and <spanclass="math inline">\((U^{\bot})^{\bot}=U\)</span></li></ul><p>The <strong>orthogonal projection</strong> of <spanclass="math inline">\(V\)</span> onto <spanclass="math inline">\(U\)</span> is the operator <spanclass="math inline">\(P_U\in L(V)\)</span> defined as follows (map <spanclass="math inline">\(\vec v\in V\to \vec u\in U\)</span>): <spanclass="math display">\[For\ \vec v\in V, \vec v=\vec u+\vec w, where\ \vec u\in U,\vec w\inU^{\bot}, then \ P{_U\vec v=\vec u}\]</span><img src="Math 305 Advanced Linear Algebra/image-20211212040430853.png" alt="image-20211212040430853" style="zoom:25%;" /></p><p><u>Example</u></p><p>Suppose <span class="math inline">\(\vec x\in V\)</span> with <spanclass="math inline">\(\vec x‚â†\vec 0\)</span> and <spanclass="math inline">\(U=span(\vec x)\)</span>. Show that <spanclass="math display">\[P_U\vec v=\frac{&lt;\vec v,\vec x&gt;}{\lVert\vec x\rVert^2}\vecx,\forall \vec v\in V\]</span></p><blockquote><p>Sol:</p><p>By orthogonal decomposition, <span class="math inline">\(\vecv\)</span> can be written as</p><p><span class="math inline">\(\vec v=\frac{&lt;\vec v,\vecx&gt;}{\lVert \vec x\rVert^2}\vec x(projection\in U=span(\vec x))+(\vecv-\frac{&lt;\vec v,\vec x&gt;}{\lVert \vec x\rVert^2}\vec x)(residual\inU^{\bot})\)</span></p><p>since <span class="math inline">\(&lt;\frac{&lt;\vec v,\vecx&gt;}{\lVert \vec x\rVert^2}\vec x,\vec v-\frac{&lt;\vec v,\vecx&gt;}{\lVert \vec x\rVert^2}\vec x&gt;=0\)</span></p><p><span class="math inline">\(P_U\vec v=\frac{&lt;\vec v,\vecx&gt;}{\lVert \vec x\rVert^2}\vec x\)</span></p></blockquote><h4 id="orthogonal-projection-properties"><a href="#media">OrthogonalProjection Properties</a></h4><p>Suppose <span class="math inline">\(U\)</span> is afinite-dimensional subspace of <span class="math inline">\(V\)</span>and <span class="math inline">\(\vec v\in V\)</span>. Then</p><ul><li><p><span class="math inline">\(P_U\in L(V)\)</span></p></li><li><p>For every orthonormal basis <span class="math inline">\(\vece_1,...\vec e_m\)</span> of <span class="math inline">\(U\)</span>,<span class="math inline">\(P_U\vec v=&lt;\vec v,\vec e_1&gt;\vece_1+\cdots+&lt;\vec v,\vec e_m&gt;\vec e_m\)</span></p><blockquote><p><span class="math inline">\(\forall \vec v\in V,\vec v=\vec u+\vecw,\vec u\in U,\vec w\in U^{\bot}\)</span></p><p>Since <span class="math inline">\(\vec e_1,...\vec e_m\)</span> isthe orthonomal basis of <span class="math inline">\(U\)</span>, wehave</p><p><span class="math inline">\(\vec u=\lambda_1\vece_1+...+\lambda_m\vec e_m\)</span>, then we need to find <spanclass="math inline">\(\lambda\)</span></p><p><span class="math inline">\(&lt;\vec v,\vec e_j&gt;=&lt;\vec u+\vecw,e_j&gt;=&lt;\vec u,\vec e_j&gt;\ (since\ for\ \vec w\in U^{\bot},\vece_j\in U,&lt;\vec w,\vec e_j&gt;=0,j=1...m)=\lambda_j&lt;\vec e_j,\vece_j&gt;=\lambda_j\\\implies\lambda_j=&lt;\vec v,\vec e_j&gt;, \vecu=P_U\vec v=&lt;\vec v,\vec e_1&gt;\vec e_1+\cdots+&lt;\vec v,\vece_m&gt;\vec e_m\)</span></p></blockquote></li><li><p><span class="math inline">\(P_U\vec u=\vec u,\forall \vec u\inU\)</span></p><blockquote><p>No residual</p></blockquote></li><li><p><span class="math inline">\(P_U\vec w=0,\forall \vec w\inU^{\bot}\)</span></p><blockquote><p>No projection</p></blockquote></li><li><p><span class="math inline">\(Range(P_U)=U\)</span></p><blockquote><p><span class="math inline">\(P_U\vec v\in U\impliesRange(P_U)\subseteq U\\\forall \vec u\in U, P_U\vec u=\vec u\impliesU\subseteq Range(P_U)\)</span><span class="math inline">\(\impliesRange(P_U)=U\)</span></p></blockquote></li><li><p><span class="math inline">\(NullP_u=U^{\bot}\)</span></p><blockquote><p><span class="math inline">\(NullP_U=\{\vec v|P_U(\vecv)=0\}=U^{\bot}\)</span></p></blockquote></li><li><p><span class="math inline">\(\vec v-P_U\vec v\inU^{\bot}\)</span></p><blockquote><p><span class="math inline">\(\forall \vec v\in V, \vec v=\vec u+\vecw=P_U\vec v+(\vec v-P_U\vec v)\ (Orthogonal \ decomposition)\implies&lt;P_U\vec v,\vec w&gt;=&lt;P_U\vec v,\vec v-P_U\vecv&gt;=0\)</span></p></blockquote></li><li><p><span class="math inline">\((P_U)^2=P_U\)</span></p><blockquote><p><span class="math inline">\((P_U)^2=P_U\circ(P_U)\implies(P_U)^2(\vec v)=P_U(P_U(\vec v))=P_U(\vec u)=\vec u=P_U\vecv\)</span></p></blockquote></li><li><p><span class="math inline">\(\lVert P_U\vec v\rVert\leq\lVert\vecv\rVert\)</span></p></li></ul><p><u>Example</u></p><p><span class="math inline">\(V=F^4, W=span(\vec u_1,\vec u_2),where\\vec u_1=(1,1,-1,4)^T,\vec u_2=(1,-1,1,2)^T\)</span>. Find the basis of<span class="math inline">\(W^{\bot}\)</span></p><blockquote><p>Sol;</p><p><span class="math inline">\(dimW^{\bot}=4-2=2\)</span></p><p><span class="math inline">\(\forall \vec v\in W^{\bot}\)</span> ifand only if <span class="math inline">\(&lt;\vec v,\vec u_1&gt;=0 \ and\ &lt;\vec v,\vec u_2&gt;=0\)</span></p><p>Let <span class="math inline">\(\vecv=\begin{bmatrix}x_1\\x_2\\x_3\\x_4\end{bmatrix}\\\implies\begin{cases}x_1+x_2-x_3+4x_4=0\\x_1-x_2+x_3+2x_4=0\end{cases}\\\implies\begin{bmatrix}1&amp;1&amp;-1&amp;4\\1&amp;-1&amp;1&amp;2\end{bmatrix}\begin{bmatrix}x_1\\2_2\\x_3\\x_4\end{bmatrix}=\vec0\\\implies Basis=\{(0,1,1,0)^T,(-3,-1,0,1)^T\}\)</span></p></blockquote><h4 id="minimizing-the-distance-to-a-subspace"><ahref="#media">Minimizing The Distance to a Subspace</a></h4><p>Suppose <span class="math inline">\(U\)</span> is afinite-dimensional subspace of <span class="math inline">\(V\)</span>,<span class="math inline">\(\vec v\in V,\vec u\in U\)</span>, then <spanclass="math display">\[\lVert\vec v-P_U\vec v\rVert(Minimal\ Residual)\leq \lVert\vec v-\vecu\rVert (Residual)\]</span> And the inequality above is an equality iff <spanclass="math inline">\(\vec u=P_U\vec v\)</span></p><p><img src="Math 305 Advanced Linear Algebra/image-20211212180948287.png" alt="image-20211212180948287" style="zoom:25%;" /></p><blockquote><p>Best Approximation (Finite-dimensioanl)</p><p><span class="math inline">\(V\)</span> is a vector space with<strong>inner product</strong> (defined), <spanclass="math inline">\(\lVert\cdot\rVert\)</span> is the <strong>inducednorm</strong>, <span class="math inline">\(U\)</span> is a subspace of<span class="math inline">\(V\)</span></p><p>For <span class="math inline">\(\vec v\in V\)</span>, we have <spanclass="math display">\[\lVert\vec v-P_U\vec v\rVert(Minimal\ Loss)\leq\lVert\vec v-\vecu\rVert,\forall\vec u\in V\]</span> Then <span class="math inline">\(\hat{\vec v}\)</span> iscalled the <strong>best approximation</strong> of <spanclass="math inline">\(\vec v\)</span> on <spanclass="math inline">\(U\)</span>: <span class="math display">\[\lVert\vec v-\hat{\vec v}\rVert\leq\lVert\vec v-\vec u\rVert,\forall\vecu\in V\]</span> Then, if <span class="math inline">\(\hat{\vec v}\)</span> isthe best apporixmation, <span class="math display">\[&lt;\vec v-\hat{\vec v},\vec u&gt;=0,\forall \vec u\in U\]</span></p></blockquote><p><u>Example</u></p><p>Find a polynomial u with real coefficients and degree at most 5 thatapproximates <span class="math inline">\(sinx\)</span> as well aspossible on the interval <span class="math inline">\([-\pi,\pi]\)</span>in the sense that <spanclass="math inline">\(\int_{-\pi}^\pi|sinx-u(x)|^2dx\)</span> is assmall as possible.</p><blockquote><p>Sol:</p><p>Let <span class="math inline">\(C_R[-\pi,\pi]\)</span> denote thereal inner product space of continous real-valued function on <spanclass="math inline">\([-\pi,\pi]\)</span> with inner product (derived bythe loss function) <span class="math display">\[&lt;f,g&gt;=\int_{-\pi}^\pi fgdx\]</span> <span class="math inline">\(U=P_5([-\pi,\pi])\)</span> is themost 5 order polynomial, <span class="math inline">\(U\subseteqC_R[-\pi,\pi]\)</span>, then our problem is to find <spanclass="math inline">\(\vec u\in U,such\ that\ \lVert\vec v-\vec u\rVertis\ minimal\)</span></p><p>Then the best apporixmation of <spanclass="math inline">\(sinx\)</span> in <spanclass="math inline">\(P_5\)</span> is <spanclass="math inline">\(P_U(sinx)=P_U(v)=&lt;v,\vec e_1&gt;\vece_1+\cdots+&lt;v,\vec e_6&gt;\vec e_6\)</span></p><p>Then we first apply Gram-Schmidt Prcedure to standard <spanclass="math inline">\(P_5: 1,x,x^2,x^3,x^4,x^5\)</span>, producing anorthonormal basisi <span class="math inline">\(\vec e_1,...\vece_6\)</span> of <span class="math inline">\(U\)</span></p><p>Then <span class="math inline">\(P_U(v)=\vec e_1+\cdots+\vece_6\\\implies applying\ &lt;f,g&gt;=\int_{-\pi}^\pi fgdx\\\impliesP_U\vec v=0.987862x-0.155271x^3+0.00564312x^5\)</span></p><p>Compare:</p><p>Real (red): <span class="math inline">\(\vec v=sinx\)</span></p><p>Best approximation (blue): <span class="math inline">\(P_U\vecv\)</span></p><p>Tylor expansion (green): <span class="math inline">\(T\vecv=x-\frac{x^3}{3!}+\frac{x^5}{5!}\)</span></p><p><img src="Math 305 Advanced Linear Algebra/image-20211212183831419.png" alt="image-20211212183831419" style="zoom:25%;" /></p></blockquote><h3 id="linear-functionals-and-riesz-theorem"><a href="#media">3.9Linear Functionals and Riesz Theorem</a></h3><h4 id="linear-functional"><a href="#media">Linear Functional</a></h4><p>A <strong>linear functional</strong> on <spanclass="math inline">\(V\)</span> is a linear transformation from <spanclass="math inline">\(V\)</span> to <spanclass="math inline">\(F\)</span> (map vector to number). In other words,a linear functional is an element of <spanclass="math inline">\(L(V,F)\)</span></p><p><u>Example</u></p><p>The function <span class="math inline">\(\phi:F^3\to F\)</span>defined by <span class="math display">\[\phi(z_1,z_2,z_2)=2z_1-5z_2+z_3\\\implies\phi(z)=&lt;z,u&gt;=&lt;(z_1,z_2,z_3)^T,(2,-5,1)^T&gt;, \forall z\in F^3\]</span> is a linear functional on <spanclass="math inline">\(F^3\)</span>.</p><h4 id="riesz-theorem"><a href="#media">Riesz Theorem</a></h4><p>Suppose <span class="math inline">\(V\)</span> is finite-dimensioanland <span class="math inline">\(\phi\)</span> is linear functional on<span class="math inline">\(V\)</span>. Then there is a **uniqu <spanclass="math inline">\(\vec u\in V\)</span> such that <spanclass="math display">\[\phi(\vec v)=&lt;\vec v,\vec u&gt;\]</span></p><blockquote><p>Note:</p><p><span class="math inline">\(\vec u=\overline{\phi(\vec e_1)}\vece_1+\cdots+\overline{\phi(\vec e_n)}\vec e_n\)</span></p></blockquote><blockquote><p>Proof:</p><p>Let <span class="math inline">\(\vec e_1...\vec e_n\)</span> be theorthonormal basis of <span class="math inline">\(V\)</span></p><p>Then <span class="math inline">\(\forall \vec v\in V\)</span> wehave</p><p><span class="math inline">\(\vecv=&lt;v,e_1&gt;e_1+\cdots+&lt;v,e_n&gt;e_n\\\implies \phi(\vecv)=\phi(&lt;v,e_1&gt;e_1+...+&lt;v,e_n&gt;e_n)\\=&lt;v,e_1&gt;\phi(e_1)+...+&lt;v,e_n&gt;\phi(e_n)\ (&lt;v,e_j&gt; and\ \phi(e_j) \ is\ number, \ \phi \ is\ linear\transformation)\\=&lt;v,\overline{\phi(e_1)}e_1&gt;+...+&lt;v,\overline{\phi(e_n)}e_n&gt;\)</span></p><p>Then let <span class="math inline">\(\vecu=\overline{\phi(e_1)}e_1&gt;+...+\overline{\phi(e_n)}e_n\)</span>, wehave <span class="math inline">\(\phi(\vec v)=&lt;\vec v,\vecu&gt;\)</span></p></blockquote><p><u>Example</u></p><p>Find <span class="math inline">\(\vec u\in P_2()\R\)</span> such that<span class="math inline">\(\int_{-1}^1p(t)(cos\pi t)dt=\int_{-1}^1p(t)u(t)dt,\forall p\in P_2(\R)\)</span></p><blockquote><p>Sol:</p><p><img src="Math 305 Advanced Linear Algebra/image-20211212195103126.png" alt="image-20211212195103126" style="zoom: 50%;" /></p></blockquote><h3 id="adjoint"><a href="#media">3.10 Adjoint</a></h3><h4 id="definition-8"><a href="#media">Definition</a></h4><p>Suppose <span class="math inline">\(T\in L(V,W.)\)</span> The<strong>adjoint</strong> of <span class="math inline">\(T\)</span> isthe function <span class="math inline">\(T^*:W\to V\)</span> such that<span class="math inline">\(&lt;T\vec v,\vec w&gt;_W=&lt;\vec v,T^*\vecw&gt;_V,\forall \vec v\in V,\vec w\in W\)</span></p><blockquote><p>By Riesz Respresentation Theorem</p><p><span class="math inline">\(&lt;T\vec v,\vec w&gt;_W=\phi_W(\vecv)=&lt;\vec v,\vec u&gt;_V,T^*\vec w=\vec u\)</span></p></blockquote><p><u>Example</u></p><p>Define <span class="math inline">\(T:R^3\to R^2\)</span> by <spanclass="math inline">\(T(x_1,x_2,x_3)^T=(x_2+3x_3,2x_1)^T\)</span>. Findformula for <span class="math inline">\(T^*\)</span></p><blockquote><p>Sol:</p><p><span class="math inline">\(T:R^3\to R^2, T^*:R^2\to R^3\)</span>, bydefinition</p><p><span class="math inline">\(&lt;v,T^*w&gt;=&lt;Tv,w&gt;\\\implies&lt;(x_1,x_2,x_3)^T,T^*(y_1,y_2)^T&gt;=&lt;T(x_1,x_2,x_3)^T,(y_1,y_2)^T&gt;\\=&lt;(x_2+3x_3,2x_1)^T,(y_1,y_2)^T&gt;\\=(x_2+3x_3)y_1+2x_1y_2\\=2x_1y_2+x_2y_1+3x_3y_1\\=&lt;(x_1,x_2,x_3)^T,(2y_2,y_1,3y_1)^T&gt;\\\impliesT^*(y_1,y_2)^T=(2y_2,y_1,3y_1)^T\)</span></p></blockquote><p>Fix <span class="math inline">\(u\in V\)</span> and <spanclass="math inline">\(x\in W\)</span>. Define <spanclass="math inline">\(T\in L(V,W)\)</span> by <spanclass="math inline">\(Tv=&lt;v,u&gt;x\)</span>. For every <spanclass="math inline">\(v\in V\)</span>, find a formula for <spanclass="math inline">\(T^*\)</span></p><blockquote><p>sol:</p><p><span class="math inline">\(\forall \vec v\in V, fix\ \vec w \inW\)</span></p><p>Since <span class="math inline">\(T:V\to W, T^*:W\to V\)</span></p><p><spanclass="math inline">\(&lt;v,T^*w&gt;_V=&lt;Tv,w&gt;_W\\=&lt;&lt;v,u&gt;x,w&gt;_W\\=&lt;v,u&gt;_V&lt;x,w&gt;_W\(&lt;v,u&gt;_V,&lt;x,w&gt;_W\ are\ numbers\)=\\&lt;v,\overline{&lt;x,w&gt;_W}u&gt;_V\\=&lt;v,&lt;w,x&gt;u&gt;_V\\\impliesT^*w=&lt;w,x&gt;_Wu\in V\)</span></p></blockquote><blockquote><p><span class="math inline">\(T^*\)</span> is a lionear transformationi.e. <span class="math inline">\(T^*\in L(W,V)\)</span></p></blockquote><h4 id="properties-of-the-adjoint"><a href="#media">Properties of theAdjoint</a></h4><ul><li><p><span class="math inline">\((S+T)^*=S^*+T^*,\forall S,T\inL(V,W)\)</span></p></li><li><p><span class="math inline">\((\lambda T)^*=\bar \lambdaT^*,\forall \lambda \in F, T\in L(V,W)\)</span></p></li><li><p><span class="math inline">\((T^*)^*=T,\forall T\inL(V,W)\)</span></p></li><li><p><span class="math inline">\(I^*=I\)</span>, where <spanclass="math inline">\(I\)</span> is the identity operator on <spanclass="math inline">\(V\)</span></p></li><li><p><span class="math inline">\((ST)^*=T^*S^*,\forall T\in L(V,W),S\in L(W,U)\)</span>, <span class="math inline">\(U\)</span> is an innerproduct space over <span class="math inline">\(F\)</span></p><blockquote><p><span class="math inline">\(T:V\to W,S:W\to U\implies ST:V\toU,(ST)^*:U\to V\)</span></p><p>&lt;<spanclass="math inline">\(v,(ST)^*u&gt;_V=&lt;(ST)v,u&gt;_U\\=&lt;S(Tv),u&gt;_U\\=&lt;Tv,S^*u&gt;_W\(By\ definition)\\=&lt;v,T^*S^*u&gt;_V\)</span></p></blockquote></li></ul><blockquote><p>Theorem:</p><p>Suppose <span class="math inline">\(T\in L(V,W)\)</span>, then</p><p><span class="math inline">\(NullT^*=(RangeT)^{\bot}\)</span></p><blockquote><p><span class="math inline">\(w\in NullT^*\Longleftrightarrow T^*w=0\(Definition\ of\ null\ space)\\\Longleftrightarrow&lt;v,T^*w&gt;=0,\forall v\in V \ (orthogonal)\\\Longleftrightarrow&lt;Tv,w&gt;_W=0 \ (Adjoint)\\\Longleftrightarrow w\in(R(T))^{\bot}\)</span></p></blockquote><p><span class="math inline">\(Range T^*=(NullT)^{\bot}\)</span></p><p><span class="math inline">\(NullT=(Range T^*)^{\bot}\)</span></p><p><span class="math inline">\(Range T=(NullT^*)^{\bot}\)</span></p><p><img src="Math 305 Advanced Linear Algebra/image-20211213032253789.png" alt="image-20211213032253789" style="zoom: 50%;" /></p><p><span class="math inline">\(V=Null(T)\oplus Range(T^*)\)</span></p><p><span class="math inline">\(W=Null(T^*)\oplus Range (T)\)</span></p></blockquote><h4 id="the-matrix-of-t"><a href="#media">The Matrix of T*</a></h4><p>Let <span class="math inline">\(T\in L(V,W)\)</span>. Suppose <spanclass="math inline">\(E_1,...e_n\)</span> is an orthonormal basis of<span class="math inline">\(V\)</span> and <spanclass="math inline">\(f_1...f_m\)</span> is orthonormal basis of <spanclass="math inline">\(W\)</span>. Then <span class="math display">\[M(T^*,(f_1...f_m),(e_1...e_n))=A^H\]</span> is teh <strong>conjugate transpose</strong> of <spanclass="math display">\[M(T,(e_1...e_n),(f_1...f_m))=A\]</span> <u>Example</u></p><p>For <span class="math inline">\(T:R^3\to R^2,T(x_1,x_2,x_3)^T=(x_2+3x_3,2x_1),\ and \ T^*:R^2\to R^3,T^*(y_1,y_2)^T=(2y_2,y_1,3y_1)^T\)</span></p><p>Let <spanclass="math inline">\(e_1=(1,0,0)^T,e_2=(0,1,0)^T,e_3=(0,0,1)^T,f_1=(1,0),f_2=(0,1)\)</span></p><p>we have <span class="math display">\[T(e_1,e_2,e_3)=(f_1,f_2)\begin{bmatrix}0&amp;1&amp;3\\2&amp;0&amp;0\end{bmatrix}(A)\\T^*(f_1,f_2)=(e_1,e_2,e_3)\begin{bmatrix}0&amp;2\\1&amp;0\\3&amp;0\end{bmatrix}(A^H)\]</span> <strong>Big Picture</strong></p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213133044462.png"alt="image-20211213133044462" /><figcaption aria-hidden="true">image-20211213133044462</figcaption></figure><p><span class="math inline">\(R^m=Range(T)\oplus(RangeT)^{\bot}=Range(T)\oplus Null(T^*)\)</span></p><p><spanclass="math inline">\(R^n=Null(T)\oplus(NullT)^{\bot}=NullT\oplusRange(T^*)\)</span></p><h3 id="fundamental-subspaces"><a href="#media">3.11 FundamentalSubspaces</a></h3><p>Let <span class="math inline">\(T\)</span> be a bounded lineartransformation from <span class="math inline">\(V\to W\)</span>. Theequation <span class="math inline">\(T\vec v=\vec w\)</span> has asolusion <strong>if and only if</strong> <spanclass="math inline">\(&lt;w,u&gt;=0,\forall \vec v\in NullT^*\)</span><span class="math display">\[\vec w \in R(T)\Longleftrightarrow \vec w \bot Null T^*\]</span> In matrix notation, <span class="math inline">\(\vec v=\vecw\)</span> has a solusion <strong>if and only if</strong> <spanclass="math inline">\(\vec u^H\vec w=0,\forall \vec u \ such\ that\A^H\vec u=0\)</span></p><h4 id="least-square"><a href="#media">Least Square</a></h4><p>Let <span class="math inline">\(T\)</span> be a bounded lineartransformation from <span class="math inline">\(V\to W\)</span> (<spanclass="math inline">\(dim V&lt;dim W\)</span>). The vector <spanclass="math inline">\(v\in V\)</span> minimizes <spanclass="math inline">\(\lVert T\vec v-\vec w\rVert\)</span> if and onlyif <span class="math display">\[T^*T\vec v=T^*\vec w,\vec w\in W\]</span> If A is a matrix that <spanclass="math inline">\(A^HA\)</span> is invertible, the bestapproximation minimizes <span class="math inline">\(\lVert A\vec v-\vecw\rVert\)</span> is <span class="math display">\[\vec v=(A^HA)^{-1}A^H\vec w\]</span> Suppose <span class="math inline">\(T\)</span> is lineartransformation from <span class="math inline">\(V\to W\)</span>. Thevector <span class="math inline">\(\vec v\in V\)</span> minimizes <spanclass="math inline">\(\lVert\vec v\rVert\)</span> and satisfies <spanclass="math inline">\(T\vec v=\vec w\)</span>. Then <spanclass="math inline">\(\hat{\vec v}\in R(T^*)\)</span>. i.e. <spanclass="math display">\[\exist \vec w\in W,\ such\ that\ TT^*\vec u=\vec w\]</span> If A is a matrix such that <spanclass="math inline">\(AA^H\)</span> is invertible, the bestapproximation minimizes <span class="math inline">\(\lVertv\rVert\)</span> is <span class="math display">\[\vec v=A^H(AA^H)^{-1}\vec w\]</span></p><h4 id="projection-operator"><a href="#media">ProjectionOperator</a></h4><p>Let <span class="math inline">\(W\in \C^{mn},\vec v\in \C^m\)</span>,then the orthogonal projection of v onto column space of W is given by<span class="math display">\[P_W\vec v= W(W^HW)^{-1}W^H\vec v\]</span> Especially, if <span class="math inline">\(W\)</span> is thematrix with orthonormal columns, then <span class="math display">\[P_W\vec v=WW^H\vec v\]</span></p><h4 id="psedo-inverse"><a href="#media">Psedo Inverse</a></h4><p>For a matrix <span class="math inline">\(A\in C^{mn}\)</span>, thenmatrix <span class="math inline">\(A^+\in C^{nm}\)</span> is the<strong>pseudo inverse</strong> iff:</p><ul><li><span class="math inline">\(AA^+A=A\)</span> (<spanclass="math inline">\(AA^+\)</span> is idempotent)</li><li><span class="math inline">\(A^+AA^+=A^+\)</span> (<spanclass="math inline">\(A^+A\)</span> is idempotent)</li><li><span class="math inline">\((AA^+)^H=AA^+\)</span> (<spanclass="math inline">\(AA^+\)</span> is Hermitian)</li><li><span class="math inline">\((A^+A)^H=A^+A\)</span> (<spanclass="math inline">\(A^+A\)</span> is Hermitian)</li></ul><h4 id="application-1"><a href="#media">Application</a></h4><ul><li><p>Fitting a straight line to 3 points <spanclass="math inline">\((-2,1),(0,2),(2,4)\)</span></p><blockquote><p>Sol;</p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213164930887.png"alt="image-20211213164930887" /><figcaption aria-hidden="true">image-20211213164930887</figcaption></figure></blockquote></li><li><p>Fit m points with a parabola that minimizes <spanclass="math inline">\(\lVert b-f(t)\rVert^2\)</span></p><blockquote><p>Sol:</p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213170532129.png"alt="image-20211213170532129" /><figcaption aria-hidden="true">image-20211213170532129</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213170557011.png"alt="image-20211213170557011" /><figcaption aria-hidden="true">image-20211213170557011</figcaption></figure></blockquote></li></ul><h4 id="weighted-least-squares-solution-of-a-linear-system"><ahref="#media">Weighted Least Squares Solution of a LinearSystem</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213171238426.png"alt="image-20211213171238426" /><figcaption aria-hidden="true">image-20211213171238426</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213171308082.png"alt="image-20211213171308082" /><figcaption aria-hidden="true">image-20211213171308082</figcaption></figure><h4 id="unitary-matrices"><a href="#media">Unitary Matrices</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213171541073.png"alt="image-20211213171541073" /><figcaption aria-hidden="true">image-20211213171541073</figcaption></figure><h3 id="singular-value-decomposition"><a href="#media">Singular ValueDecomposition</a></h3><h4 id="self-adjoint-operator"><a href="#media">Self-AdjointOperator</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213202707807.png"alt="image-20211213202707807" /><figcaption aria-hidden="true">image-20211213202707807</figcaption></figure><p><u>Example</u></p><ul><li><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213202905177.png"alt="image-20211213202905177" /><figcaption aria-hidden="true">image-20211213202905177</figcaption></figure></li><li><p><img src="Math 305 Advanced Linear Algebra/image-20211213202934321.png" alt="image-20211213202934321" style="zoom: 50%;" /></p></li></ul><blockquote><p>Theorem:</p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213203233168.png"alt="image-20211213203233168" /><figcaption aria-hidden="true">image-20211213203233168</figcaption></figure><blockquote><p>Not always true for real inner product, counterexample: <imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213203322965.png"alt="image-20211213203322965" /></p></blockquote><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213203440109.png"alt="image-20211213203440109" /><figcaption aria-hidden="true">image-20211213203440109</figcaption></figure></blockquote><blockquote><p>Check Self-Adjoint:</p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213203728050.png"alt="image-20211213203728050" /><figcaption aria-hidden="true">image-20211213203728050</figcaption></figure></blockquote><h4 id="normal-operators"><a href="#media">Normal Operators</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213204048146.png"alt="image-20211213204048146" /><figcaption aria-hidden="true">image-20211213204048146</figcaption></figure><p><u>Example</u></p><ul><li><p><img src="Math 305 Advanced Linear Algebra/image-20211213204156288.png" alt="image-20211213204156288" style="zoom:50%;" /></p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213204327285.png"alt="image-20211213204327285" /><figcaption aria-hidden="true">image-20211213204327285</figcaption></figure></li></ul><blockquote><p>Check Normal Operator:</p><p><img src="Math 305 Advanced Linear Algebra/image-20211213204453648.png" alt="image-20211213204453648" style="zoom: 33%;" /></p><p><img src="Math 305 Advanced Linear Algebra/image-20211213204704823.png" alt="image-20211213204704823" style="zoom: 33%;" /></p></blockquote><blockquote><p>Remark:</p><p>If <span class="math inline">\(T\in L(V)\)</span> is normal, then<span class="math inline">\(NullT=NullT^*,R(T)=R(T^*)\)</span></p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211213205015916.png"alt="image-20211213205015916" /><figcaption aria-hidden="true">image-20211213205015916</figcaption></figure></blockquote><h4 id="invariant-subspace"><a href="#media">Invariant Subspace</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214030115991.png"alt="image-20211214030115991" /><figcaption aria-hidden="true">image-20211214030115991</figcaption></figure><p><u>Example</u></p><ul><li><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214030245335.png"alt="image-20211214030245335" /><figcaption aria-hidden="true">image-20211214030245335</figcaption></figure></li><li><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214030334429.png"alt="image-20211214030334429" /><figcaption aria-hidden="true">image-20211214030334429</figcaption></figure></li></ul><h4 id="image-20211214031442565"><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214031442565.png"alt="image-20211214031442565" /></h4><h4 id="eigenvalues-and-eigenvectors"><a href="#media">Eigenvalues andEigenvectors</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214030718305.png"alt="image-20211214030718305" /><figcaption aria-hidden="true">image-20211214030718305</figcaption></figure><blockquote><p>Theorem:</p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214030759777.png"alt="image-20211214030759777" /><figcaption aria-hidden="true">image-20211214030759777</figcaption></figure></blockquote><p><u>Example</u></p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214030902431.png"alt="image-20211214030902431" /><figcaption aria-hidden="true">image-20211214030902431</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214030933843.png"alt="image-20211214030933843" /><figcaption aria-hidden="true">image-20211214030933843</figcaption></figure><blockquote><p>Theorem:</p><img src="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214031028790.png" class="" title="image-20211214031028790"></blockquote><blockquote><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214031110640.png"alt="image-20211214031110640" /><figcaption aria-hidden="true">image-20211214031110640</figcaption></figure></blockquote><blockquote><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214031214826.png"alt="image-20211214031214826" /><figcaption aria-hidden="true">image-20211214031214826</figcaption></figure></blockquote><blockquote><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214031251188.png"alt="image-20211214031251188" /><figcaption aria-hidden="true">image-20211214031251188</figcaption></figure></blockquote><p><u>Example</u></p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214031324164.png"alt="image-20211214031324164" /><figcaption aria-hidden="true">image-20211214031324164</figcaption></figure><h4 id="orthogonal-eigenvectors-for-normal-operators"><ahref="#media">Orthogonal Eigenvectors for Normal operators</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214031727268.png"alt="image-20211214031727268" /><figcaption aria-hidden="true">image-20211214031727268</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214032247736.png"alt="image-20211214032247736" /><figcaption aria-hidden="true">image-20211214032247736</figcaption></figure><p><u>Exampleimage-20211108141545470</u></p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214032359372.png"alt="image-20211214032359372" /><figcaption aria-hidden="true">image-20211214032359372</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214032428542-7308287.png"alt="image-20211214032428542" /><figcaption aria-hidden="true">image-20211214032428542</figcaption></figure><p><u>Example</u></p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214032459359-7308300.png"alt="image-20211214032459359" /><figcaption aria-hidden="true">image-20211214032459359</figcaption></figure><h4 id="positive-operators"><a href="#media">Positive Operators</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214032733862-7308308.png"alt="image-20211214032733862" /><figcaption aria-hidden="true">image-20211214032733862</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214032811653-7308312.png"alt="image-20211214032811653" /><figcaption aria-hidden="true">image-20211214032811653</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214032626552-7308316.png"alt="image-20211214032626552" /><figcaption aria-hidden="true">image-20211214032626552</figcaption></figure><blockquote><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214032846846-7308320.png"alt="image-20211214032846846" /><figcaption aria-hidden="true">image-20211214032846846</figcaption></figure></blockquote><blockquote><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214033006244-7308327.png"alt="image-20211214033006244" /><figcaption aria-hidden="true">image-20211214033006244</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214033028168-7308334.png"alt="image-20211214033028168" /><figcaption aria-hidden="true">image-20211214033028168</figcaption></figure></blockquote><h4 id="isometry"><a href="#media">Isometry</a></h4><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214033142692-7308338.png"alt="image-20211214033142692" /><figcaption aria-hidden="true">image-20211214033142692</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214033216178-7308341.png"alt="image-20211214033216178" /><figcaption aria-hidden="true">image-20211214033216178</figcaption></figure><blockquote><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214033305526-7308346.png"alt="image-20211214033305526" /><figcaption aria-hidden="true">image-20211214033305526</figcaption></figure></blockquote><p><u>Example</u></p><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214033334279-7308349.png"alt="image-20211214033334279" /><figcaption aria-hidden="true">image-20211214033334279</figcaption></figure><figure><imgsrc="/2022/10/30/Math%20305%20Advanced%20Linear%20Algebra/image-20211214033405060-7308353.png"alt="image-20211214033405060" /><figcaption aria-hidden="true">image-20211214033405060</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>Reading</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Math</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Data Analytics and Visualizations</title>
    <link href="/2022/10/25/Data%20Analytics%20and%20Visualizations/"/>
    <url>/2022/10/25/Data%20Analytics%20and%20Visualizations/</url>
    
    <content type="html"><![CDATA[<h1 id="intro-to-data-analytics-and-visualizations">Intro to DataAnalytics and Visualizations</h1><p><strong>What‚Äôs data visualization?</strong></p><p>Visual representations of datasets</p><p><strong>What‚Äôs information visualization(infovis/infographics)?</strong></p><p>Finding the artificial memory that best supports our natural means ofperception</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-08-22%20at%2015.07.51-6706932.png"alt="Screen Shot 2022-08-22 at 15.07.51" /><figcaption aria-hidden="true">Screen Shot 2022-08-22 at15.07.51</figcaption></figure><p><strong>What‚Äôs illustration</strong></p><p>A visual representation (a picture or diagram) that is used to makesome subject more pleasing or easier to understand</p><p><strong>Illustration or Visualization?</strong></p><p>Visualization is about MAPPING.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-08-22%20at%2015.09.04-6706951.png"alt="Screen Shot 2022-08-22 at 15.09.04" /><figcaption aria-hidden="true">Screen Shot 2022-08-22 at15.09.04</figcaption></figure><p><strong>Why using Visualization?</strong></p><ul><li>Visual Aids for Thinking<ul><li>Calculation on paper</li></ul></li><li>Visualization for Problem-solving<ul><li>Overlapping maps to find pattern</li></ul></li><li>Visualization for Eliciting Knowledge from Data<ul><li>Find data correlations</li></ul></li><li>Visualization for Clarification<ul><li>London subway map</li></ul></li><li>Visualization for Telling a Story</li></ul><p><strong>Two Key Aspects of Information visualization</strong></p><ul><li>Representation</li><li>Interaction</li></ul><h1 id="week-1-reading-post"><strong>Week 1 Reading Post</strong></h1><p><strong>Q1. What factors should you consider when develop avisualization?</strong></p><ol type="1"><li>Consider resource limitations:computational capacity, humanperceptual and cognitive capacity, and display capacity.</li><li>Consider why the user needs it, what data is shown, and how theidiom is designed.</li><li>Consider whether the vis is a stepping stone or for long-termuse.</li><li>Consider what external representations to use</li><li>Consider the task of the vis users</li><li>Consider the effectiveness of vis</li><li>Consider multiple alternatives</li><li>Consider how to validate the vis</li></ol><p><strong>Q2. Choose one type of complex vis idioms from below list andfind one example (attach the picture): tree maps, network, link-node,parallel coordinates, star plot, fields, geometry maps, etc.. Discussits visualization task, interactions, and efficiency.</strong></p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Treemap-with-measure-name-labels-6706960.png"alt="Source: The Information Lab" /><figcaption aria-hidden="true">Source: The Information Lab</figcaption></figure><p>From:https://images.squarespace-cdn.com/content/v1/55b6a6dce4b089e11621d3ed/1528204277811-JX4HT3U2578DXA5CIW7O/Treemap-with-measure-name-labels.png?format=1000w</p><p>Treemap is the visualizations for hierarchical data. It is used toquery attributes at leaf nodes. It shows hierarchical structure withcontainment rather than connection. All of the children of a tree nodeare enclosed within the area allocated that node, creating a nestedlayout. The size of the nodes is mapped to some attribute of the node.Treemaps are very effective for spotting the outliers of very largeattribute values, but it shows no parent‚Äìchild node relationships.</p><h2 id="whats-vis-and-why-do-it">What‚Äôs Vis, and Why Do It?</h2><h3 id="definition-of-visualization">Definition of visualization</h3><p>Computer-based <strong>visualization</strong> systems provide visualrepresentations of datasets designed to help people carry out tasks moreeffectively.</p><p>Visualization is suitable when there is a need to augment humancapabilities rather than replace people with computationaldecision-making methods.</p><h3 id="why-have-a-human-in-the-loop">Why Have a Human in the Loop?</h3><p>Vis allows people to analyze data when they don‚Äôt know exactly whatquestions they need to ask in advance.</p><p>Vis systems are appropriate for use when your goal is to augmenthuman capabilities, rather than completely replace the human in theloop.</p><h3 id="why-have-a-computer-in-the-loop">Why Have a Computer in theLoop?</h3><p>By enlisting computation, you can build tools that allow people toexplore or present large datasets that would be completely infeasible todraw by hand, thus opening up the possibility of seeing how datasetschange over time.</p><h3 id="why-use-an-external-representation">Why Use an ExternalRepresentation?</h3><p>External representations augment human capacity by allowing us tosurpass the limitations of our own internal cognition and memory.</p><p><u>External representations (external memory)</u>: carefully designedimages</p><ol type="1"><li>Diagrams: information can be organized by spatial location, offeringthe possibility of accelerating both search and recognition</li></ol><h3 id="why-depend-on-vision">Why Depend on Vision?</h3><p>Visualization is based on exploiting the human visual system as ameans of communication.</p><p>The visual system provides a very high-bandwidth channel to ourbrains.</p><h3 id="why-show-the-data-in-detail">Why Show the Data in Detail?</h3><p>Vis tools help people in situations where seeing the datasetstructure in detail is better than seeing only a brief summary of it,since a single summary is often an oversimplification that hides thetrue structure of the dataset.</p><ol type="1"><li>when exploring the data to find patterns</li><li>when assessing the validity of a statistical model</li></ol><h3 id="why-use-interactivity">Why Use Interactivity?</h3><p>When datasets are large enough, the limitations of both people anddisplays preclude just showing everything at once;<strong>interaction</strong> where user actions cause the view to changeis the way forward.</p><p>A single static view can show only one aspect of a dataset.</p><h3 id="why-is-the-vis-idiom-design-space-huge">Why Is the Vis IdiomDesign Space Huge?</h3><p>A vis <strong>idiom</strong> is a distinct approach to creating andmanipulating visual representations.</p><p>A more complicated idiom can link together multiple simple chartsthrough interaction.</p><h3 id="why-focus-on-tasks">Why Focus on Tasks?</h3><p>The task of the users is an equally important constraint for a visdesigner as the kind of data that the users have.</p><p>For discovery, vis can be used to generate new hypotheses, as whenexploring a completely unfamil- iar dataset, or to confirm existinghypotheses about some dataset that is already partially understood.</p><h3 id="why-focus-on-effectiveness">Why Focus on Effectiveness?</h3><p>The focus on effectiveness is a corollary of defining vis to have thegoal of supporting user tasks, which means we need to concern aboutcorrectness, accuracy, and truth playing.</p><p>No picture can communicate the truth, the whole truth, and nothingbut the truth.</p><p><em>Any</em> depiction of data is an abstraction where choices aremade about which aspects to emphasize.</p><h3 id="why-are-most-designs-ineffective">Why Are Most DesignsIneffective?</h3><p>The most fundamental reason that vis design is a difficult enter-prise is that the vast majority of the possibilities in the design spacewill be ineffective for any specific usage context.</p><p>In addressing design problems, we should consider ‚Äúsatisfy‚Äù, to findone of the many possible good solutions rather than one of the evenlarger number of bad ones.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-08-27%20at%2018.21.38-6706970.png"alt="Screen Shot 2022-08-27 at 18.21.38" /><figcaption aria-hidden="true">Screen Shot 2022-08-27 at18.21.38</figcaption></figure><p>A fundamental principle of design is to <strong>consider multiplealternatives</strong> and then choose the best, rather than toimmediately fixate on one solution without considering any alternatives,that is, explicitly generate multiple ideas in parallel.</p><h3 id="why-is-validation-difficult">Why Is Validation Difficult?</h3><p>Because there are so many questions that you could ask whenconsidering whether a vis tool has met your design goals.</p><h3 id="why-are-there-resource-limitations">Why Are There ResourceLimitations?</h3><p>You must consider at least three different kinds of limitations:computational capacity, human perceptual and cognitive capacity, anddisplay capacity.</p><p><u>Scalability</u></p><p>designing systems to handle large amounts of data gracefully</p><p><u>Change blindness</u></p><p>The phenomenon where even very large changes are not noticed if weare attending to something else in our view</p><p><u>Information density</u> (Graphic density / data-ink ratio)</p><p>A measure of the amount of information encoded versus the amount ofunused space of a single image.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-08-27%20at%2018.34.16-6706976.png"alt="Screen Shot 2022-08-27 at 18.34.16" /><figcaption aria-hidden="true">Screen Shot 2022-08-27 at18.34.16</figcaption></figure><p>Trade-off: the benefits of showing as much as possible at once vs thecosts of showing too much at once</p><h3 id="why-analyze">Why Analyze?</h3><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220827184540580-6706986.png"alt="image-20220827184540580" /><figcaption aria-hidden="true">image-20220827184540580</figcaption></figure><p><strong>What</strong> data the user sees, <strong>why</strong> theuser intends to use a vis tool, and <strong>how</strong> the visualencoding and in- teraction idioms are constructed in terms of designchoices.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220827184704122-6706995.png"alt="image-20220827184704122" /><figcaption aria-hidden="true">image-20220827184704122</figcaption></figure><p>One of these analysis trios is called an<strong>instance</strong>.</p><h2 id="what-data-abstraction">What: Data Abstraction</h2><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220827184822460-6707002.png"alt="What can be visualized: data, datasets, and attributes" /><figcaption aria-hidden="true">What can be visualized: data, datasets,and attributes</figcaption></figure><h3 id="why-do-data-semantics-and-types-matter">Why Do Data Semanticsand Types Matter?</h3><p>To move beyond guesses, you need to know two crosscutting pieces ofinformation about these terms: their semantics and their types.</p><p><u>Semantics</u></p><p>The <strong>semantics</strong> of the data is its real-worldmeaning</p><p><u>Type</u></p><p>The <strong>type</strong> of the data is its structural ormathematical interpretation.</p><h3 id="data-types">Data Types</h3><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220827193457778-6707013.png"alt="image-20220827193457778" /><figcaption aria-hidden="true">image-20220827193457778</figcaption></figure><p><u>Attributes</u> (variable / data dimension)</p><p>An <strong>attribute</strong> is some specific property that can bemeasured, observed, or logged.</p><p>EG. salary, price, number of sales.</p><p><u>Item</u></p><p>An <strong>item</strong> is an individual entity that isdiscrete.</p><p>EG. a row in a simple table or a node in a network</p><p><u>Link</u></p><p>A <strong>link</strong> is a relationship between items, typ- icallywithin a network.</p><p><u>Grid</u></p><p>A <strong>grid</strong> specifies the strategy for samplingcontinuous data in terms of both geometric and topological relationshipsbetween its cells.</p><p><u>Position</u></p><p>A <strong>position</strong> is spatial data, providing a location intwo-dimensional (2D) or three-dimensional (3D) space.</p><p>EG. a latitude‚Äìlongitude pair</p><h3 id="dataset-types">Dataset Types</h3><p>A <strong>dataset</strong> is any collection of information that isthe target of anal- ysis.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-08-27%20at%2019.40.41-6707019.png"alt="Screen Shot 2022-08-27 at 19.40.41" /><figcaption aria-hidden="true">Screen Shot 2022-08-27 at19.40.41</figcaption></figure><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220827194058822-6707024.png"alt="image-20220827194058822" /><figcaption aria-hidden="true">image-20220827194058822</figcaption></figure><h4 id="tables">Tables</h4><p>Tables have cells indexed by items and attributes, for either thesimple flat case or the more complex multidimensional case.</p><p><u>Flat table</u></p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220827194154498-6707029.png"alt="image-20220827194154498" /><figcaption aria-hidden="true">image-20220827194154498</figcaption></figure><p>Each row represents an <strong>item</strong> of data.</p><p>Each column is an <strong>attribute</strong> of the dataset.</p><p>Each <strong>cell</strong> in the table is fully specified by thecombination of a row and a column‚Äîan item and an attribute‚Äîand containsa <strong>value</strong> for that pair.</p><p><u>Multidimensional table</u></p><p>A <strong>multidimensional table</strong> has a more complexstructure for in- dexing into a cell, with multiple keys.</p><h4 id="networks-and-trees">Networks and Trees</h4><p>In a network, items are usually called nodes, and they are connectedwith links; a special case of networks is trees.</p><p><u>Networks</u></p><p><strong>Networks</strong> is well suited for specifying that there issome kind of relationship between two or more items.</p><p>An item in a network is often called a <strong>node</strong>.(vertex)</p><p>A <strong>link</strong> is a relation between two items.(edge)</p><p>Network nodes can have associated attributes</p><p>The links themselves could also be considered to have attributesassociated with them; these may be partly or wholly disjoint from thenode attributes.</p><p><u>Trees</u></p><p>Networks with hierarchical structure are more specifically called<strong>trees</strong>.</p><p>Trees do not have cycles: each child node has only one parent nodepointing to it</p><h4 id="fields">Fields</h4><p>Continuous fields have grids based on spatial positions where cellscontain attributes.</p><p>Each <strong>cell</strong> in a field contains measurements orcalculations from a <strong>continuous</strong> domain</p><p>Continuous data requires careful treatment that takes into ac- countthe mathematical questions of <strong>sampling</strong>, how frequentlyto take the measurements, and <strong>interpolation</strong>, how toshow values in between the sampled points in a way that does notmislead.</p><p><u>Spatial Fields</u></p><p>Continuous data is often found in the form of a <strong>spatialfield</strong>, where the cell structure of the field is based onsampling at spatial po- sitions.</p><p>A central concern in infovis is determining whether the chosen idiomis suitable for the combination of data and task, leading to the use ofmethods from human‚Äìcomputer interaction and design.</p><p><u>Grid Types</u></p><p>When a field contains data created by sampling at completely reg-ular intervals, the cells form a <strong>uniform grid</strong>.</p><p>A <strong>rectilinear grid</strong> supports nonuniform sampling,allowing efficient storage of information that has high complexity insome areas and low complexity in others, at the cost of storing someinformation about the geometric location of each each row.</p><p>A <strong>structured grid</strong> allows curvilinear shapes, wherethe geometric location of each cell needs to be specified.</p><p><strong>Unstructured grids</strong> provide complete flexibility, butthe topological information about how the cells connect to each othermust be stored explicitly in addition to their spatial positions.</p><h4 id="geometry">Geometry</h4><p>The <strong>geometry</strong> dataset type specifies informationabout the shape of items with explicit spatial positions.</p><p>The items could be points, or one-dimensional lines or curves, or 2Dsurfaces or regions, or 3D volumes.</p><p>Spatial data often includes hierarchical structure at multiplescales.</p><p>Geometry datasets do not necessarily have attributes, in con- trastto the other three basic dataset types.</p><p>Geometric data is sometimes shown alone, particularly when shapeunderstanding is the primary task.</p><h4 id="other-combinations">Other Combinations</h4><p>A <strong>set</strong> is simply an unordered group of items.</p><p>A group of items with a specified ordering could be called a<strong>list</strong>.</p><p>A <strong>cluster</strong> is a grouping based on attributesimilarity, where items within a cluster are more similar to each otherthan to ones in another cluster.</p><p>A <strong>path</strong> through a network is an ordered set of seg-ments formed by links connecting nodes.</p><p>A <strong>compound network</strong> is a network with an associatedtree: all of the nodes in the network are the leaves of the tree, andinterior nodes in the tree provide a hierarchical structure for thenodes that is different from network links between them.</p><h4 id="dataset-availability">Dataset Availability</h4><p>The default approach to vis assumes that the entire dataset isavailable all at once, as a <strong>static file</strong>.</p><p>Some datasets are instead <strong>dynamic streams</strong>, where thedataset information trickles in over the course of the vis session.</p><h3 id="attribute-types">Attribute Types</h3><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220828001436631-6707038.png"alt="image-20220828001436631" /><figcaption aria-hidden="true">image-20220828001436631</figcaption></figure><h4 id="categorical-nominal">Categorical (Nominal)</h4><p>The type of <strong>categorical</strong> data does not have animplicit ordering, but it often has hierarchical structure.</p><p>Categories can only distinguish whether two things are the same(apples) or different (apples versus oranges).</p><h4 id="ordered-ordinal-and-quantitative">Ordered: Ordinal andQuantitative</h4><p>All <strong>ordered</strong> data does have an implicit ordering</p><p><u>Ordinal data</u></p><p>With <strong>ordinal</strong> data, we cannot do full-fledged arith-metic, but there is a well-defined ordering</p><p><u>Quantitative data</u></p><p>A measurement of magnitude that supports arithmetic comparison.</p><p>Both integers and real numbers are quantitative data.</p><p><u>Sequential versus Diverging</u></p><p>Ordered data can be either <strong>sequential</strong>, where thereis a homoge- neous range from a minimum to a maximum value (height), or<strong>diverging</strong>, which can be deconstructed into twosequences pointing in oppo- site directions that meet at a common zeropoint (A full <em>elevation</em> dataset).</p><p><u>Cyclic</u></p><p>The values wrap around back to a starting point rather thancontinuing to increase indefinitely (the hour of the day, the day of theweek, and the month of the year).</p><h4 id="hierarchical-attributes">Hierarchical Attributes</h4><p>There may be hierarchical structure within an attribute or betweenmultiple attributes.</p><p>For example, the geographic attribute of a postal code can beaggregated up to the level of cities or states or entire countries.</p><h3 id="semantics">Semantics</h3><h4 id="key-versus-value-semantics">Key versus Value Semantics</h4><p>A <strong>key</strong> (<strong>independent attribute</strong>)attribute acts as an index that is used to look up<strong>value</strong> (<strong>dependent attribute</strong>)attributes.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220828150438213-6707050.png"alt="image-20220828150438213" /><figcaption aria-hidden="true">image-20220828150438213</figcaption></figure><p><u>Flat Tables</u></p><p>A simple <strong>flat table</strong> has only one key, where eachitem corresponds to a row in the table, and any number of valueattributes.</p><p>In this case, there must not be any duplicate values within thatattribute.</p><p>In tables, keys may be categorical or ordinal attributes.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220828150850446-6707057.png"alt="image-20220828150850446" /><figcaption aria-hidden="true">image-20220828150850446</figcaption></figure><p><u>Multidimensional Tables</u></p><p>A <strong>multidimensional table</strong>, where multiple keys arerequired to look up an item.</p><p>The combination of all keys must be <strong>unique</strong> for eachitem, even though an individual key attribute may containduplicates.</p><p><u>Fields</u></p><p>Fields represent continuous rather than discrete data, keys andvalues are still central concerns.</p><p>Fields are structured by sampling in a systematic way so that eachgrid cell is spanned by a unique range from a continuous domain.</p><p>In spatial fields, spatial position acts as a quantitative key.</p><p>The crucial difference between fields and tables is that usefulanswers for attribute values are returned for locations throughout thesampled range, not just the exact points where data was recorded.</p><p>Fields are typically characterized in terms of the number of keysversus values.</p><p>The standard classification according to multivariate structure isthat a <strong>scalar field</strong> has one attribute per cell, a<strong>vector field</strong> has two or more attributes per cell, and a<strong>tensor field</strong> has many attributes per cell.</p><p><u>Scalar Fields</u></p><p>A <strong>scalar field</strong> is univariate, with a single valueattribute at each point in space.</p><p>The geometric intuition is that each point in a scalar field has asingle value.</p><p><u>Vector Fields</u></p><p>A <strong>vector field</strong> is multivariate, with a list ofmultiple attribute values at each point.</p><p>EG. a 3D vector field is the velocity of air in the room at aspecific time point, where there is a direction and speed for eachitem.</p><p><u>Tensor Fields</u></p><p>A <strong>tensor field</strong> has an array of attributes at eachpoint, representing a more complex multivariate mathematical structurethan the list of numbers in a vector.</p><h4 id="temporal-semantics">Temporal Semantics</h4><p>A <strong>temporal</strong> attribute is simply any kind ofinformation that relates to time.</p><p>The time hierarchy is deeply multiscale: the scale of interest couldrange anywhere from nanoseconds to hours to decades to millennia.</p><p>One important idea is that even though the dataset semantics involveschange over time, there are many approaches to visually encoding thatdata‚Äîand only one of them is to show it changing over time in the formof an animation.</p><p>Temporal attributes can have either value or key semantics.</p><p>A temporal key attribute is usually considered to have a<strong>quantitative</strong> type, although it‚Äôs possible to considerit as ordinal data if the duration between events is notinteresting.</p><p><u>Time-Varying Data</u></p><p>A dataset has <strong>time-varying</strong> semantics when time isone of the key attributes, as opposed to when the temporal attribute isa value rather than a key.</p><p>A common case of temporal data occurs in a<strong>time-series</strong> dataset, namely, an ordered sequence oftime‚Äìvalue pairs. These datasets are a special case of tables, wheretime is the key.</p><h1 id="week-2-reading-post">Week 2 Reading Post</h1><p>Read Munzner 2014 Chapter 3. Write Short Answers to Below Questions(2-3 sentences per question), and <strong>reply to at least one otherperson's post.</strong></p><p>Q1. Find <strong>one visualization example</strong> (you can use theones posted in week 1 forum) and analyze its user tasks.</p><p>Q2. Briefly discuss <strong>one of the three work</strong>(ChartSeer, MoocVideo, NBSearch) Dr. Zhao shared in his guestlecture:</p><p>- what is this work about?</p><p>- how did the authors achieve their visualization goals/tool?</p><p>- why is this topic/visualization tool important?</p><p>References to Dr. Zhao's papers:</p><p>Zhao, J., Fan, M., &amp; Feng, M. (2020). Chartseer: Interactivesteering exploratory visual analysis with machine intelligence. <em>IEEETransactions on Visualization and Computer Graphics</em>.</p><p>Zhao, J., Bhatt, C., Cooper, M., &amp; Shamma, D. A. (2018, April).Flexible learning with semantic visual exploration and sequence-basedrecommendation of MOOC videos. In <em>Proceedings of the 2018 CHIConference on Human Factors in Computing Systems</em> (pp. 1-13).</p><p>Li, X., Wang, Y., Wang, H., Wang, Y., &amp; Zhao, J. (2021, May).NBSearch: Semantic Search and Visual Exploration of ComputationalNotebooks. In <em>Proceedings of the 2021 CHI Conference on HumanFactors in Computing Systems</em> (pp. 1-14).</p><p><strong>Q1</strong></p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Treemap-with-measure-name-labels-6707064.png"alt="Source: The Information Lab" /><figcaption aria-hidden="true">Source: The Information Lab</figcaption></figure><p>From:https://images.squarespace-cdn.com/content/v1/55b6a6dce4b089e11621d3ed/1528204277811-JX4HT3U2578DXA5CIW7O/Treemap-with-measure-name-labels.png?format=1000w</p><p>The main user task of this chart is to consume, more specifically, topresent. This chart displays the sales and profit data of products of acompany in a treemap to the user. The area of the treemap blocksrepresents the sales of a product, where a product with higher salesoccupies a larger area. The treemap block's color represents a product'sprofits, where a more positive profit is represented by darker green anda more negative profit is represented by darker red.</p><p><strong>Q2.</strong></p><p><u>Chartseer</u></p><p>What:</p><p>Help people create charts with a machine learning engine by providingdynamic chart summarization views and chart recommendation views.</p><p>How:</p><p>This tool is embedded with GVAE(grammar variational autoencoder) thathas the DNN (Deep Neural Network) encoder to encode charts into vectorsand the DNN decoder to decode vectors into charts. The chartsummarization function is based on the DNN encoder, while the chartrecommendation function is based on the DNN decoder.</p><p>Why:</p><p>This tool is proposed to solve the challenges of conductingexploratory visual analysis (EVA). During EVA, analysts often get lostin the vast combinations of data variables and fail to conduct theiranalysis from a holistic view when they are making decisions on whichsubsequent activities to perform.</p><p><u>MOOCex</u></p><p>What:</p><p>MOOCex is a visual recommender system that recommends MOOC courses.Taking video lecture contents and course syllabus into consideration,MOOCex provides recommendations of lecture videos across differentcourses and presents an interactive visual semantic map of therecommendations to the learners.</p><p>How:</p><p>This tool consists of two main parts: recommendation engine andvisualization generation. For the recommendation engine part, based onthe content-based recommendation, the author improved the recommendationsystem using a sequence-based re-ranking model that ranks topicsimilarity, global sequence score, and local sequence score. Thisrecommendation system is trained on over 4000 videos. For generating avisualization of recommendation results, techniques likemultidimensional scaling, hierarchical clustering, and keywordextraction are used to generate a semantic map for the users.</p><p>Why:</p><p>Massive Open Online Course (MOOC) platforms are getting popular, buttheir course curriculum is limited since those courses are predefinedand prerecorded. Also, most MOOC platforms use content-basedrecommendations to provide a ranked list for recommendations, whichprevents learners from exploring learning content and making videoplayback decisions. Thus, MOOCex is introduced to help learners.</p><p><u>NBSearch</u></p><p>What:</p><p>NBSearch is a code search engine designed for Jupyter notebooks thatsupports natural language queries and interactive visual searchresults.</p><p>How:</p><p>The author trains machine learning models to interpret semantic codesearch queries to code descriptors. The models are trained withcommented Jupyter notebook cells to understand natural languages. Then,to help the user explore the query result, an interactive search resultpanel is designed to display a ranked list of relevant cells.</p><p>Why:</p><p>Code search is important for developers. However, for a developerusing computational notebooks, code search is limited due to theflexible nature of the notebooks. For example, notebooks are oftencomposed of loosely-connected cells, meaning that code in those cells isboth independent and interrelated, which poses a great challenge tosemantic code search. Also, a novel search result interface rather thansimply listing the results is needed because of the complex relationshipamong notebook cells.</p><h2 id="why-task-abstraction">Why: Task Abstraction</h2><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-01%20at%2014.27.34-6707071.png"alt="Why people are using vis in terms of actions and targets." /><figcaption aria-hidden="true">Why people are using vis in terms ofactions and targets.</figcaption></figure><h3 id="why-analyze-tasks-abstractly">Why Analyze Tasks Abstractly?</h3><p>Transforming task descriptions from domain-specific language intoabstract form allows you to reason about similarities and differencesbetween them.</p><p>The task abstraction can and should guide the data abstraction.</p><h3 id="who-designer-or-user">Who: Designer or User</h3><p>Vis tools fall somewhere along a continuum from specific togeneral.</p><p>Specialized vis tools are designed for specific contexts with anarrow range of data configurations, especially those created through aproblem-driven process.</p><p>General vis tools are designed to handle a wide range of data in aflexible way.</p><h3 id="actions">Actions</h3><p>Hight-level: <em>analyze</em></p><p>Mid-level: <em>search</em></p><p>Low-level: <em>query</em></p><h4 id="analyze">Analyze</h4><p>At the highest level, the framework distinguishes between twopossible goals of people who want to <strong>analyze</strong> data usinga vis tool: users might want only to <em>consume</em> existinginformation or also to actively <em>produce</em> new information.</p><p>The most common use case for vis is for the user to<strong>consume</strong> information that has already been generated asdata stored in a format amenable to computation.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-01%20at%2015.05.21-6707094.png"alt="Screen Shot 2022-09-01 at 15.05.21" /><figcaption aria-hidden="true">Screen Shot 2022-09-01 at15.05.21</figcaption></figure><p><u>Discover</u></p><p>The <strong>discover</strong> goal refers to using vis to find newknowledge that was not previously known. Discovery may arise from theserendipitous observation of unexpected phenomena, but the investigationmay be motivated by existing theories, models, hypotheses, or hunches;the outcome is to <strong>generate</strong> a new hypothesis, and to<strong>verify</strong>‚Äîor disconfirm‚Äîan existing hypothesis.</p><p>The fundamental motivation of this analysis framework is to help youseparate out the questions of <em>why</em> the vis is being used from<em>how</em> the vis idiom is designed to achieve those goals</p><p><u>Present</u></p><p>The <strong>present</strong> goal refers to the use of vis for thesuccinct communication of information, for telling a story with data, orfor guiding an audience through a series of cognitive operations.</p><p>The crucial point about the <em>present</em> goal is that vis isbeing used by somebody to communicate something specific and alreadyunderstood to an audience.</p><p><u>Enjoy</u></p><p>The <strong>enjoy</strong> goal refers to casual encounters withvis.</p><p>One aspect of this classification that‚Äôs tricky is that the goals ofthe eventual vis user might not be a match with the user goalsconjectured by the vis designer.</p><h4 id="produce">Produce</h4><p>in the <strong>produce</strong> case, the intent of the user is togenerate new material. Often the goal with <em>produce</em> is toproduce output that is used im- mediately, as input to the nextinstance.</p><p><u>Annotate</u></p><p>The <strong>annotate</strong> goal refers to the addition ofgraphical or textual annotations associated with one or more preexistingvisualization elements, typically as a manual action by the user.</p><p>When an annotation is associated with data items, the annotationcould be thought of as a new attribute for them.</p><p><u>Record</u></p><p>The <strong>record</strong> goal saves or captures visualizationelements as persistent artifacts.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-01%20at%2015.43.55-6707104.png"alt="Screen Shot 2022-09-01 at 15.43.55" /><figcaption aria-hidden="true">Screen Shot 2022-09-01 at15.43.55</figcaption></figure><p>Recording and retaining artifacts such as these are often desirablefor maintaining a sense of analytical provenance, allowing users torevisit earlier states or parameter settings.</p><p><u>Derive</u></p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220901154912445-6707112.png"alt="image-20220901154912445" /><figcaption aria-hidden="true">image-20220901154912445</figcaption></figure><p>The <strong>derive</strong> goal is to produce new data elementsbased on existing data elements.</p><p>New attributes can be derived from information contained withinexisting ones, or data can be transformed from one type intoanother.</p><p>The common case is that deriving new data is a choice made by visdesigners, but this choice could also be driven by a user of a vistool.</p><p>Changing the dataset to another form by deriving new attributes andtypes greatly expands the design space of possible vis idioms that youcan use to display it.</p><p>Datasets can be transformed into new ones of a different type, justas new attributes can be derived from existing ones.</p><h4 id="search">Search</h4><p>All of the high-level <em>analyze</em> cases require the user to<strong>search</strong> for elements of interest within the vis as amid-level goal.</p><p><u>Lookup</u></p><p>If users already know both what they‚Äôre looking for and where it is,then the search type is simply <strong>lookup</strong>.</p><p><u>Browse</u></p><p>When users don‚Äôt know exactly what they‚Äôre looking for, but they dohave a location in mind of where to look for it, the search type is<strong>browse</strong>.</p><p><u>Explore</u></p><p>When users are not even sure of the location, the search type is<strong>explore</strong>.</p><h4 id="query">Query</h4><p>Once a target or set of targets for a search has been found, a low-level user goal is to <strong>query</strong> these targets at one ofthree scopes: <em>identify</em>, <em>compare</em>, or<em>summarize</em>.</p><p>The progression of these three corresponds to an increase in theamount of search targets under consideration: one, some, or all.</p><p><u>Identify</u></p><p>The scope of <strong>identify</strong> is a single target.</p><p>If a search returns known targets, either by <em>lookup</em> or<em>locate</em>, then <em>identify</em> returns theircharacteristics.</p><p><u>Compare</u></p><p>The scope of <strong>compare</strong> is multiple targets.</p><p><u>Summarize</u></p><p>The scope of <strong>summarize</strong> task is all possible targets.A synonym for <em>summarize</em> is <strong>overview</strong>.</p><h3 id="targets">Targets</h3><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220901214829691-6707119.png"alt="image-20220901214829691" /><figcaption aria-hidden="true">image-20220901214829691</figcaption></figure><p><u>For all kinds of data</u></p><p>A <strong>trend</strong> is a high-level characterization of apattern in the data.</p><p>Almost inevitably, some data doesn‚Äôt fit well with that backdrop;those el- ements are the <strong>outliers</strong></p><p>The exact definition of <strong>features</strong> is task dependent,meaning any particular structures of interest.</p><p><u>For attributes</u></p><ol type="1"><li>Find an individual value</li><li>Find the extremes</li><li>Find the distribution of all values for an attribute.</li></ol><p><u>For multiple attributes</u></p><p>A first attribute can have a <strong>dependency</strong> on a second,where the values for the first directly depend on those of thesecond.</p><p>There is a <strong>correlation</strong> between one attribute andanother if there is a tendency for the values of second to be tied tothose of the first.</p><p>The <strong>similarity</strong> between two attributes can be definedas a quantitative measurement calculated on all of their values,allowing attributes to be ranked with respect to how similar, ordifferent, they are from each other.</p><p><u>Network data</u></p><p>The fundamental target with network data is to understand thestructure of these interconnections; that is, the network‚Äôs<strong>topology</strong>.</p><p>A more specific topological target is a <strong>path</strong> of oneor more links that connects two nodes.</p><p><u>Spatial data</u></p><p>Understanding and comparing the geo- metric <strong>shape</strong> isthe common target of user actions.</p><h3 id="how-a-preview">How: A Preview</h3><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220901222808610-6707131.png"alt="image-20220901222808610" /><figcaption aria-hidden="true">image-20220901222808610</figcaption></figure><h3 id="analyzing-and-deriving-examples">Analyzing and Deriving:Examples</h3><h4 id="comparing-two-idioms">Comparing Two Idioms</h4><p>Examine two different vis tools that have different answers for thequestion of <em>how</em> the idiom is designed when used for exactly thesame context of <em>why</em> and <em>what</em> at the abstractionlevel.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220901225846110-6707137.png"alt="image-20220901225846110" /><figcaption aria-hidden="true">image-20220901225846110</figcaption></figure><p>What these tools take as input data is the same: a large treecomposed of nodes and links.</p><p>Why these tools are being used is for the same goal in this sce-nario: to present a path traced between two nodes of interest to acolleague.</p><p>Both tools can be used to locate paths between nodes and identifythem.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220901230027685-6707142.png"alt="image-20220901230027685" /><figcaption aria-hidden="true">image-20220901230027685</figcaption></figure><p>SpaceTree ties the act of selection to a change of what is shown byautomatically aggregating and filtering the unselected items.</p><p>In contrast, TreeJuxtaposer allows the user to arrange areas of thetree to ensure visibility for areas of interest.</p><h4 id="deriving-one-attribute">Deriving One Attribute</h4><p>In a vis showing a complex network or tree, it is useful to be ableto filter out most of the complexity by drawing a simpler picture thatcommunicates the key aspects of its topological structure: calculate anew derived attribute that measures the importance of each node in thegraph and filter based on that attribute.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-02%20at%2000.10.37-6707149.png"alt="Screen Shot 2022-09-02 at 00.10.37" /><figcaption aria-hidden="true">Screen Shot 2022-09-02 at00.10.37</figcaption></figure><p>Very central nodes have large Strahler numbers, whereas peripheralnodes have low values.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220902001140567-6707154.png"alt="image-20220902001140567" /><figcaption aria-hidden="true">image-20220902001140567</figcaption></figure><h4 id="deriving-many-new-attributes">Deriving Many New Attributes</h4><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220902002123410-6707159.png"alt="image-20220902002123410" /><figcaption aria-hidden="true">image-20220902002123410</figcaption></figure><p>The power of this idiom lies in seeing where regions that arecontiguous in one view fall in the other views.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220902002144973-6707163.png"alt="image-20220902002144973" /><figcaption aria-hidden="true">image-20220902002144973</figcaption></figure><h1 id="week-3-reading-post">Week 3 Reading Post</h1><p>Read Munzner 2014 Chapter 5 and 10. Answer below questions with 2-3sentences, and <strong>reply to at least one other person'spost.</strong></p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Treemap-with-measure-name-labels-6707169.png"alt="Source: The Information Lab" /><figcaption aria-hidden="true">Source: The Information Lab</figcaption></figure><p>From:https://images.squarespace-cdn.com/content/v1/55b6a6dce4b089e11621d3ed/1528204277811-JX4HT3U2578DXA5CIW7O/Treemap-with-measure-name-labels.png?format=1000w</p><p>Q1. Find one visualization with multiple channels, describe itschannels and marks, and then discuss the channel effectiveness (e.g.,accuracy, discriminability, separability, pop-out, grouping).</p><p>This treemap has channels of size and color and marks of areas. Forits channel effectiveness, it uses area size to indicate the salesamount. As Figure 5.7 from the textbook suggests, we humans haverelatively low accuracy of perception area channel. As in the treemap,it is easy to tell the sales amount of paper is lower than that ofoffice machines based on the area while it is hard for us to tell thedifference between the sales amount of office machines and tables basedon area channel. For the color channel, it uses color saturation andcolor hue to indicate the profit of a product with purer greenindicating higher positive profit and purer red indicating highernegative profit. It is very discriminable for us to tell whether aproduct has positive or negative profits based on the color hue channel.However, for the two products has similar profits, the color saturationchannel is not discriminable, for instance, office machines and chairs&amp; chairmats.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2001.40.49-6707175.png"alt="Screen Shot 2022-09-11 at 01.40.49" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at01.40.49</figcaption></figure><p>Q2. For the same visualization, analyze its color selection (e.g.,luminance, saturation, hues, transparency), its color map (how colorsare used to encode categories and groups), and other channels ifapplicable (e.g., how size, angle, motion, texture, etc. are used toencode categories and groups).</p><p>The treemap uses color saturation and color hue to indicate theprofit of a product with purer green indicating higher positive profitand purer red indicating higher negative profit. While the red and greencolor hues can help the user distinguishes the profit and loss, thecolor saturation does a bad job in encoding profit amount, which isquantitative data. For the color map, it uses red and green to encodeprofit and loss data, which is categorical, and color saturation toencode the profit amount, which is quantitative data. For otherchannels, it uses the size of the area to encode the amount ofsales.</p><h2 id="marks-and-channels">Marks and Channels</h2><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-10%20at%2023.01.32-6707194.png"alt="Screen Shot 2022-09-10 at 23.01.32" /><figcaption aria-hidden="true">Screen Shot 2022-09-10 at23.01.32</figcaption></figure><p>Marks are basic geometric elements that depict items or links, andchannels control their appearance.</p><h3 id="why-marks-and-channels">Why Marks and Channels?</h3><p>The core of the design space of visual encodings can be described asan orthogonal combination of two aspects: graphical elements calledmarks, and visual channels to control their appearance.</p><h3 id="defining-marks-and-channels">Defining Marks and Channels</h3><p><u>Mark</u></p><p>A <strong>mark</strong> is a basic graphical element in an image.</p><p>A zero- dimensional (<strong>0D</strong>) mark is a point</p><p>A one-dimensional (<strong>1D</strong>) mark is a line</p><p>A two-dimensional (<strong>2D</strong>) mark is an area</p><p>A three- dimensional (<strong>3D</strong>) volume mark ispossible</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-10%20at%2023.21.38-6707200.png"alt="Screen Shot 2022-09-10 at 23.21.38" /><figcaption aria-hidden="true">Screen Shot 2022-09-10 at23.21.38</figcaption></figure><p><u>Channel</u></p><p>A visual <strong>channel</strong> is a way to control the appearanceof marks, independent of the dimensionality of the geometricprimitive</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-10%20at%2023.25.30-6707205-6707208.png"alt="Screen Shot 2022-09-10 at 23.25.30" /><figcaption aria-hidden="true">Screen Shot 2022-09-10 at23.25.30</figcaption></figure><p><u>Using marks and channels</u></p><p>Figure 5.4 shows a progression of chart types, with each show- ingone more quantitative data attribute by using one more visualchannel.</p><p>The size and shape channels cannot be used on all types of marks: thehigher-dimensional mark types usually have built-in constraints thatarise from the way that they are defined.</p><p>An area mark has both dimensions of its size constrained intrinsi-cally as part of its shape, so area marks typically are not size codedor shape coded.</p><p>A line mark that encodes a quantitative attribute using length in onedirection can be size coded in the other dimension by changing the widthof the line to make it fatter.</p><p>Point marks can indeed be size coded and shape coded because theirarea is completely unconstrained.</p><h4 id="channel-types">Channel Types</h4><p>The <strong>identity</strong> channels tell us infor- mation about<em>what</em> something is or <em>where</em> it is.</p><p>The <strong>magnitude</strong> channels tell us <em>how much</em> ofsomething there is.</p><h4 id="mark-types">Mark Types</h4><p>For table datasets, where a mark always represents an item.</p><p>For network datasets, a mark might represent either an item‚Äîalsoknown as a node‚Äîor a link.</p><p>Link marks represent a relationship between items.A<strong>connection</strong> mark shows a pairwise relationship betweentwo items, using a line. A <strong>containment</strong> mark showshierarchical relationships using areas, and to do so connection markscan be nested within each other at multiple levels. While the visualrepresentation of the area mark might be with a line that depicts itsboundary, containment is fun- damentally about the use of area.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220910234414340-6707217.png"alt="image-20220910234414340" /><figcaption aria-hidden="true">image-20220910234414340</figcaption></figure><h3 id="using-marks-and-channels">Using Marks and Channels</h3><p>All channels are not equal: the same data attribute encoded with twodifferent visual channels will result in different information contentin our heads after it has passed through the perceptual and cognitiveprocessing pathways of the human visual system.</p><p>The use of marks and channels in vis idiom design should be guided bythe principles of expressiveness and effectiveness.</p><h4 id="expressiveness-and-effectiveness">Expressiveness andEffectiveness</h4><p><u>Expressiveness</u></p><p>The <strong>expressiveness principle</strong> dictates that thevisual encoding should express all of, and only, the information in thedataset attributes.</p><p>The most fundamental expression of this principle is that ordereddata should be shown in a way that our perceptual system intrinsicallysenses as ordered. Conversely, unordered data should not be shown in away that perceptually implies an ordering that does not exist.</p><p>The identity channels are the correct match for the categoricalattributes that have no intrinsic order. The magnitude channels are thecorrect match for the ordered at- tributes, both ordinal andquantitative.</p><p><u>Effectiveness</u></p><p>The <strong>effectiveness principle</strong> dictates that theimportance of the attribute should match the <strong>salience</strong>of the channel; that is, its noticeability.</p><h4 id="channel-rankings">Channel Rankings</h4><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220910235419785-6707225.png"alt="image-20220910235419785" /><figcaption aria-hidden="true">image-20220910235419785</figcaption></figure><p>The attributes encoded with position will dominate the user‚Äôs<strong>mental model</strong>‚Äîtheir internal mental representation usedfor thinking and reasoning‚Äîcompared with those encoded with any othervisual channel.</p><h3 id="channel-effectiveness">Channel Effectiveness</h3><p>To analyze the space of visual encoding possibilities you need tounderstand the characteristics of these visual channels.</p><h4 id="accuracy">Accuracy</h4><p><strong>Accuracy</strong>: how close is human perceptual judgement tosome objective measurement of the stimulus?</p><p>Our responses to the sensory experience of magnitude arecharacterizable by power laws, where the exponent depends on the exactsensory modality: most stimuli are magnified or com- pressed, with fewremaining unchanged.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2001.40.49-6707231.png"alt="Screen Shot 2022-09-11 at 01.40.49" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at01.40.49</figcaption></figure><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911014108183-6707242.png"alt="image-20220911014108183" /><figcaption aria-hidden="true">image-20220911014108183</figcaption></figure><h4 id="discriminability">Discriminability</h4><p>The question of <strong>discriminability</strong> is: if you encodedata using a particular visual channel, are the differences betweenitems perceptible to the human as intended?</p><p>The characterization of visual chan- nel thus should quantify thenumber of <strong>bins</strong> that are available for use within avisual channel, where each bin is a distinguishable step or level fromthe other.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2001.49.28-6707247.png"alt="Screen Shot 2022-09-11 at 01.49.28" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at01.49.28</figcaption></figure><p>Consider line width: changing the line size only works for a fairlysmall number of steps. Increasing the width past that limit will resultin a mark that is perceived as a polygon area rather than a linemark.</p><p>The key factor is matching the ranges: the number of different valuesthat need to be shown for the attribute being encoded must not begreater than the number of bins available for the visual channel used toencode it.</p><h4 id="separability">Separability</h4><p>You must consider a continuum of potential interac- tions betweenchannels for each pair, ranging from the orthogonal and independent<strong>separable</strong> channels to the inextricably combined<strong>integral</strong> channels.</p><p>Integrality and separability are two endpoints of a con- tinuum, notstrictly binary categories</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911015031783-6707253.png"alt="image-20220911015031783" /><figcaption aria-hidden="true">image-20220911015031783</figcaption></figure><h4 id="popout">Popout</h4><p>Many visual channels provide visual <strong>popout</strong>, where adistinct item stands out from many others immediately.</p><p>The great value of popout is that the time it takes us to spot thedifferent object does not depend on the number of distractorobjects.</p><p>Popout is not an all-or-nothing phenomenon. It depends on both thechannel itself and how different the target item is from itssurroundings.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911015123465-6707260.png"alt="image-20220911015123465" /><figcaption aria-hidden="true">image-20220911015123465</figcaption></figure><p><imgsrc="Data%20Analytics%20and%20Visualizations//image-20220911015250927.png"alt="image-20220911015250927" /> Popout is definitely not possible withthree or more chan- nels. As a general rule, vis designers should onlycount on using popout for a single channel at a time.</p><h4 id="grouping">Grouping</h4><p>Containment is the strongest cue for grouping, with connection comingin second.</p><p>The third strongest grouping approach is <strong>proximity</strong>;that is, placing items within the same spatial region.</p><p>The final grouping channel is <strong>similarity</strong> with theother categorical channels of hue and motion, and also shape if chosencarefully.</p><h3 id="relative-versus-absolute-judgements">Relative versus AbsoluteJudgements</h3><p>The human perceptual system is fundamentally based on relativejudgements, not absolute ones; this principle is known as<strong>Weber‚Äôs Law</strong>. This principle holds true for all sensorymodalities.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911015448704-6707270.png"alt="image-20220911015448704" /><figcaption aria-hidden="true">image-20220911015448704</figcaption></figure><p>Another example shows that our perception of color and lumi- nance iscompletely contextual, based on the contrast with sur- roundingcolors.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2001.55.02-6707276.png"alt="Screen Shot 2022-09-11 at 01.55.02" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at01.55.02</figcaption></figure><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911015517422-6707281.png"alt="image-20220911015517422" /><figcaption aria-hidden="true">image-20220911015517422</figcaption></figure><h2 id="map-color-and-other-channels">Map Color and Other Channels</h2><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911173231351-6707286.png"alt="image-20220911173231351" /><figcaption aria-hidden="true">image-20220911173231351</figcaption></figure><p>The colloquial term <em>color</em> is best understood in terms ofthree separate channels: luminance, hue, and saturation.</p><p>The major design choice for colormap construction is whether theintent is to distinguish between categorical attributes or to encodeordered attributes.</p><h3 id="color-theory">Color Theory</h3><h4 id="color-vision">Color Vision</h4><p>The <strong>rods</strong> actively contribute to vision only inlow-light settings and provide low-resolution black-and-whiteinformation. The main sensors in normal lighting conditions are the<strong>cones</strong>. The luminance channel conveys high-resolutionedge information, while the red‚Äìgreen and blue‚Äìyellow channels are lowerresolution.</p><h4 id="color-spaces">Color Spaces</h4><p><u>RGB</u></p><p>The most common color space.</p><p>Although this system is computationally convenient, it is a very poormatch for the me- chanics of how we see.</p><p><u>HSL</u></p><p><strong>HSL</strong> system, is more intuitive and is heavily used byartists and designers.</p><p>The <strong>hue</strong> axis captures what we normally think of aspure colors that are not mixed with white or black: red, blue, green,yellow, purple, and so on.</p><p>The <strong>saturation</strong> axis is the amount of white mixedwith that pure color. (pink is a partially desaturated red.)</p><p>The <strong>lightness</strong> axis is the amount of black mixed witha color.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2021.05.50-6707295.png"alt="Screen Shot 2022-09-11 at 21.05.50" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at21.05.50</figcaption></figure><p>The HSV space is very similar, where V stands for grayscale value andis linearly related to L.</p><p>it is only pseudoperceptual: it does not truly reflect how weperceive color.</p><p><u>L‚àóa‚àób‚àó</u></p><p>This space has a single black and white luminance channel L‚àó, and thetwo color axes a‚àó and b‚àó.</p><p>The L‚àó axis is a nonlinear transformation of the luminance perceivedby the human eye.</p><p>The L‚àó axis is de- signed to be perceptually linear, so that equallysized steps appear equal to our visual systems, based on extensivemeasurement and calibration over a very large set of observers.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911210714659-6707300.png"alt="image-20220911210714659" /><figcaption aria-hidden="true">image-20220911210714659</figcaption></figure><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2021.07.21-6707306.png"alt="Screen Shot 2022-09-11 at 21.07.21" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at21.07.21</figcaption></figure><h4 id="luminance-saturation-and-hue">Luminance, Saturation, andHue</h4><p>Luminance and saturation are magnitude channels, while hue is aidentity channel.</p><p>The magnitude channel of <strong>luminance</strong> is suitable forordered data types.</p><p>Ware suggests avoiding grayscale if more than two to four bins arerequired</p><p>A crucial consideration when visual encoding with color is thatluminance contrast is the only way we can resolve fine detail and seecrisp edges; hue contrast or saturation contrast does not providedetectable edges.</p><p>The magnitude channel of <strong>saturation</strong> is also suitablefor ordered data.</p><p>Saturation shares the problem of low accuracy for noncon- tiguousregions. The number of discriminable steps for saturation is low: aroundthree bins</p><p>Moreover, saturation interacts strongly with the size channel: it ismore difficult to perceive in small regions than in large ones.Saturation and hue are not separable channels within small re- gions forthe purpose of categorical color coding.</p><p>The identity channel of <strong>hue</strong> is extremely effectivefor categorical data and showing groupings.</p><p>However, hue shares the same challenges as saturation in terms ofinteraction with the size channel: hue is harder to distinguish in smallregions than large regions. Hue does not have an im- plicit perceptualordering</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911210835850-6707314.png"alt="image-20220911210835850" /><figcaption aria-hidden="true">image-20220911210835850</figcaption></figure><h4 id="transparency">Transparency</h4><p><strong>Transparency</strong>: information can be encoded bydecreasing the opacity of a mark from fully opaque to completelysee-through. Transparency cannot be used independently of the othercolor channels because of its strong interaction effects with them:fully transparent marks cannot convey any information at all with theother three channels. In particular, transparency coding interactsstrongly with luminance and saturation coding and should not be used inconjunction with them at all. It can be used in conjunc- tion with hueencoding with a very small number of discriminable steps, mostfrequently just two</p><h3 id="colormaps">Colormaps</h3><p>A <strong>colormap</strong> specifies a mapping between colors anddata values; that is, a visual encoding with color.</p><p>Colormaps can be <strong>categorical</strong> or<strong>ordered</strong>, and ordered colormaps can be either<strong>se- quential</strong> or <strong>diverging</strong>.</p><p>Colormaps can either be a <strong>continuous</strong> range ofvalues, or <strong>seg- mented</strong> into discrete bins of color.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911222021631-6707319.png"alt="image-20220911222021631" /><figcaption aria-hidden="true">image-20220911222021631</figcaption></figure><h3 id="categorical-colormaps">Categorical Colormaps</h3><p>A <strong>categorical</strong> colormap uses color to encodecategories and groupings. Categorical colormaps are normallysegmented</p><p>The number of discriminable colors for coding small separated regionsis limited to between six and twelve bins. You should re- member toinclude background color and any default object colors in your totalcount: some or all of the most basic choices of black, white, and grayare often devoted to those uses.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2022.20.55-6707325.png"alt="Screen Shot 2022-09-11 at 22.20.55" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at22.20.55</figcaption></figure><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911222109683-6707330.png"alt="image-20220911222109683" /><figcaption aria-hidden="true">image-20220911222109683</figcaption></figure><h4 id="ordered-colormaps">Ordered Colormaps</h4><p>An <strong>ordered</strong> colormap is appropriate for encodingordinal or quantitative attributes.</p><p>A <strong>sequential</strong> colormap ranges from a minimum value toa maximum value.</p><p>A <strong>diverging</strong> colormap has two hues at the endpointsand a neutral color as a midpoint, such as white, gray, or black, or ahigh-luminance color such as yellow.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911222146145-6707337.png"alt="image-20220911222146145" /><figcaption aria-hidden="true">image-20220911222146145</figcaption></figure><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220911222154798-6707347.png"alt="image-20220911222154798" /><figcaption aria-hidden="true">image-20220911222154798</figcaption></figure><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2022.22.05-6707355.png"alt="Screen Shot 2022-09-11 at 22.22.05" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at22.22.05</figcaption></figure><p>Design <strong>monotoni- cally increasing luminance</strong>colormaps: that is, where the multiple hues are ordered according totheir luminance from lowest to highest.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2022.22.32-6707364.png"alt="Screen Shot 2022-09-11 at 22.22.32" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at22.22.32</figcaption></figure><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2022.22.41-6707368.png"alt="Screen Shot 2022-09-11 at 22.22.41" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at22.22.41</figcaption></figure><h4 id="bivariate-colormaps">Bivariate Colormaps</h4><p>The safest use of the color channel is to visually encode a singleattribute; these colormaps are known as <strong>univariate</strong>.</p><h3 id="other-channels">Other Channels</h3><h4 id="size-channels">Size Channels</h4><p>Size is a magnitude channel suitable for ordered data. It interactswith most other channels: when marks are too small, encodings in anotherchannel such as shape or orientation simply cannot be seen. Sizeinteracts particularly strongly with color hue and color saturation.</p><p>Length is one-dimensional (1D) size; more specifically, height isvertical size and width is horizontal size. Area is two-dimensional (2D)size, and volume is three-dimensional (3D) size.</p><p>Our judgements of length are extremely accurate.</p><h4 id="angle-channel">Angle Channel</h4><p>The <em>angle</em> channel encodes magnitude information based on the<strong>orientation</strong> of a mark: the direction that itpoints.</p><p>With <strong>angle</strong>, the orientation of one line is judgedwith respect to another line.</p><p>With <strong>tilt</strong>, an orientation is judged against theglobal frame of the display.</p><p>The accuracy of our perception of angle is not uniform. We have veryaccurate perceptions of angles near the exact horizontal, vertical, ordiagonal positions, but accuracy drops off in between them.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/Screen%20Shot%202022-09-11%20at%2022.36.41-6707374.png"alt="Screen Shot 2022-09-11 at 22.36.41" /><figcaption aria-hidden="true">Screen Shot 2022-09-11 at22.36.41</figcaption></figure><h4 id="curvature-channel">Curvature Channel</h4><p>The <strong>curvature</strong> channel is not very accurate, and itcan only be used with line marks.</p><p>It cannot be used with point marks that have no length, or area marksbecause their shape is fully constrained.</p><h4 id="shape-channel">Shape Channel</h4><p>The term <strong>shape</strong> is a catch-all word for a complexperceptual phenomenon.</p><h4 id="motion-channels">Motion Channels</h4><p>Several kinds of <strong>motion</strong> are also visual channels,including <strong>direc- tion</strong> of motion,<strong>velocity</strong> of motion, and flicker<strong>frequency</strong>.</p><p>The strength and weakness of motion is that it strongly drawsattention; it is nearly impossible to ignore.</p><p>It is not clear whether different motion channels are separable fromeach other, or how many discriminable bins exist in each.</p><p>The motion channels are most appropriate for highlighting, wheredrawing the user‚Äôs attention away from the rest of the scene is exactlythe goal, particularly when the highlighting is transitory rather thanongoing.</p><h4 id="texture-and-stippling">Texture and Stippling</h4><p>The term <strong>texture</strong> refers to very small-scalepatterns.</p><p>Texture can be used to show categorical attributes, in which case thegoal is to create patterns that are distinguishable from each otherusing the combination of all three channels.</p><p>The term <strong>stippling</strong> means to fill in regions ofdrawing with short strokes. It is a special case of texture.</p><h1 id="week-4-reading-post">Week 4 Reading Post</h1><p>Read Munzner 2014 Chapter 4 and 9, and answer below questions in 2-3sentences. <strong>Reply to at least one other person'spost.</strong></p><p>Q1. Find one network visualization (trees or networks) and describe(1) it's design idiom and (2) the what-why-how (data-encode-tasks)elements of it.</p><p>From:https://www.yworks.com/assets/images/landing-pages/demo-networkmonitoring-example.ae6cd134ce.webp</p><p><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/demo-networkmonitoring-example.6c44bddbc0-6707380.png"alt="An example of a network monitoring visualization" />Thisvisualization uses a network graph, which is a node-link diagram, toencode a computer network map. Here the data is the status of connectingdevices and network switches. The network devices (PCs, laptops,tablets, servers, databases, etc.) are encoded as nodes (vertices), andthe connection between those devices are encoded as edges (links) in thenetwork graph. The edges are colored green, yellow, and red,representing light, middle, and heavy network traffic correspondingly.The network graph presents its users (network administrators) with thetopological relationship of the devices and an overview of their system,as well as the status of network traffic, assisting them to control andtroubleshoot the network system from a central location.</p><h1 id="week-5-reading-post">Week 5 Reading Post</h1><p>Read one of below papers and answer the discussion question in 2-3sentences (Pls find them in the Resources/Readings). <strong>Reply to atleast one other person's post.</strong></p><p><strong>Paper options (pick one to read):</strong></p><p>\1. Isenberg et al. Vispubdata.org: A Metadata Collection About IEEEVisualization (VIS) Publications. IEEE TRANSACTIONS ON VISUALIZATION ANDCOMPUTER GRAPHICS, VOL. 23, NO. 9, SEPTEMBER 2017.</p><p>\2. Havre et al. ThemeRiver: Visualizing Theme Changes over Time.Proceedings of the IEEE Symposium on Information Visualization 2000(InfoVis'00).</p><p><strong>Discussion questions:</strong></p><p>Q1. What's this paper about? What visualization techniques theauthors implemented? What's the contributions of this work?</p><p>Q2. Pick one visualization from this paper, and evaluate its data(&amp; attributes), user task, and efficiency.</p><p>ThemeRiver</p><ol type="1"><li><p>The paper is about a thematic visualization called ThemeRiver.The authors implemented the visualization techniques of the time river,with adjustment. The horizontal flow represents the change in time. Thewidth of the river represents the variation (increase/decrease) of thestrength of a topic. The currents are colored to represent differentthemes. The ThemeRiver fills the hole in the visualization of themes ofassociated documents and provides users with a macro-view over thethemes of documents, as existing visualizations focus mainly ondocuments themselves.</p><figure><imgsrc="/2022/10/25/Data%20Analytics%20and%20Visualizations/image-20220925185942567-6707386.png"alt="image-20220925185942567" /><figcaption aria-hidden="true">image-20220925185942567</figcaption></figure></li><li><p>Data: A collection of speeches, interviews, articles, and othertext related to Fidel Castro.</p><p>Attributes: themes, year</p><p>User task:</p><ul><li><p>Explore the change of theme over time</p></li><li><p>Display topic and event labels</p></li><li><p>Display time and event grid lines</p></li><li><p>Display the raw data points</p></li><li><p>Choose among drawing algorithms for the</p><p>currents and river</p></li><li><p>Efficiency:</p></li><li><p>Users tend to follow the trend more easily over time</p></li><li><p>Users find the plot useful in identifying macro trends inparticularly.</p></li><li><p>ThemeRiver requires users to interpolate between data points toproduce the curve</p></li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>Reading</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Data Visualization</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Data Visualization Project-Development of Models Used in Computer Vision</title>
    <link href="/2022/10/25/Data%20Visualization%20Project-Development%20of%20Models%20Used%20in%20Computer%20Vision/"/>
    <url>/2022/10/25/Data%20Visualization%20Project-Development%20of%20Models%20Used%20in%20Computer%20Vision/</url>
    
    <content type="html"><![CDATA[<h1 id="development-of-models-used-in-computer-vision">Development ofModels Used in Computer Vision</h1><p>Jiacheng Xie, Haowen Ji, Dunhan Jiang</p><p>Oct-20th-2022</p><p><a href="https://dashvisproject.herokuapp.com/demo">InteractiveOnline Demo</a></p><p><a href="https://github.com/jason5306/dash-vis-app">Source Code OnGithub</a></p><h2 id="introduction">Introduction</h2><p>As computational power and the amount of data accumulated during thepast decade, deep learning models became the state-of-art approach inthe field of computer vision in hope of improving visual task detectionaccuracy and reducing processing runtime. The development of deeplearning models branched, and a lot of new models based on completelydifferent architects arose. This paper thus investigates the adaptationand transformation of those mainstream models as an epitome of thedevelopment of the larger computer vision field. We confine our subjectof interests to only GoogleNet, SeNet, VGG, AlexNet, LeNet, and ResNet.We download publication information of academic papers on these modelsfrom the <em>Web of Science</em> as a holistic dataset for thismeta-analysis. This paper specifically focuses on the research area,citation number, citation relationship, research keywords, as well aspublication geographical distribution properties as our guiding researchquestions.</p><p>To thoroughly investigate these topics and properly demonstrate theresult, visualization techniques are of crucial significance to displaypaper‚Äôs attribution proportional wise, to capture the dynamic trends incitation amount temporal fluctuation, to unfold the messy and complexcitation relationship between papers, to extract the constantly changingfocus of ongoing research, and to map the regional publicationdistribution across the spatial dimension. With this knowledgevisualized interactively, it would be much easier to understand thedevelopment of models used in the field of computer vision.</p><h2 id="method">Method</h2><p>We collect our data set from the <em>Web of Science</em>. Using thewebsite‚Äôs search engine with filters that only return papers on ourconfined six mainstream models, we download publication information ofthese papers as excel sheets. This information includes article title,the name of journal, author(s), publication time, author‚Äôs attributedinstitution‚Äôs location, paper keywords and categories, applicationareas. Other information including paper‚Äôs citation list and referencelist are obtained using a python script crawler. We use python code tobuild a pandas data frame to import the dataset. Since it contains alarge amount of approximately 17,000 entries of holistic papers‚Äôpublication information, we can just eliminate those entries withmissing values.</p><p>With the raw dataset cleaned, we group all papers into six groupsbased on their fields of models. We combine all citation list andreference list in our dataset to record all papers‚Äô relationship. We dotext extraction to find paper keywords and application areas. We also dodata matching to find the paper author‚Äôs attributed institution‚Äôslocation on the actual world map to generate the publicationgeographical distributional map. With the above analysis ready, we usepython visualization tools to generate the below interactive figures.Specifically, visualization 1 and 2 use <em>plotly</em> whilevisualization 3, 5, and 6 use <em>pyecharts</em>. Visualization 4 uses<em>PyVis</em> and <em>Networkx</em> instead.</p><h2 id="results">Results</h2><p>Figure 1 aims to show the evolution of research area and keywords. Itis a parallel categories graph connecting models, publication year, andresearch area. We make it interactively so that selecting any sectiongives it and its connected part a highlighted color. The number ofpapers in that section will also appear in the hint box. Each bar inthis plot can be dragged to any position.</p><figure><imgsrc="/2022/10/25/Data%20Visualization%20Project-Development%20of%20Models%20Used%20in%20Computer%20Vision/Screen%20Shot%202022-10-25%20at%2020.39.31-6702820.png"alt="Figure 1: models, publication time, and research areas connection" /><figcaption aria-hidden="true">Figure 1: models, publication time, andresearch areas connection</figcaption></figure><p>Figure 2 aims to demonstrate papers‚Äô amount of citation over time.It‚Äôs a time river plot demonstrating the timelines of the citationnumber of selected published paper. One can choose a specific period atthe bottom bar section to zoom into the graph and have a clearer view.Users can also filter models on the top right.</p><figure><imgsrc="/2022/10/25/Data%20Visualization%20Project-Development%20of%20Models%20Used%20in%20Computer%20Vision/Screen%20Shot%202022-10-25%20at%2020.40.05-6702830.png"alt="Figure 2: citation times of papers regarding different models across time" /><figcaption aria-hidden="true">Figure 2: citation times of papersregarding different models across time</figcaption></figure><p>Figure 3 aims to show the citation relationship between papers. It‚Äôsa circular network graph. All papers are categorized into their ownmodel's field and labeled with different colors on the top legend bar.On the circle there are nodes representing individual papers while edgesin between represent citation relationship. The edge will have the samecolor with the source paper node. And the bigger the node, the largerits citation number. Users can hover the mouse over either edges ornodes for a highlighted view and more detail information of paper namesand citation number. One can also zoom in and filter different models ontop.</p><figure><imgsrc="/2022/10/25/Data%20Visualization%20Project-Development%20of%20Models%20Used%20in%20Computer%20Vision/Screen%20Shot%202022-10-25%20at%2020.40.45-6702844.png"alt="Figure 3: circular layout of citation and reference space" /><figcaption aria-hidden="true">Figure 3: circular layout of citation andreference space</figcaption></figure><p>Figure 4 also aims to show the citation relationship between papers.It‚Äôs a linked network graph also with nodes representing papers andedges representing citation relationship. While it‚Äôs difficult to targeta specific paper in the last circular network visualization, users canhereby filter paper(s) and edge(s) in the top rows by entering papernames and edge properties like citation number. Therefore, only part ofthe sophisticated network will be displayed. Users can also hover mouseover or click or drag the node to investigate the cite spaceinteractively. The visualization is also dynamic and supports zoom infunction.</p><figure><imgsrc="/2022/10/25/Data%20Visualization%20Project-Development%20of%20Models%20Used%20in%20Computer%20Vision/Screen%20Shot%202022-10-25%20at%2020.41.22-6702850.png"alt="Figure 4: linked-node-network of citation and reference space" /><figcaption aria-hidden="true">Figure 4: linked-node-network of citationand reference space</figcaption></figure><p>Figure 5 aims to capture the dynamic of changes in models‚Äôapplication area. It‚Äôs a dynamic word cloud concatenating the mostfrequently appeared keywords of papers. Users can click start button foran automatic display. Alternatively, selecting different years in thetimeline or filtering different models help users have a closer view atthe keywords under distinct setting. Left corner buttons also enableusers to select keywords with different occurrence frequency.</p><figure><imgsrc="/2022/10/25/Data%20Visualization%20Project-Development%20of%20Models%20Used%20in%20Computer%20Vision/Screen%20Shot%202022-10-25%20at%2020.42.10-6702856.png"alt="Figure 5: transitional keyword clouds" /><figcaption aria-hidden="true">Figure 5: transitional keywordclouds</figcaption></figure><p>Figure 6 aims to map the regional publication distribution across thespatial dimension. It‚Äôs a geographical map view with colored nodes ontop representing the number of publications at that location. Darkercolor means more publications and vice versa. Users can zoom in to seethe publication distribution in each country and province. Publicationnumber appears when the mouse hover over the node. The bar at the leftbottom corner enables users to filter the number range. This map alsoprovides a heatmap view with similar interactions.</p><figure><imgsrc="/2022/10/25/Data%20Visualization%20Project-Development%20of%20Models%20Used%20in%20Computer%20Vision/Screen%20Shot%202022-10-25%20at%2020.42.40-6702862.png"alt="Figure 6: regional distribution of publications around the globe" /><figcaption aria-hidden="true">Figure 6: regional distribution ofpublications around the globe</figcaption></figure><h2 id="discussions">Discussions</h2><p>In figure 1, user tasks are to retrieve value and characterizedistribution. It links three attributes of publication informationeffectively, with section proportion highlighted and paper number shown.Its interaction functions smoothly. However, too many connecting linksmake it a little bit messy to see. One solution is to let thosenon-highlighted links fade away for a more concentrated view.</p><p>In figure 2, user tasks are to sort and find extremum. Modelfiltering and zooming in interactions are helpful for efficientlycapturing detailed citation changing trends. Since there are limitedresearch going on before 2014, it should take another decade for us topicture a more nuanced development trend.</p><p>In figure 3, user tasks are to retrieve value and sort. Its modelfilters and mouse hover and click interactions make it efficient to seethe citation relationship. The circular layout design also makes thecite space less messy. However, it‚Äôs literally impossible to find aspecific target paper. Figure 4 solves this dilemma by adding a filterand selection function to effectively search for target papers withspecific properties. Its user tasks are to find anomalies and retrievevalue. But the network design is indeed messier than that in figure 3.These two figures compensate each other‚Äôs weakness and effectivelydemonstrate the citation space together.</p><p>In figure 5, user task is to retrieve value. Thanks to its automaticshowcase and abundant filters, users can efficiently capture keywords ofspecific field at any given time. But the meaning behind the keywordcloud does need further interpretation.</p><p>In figure 6, user task is to characterize distribution. The color huemakes it efficient to compare the publication number. Potential room forimprovement is papers‚Äô location accuracy. Downloading a more accuratemap with city and town names really help.</p><h2 id="conclusions">Conclusions</h2><p>This paper gives an efficient solution to understand the researcharea, citation number, citation and reference relationship, researchkeywords, as well as publication geographical distribution of papers inthe field of computer vision. These knowledge help people better andeasier understand the structure and developmental trends of this fieldintuitively. Specifically, scholars may want to focus on popularkeywords of latest publications from our keyword cloud. Researchers mayalso want to find the most influential foundational papers by thecite-space-visualization. Furthermore, our highly interactive onlinedash version also helps spread and popularize such knowledge to peoplenew or outside to computer vision.</p><p>In the future, we can link all figures on one map to generate awell-rounded and even more interactive view of the current results. Wecan also incorporate more papers from other sub-areas of computer visionto conduct similar visualizations and combine with these existing worksto generate a more holistic updated version.</p><p><ahref="https://github.com/jason5306/dash-vis-app/blob/main/assets/report.pdf">OriginalReport PDF</a></p>]]></content>
    
    
    <categories>
      
      <category>Project</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Data Visualization</tag>
      
      <tag>Python</tag>
      
      <tag>Dash</tag>
      
      <tag>Plotly</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Xevent Reader</title>
    <link href="/2022/08/17/Xevent%20Reader/"/>
    <url>/2022/08/17/Xevent%20Reader/</url>
    
    <content type="html"><![CDATA[<h1 id="xevent-reader">Xevent Reader</h1><p>Xevent Reader is a tool written in Python that reads Extend EventFiles of SQL Server and exports parsed results into SQL Server. It isdesigned to be an alternative to SSMS when the exporting table functioncrashes. The Reader has two main functions: read and parse xevent filesinto SQL Server tables and import csv files into SQL Server.</p><p><a href="https://github.com/jason5306/XeventReader">Xevent Reader onGithub</a></p><figure><img src="/2022/08/17/Xevent%20Reader/image-20220817114603265.png"alt="Tool Interface" /><figcaption aria-hidden="true">Tool Interface</figcaption></figure><figure><img src="/2022/08/17/Xevent%20Reader/image-20220817150937097.png"alt="SSMS" /><figcaption aria-hidden="true">SSMS</figcaption></figure><h2 id="install">Install</h2><ol type="1"><li>Install <ahref="https://go.microsoft.com/fwlink/?linkid=2200731">Microsoft ODBCDriver17 for SQL Server x64</a></li><li>Download the tool. <ahref="https://drive.google.com/file/d/11cD-nsxeYEa2LW9r-xabTjYbA7R6yXIX/view?usp=sharing">Link</a></li><li>Protection programs (Windows Security) might be triggered, pleaseallow access.</li><li>Ready to go.</li></ol><h2 id="usage">Usage</h2><ol type="1"><li><p>Open the tool, please wait for the GUI pops up.</p></li><li><p><strong>Full execution</strong> mode</p><ol type="1"><li>Function: read and parse xevent files into SQL Server</li><li>Press the <strong>Select Files</strong> button<ol type="1"><li>Select <code>xevent files (*.xel)</code> in the drop-down list.</li><li>Multiple xevent files can be added.</li><li>Different types of xevent files can be added, results will bewritten into one table.</li></ol></li><li>Choose authentication mode for SQL Server<ol type="1"><li>Default: Windows Authentication</li></ol></li><li>Fill in the connection info.<ol type="1"><li>HOSTNAME: the server you want to connect to.</li><li>DATABASE: the database that holds the result table. If the databasedoes not exist, the Reader would create a new one.</li><li>TABLE NAME: the table that holds parsing results. <strong>If thetable name exists, the original content of that table will bereplaced.</strong></li><li>USERNAME: the user name for SQL Authentication.</li><li>PASSWORD: password of SQL Authentication account.</li></ol></li><li>Press <strong>Run: full execution</strong><ol type="1"><li>If any field is missed, there will be warning messages.</li><li>Execution progress is visualized in the command line window.</li><li>A temporary <code>.csv</code> file will be generated for debuggingpurposes, you can choose to delete or keep it when the execution isfinished.</li></ol></li></ol></li><li><p><strong>Importing CSV to SQL Server Only</strong> mode</p><ol type="1"><li><p>Function: import a formatted csv file into a specified SQLServer</p><blockquote><p>This mode is designed to import temp csv files to SQL Servergenerated by the full execution mode when the parsing is completed butimporting results to SQL Server is failed.</p></blockquote></li><li><p>Press the <strong>Select Files</strong> button</p><ol type="1"><li>Select <code>csv files (*.csv)</code> in the drop down list.</li><li>Only one CSV file can be added.</li></ol></li><li><p>Choose authentication mode for SQL Server</p><ol type="1"><li>Default: Windows Authentication</li></ol></li><li><p>Fill in the connection info.</p><ol type="1"><li>HOSTNAME: the server you want to connect to.</li><li>DATABASE: the database that holds the result table. If the databasedoes not exist, the Reader would create a new one.</li><li>TABLE NAME: the table that holds parsing results. <strong>If thetable name exists, the original content of that table will bereplaced.</strong></li><li>USERNAME: the user name for SQL Authentication.</li><li>PASSWORD: password of SQL Authentication account.</li></ol></li><li><p>Press <strong>Run: import csvCSV to SQL only</strong></p><ol type="1"><li>If any field is missed, there will be warning messages.</li><li>Execution progress is visualized in the command line window.</li><li>You can choose to delete or keep the selected CSV file when theexecution is finished.</li></ol></li></ol></li></ol><h2 id="known-issue">Known Issue</h2><ol type="1"><li><p>The GUI gets stuck from time to time when the file selectionwindow is closed.</p><blockquote><p>Sol: Press 'Enter' in the command line window would work</p></blockquote></li><li><p>The GUI window is not popped up when the tool is started for awhile.</p><blockquote><p>Sol: Press 'Enter' in the command line window would work</p></blockquote></li><li><p>When dealing with large (total size) xevent files, the importingto SQL Server step might be very slow. The normal importing rate shouldbe several hundred items per second. This might due to the<code>fast_executemany</code> for SQL Server is not triggered.</p><blockquote><p>Sol:</p><p>Firstly, read and parse xevent files with <strong>Run: fullexecution</strong> to get a temporary csv file. Terminate the tool whenthe message <code>Action: Importing to SQL Server table ...</code> isshown.</p><p>Secondly, reopen the tool, select the temporary CSV file, fill innecessary connection info, and press <strong>Importing CSV to SQL ServerOnly</strong> (follow steps of <strong>Importing csCSVo SQL ServerOnly</strong> mode)</p></blockquote></li></ol><h2 id="development-notes">Development Notes</h2><p>This tool is my intern project at the Microsoft CSS team, and it isdesigned to solve the problem that SSMS usually crashes when exportinglarge xevent files into SQL Server tables.</p><p><strong>Version 1</strong></p><p><u>Key Idea</u></p><p>Parse the xevent file and use pandas Dataframe to hold the result,automatically expanding columns to fit all event objects.</p><p><u>Problem</u></p><p>Way to slow</p><p><strong>Version 2</strong></p><p><u>Key Idea</u></p><p>Use pandas to read xevent files from SQL Server and parse them withvaex. Apply functions to vaex dataframe columns and also expand columnsto fit all event objects.</p><p><u>Problem</u></p><p>Need to convert vaex dataframe into pandas dataframe when exportingresults to SQL Server, this step would cause memory error whenprocessing large xevent files. The memory error can be solved byreducing the chuck size of importing data into SQL but the exportingrate would be super slow.</p><p><strong>Final Version</strong></p><p><u>Key Idea</u></p><p>Take advantage of csv file features, and replace the step ofmodifying the dataframe with string operations. The key trick is, thatif we remove the "" of a string that is formatted like<code>"A, B, C"</code>, we would have a CSV format file. Thus, the timeand space used in operating dataframes are largely reduced.</p><p>Originally, unique columns of events are found by SQL query, which isa little bit slow.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> event_data <span class="hljs-keyword">from</span> <br>(<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span>, <span class="hljs-built_in">row_number</span>() <span class="hljs-keyword">over</span> (<span class="hljs-keyword">partition</span> <span class="hljs-keyword">by</span> object_name <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> timestamp_utc <span class="hljs-keyword">desc</span>) <span class="hljs-keyword">as</span> rn<br><span class="hljs-keyword">from</span><br>sys.fn_xe_file_target_read_file(<span class="hljs-string">&#x27;C:\xeventFile.xel&#x27;</span>,<span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>)) t<br><span class="hljs-keyword">where</span> rn <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>Then I found that using <code>PD.drop_duplicate</code> is much morefaster.</p><h2 id="source-code">Source Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">Author: Jiacheng Xie</span><br><span class="hljs-string">Date: 2022/8/17</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> Tk,filedialog, messagebox, Button, W,Label,Entry<br><span class="hljs-keyword">import</span> pyodbc<br><span class="hljs-keyword">from</span> pymssql <span class="hljs-keyword">import</span> connect <span class="hljs-keyword">as</span> connection<br><span class="hljs-keyword">from</span> pandas <span class="hljs-keyword">import</span> read_xml, DataFrame,read_sql,concat,read_csv<br><span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm<br><span class="hljs-keyword">from</span> sqlalchemy <span class="hljs-keyword">import</span> create_engine<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> os <span class="hljs-keyword">import</span> remove<br><span class="hljs-keyword">import</span> gc<br><br><span class="hljs-comment"># import the following to avoid no &#x27;pymssql&#x27; found issue when packing</span><br><span class="hljs-keyword">from</span> pymssql <span class="hljs-keyword">import</span> _mssql<br><span class="hljs-keyword">from</span> pymssql <span class="hljs-keyword">import</span> _pymssql<br><span class="hljs-keyword">import</span> uuid<br><span class="hljs-keyword">import</span> decimal<br><br><br><span class="hljs-keyword">global</span> authenticationMode<br>authenticationMode = <span class="hljs-number">0</span><br><span class="hljs-keyword">global</span> files<br>files = ()<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">Find column names in the xml field of xevent files</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">findColumns</span>(<span class="hljs-params">xml_pretty_str</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27; &#x27;</span>.join(read_xml(xml_pretty_str)[<span class="hljs-string">&#x27;name&#x27;</span>].tolist())<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">Visualize pd.to_sql, add a process bar</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">chunker</span>(<span class="hljs-params">seq, size</span>):<br>    <span class="hljs-comment"># from http://stackoverflow.com/a/434328</span><br>    <span class="hljs-keyword">return</span> (seq[pos:pos + size] <span class="hljs-keyword">for</span> pos <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(seq), size))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">insert_with_progress</span>(<span class="hljs-params">df,conn, tableName</span>):<br>    <span class="hljs-comment">#conn = create_engine(DB_URI2, execution_options=dict(stream_results=True),fast_executemany=True)</span><br>    <br>    chunksize = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(df) / <span class="hljs-number">10</span>) <span class="hljs-comment"># 10%</span><br>    <span class="hljs-keyword">if</span> chunksize == <span class="hljs-number">0</span>:<br>        chunksize = <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">with</span> tqdm(total=<span class="hljs-built_in">len</span>(df)) <span class="hljs-keyword">as</span> pbar:<br>        <span class="hljs-keyword">for</span> i, cdf <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(chunker(df, chunksize)):<br>            replace = <span class="hljs-string">&quot;replace&quot;</span> <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;append&quot;</span><br>            cdf.to_sql(con=conn, name=tableName, if_exists=replace, index=<span class="hljs-literal">False</span>)<br>            pbar.update(chunksize)<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">This is the core function of the Xevent reader. </span><br><span class="hljs-string">It parses xml and edits the result to get correct values for each column.</span><br><span class="hljs-string">Return a comma separated string of all column values.</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;&quot;&quot;</span>            <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">xmlToString2</span>(<span class="hljs-params">xml_pretty_str, column_list_ordered</span>):<br>    <br>    df_xml = read_xml(xml_pretty_str)<span class="hljs-comment">#.set_index(&#x27;name&#x27;)</span><br><br>    names = <span class="hljs-built_in">list</span>(df_xml[<span class="hljs-string">&#x27;name&#x27;</span>].values)<br>    <br>    <span class="hljs-comment"># chain of if...else to deal with columns with xml data</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;input_relation&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;input_relation&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;input_relation&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;calculator&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;calculator&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;calculator&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;stats_collection&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;stats_collection&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;stats_collection&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;showplan_xml&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;showplan_xml&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;showplan_xml&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;output_parameters&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;output_parameters&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;output_parameters&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;data&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;data&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;data&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;execution_stats_report&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;execution_stats_report&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;execution_stats_report&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;xml_report&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;xml_report&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;xml_report&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;xml_report_filtered&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;xml_report_filtered&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;xml_report_filtered&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;server_memory_grants&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;server_memory_grants&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;server_memory_grants&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">elif</span> <span class="hljs-string">&#x27;blocked_process&#x27;</span> <span class="hljs-keyword">in</span> names:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;blocked_process&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;blocked_process&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br><br>    <span class="hljs-keyword">else</span>:<br><br>        pattern = <span class="hljs-string">&#x27;&lt;data name=&quot;blocked_process_filtered&quot;&gt;&#x27;</span><br>        data = xml_pretty_str[xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>):xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;/value&gt;&#x27;</span>, xml_pretty_str.find(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>, xml_pretty_str.find(pattern)+<span class="hljs-built_in">len</span>(pattern))+<span class="hljs-built_in">len</span>(<span class="hljs-string">&#x27;&lt;value&gt;&#x27;</span>))]<br>        df_xml.loc[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;blocked_process_filtered&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>] = data<br>    <span class="hljs-comment"># exclude</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;data_stream&#x27;</span> <span class="hljs-keyword">in</span> names:<br>        df_xml.drop(df_xml[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;data_stream&#x27;</span>].index, inplace = <span class="hljs-literal">True</span>)<br>        names.remove(<span class="hljs-string">&#x27;data_stream&#x27;</span>)<br>    <br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;timestamp&#x27;</span> <span class="hljs-keyword">in</span> names:<br>        df_xml.drop(df_xml[df_xml[<span class="hljs-string">&#x27;name&#x27;</span>] == <span class="hljs-string">&#x27;timestamp&#x27;</span>].index, inplace = <span class="hljs-literal">True</span>)<br>        names.remove(<span class="hljs-string">&#x27;timestamp&#x27;</span>)<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;text&#x27;</span> <span class="hljs-keyword">in</span> df_xml:     <br>        df_xml[<span class="hljs-string">&#x27;value&#x27;</span>] = df_xml[<span class="hljs-string">&#x27;text&#x27;</span>].fillna(df_xml[<span class="hljs-string">&#x27;value&#x27;</span>])<br><br>    <span class="hljs-comment">#df_xml[&#x27;value&#x27;] = df_xml[&#x27;value&#x27;].apply(lambda x: str(x).replace(&#x27;,&#x27;,&#x27;^&#x27;))</span><br><br><br>    values = <span class="hljs-built_in">list</span>(df_xml[<span class="hljs-string">&#x27;value&#x27;</span>].values)<br><br><br>    result = []<br><br>    <span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> column_list_ordered:<br>        <span class="hljs-keyword">if</span> name <span class="hljs-keyword">in</span> names:<br>            result.append(<span class="hljs-built_in">str</span>(values[names.index(name)]).replace(<span class="hljs-string">&#x27;,&#x27;</span>,<span class="hljs-string">&#x27;^&#x27;</span>))<br>        <span class="hljs-keyword">else</span>:<br>            result.append(<span class="hljs-string">&#x27;None&#x27;</span>)<br> <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;,&#x27;</span>.join(result).replace(<span class="hljs-string">&#x27;\t&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>).replace(<span class="hljs-string">&#x27;\n&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setWinAuthentication</span>():<br>    <span class="hljs-keyword">global</span> authenticationMode<br>    authenticationMode = <span class="hljs-number">0</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Windows Authentication Selected&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Specify HOSTNAME, DATABASE, TABLE NAME:&#x27;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setSQLAuthentication</span>():<br>    <span class="hljs-keyword">global</span> authenticationMode<br>    authenticationMode = <span class="hljs-number">1</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;SQL Authentication Selected&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Specify HOSTNAME, DATABASE, TABLE NAME, USERNAME, PASSWORD&#x27;</span>)<br>    <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">selectFiles</span>():<br>    <span class="hljs-keyword">global</span> files<br>    files = filedialog.askopenfilenames(filetypes=[(<span class="hljs-string">&#x27;xevent files&#x27;</span>, <span class="hljs-string">&#x27;.xel&#x27;</span>),(<span class="hljs-string">&#x27;csv files&#x27;</span>, <span class="hljs-string">&#x27;.csv&#x27;</span>)])<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Files selected:&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(files)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Select Authentication Mode:&#x27;</span>)<br><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">The key idea is to save execution result into a csv file and then remove the &quot;&quot; to simulate the</span><br><span class="hljs-string">process of creating columns. Since the editted file has the same format as a csv file, when reading</span><br><span class="hljs-string">it again into a pandas dataframe would result in an expanded table with all columns of xevent names.</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>():<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(files) == <span class="hljs-number">0</span>:<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;No file selected!&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;No file selected!&#x27;</span><br>    <br>    HOSTNAME = entryHOSTNAME.get()<br>    DATABASE = entryDATABASE.get()<br>    TableName = entryTableName.get()<br>    USERNAME = entryUSERNAME.get()<br>    PASSWORD = entryPASSWORD.get()<br>    <span class="hljs-keyword">if</span> authenticationMode == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> (<span class="hljs-built_in">len</span>(USERNAME) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(PASSWORD) == <span class="hljs-number">0</span>):<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Please specify USERNAME and PASSWORD for SQL Authentication&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;SQL Authentication Failed&#x27;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(HOSTNAME) == <span class="hljs-number">0</span>:<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Please specify HOSTNAME&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Invalid input&#x27;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(DATABASE) == <span class="hljs-number">0</span>:<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Please specify DATABASE&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Invalid input&#x27;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(TableName) == <span class="hljs-number">0</span>:<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Please specify Table Name&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Invalid input&#x27;</span>    <br>    <br>    <br>    <span class="hljs-comment"># First connection, connect to master by default</span><br>    <span class="hljs-keyword">if</span> authenticationMode == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Connecting to &#x27;</span> + <span class="hljs-string">&#x27;master&#x27;</span> + <span class="hljs-string">&quot; &lt;Windows Authentication&gt; ...&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Connecting to &#x27;</span> + <span class="hljs-string">&#x27;master&#x27;</span> + <span class="hljs-string">&quot; &lt;SQL Authentication&gt;&quot;</span>)<br>    DATABASE_master = <span class="hljs-string">&#x27;master&#x27;</span><br>    DRIVER = <span class="hljs-string">&#x27;ODBC+Driver+17+for+SQL+Server&#x27;</span><br>    DB_URI_SQL = <span class="hljs-string">&#x27;mssql+pyodbc://&#123;&#125;:&#123;&#125;@&#123;&#125;/&#123;&#125;?driver=&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        USERNAME, PASSWORD, HOSTNAME, DATABASE_master,DRIVER<br>    )<br>    DB_URI_Win = <span class="hljs-string">&#x27;mssql+pyodbc://&#123;&#125;/&#123;&#125;?trusted_connection=yes&amp;driver=&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        HOSTNAME, DATABASE_master,DRIVER<br>    )<br><br>    DB_URI2_Win = <span class="hljs-string">&#x27;mssql+pyodbc://&#123;&#125;/&#123;&#125;?trusted_connection=yes&amp;driver=&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        HOSTNAME, DATABASE,DRIVER<br>    )<br>    DB_URI2_SQL = <span class="hljs-string">&#x27;mssql+pyodbc://&#123;&#125;:&#123;&#125;@&#123;&#125;/&#123;&#125;?driver=&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        USERNAME, PASSWORD, HOSTNAME, DATABASE,DRIVER<br>    )<br><br>    <span class="hljs-keyword">if</span> authenticationMode == <span class="hljs-number">0</span>:<br>        DB_URI = DB_URI_Win<br>        DB_URI2 = DB_URI2_Win<br>        conn = create_engine(DB_URI, execution_options=<span class="hljs-built_in">dict</span>(stream_results=<span class="hljs-literal">True</span>),fast_executemany=<span class="hljs-literal">True</span>)<br>        connect = connection(host=HOSTNAME,<br>                                  database=DATABASE_master,<br>                                  autocommit=<span class="hljs-literal">True</span>)    <br>    <br>    <span class="hljs-keyword">else</span>:<br>        DB_URI = DB_URI_SQL<br>        DB_URI2 = DB_URI2_SQL<br>        conn = create_engine(DB_URI, execution_options=<span class="hljs-built_in">dict</span>(stream_results=<span class="hljs-literal">True</span>),fast_executemany=<span class="hljs-literal">True</span>)<br>        connect = connection(host=HOSTNAME,<br>                                  database=DATABASE_master,<br>                                  user=USERNAME,<br>                                  password=PASSWORD,<br>                                  autocommit=<span class="hljs-literal">True</span>)<br>    cursor = connect.cursor()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;... Connected ...&quot;</span>)<br><br>    <span class="hljs-comment"># create new database if not exist</span><br>    new_database = <span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&#x27;&quot;</span> + DATABASE + <span class="hljs-string">&quot;&#x27;&quot;</span>)<br><br>    cursor.execute(<span class="hljs-string">&quot;select * From master.dbo.sysdatabases where name=&quot;</span> + new_database)<br>    DBresult = cursor.fetchall()<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(DBresult) == <span class="hljs-number">0</span>: <span class="hljs-comment"># if DB not exist</span><br>        cursor.execute(<span class="hljs-string">&quot;CREATE DATABASE &quot;</span> + new_database.strip(<span class="hljs-string">&quot;&#x27;&quot;</span>))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: &#x27;</span> + new_database.strip(<span class="hljs-string">&quot;&#x27;&quot;</span>) + <span class="hljs-string">&quot; created&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: &#x27;</span> + new_database.strip(<span class="hljs-string">&quot;&#x27;&quot;</span>) + <span class="hljs-string">&quot; exist&quot;</span>)<br>    connect.close() <br><br>    <span class="hljs-comment"># set table name</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: result will be written into &#x27;</span>+ TableName + <span class="hljs-string">&#x27; ...&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: table with the same name will be repalced ...&#x27;</span>)<br><br>    <span class="hljs-comment"># second connection, same Authentication as first</span><br>    <span class="hljs-keyword">if</span> authenticationMode == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Connecting to &#x27;</span> + new_database.strip(<span class="hljs-string">&quot;&#x27;&quot;</span>) + <span class="hljs-string">&quot; &lt;Windows Authentication&gt; ...&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Connecting to &#x27;</span> + <span class="hljs-string">&#x27;master&#x27;</span> + <span class="hljs-string">&quot; &lt;SQL Authentication&gt;&quot;</span>)<br><br>    conn = create_engine(DB_URI2, execution_options=<span class="hljs-built_in">dict</span>(stream_results=<span class="hljs-literal">True</span>),fast_executemany=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;... Connected ...&quot;</span>)<br>    <span class="hljs-comment"># read from sql</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Read files ...&#x27;</span>)<br><br>    df = DataFrame()<br>    <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> tqdm(files):<br>        file = <span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&#x27;&quot;</span> + file + <span class="hljs-string">&quot;&#x27;&quot;</span>).replace(<span class="hljs-string">&#x27;/&#x27;</span>,<span class="hljs-string">&quot;\\&quot;</span>)                                             <br>        query = <span class="hljs-string">&quot;select * from sys.fn_xe_file_target_read_file(&quot;</span> +  file + <span class="hljs-string">&quot;,null, null, null)&quot;</span><br>        temp_df = read_sql(query, conn)<br>        df = concat([df,temp_df],ignore_index=<span class="hljs-literal">True</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Message:&quot;</span>)<br>    <span class="hljs-built_in">print</span>(df.info())<br>    df.rename(columns=&#123;<span class="hljs-string">&#x27;object_name&#x27;</span>:<span class="hljs-string">&#x27;event_name&#x27;</span>&#125;, inplace = <span class="hljs-literal">True</span>)<br><br>    df_col = df.drop_duplicates([<span class="hljs-string">&#x27;event_name&#x27;</span>]).copy()<br>    df_col[<span class="hljs-string">&#x27;columns&#x27;</span>] = df_col[<span class="hljs-string">&#x27;event_data&#x27;</span>].apply(findColumns)<br>    column_list_string = df_col[<span class="hljs-string">&#x27;columns&#x27;</span>].values.tolist()<br>    column_list_set = <span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27; &#x27;</span>.join(column_list_string).split())<br>    column_list_set.discard(<span class="hljs-string">&#x27;timestamp&#x27;</span>)<br>    <span class="hljs-comment">#column_list_set.discard(&#x27;object_name&#x27;)</span><br>    column_list_set.discard(<span class="hljs-string">&#x27;data_stream&#x27;</span>)<br>    column_list_ordered = <span class="hljs-built_in">list</span>(column_list_set)<br>    column_list_ordered.sort()<br>    column_list_string = <span class="hljs-built_in">str</span>(column_list_ordered).replace(<span class="hljs-string">&#x27;[&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>).replace(<span class="hljs-string">&#x27;]&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>).replace(<span class="hljs-string">&quot;&#x27;&quot;</span>,<span class="hljs-string">&#x27;&#x27;</span>).replace(<span class="hljs-string">&quot; &quot;</span>,<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: the following columns will be written ...&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(column_list_ordered)<br><br>    <span class="hljs-comment"># Parsing</span><br>    tqdm.pandas(desc=<span class="hljs-string">&#x27;pandas bar&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Action: Parsing xevent ...&quot;</span>)<br>    df[column_list_string] = df[<span class="hljs-string">&#x27;event_data&#x27;</span>].progress_apply(xmlToString2,column_list_ordered=column_list_ordered)<br><br>    df2 = DataFrame(df, columns = [<span class="hljs-string">&#x27;event_name&#x27;</span>,<span class="hljs-string">&#x27;timestamp_utc&#x27;</span>,column_list_string])<br>    <br>    <span class="hljs-keyword">del</span> df<br>    gc.collect()<br><br>    <span class="hljs-comment"># save result to csv</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Save and edit temp csv file ...&#x27;</span>)<br>    temp_name = <span class="hljs-built_in">str</span>(<span class="hljs-built_in">int</span>(time()))<br>    df2.to_csv(<span class="hljs-string">&#x27;./&#x27;</span>+ temp_name + <span class="hljs-string">&#x27;.csv&#x27;</span>,index = <span class="hljs-literal">False</span>)<br>    <br>    <span class="hljs-keyword">del</span> df2<br>    gc.collect()<br><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./&#x27;</span>+ temp_name + <span class="hljs-string">&#x27;.csv&#x27;</span>,<span class="hljs-string">&#x27;r&#x27;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        lines = f.readlines()<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./&#x27;</span>+ temp_name + <span class="hljs-string">&#x27;.csv&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f_w:<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> tqdm(lines):<br>            line = line.replace(<span class="hljs-string">&#x27;&quot;&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>)<span class="hljs-comment">#.replace(&#x27;[&#x27;,&#x27;&#x27;).replace(&#x27;]&#x27;,&#x27;&#x27;)</span><br>            f_w.write(line)<br><br>    <span class="hljs-comment"># read from editted csv file</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Action: Reading csv file ...&quot;</span>)<br>    chunks2 = read_csv(<span class="hljs-string">&#x27;./&#x27;</span>+ temp_name + <span class="hljs-string">&#x27;.csv&#x27;</span>,dtype=<span class="hljs-built_in">str</span>,chunksize=<span class="hljs-number">2000</span>)<br><br>    df_done = DataFrame()<br>    <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> tqdm(chunks2):<br>        df_done = concat([df_done, chunk],ignore_index=<span class="hljs-literal">True</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: &#x27;</span>)<br>    <span class="hljs-built_in">print</span>(df_done.info())<br><br>    <span class="hljs-comment"># importing to SQL Server</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Importing to SQL Server table ...&#x27;</span>)<br>    insert_with_progress(df_done,conn, TableName)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Job done!&#x27;</span>)<br>    <br>    <span class="hljs-keyword">del</span> df_done<br>    gc.collect()<br>    <br>    delTemp = messagebox.askyesno(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Job Done! Delete temp csv file?&#x27;</span>)<br>    <span class="hljs-keyword">if</span> delTemp:<br>        remove(<span class="hljs-string">&#x27;./&#x27;</span>+ temp_name + <span class="hljs-string">&#x27;.csv&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Press Enter to Continue ...&quot;</span>)<br>    <br>    <br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">Importing csv files into SQL Server.</span><br><span class="hljs-string">&quot;&quot;&quot;</span>    <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">run_csv</span>():<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(files) == <span class="hljs-number">0</span>:<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;No file selected!&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;No file selected!&#x27;</span><br>    <br>    HOSTNAME = entryHOSTNAME.get()<br>    DATABASE = entryDATABASE.get()<br>    TableName = entryTableName.get()<br>    USERNAME = entryUSERNAME.get()<br>    PASSWORD = entryPASSWORD.get()<br>    <span class="hljs-keyword">if</span> authenticationMode == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> (<span class="hljs-built_in">len</span>(USERNAME) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(PASSWORD) == <span class="hljs-number">0</span>):<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Please specify USERNAME and PASSWORD for SQL Authentication&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;SQL Authentication Failed&#x27;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(HOSTNAME) == <span class="hljs-number">0</span>:<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Please specify HOSTNAME&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Invalid input&#x27;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(DATABASE) == <span class="hljs-number">0</span>:<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Please specify DATABASE&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Invalid input&#x27;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(TableName) == <span class="hljs-number">0</span>:<br>        messagebox.askokcancel(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Please specify Table Name&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Invalid input&#x27;</span>    <br>    <br>    <br>    <span class="hljs-comment"># First connection, connect to master by default</span><br>    <span class="hljs-keyword">if</span> authenticationMode == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Connecting to &#x27;</span> + <span class="hljs-string">&#x27;master&#x27;</span> + <span class="hljs-string">&quot; &lt;Windows Authentication&gt; ...&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Connecting to &#x27;</span> + <span class="hljs-string">&#x27;master&#x27;</span> + <span class="hljs-string">&quot; &lt;SQL Authentication&gt;&quot;</span>)<br>    DATABASE_master = <span class="hljs-string">&#x27;master&#x27;</span><br>    DRIVER = <span class="hljs-string">&#x27;ODBC+Driver+17+for+SQL+Server&#x27;</span><br>    DB_URI_SQL = <span class="hljs-string">&#x27;mssql+pyodbc://&#123;&#125;:&#123;&#125;@&#123;&#125;/&#123;&#125;?driver=&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        USERNAME, PASSWORD, HOSTNAME, DATABASE_master,DRIVER<br>    )<br>    DB_URI_Win = <span class="hljs-string">&#x27;mssql+pyodbc://&#123;&#125;/&#123;&#125;?trusted_connection=yes&amp;driver=&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        HOSTNAME, DATABASE_master,DRIVER<br>    )<br><br>    DB_URI2_Win = <span class="hljs-string">&#x27;mssql+pyodbc://&#123;&#125;/&#123;&#125;?trusted_connection=yes&amp;driver=&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        HOSTNAME, DATABASE,DRIVER<br>    )<br>    DB_URI2_SQL = <span class="hljs-string">&#x27;mssql+pyodbc://&#123;&#125;:&#123;&#125;@&#123;&#125;/&#123;&#125;?driver=&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(<br>        USERNAME, PASSWORD, HOSTNAME, DATABASE,DRIVER<br>    )<br><br>    <span class="hljs-keyword">if</span> authenticationMode == <span class="hljs-number">0</span>:<br>        DB_URI = DB_URI_Win<br>        DB_URI2 = DB_URI2_Win<br>        conn = create_engine(DB_URI, execution_options=<span class="hljs-built_in">dict</span>(stream_results=<span class="hljs-literal">True</span>),fast_executemany=<span class="hljs-literal">True</span>)<br>        connect = connection(host=HOSTNAME,<br>                                  database=DATABASE_master,<br>                                  autocommit=<span class="hljs-literal">True</span>)    <br>    <br>    <span class="hljs-keyword">else</span>:<br>        DB_URI = DB_URI_SQL<br>        DB_URI2 = DB_URI2_SQL<br>        conn = create_engine(DB_URI, execution_options=<span class="hljs-built_in">dict</span>(stream_results=<span class="hljs-literal">True</span>),fast_executemany=<span class="hljs-literal">True</span>)<br>        connect = connection(host=HOSTNAME,<br>                                  database=DATABASE_master,<br>                                  user=USERNAME,<br>                                  password=PASSWORD,<br>                                  autocommit=<span class="hljs-literal">True</span>)<br>    cursor = connect.cursor()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;... Connected ...&quot;</span>)<br><br>    <span class="hljs-comment"># create new database if not exist</span><br>    new_database = <span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&#x27;&quot;</span> + DATABASE + <span class="hljs-string">&quot;&#x27;&quot;</span>)<br><br>    cursor.execute(<span class="hljs-string">&quot;select * From master.dbo.sysdatabases where name=&quot;</span> + new_database)<br>    DBresult = cursor.fetchall()<br><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(DBresult) == <span class="hljs-number">0</span>: <span class="hljs-comment"># if DB not exist</span><br>        cursor.execute(<span class="hljs-string">&quot;CREATE DATABASE &quot;</span> + new_database.strip(<span class="hljs-string">&quot;&#x27;&quot;</span>))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: &#x27;</span> + new_database.strip(<span class="hljs-string">&quot;&#x27;&quot;</span>) + <span class="hljs-string">&quot; created&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: &#x27;</span> + new_database.strip(<span class="hljs-string">&quot;&#x27;&quot;</span>) + <span class="hljs-string">&quot; exist&quot;</span>)<br>    connect.close() <br><br>    <span class="hljs-comment"># set table name</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: result will be written into &#x27;</span>+ TableName + <span class="hljs-string">&#x27; ...&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: table with the same name will be repalced ...&#x27;</span>)<br><br>    <span class="hljs-comment"># second connection, same Authentication as first</span><br>    <span class="hljs-keyword">if</span> authenticationMode == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Connecting to &#x27;</span> + new_database.strip(<span class="hljs-string">&quot;&#x27;&quot;</span>) + <span class="hljs-string">&quot; &lt;Windows Authentication&gt; ...&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Connecting to &#x27;</span> + <span class="hljs-string">&#x27;master&#x27;</span> + <span class="hljs-string">&quot; &lt;SQL Authentication&gt;&quot;</span>)<br><br>    conn = create_engine(DB_URI2, execution_options=<span class="hljs-built_in">dict</span>(stream_results=<span class="hljs-literal">True</span>),fast_executemany=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;... Connected ...&quot;</span>)<br>    <br>    <span class="hljs-comment"># read from editted csv file</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Action: Reading csv file ...&quot;</span>)<br>    chunks2 = read_csv(files[<span class="hljs-number">0</span>],dtype=<span class="hljs-built_in">str</span>,chunksize=<span class="hljs-number">2000</span>)<br><br>    df_done = DataFrame()<br>    <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> tqdm(chunks2):<br>        df_done = concat([df_done, chunk],ignore_index=<span class="hljs-literal">True</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Message: &#x27;</span>)<br>    <span class="hljs-built_in">print</span>(df_done.info())<br><br>    <span class="hljs-comment"># importing to SQL Server</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Action: Importing to SQL Server table ...&#x27;</span>)<br>    insert_with_progress(df_done,conn, TableName)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Job done!&#x27;</span>)<br>    <br>    <span class="hljs-keyword">del</span> df_done<br>    gc.collect()<br>    <br>    delTemp = messagebox.askyesno(title = <span class="hljs-string">&#x27;Message&#x27;</span>,message=<span class="hljs-string">&#x27;Job Done! Delete temp csv file?&#x27;</span>)<br>    <span class="hljs-keyword">if</span> delTemp:<br>        remove(files[<span class="hljs-number">0</span>])<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Press Enter to Continue ...&quot;</span>)<br>    <br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Select Xevent Files:&#x27;</span>)<br>myWindow = Tk()<br><br>myWindow.title(<span class="hljs-string">&#x27;Xevent Reader&#x27;</span>)<br>myWindow.resizable(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br><br>b0=Button(myWindow, text=<span class="hljs-string">&#x27;Select Files&#x27;</span>, relief=<span class="hljs-string">&#x27;ridge&#x27;</span>, width=<span class="hljs-number">45</span>, height=<span class="hljs-number">2</span>, command = selectFiles)<br>b0.grid(row=<span class="hljs-number">0</span>, columnspan=<span class="hljs-number">2</span>, sticky=W, padx=<span class="hljs-number">5</span>,pady=<span class="hljs-number">5</span>)<br><br>b1=Button(myWindow, text=<span class="hljs-string">&#x27;SQL Authentication&#x27;</span>, relief=<span class="hljs-string">&#x27;ridge&#x27;</span>, width=<span class="hljs-number">20</span>, height=<span class="hljs-number">2</span>, command = setSQLAuthentication)<br>b1.grid(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">0</span>, sticky=W, padx=<span class="hljs-number">5</span>,pady=<span class="hljs-number">5</span>)<br>b2=Button(myWindow, text=<span class="hljs-string">&#x27;Windows Authentication&#x27;</span>,relief=<span class="hljs-string">&#x27;ridge&#x27;</span>,width=<span class="hljs-number">20</span>, height=<span class="hljs-number">2</span>, command = setWinAuthentication)<br>b2.grid(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">1</span>, sticky=W, padx=<span class="hljs-number">5</span>, pady=<span class="hljs-number">5</span>)<br><br>    <br>Label(myWindow, text=<span class="hljs-string">&quot;HOSTNAME&quot;</span>).grid(row=<span class="hljs-number">2</span>)<br>Label(myWindow, text=<span class="hljs-string">&quot;DATABASE&quot;</span>).grid(row=<span class="hljs-number">3</span>)<br>Label(myWindow, text=<span class="hljs-string">&quot;TABLE NAME&quot;</span>).grid(row=<span class="hljs-number">4</span>)<br>Label(myWindow, text=<span class="hljs-string">&quot;Skip Following Blanks If Windows Authentication Is Selected&quot;</span>,relief = <span class="hljs-string">&#x27;groove&#x27;</span>,bd = <span class="hljs-number">4</span>).grid(row=<span class="hljs-number">5</span>,columnspan=<span class="hljs-number">2</span>)<br>Label(myWindow, text=<span class="hljs-string">&quot;USERNAME&quot;</span>).grid(row=<span class="hljs-number">6</span>)<br>Label(myWindow, text=<span class="hljs-string">&quot;PASSWORD&quot;</span>).grid(row=<span class="hljs-number">7</span>)<br><br>entryHOSTNAME=Entry(myWindow)<br>entryDATABASE=Entry(myWindow)<br>entryUSERNAME=Entry(myWindow)<br>entryPASSWORD=Entry(myWindow)<br>entryTableName=Entry(myWindow)<br>entryHOSTNAME.grid(row=<span class="hljs-number">2</span>, column=<span class="hljs-number">1</span>)<br>entryDATABASE.grid(row=<span class="hljs-number">3</span>, column=<span class="hljs-number">1</span>)<br>entryTableName.grid(row=<span class="hljs-number">4</span>, column=<span class="hljs-number">1</span>)<br>entryUSERNAME.grid(row=<span class="hljs-number">6</span>, column=<span class="hljs-number">1</span>)<br>entryPASSWORD.grid(row=<span class="hljs-number">7</span>, column=<span class="hljs-number">1</span>)<br><br><br>b3=Button(myWindow, text=<span class="hljs-string">&#x27;Run: full execution&#x27;</span>,relief=<span class="hljs-string">&#x27;ridge&#x27;</span>,width=<span class="hljs-number">45</span>, height=<span class="hljs-number">2</span>, command = run)<br>b3.grid(row=<span class="hljs-number">8</span>, columnspan=<span class="hljs-number">2</span>, sticky=W, padx=<span class="hljs-number">5</span>, pady=<span class="hljs-number">5</span>)<br><br>b4=Button(myWindow, text=<span class="hljs-string">&#x27;Run: import csv to SQL only&#x27;</span>,relief=<span class="hljs-string">&#x27;ridge&#x27;</span>,width=<span class="hljs-number">45</span>, height=<span class="hljs-number">2</span>, command = run_csv)<br>b4.grid(row=<span class="hljs-number">9</span>, columnspan=<span class="hljs-number">2</span>, sticky=W, padx=<span class="hljs-number">5</span>, pady=<span class="hljs-number">5</span>)<br><br><br>myWindow.mainloop()<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Project</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pyinstaller Reduce Packed Program Size</title>
    <link href="/2022/08/16/Pyinstaller%20Reduce%20Packed%20Program%20Size/"/>
    <url>/2022/08/16/Pyinstaller%20Reduce%20Packed%20Program%20Size/</url>
    
    <content type="html"><![CDATA[<h1 id="pyinstaller-reduce-packed-program-size">Pyinstaller ReducePacked Program Size</h1><p>When I was packing <code>Xevent Reader</code> with<code>pyinstaller</code>, I created a new conda virtual environment andinstalled the necessary python packages. However, the size of the packedprogram is very large, 200MB+, and runs very slow. This problem issolved by using <code>pipenv</code> virtual environment.</p><h2 id="install-pipenv">Install pipenv</h2><p>Working environment: Anaconda Prompt</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> pipenv<br></code></pre></td></tr></table></figure><p>Create a new folder for the virtual environment.</p><h2 id="setup-virtual-environment">Setup virtual environment</h2><p>Get into the folder created.</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">cd</span> &lt;<span class="hljs-built_in">Path</span> of your folder&gt;<br></code></pre></td></tr></table></figure><p>Setup the virtual environment.</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pipenv <span class="hljs-keyword">install</span><br></code></pre></td></tr></table></figure><p>Activate the virtual environment.</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">pipenv <span class="hljs-keyword">shell</span><br></code></pre></td></tr></table></figure><h2 id="packing">Packing</h2><p>Install necessary packages for your program, including<code>pyinstaller</code></p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">pip</span></span> install pyinstaller, ...<br></code></pre></td></tr></table></figure><p>You can try to run your python script first to test if it runscorrectly under this environment.</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python</span> &lt;YourScript.<span class="hljs-keyword">py</span>&gt;<br></code></pre></td></tr></table></figure><p>Download <a href="https://upx.github.io/">UPX</a> to help furtherreduce file size and avoid triggering security warnings when running theprogram on other machines. Copy <code>upx.exe</code> to the location ofyour script.</p><p>Packing. Make sure <code>INFO: UPX is available</code> is prompted inthe cmd window.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">pyinstaller -F <span class="hljs-tag">&lt;<span class="hljs-name">YourScript.py</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Server 2012 ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçóNoteÔºöÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ‰∏éÊÅ¢Â§ç</title>
    <link href="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/"/>
    <url>/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/</url>
    
    <content type="html"><![CDATA[<h1 id="sql-server-2012-ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçónoteÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ‰∏éÊÅ¢Â§ç">SQLServer 2012 ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçóNoteÔºöÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ‰∏éÊÅ¢Â§ç</h1><h2 id="Â§á‰ªΩÁ±ªÂûã">Â§á‰ªΩÁ±ªÂûã</h2><p>SQL ServerÊèê‰æõÁöÑ11Áßç‰∏ªË¶ÅÂ§á‰ªΩÊñπÊ≥ï:</p><table><thead><tr class="header"><th>ÂàÜ„ÄÄ„ÄÄÁ∫ß</th><th>Êï∞ÊçÆÂ§á‰ªΩ</th><th></th><th></th><th>Êó•ÂøóÂ§á‰ªΩ</th><th></th></tr></thead><tbody><tr class="odd"><td>Êï∞ÊçÆÂ∫ìÁ∫ß</td><td>ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ</td><td>‰ªÖÂ§çÂà∂ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ</td><td>Â∑ÆÂºÇÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ</td><td>Ôºà‰∏ÄËà¨Ôºâ Êó•ÂøóÂ§á‰ªΩ</td><td>‰ªÖÂ§çÂà∂ Êó•ÂøóÂ§á‰ªΩ</td></tr><tr class="even"><td>Êñá‰ª∂Á∫ß</td><td>ÂÆåÊï¥Êñá‰ª∂Â§á‰ªΩ</td><td>‰ªÖÂ§çÂà∂ÂÆåÊï¥Êñá‰ª∂Â§á‰ªΩ</td><td>Â∑ÆÂºÇÊñá‰ª∂Â§á‰ªΩ</td><td></td><td></td></tr><tr class="odd"><td>ÈÉ®ÂàÜ</td><td>ÂÆåÊï¥ÈÉ®ÂàÜÂ§á‰ªΩ</td><td>‰ªÖÂ§çÂà∂ÂÆåÊï¥ÈÉ®ÂàÜÂ§á‰ªΩ</td><td>Â∑ÆÂºÇÈÉ®ÂàÜÂ§á‰ªΩ</td><td></td><td></td></tr></tbody></table><p>ÊúÄÂ∏∏Áî®ÁöÑÂ§á‰ªΩÊñπÊ≥ï:</p><table><thead><tr class="header"><th>ÂàÜ„ÄÄ„ÄÄÁ∫ß</th><th>Êï∞ÊçÆÂ§á‰ªΩ</th><th></th><th>Êó•ÂøóÂ§á‰ªΩ</th></tr></thead><tbody><tr class="odd"><td>Êï∞ÊçÆÂ∫ìÁ∫ß</td><td>ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ</td><td>Â∑ÆÂºÇÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ</td><td>Ôºà‰∏ÄËà¨ÔºâÊó•ÂøóÂ§á‰ªΩ</td></tr><tr class="even"><td>Êñá‰ª∂Á∫ß</td><td>ÂÆåÊï¥Êñá‰ª∂Â§á‰ªΩ</td><td>Â∑ÆÂºÇÊñá‰ª∂Â§á‰ªΩ</td><td></td></tr></tbody></table><h3 id="ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ">ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ</h3><ol type="1"><li>Êã∑Ë¥ù‰∏ãÊï∞ÊçÆÂ∫ìÈáåÁöÑÊâÄÊúâ‰ø°ÊÅØ</li><li>Êï∞ÊçÆÂ∫ìÂú®ËøôÊÆµÊó∂Èó¥ÈáåËøò‰ºöÂèëÁîüÂèòÂåñÔºåÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩËøòË¶ÅÂØπÈÉ®ÂàÜ‰∫ãÂä°Êó•ÂøóËøõË°åÂ§á‰ªΩ</li></ol><h3 id="Êñá‰ª∂Â§á‰ªΩ">Êñá‰ª∂Â§á‰ªΩ</h3><ol type="1"><li>Â§á‰ªΩ‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂ÊàñÊñá‰ª∂ÁªÑ‰∏≠ÁöÑÊâÄÊúâÊï∞ÊçÆ</li><li>Âú®ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÔºå‰∏ÄÊï¥Â•óÂÆåÊï¥Êñá‰ª∂Â§á‰ªΩ+Ë∑®ÊâÄÊúâÊñá‰ª∂Â§á‰ªΩÁöÑÊó•ÂøóÂ§á‰ªΩ=ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ</li><li>ËÉΩÂ§üÊåáÂÆöËøòÂéüÊçüÂùèÁöÑÊñá‰ª∂Ôºå‰ª•Âä†Âø´ÊÅ¢Â§çÈÄüÂ∫¶</li></ol><h3 id="ÈÉ®ÂàÜÂ§á‰ªΩ">ÈÉ®ÂàÜÂ§á‰ªΩ</h3><ol type="1"><li>ÈªòËÆ§Âè™Â§á‰ªΩÊï∞ÊçÆÂ∫ìÁöÑÂèØËØªÂÜôÈÉ®ÂàÜ</li></ol><h3 id="Â∑ÆÂºÇÂ§á‰ªΩ">Â∑ÆÂºÇÂ§á‰ªΩ</h3><ol type="1"><li>Ë¶ÅÊ±ÇÊï∞ÊçÆÂ∫ì‰πãÂâçÂÅöËøá‰∏ÄÊ¨°ÂÆåÊï¥Â§á‰ªΩÔºàÂü∫ÂáÜÔºâ</li><li>ÊçïËé∑Ëá™Âü∫ÂáÜ‰ª•Êù•ÂèëÁîüÊîπÂèòÁöÑÊï∞ÊçÆ</li><li>‰æø‰∫éÊâßË°åÈ¢ëÁπÅÂ§á‰ªΩÔºå‰ªéËÄåÈôç‰Ωé‰∫ÜÊï∞ÊçÆ‰∏¢Â§±ÁöÑÈ£éÈô©</li></ol><h3 id="‰∫ãÂä°Êó•ÂøóÂ§á‰ªΩ">‰∫ãÂä°Êó•ÂøóÂ§á‰ªΩ</h3><ol type="1"><li>ÊØè‰∏™Êó•ÂøóÂ§á‰ªΩÈÉΩÂåÖÊã¨ÂàõÂª∫Â§á‰ªΩÊó∂Â§Ñ‰∫éÊ¥ªÂä®Áä∂ÊÄÅÁöÑÈÉ®ÂàÜ‰∫ãÂä°Êó•ÂøóÔºå‰ª•ÂèäÂÖàÂâçÊó•ÂøóÂ§á‰ªΩ‰∏≠Êú™Â§á‰ªΩÁöÑÊâÄÊúâÊó•ÂøóËÆ∞ÂΩï</li><li>‰∏çÈó¥Êñ≠ÁöÑÊó•ÂøóÂ§á‰ªΩÂ∫èÂàóÂåÖÂê´Êï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥ÔºàÂç≥ËøûÁª≠‰∏çÊñ≠ÁöÑÔºâÊó•ÂøóÈìæ</li></ol><h3 id="‰ªÖÂ§çÂà∂Â§á‰ªΩ">‰ªÖÂ§çÂà∂Â§á‰ªΩ</h3><p>Èò≤Ê≠¢Â∞ÜË¶ÅÂÅöÁöÑÂ§á‰ªΩ‰ºöÁ†¥ÂùèÁé∞ÊúâÁöÑÂ§á‰ªΩÔºåÁª¥Êä§Êó•ÂøóÈìæ</p><h4 id="‰ªÖÂ§çÂà∂ÂÆåÊï¥Â§á‰ªΩ">‰ªÖÂ§çÂà∂ÂÆåÊï¥Â§á‰ªΩ</h4><ol type="1"><li>Â§á‰ªΩÊï¥‰∏™Êï∞ÊçÆÂ∫ìÂÜÖÂÆπ</li><li>‰ΩÜ‰∏çÊîπÂèòÂ∑ÆÂºÇÂ§á‰ªΩÁöÑÂü∫ÂáÜÔºå‰∏çÂΩ±ÂìçÂ∑ÆÂºÇÂ§á‰ªΩÂ∫èÂàó</li></ol><h4 id="‰ªÖÂ§çÂà∂Êó•ÂøóÂ§á‰ªΩ">‰ªÖÂ§çÂà∂Êó•ÂøóÂ§á‰ªΩ</h4><ol type="1"><li>Â§á‰ªΩÂΩìÂâçÊó•ÂøóÊñá‰ª∂ÈáåÁé∞ÊúâÁöÑÂÜÖÂÆπ</li><li>‰ΩÜ‰∏ç‰ºöÊ∏ÖÁ©∫Êó•ÂøóÊñá‰ª∂ÈáåÂ§á‰ªΩ‰∏ãÁöÑÊó•ÂøóÔºå‰∏çÂΩ±ÂìçÂ∏∏ËßÑÊó•ÂøóÂ§á‰ªΩÁöÑÂ∫èÂàó</li></ol><h2 id="ÈÄâÊã©Â§á‰ªΩÁ≠ñÁï•ÂíåÊÅ¢Â§çÊ®°Âºè">ÈÄâÊã©Â§á‰ªΩÁ≠ñÁï•ÂíåÊÅ¢Â§çÊ®°Âºè</h2><h3 id="ÁÆÄÂçïÊÅ¢Â§çÊ®°Âºè‰∏ãÁöÑÂ§á‰ªΩ">ÁÆÄÂçïÊÅ¢Â§çÊ®°Âºè‰∏ãÁöÑÂ§á‰ªΩ</h3><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/clip_image002.jpg"alt="ÁÆÄÂçïÊ®°Âºè‰∏ãÁöÑÂ§á‰ªΩÂíåËøòÂéüÁ≠ñÁï•" /><figcaption aria-hidden="true">ÁÆÄÂçïÊ®°Âºè‰∏ãÁöÑÂ§á‰ªΩÂíåËøòÂéüÁ≠ñÁï•</figcaption></figure><ol type="1"><li><p>‰∏çËÉΩÂÅöÊó•ÂøóÂ§á‰ªΩ</p></li><li><p>Âè™ËÉΩÂ∞ÜÊï∞ÊçÆÂ∫ìÊÅ¢Â§çÂà∞ÊúÄÂêé‰∏ÄÊ¨°Â§á‰ªΩÁöÑÁªìÂ∞æ</p></li><li><p>Â∑•‰ΩúÊçüÂ§±È£éÈô©‰ºöÈöèÊó∂Èó¥Â¢ûÈïøËÄåÂ¢ûÂä†</p></li><li><p>ÂèØÂä†ÂÖ•Â∑ÆÂºÇÂ§á‰ªΩ</p><ol type="1"><li><p>Âª∫Á´ãÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÂêéÔºåÂêéÁª≠Âª∫Á´ãÂ∑ÆÂºÇÂ§á‰ªΩ</p></li><li><p>ÂèØ‰ª•‰ΩøÁî®Âú®Êï∞ÊçÆÈáèÁ®çÂ§ßÔºåËÉΩÂ§üÂÆπÂøçËæÉÈïøÊó∂Èó¥Êï∞ÊçÆ‰∏¢Â§±ÁöÑÊï∞ÊçÆÂ∫ì‰∏ä</p><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/clip_image002-16563991129832.jpg"alt="‰ΩøÁî®Â∑ÆÂºÇÊï∞ÊçÆÂ∫ìÂ§á‰ªΩË°•ÂÖÖÊï∞ÊçÆÂ∫ìÂÆåÊï¥Â§á‰ªΩ" /><figcaptionaria-hidden="true">‰ΩøÁî®Â∑ÆÂºÇÊï∞ÊçÆÂ∫ìÂ§á‰ªΩË°•ÂÖÖÊï∞ÊçÆÂ∫ìÂÆåÊï¥Â§á‰ªΩ</figcaption></figure></li><li><p>Êó†Ê≥ïÊª°Ë∂≥ËæÉÂ§ßÊï∞ÊçÆÂ∫ìÔºåÊàñ‰∏çÂÖÅËÆ∏ËæÉÈïøÊó∂Èó¥Êï∞ÊçÆ‰∏¢Â§±ÁöÑÊÉÖÂÜµ</p></li></ol></li></ol><h3 id="ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÁöÑÂ§á‰ªΩ">ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÁöÑÂ§á‰ªΩ</h3><p>‰ΩøÁî®Êó•ÂøóÂ§á‰ªΩ</p><ol type="1"><li><p>Êó•ÂøóÂ§á‰ªΩÂè™Êã∑Ë¥ù‰∏äÊ¨°Êó•ÂøóÂ§á‰ªΩ‰ª•Êù•ÁöÑÊâÄÊúâÊó•ÂøóËÆ∞ÂΩïÔºåÂºÄÈîÄÂ∞è</p></li><li><p>ÂèØ‰ª•Â∞ÜÊï∞ÊçÆÂ∫ìËøòÂéüÂà∞Êó•ÂøóÂ§á‰ªΩÂÜÖÂåÖÂê´ÁöÑ‰ªª‰ΩïÊó∂ÁÇπ</p></li><li><p>Áº∫ÁÇπÔºö</p><ol type="1"><li>Êï∞ÈáèÂ§ö</li><li>ÈúÄË¶Å‰∏•Ê†ºÊåâÁÖßÂ§á‰ªΩ‰∫ßÁîüÁöÑÈ°∫Â∫èËøõË°åÊÅ¢Â§çÔºåÁÆ°ÁêÜÂ§çÊùÇ</li></ol></li><li><p>Â§á‰ªΩÁ≠ñÁï•</p><ol type="1"><li><p>Âü∫Êú¨</p><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/clip_image002-16564066494734.jpg"alt="ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÁöÑÊúÄÁÆÄÂçïÂ§á‰ªΩÁ≠ñÁï•" /><figcaptionaria-hidden="true">ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÁöÑÊúÄÁÆÄÂçïÂ§á‰ªΩÁ≠ñÁï•</figcaption></figure><p>Âú®ËøòÂéüËøô3‰∏™Â§á‰ªΩÂâçÔºåÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÂëòÂøÖÈ°ªÂ§á‰ªΩÊ¥ªÂä®Êó•ÂøóÔºàÊó•ÂøóÂ∞æÈÉ®ÔºåÂç≥Â∞öÊú™Â§á‰ªΩÁöÑÊó•ÂøóÔºâ„ÄÇÁÑ∂ÂêéËøòÂéüDb_1„ÄÅLog_1ÂíåLog_2ÔºåÂπ∂‰∏î‰∏çÊÅ¢Â§çÊï∞ÊçÆÂ∫ì„ÄÇÊé•ÁùÄÔºåÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÂëòËøòÂéüÂπ∂ÊÅ¢Â§çÂ∞æÔºàTailÔºâÊó•ÂøóÂ§á‰ªΩ„ÄÇËøô‰∏ÄÊ≠•Â∞ÜÂèØ‰ª•ÊääÊï∞ÊçÆÂ∫ìÊÅ¢Â§çÂà∞ÊïÖÈöúÁÇπÔºå‰ªéËÄåÊÅ¢Â§çÊâÄÊúâÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúÁÅæÈöæÊØÅÂùèÁöÑÊòØÊó•ÂøóÊñá‰ª∂Ôºå‰ΩøÂæóÂ∞æÊó•Âøó‰∏çËÉΩÊàêÂäüÂ§á‰ªΩÂíåÊÅ¢Â§çÔºåÈÇ£ËøôÊ¨°ÁÅæÈöæÈÄ†ÊàêÁöÑÊï∞ÊçÆ‰∏¢Â§±Â∞±ÊòØ‰ªéLog_2‰ª•ÂêéÁöÑÊâÄÊúâ‰øÆÊîπ„ÄÇ</p></li><li><p>Âä†‰∏äÂ∑ÆÂºÇÂ§á‰ªΩ</p><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/clip_image002-16564069300966.jpg"alt="‰ΩøÁî®Â∑ÆÂºÇÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÂèäÊó•ÂøóÂ§á‰ªΩÊù•Ë°•ÂÖÖÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ" /><figcaptionaria-hidden="true">‰ΩøÁî®Â∑ÆÂºÇÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÂèäÊó•ÂøóÂ§á‰ªΩÊù•Ë°•ÂÖÖÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ</figcaption></figure><p>Âú®Á¨¨‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÂÆåÊàêÂêéÔºåÊØèÂ§©‰ºöÂÅö‰∏Ä‰∏™Â∑ÆÂºÇÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÔºåËÄåÂú®Â∑•‰ΩúÊó∂Èó¥ËøõË°åËã•Âπ≤Êó•ÂøóÂ§á‰ªΩ„ÄÇ‰æãË°åÊó•ÂøóÂ§á‰ªΩÂ∞ÜÂ∑•‰Ωú‰∏¢Â§±ÁöÑÈ£éÈô©Èôç‰∏∫‰∏¢Â§±Ëá™ÊúÄËøëÊó•ÂøóÂ§á‰ªΩ‰πãÂêéÊâÄÂÅöÁöÑÊõ¥Êîπ„ÄÇ</p></li></ol></li></ol><h3id="Ê°à‰æãÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÁöÑÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ">Ê°à‰æãÔºöÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÁöÑÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ</h3><p>ÂØπ‰∫éÊï∞ÊçÆÂ∫ì<code>Archive</code></p><ol type="1"><li><p>ÂÖ®Â§á‰ªΩ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">BACKUP DATABASE [Archive] <span class="hljs-keyword">TO</span> DISK<span class="hljs-operator">=</span><span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\Backup\AdvFull1.bak&#x27;</span><br></code></pre></td></tr></table></figure></li><li><p>Êü•ËØ¢ÂéÜÂè≤‰∏äÁöÑÂ§á‰ªΩ‰ø°ÊÅØ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> s.first_lsn, s.last_lsn, <br>s.database_backup_lsn, s.backup_finish_date,<br>s.type, y.physical_device_name  <br><span class="hljs-keyword">FROM</span> msdb..backupset <span class="hljs-keyword">AS</span> s <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span><br>msdb..backupfile <span class="hljs-keyword">AS</span> f <span class="hljs-keyword">ON</span> f.backup_set_id <span class="hljs-operator">=</span> s.backup_set_id <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span><br>msdb..backupmediaset <span class="hljs-keyword">AS</span> m <span class="hljs-keyword">ON</span> s.media_set_id <span class="hljs-operator">=</span> m.media_set_id <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span><br>msdb..backupmediafamily <span class="hljs-keyword">AS</span> y <span class="hljs-keyword">ON</span> m.media_set_id <span class="hljs-operator">=</span> y.media_set_id<br><span class="hljs-keyword">WHERE</span>  (s.database_name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Archive&#x27;</span>) <br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span>  s.backup_finish_date <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/image-20220628175642522.png"alt="Êü•ËØ¢Êï∞ÊçÆÂ∫ìÁöÑÂéÜÂè≤Â§á‰ªΩËÆ∞ÂΩïÔºåÊòæÁ§∫‰∏Ä‰∏™ÂÖ®Â§á‰ªΩ" /><figcaptionaria-hidden="true">Êü•ËØ¢Êï∞ÊçÆÂ∫ìÁöÑÂéÜÂè≤Â§á‰ªΩËÆ∞ÂΩïÔºåÊòæÁ§∫‰∏Ä‰∏™ÂÖ®Â§á‰ªΩ</figcaption></figure><ol type="1"><li><code>first_lsn</code>Â§á‰ªΩÈõÜ‰∏≠Á¨¨‰∏Ä‰∏™Êó•ÂøóËÆ∞ÂΩïÁöÑÊó•ÂøóÂ∫èÂàóÂè∑</li><li><code>last_lsn</code>Â§á‰ªΩÈõÜ‰πãÂêéÁöÑ‰∏ã‰∏ÄÊù°Êó•ÂøóËÆ∞ÂΩïÁöÑÊó•ÂøóÂ∫èÂàóÂè∑</li><li><code>(first_lsn, last_lsn-1)</code>Ëøô‰∏™Êó•ÂøóÂ§á‰ªΩÊâÄÂåÖÂê´ÁöÑÊâÄÊúâÊó•ÂøóÂ∫èÂàó<ol type="1"><li><code>last_lsn-1</code>Ë°®Á§∫ÂâçÈù¢‰∏ÄÊù°Êó•ÂøóÂ∫èÂàóÂè∑ÔºåÂ∫èÂàóÂè∑‰∏ç‰∏ÄÂÆö‰ª•1ÈÄíÂáè</li></ol></li><li><code>(first_lsn, last_lsn)</code>Ë°®Á§∫ÂÅöÊï∞ÊçÆÊÅ¢Â§çÊó∂ÔºåÂú®ÂÅörollforwardÔºàÂâçÊªöÔºâÂä®‰ΩúÊó∂Ôºå‰∏ÄÂÆöË¶ÅÈÅçÂéÜÁöÑLSN</li><li><code>database_backup_lsn</code>Ê†áËØÜ‰∏ä‰∏ÄÊ¨°Êï∞ÊçÆÂ∫ìÂÅöÂÖ®Â§á‰ªΩÁöÑËµ∑ÂßãLSN</li><li><code>Type</code>Ê†áËØÜÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÁöÑÁ±ªÂûã<ol type="1"><li>D(Êï∞ÊçÆÂ∫ì)Ôºå L(Êó•Âøó)Ôºå I(Â∑ÆÂºÇÊï∞ÊçÆÂ∫ì)ÔºåF(Êñá‰ª∂ÊàñÊñá‰ª∂ÁªÑ)</li></ol></li></ol></li><li><p>ËøõË°å‰∏Ä‰∏™Êìç‰Ωú‰πãÂêéÔºåÂÅöÊó•ÂøóÂ§á‰ªΩ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> TESTTABLE<br>(number <span class="hljs-type">int</span>,<br> name nvarchar(<span class="hljs-number">50</span>)<br>)<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TESTTABLE <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;aaaa&#x27;</span>)<br>GO<br>BACKUP LOG Archive <span class="hljs-keyword">TO</span> DISK<span class="hljs-operator">=</span><span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\Backup\AdvLog2.bak&#x27;</span><br></code></pre></td></tr></table></figure><p>ÂÜçÊ¨°Êü•ËØ¢Â§á‰ªΩËÆ∞ÂΩïÔºåÂèØ‰ª•ÁúãÂà∞</p><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/image-20220629094538203.png"alt="Êü•ËØ¢Êï∞ÊçÆÂ∫ìÁöÑÂéÜÂè≤Â§á‰ªΩËÆ∞ÂΩïÔºåÊòæÁ§∫‰∏Ä‰∏™Êñ∞ÁöÑÊó•ÂøóÂ§á‰ªΩ" /><figcaptionaria-hidden="true">Êü•ËØ¢Êï∞ÊçÆÂ∫ìÁöÑÂéÜÂè≤Â§á‰ªΩËÆ∞ÂΩïÔºåÊòæÁ§∫‰∏Ä‰∏™Êñ∞ÁöÑÊó•ÂøóÂ§á‰ªΩ</figcaption></figure><p>Êñ∞Â¢ûÁöÑÊó•ÂøóËÆ∞ÂΩïÔºåËÄå‰∏î‰∏ã‰∏ÄÊ¨°Êó•ÂøóÂ§á‰ªΩÁöÑfirst_lsnÊÄªÊòØÁ≠â‰∫é‰∏ä‰∏ÄÊ¨°Êó•ÂøóÂ§á‰ªΩÁöÑlast_lsnÔºå‰øùËØÅ‰∫ÜËøûÁª≠ÊÄß</p></li><li><p>ËøõË°å‰∏Ä‰∏™Êìç‰ΩúÔºåÁÑ∂ÂêéËøõË°åÂ∑ÆÂºÇÂ§á‰ªΩ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> TESTTABLE <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;cccc&#x27;</span>)<br>GO<br>BACKUP DATABASE Archive <span class="hljs-keyword">TO</span> DISK<span class="hljs-operator">=</span><span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\Backup\AdvDiff4.bak&#x27;</span> <span class="hljs-keyword">WITH</span> DIFFERENTIAL<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/image-20220629095933722.png"alt="Êü•ËØ¢Êï∞ÊçÆÂ∫ìÁöÑÂéÜÂè≤Â§á‰ªΩËÆ∞ÂΩïÔºåÊòæÁ§∫‰∏Ä‰∏™Â∑ÆÂºÇÂ§á‰ªΩ" /><figcaptionaria-hidden="true">Êü•ËØ¢Êï∞ÊçÆÂ∫ìÁöÑÂéÜÂè≤Â§á‰ªΩËÆ∞ÂΩïÔºåÊòæÁ§∫‰∏Ä‰∏™Â∑ÆÂºÇÂ§á‰ªΩ</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞Êñ∞Â¢û‰∫ÜÂ∑ÆÂºÇÂ§á‰ªΩ</p></li><li><p>Âú®Êü•ËØ¢ÁªìÊûú‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÂèëÁé∞</p><ol type="1"><li>‰∏çÁÆ°ÊòØÂÖ®Â§á‰ªΩËøòÊòØÂ∑ÆÂºÇÂ§á‰ªΩÔºåÈÉΩ‰∏ç‰ºöÂΩ±ÂìçLSNÁöÑÂ∫èÂàó<ol type="1"><li>Âè™Ë¶ÅÊúâÂÖ®Â§á‰ªΩÂíåËØ•ÂÖ®Â§á‰ªΩ‰πãÂêéÁöÑÊâÄÊúâÊó•ÂøóÂ§á‰ªΩÔºåÂç≥ÂèØÊÅ¢Â§ç</li></ol></li><li>Êó•ÂøóÂ§á‰ªΩÁöÑLSNÊòØËøûÁª≠ÁöÑ</li></ol></li></ol><h3 id="Êñá‰ª∂ÊàñÊñá‰ª∂ÁªÑÂ§á‰ªΩ">Êñá‰ª∂ÊàñÊñá‰ª∂ÁªÑÂ§á‰ªΩ</h3><p><u>ÂÆåÊï¥Êñá‰ª∂Â§á‰ªΩ</u></p><ol type="1"><li>Â§á‰ªΩ‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂ÊàñÊñá‰ª∂ÁªÑ‰∏≠ÁöÑÊâÄÊúâÊï∞ÊçÆ</li><li>Âú®ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÔºå‰∏ÄÊï¥Â•óÂÆåÊï¥Êñá‰ª∂Â§á‰ªΩÂíåË∑®ÊâÄÊúâÊñá‰ª∂Â§á‰ªΩÁöÑÊó•ÂøóÂ§á‰ªΩÂêàËµ∑Êù•ÔºåÁ≠âÂêå‰∫é‰∏Ä‰∏™ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ</li><li>Êñá‰ª∂Â§á‰ªΩËÉΩÂ§üÂè™ËøòÂéüÊçüÂùèÁöÑÊñá‰ª∂ÔºåÂä†Âø´ÊÅ¢Â§çÈÄüÂ∫¶</li><li>Êñá‰ª∂Â§á‰ªΩÂú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂåÖÂê´Ë∂≥Â§üÁöÑÊó•ÂøóËÆ∞ÂΩïÔºåÂèØ‰ª•Â∞ÜÊñá‰ª∂ÂâçÊªöËá≥Â§á‰ªΩÊìç‰ΩúÁöÑÊú´Â∞æÔºàÁÆÄÂçïÊ®°Âºè‰∏ãÂøÖÈ°ª‰∏ÄËµ∑Â§á‰ªΩÊâÄÊúâËØª/ÂÜôÊñá‰ª∂Ôºâ</li></ol><p><u>Êñá‰ª∂Â§á‰ªΩÁöÑ‰ºòÁÇπ</u></p><ol type="1"><li>Êõ¥Âø´‰ªéÊïÖÈöúÊÅ¢Â§ç</li><li>Â¢ûÂä†‰∫ÜËÆ°ÂàíÂíåÂ™í‰ΩìÂ§ÑÁêÜÁöÑÁÅµÊ¥ªÊÄß</li><li>ÈÄÇÁî®‰∫éË∂ÖÂ§ßÂûãÊï∞ÊçÆÂ∫ì</li></ol><p><u>Êñá‰ª∂Â§á‰ªΩÁöÑÁº∫ÁÇπ</u></p><ol type="1"><li>ÁÆ°ÁêÜËæÉÂ§çÊùÇ</li><li>ÂøÖÈ°ªÁª¥Êä§‰∏ÄÁªÑÂÆåÊï¥ÁöÑÊñá‰ª∂Â§á‰ªΩÔºåÂê¶ÂàôÊó†Ê≥ïÊÅ¢Â§çÊï¥‰∏™Êï∞ÊçÆÂ∫ì</li><li>ÂØπ‰∫éÂÆåÊï¥/Â§ßÂÆπÈáèÊó•ÂøóÊÅ¢Â§çÊ®°ÂºèÔºåÂøÖÈ°ªÁª¥Êä§‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êó•ÂøóÂ§á‰ªΩÔºåËøô‰∫õÊó•ÂøóÂ§á‰ªΩËá≥Â∞ëÊ∂µÁõñÁ¨¨‰∏Ä‰∏™ÂÆåÊï¥Êñá‰ª∂Â§á‰ªΩÂíåÊúÄÂêé‰∏Ä‰∏™ÂÆåÊï¥Â§á‰ªΩ‰πãÈó¥ÁöÑÊó∂Èó¥Èó¥Èöî</li><li>Âú®ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè‰∏ãÔºåÊÅ¢Â§ç‰∏Ä‰∏™Êñá‰ª∂ÁªÑÂ§á‰ªΩÔºåÈúÄË¶ÅÊÅ¢Â§çÊñá‰ª∂ÁªÑÂ§á‰ªΩÊú¨Ë∫´ÔºåÂπ∂ÈúÄË¶Å‰æùÊ¨°ÊÅ¢Â§ç‰ªé‰∏ä‰∏ÄÊ¨°ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÂêéÔºåÂà∞ÊÅ¢Â§çÁöÑÁõÆÊ†áÊó∂Èó¥ÁÇπ‰∏∫Ê≠¢ÁöÑÊâÄÊúâÊó•ÂøóÂ§á‰ªΩ‰ª•‰øùËØÅÂêåÊ≠•ÔºàÈúÄË¶ÅÊÅ¢Â§çÁöÑ‰∫ãÂä°Êó•ÂøóÂ§á‰ªΩÊï∞ÈáèÂ∫ûÂ§ßÔºâ</li></ol><p><u>Êñá‰ª∂Â§á‰ªΩÁ≠ñÁï•</u></p><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/clip_image002-16570809862958.jpg"alt="Êñá‰ª∂ÁªÑÂ§á‰ªΩ" /><figcaption aria-hidden="true">Êñá‰ª∂ÁªÑÂ§á‰ªΩ</figcaption></figure><ol type="1"><li>ÊúÄÂ•ΩÊâßË°åÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÂπ∂Âú®Á¨¨‰∏Ä‰∏™Êñá‰ª∂Â§á‰ªΩÂºÄÂßã‰πãÂâçÂºÄÂßãÊó•ÂøóÂ§á‰ªΩ</li><li>Âõæ‰∏≠ÂèØÁúãÂà∞ÔºåÂú®ÂàõÂª∫Êï∞ÊçÆÂ∫ìÔºàÂú®t0Êó∂Èó¥Ôºâ‰πãÂêéÁ´ãÂç≥ÊâßË°åÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÔºàÂú®t1Êó∂Èó¥ÔºâÔºå‰∫ãÂä°Êó•ÂøóÂ§á‰ªΩÊåâÁÖßËÆæÁΩÆÁöÑÈÄÇÂêàÊï∞ÊçÆÂ∫ì‰∏öÂä°Ë¶ÅÊ±ÇÁöÑÈó¥ÈöîÊâßË°å„ÄÇ</li></ol><h2 id="ÈÄâÊã©Êï∞ÊçÆÂ∫ìËøòÂéüÊñπÊ°à">ÈÄâÊã©Êï∞ÊçÆÂ∫ìËøòÂéüÊñπÊ°à</h2><p>Êó†ËÆ∫‰ª•‰ΩïÁßçÊñπÂºèËøòÂéüÊï∞ÊçÆÔºåÂú®ÊÅ¢Â§çÊï∞ÊçÆÂ∫ìÂâçÔºåSQLServerÊï∞ÊçÆÂ∫ìÂºïÊìéÈÉΩ‰ºö‰øùËØÅÊï¥‰∏™Êï∞ÊçÆÂ∫ìÂú®ÈÄªËæë‰∏äÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ‰æãÂ¶ÇÔºåËøòÂéü‰∏Ä‰∏™Êñá‰ª∂‰ª•ÂêéÔºåÂøÖÈ°ªÊÅ¢Â§çÂÆåÊï¥ÁöÑ‰∏ÄÂ•óÊó•ÂøóÊñá‰ª∂Â§á‰ªΩÔºå‰ª•‰æøÂ∞ÜËØ•Êñá‰ª∂ÈáåÁöÑ‰∫ãÂä°ÂâçÊªöË∂≥Â§üÈïøÂ∫¶Ôºå‰∏éÊï∞ÊçÆÂ∫ì‰øùÊåÅ‰∏ÄËá¥ÔºåÊâçËÉΩÊÅ¢Â§çËØ•Êñá‰ª∂Âπ∂‰ΩøÂÖ∂Âú®Á∫ø„ÄÇ</p><p><u>‰∏çÂêåÊÅ¢Â§çÊ®°ÂºèÊâÄÊîØÊåÅÁöÑÂêÑÁßçËøòÂéüÊñπÊ°à</u></p><table><thead><tr class="header"><th>ËøòÂéüÊñπÊ°à</th><th>Âú®ÁÆÄÂçïÊÅ¢Â§çÊ®°Âºè‰∏ã</th><th>Âú®ÂÆåÊï¥/Â§ßÂÆπÈáèÊó•ÂøóÊÅ¢Â§çÊ®°Âºè‰∏ã</th></tr></thead><tbody><tr class="odd"><td>Êï∞ÊçÆÂ∫ì ÂÆåÊï¥ËøòÂéü</td><td>ËøôÊòØÂü∫Êú¨ÁöÑËøòÂéüÁ≠ñÁï•„ÄÇ„ÄÄÊï∞ÊçÆÂ∫ìÂÆåÊï¥ËøòÂéüÂèØËÉΩÊ∂âÂèäÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÁöÑÁÆÄÂçïËøòÂéüÂíåÊÅ¢Â§ç„ÄÇÂè¶Â§ñÔºåÂÆåÊï¥ÁöÑÊï∞ÊçÆÂ∫ìËøòÂéüËøòÂèØËÉΩÊ∂âÂèäËøòÂéüÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÔºå‰ª•ÂèäËøòÂéüÂíåÊÅ¢Â§çÂ∑ÆÂºÇÂ§á‰ªΩ</td><td>ËøôÊòØÂü∫Êú¨ÁöÑËøòÂéüÁ≠ñÁï•„ÄÇÊï∞ÊçÆÂ∫ìÂÆåÊï¥ËøòÂéüÊ∂âÂèäËøòÂéüÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÊàñÂ∑ÆÂºÇÂ§á‰ªΩÔºàÂ¶ÇÊûúÊúâÔºâÔºå‰ª•ÂèäËøòÂéüÊâÄÊúâÂêéÁª≠Êó•ÂøóÂ§á‰ªΩÔºàÊåâÈ°∫Â∫èÔºâ„ÄÇÈÄöËøáÊÅ¢Â§çÂπ∂ËøòÂéü‰∏ä‰∏ÄÊ¨°Êó•ÂøóÂ§á‰ªΩ(RESTOREWITH RECOVERY)ÔºåÂÆåÊàêÊï∞ÊçÆÂ∫ìÂÆåÊï¥ËøòÂéü,ËøáÁ®ã‰∏≠Êï∞ÊçÆÂ∫ìÂ§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅ</td></tr><tr class="even"><td>Êñá‰ª∂ËøòÂéü</td><td>Âè™ËÉΩËøòÂéüÊçüÂùèÁöÑÂè™ËØªÊñá‰ª∂Ôºå‰ΩÜ‰∏çËøòÂéüÊï¥‰∏™Êï∞ÊçÆÂ∫ì„ÄÇÊâÄ‰ª•ÂÆûÁî®ÊÄß‰∏çÊòØÂæàÂº∫</td><td>ËÉΩÂ§üËøòÂéü‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂ÔºåËÄå‰∏çËøòÂéüÊï¥‰∏™Êï∞ÊçÆÂ∫ì„ÄÇÂèØ‰ª•Âú®Êï∞ÊçÆÂ∫ìÂ§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅÊàñÊï∞ÊçÆÂ∫ì‰øùÊåÅÂú®Á∫øÁä∂ÊÄÅÔºàÂØπ‰∫éSQLServer2005ÁöÑÊüê‰∫õÁâàÊú¨ÔºâÊó∂ÊâßË°åÊñá‰ª∂ËøòÂéü„ÄÇÂú®Êñá‰ª∂ËøòÂéüËøáÁ®ã‰∏≠ÔºåÂåÖÂê´Ê≠£Âú®ËøòÂéüÁöÑÊñá‰ª∂ÁöÑÊñá‰ª∂ÁªÑ‰∏ÄÁõ¥Â§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅ„ÄÇÂÖ∂‰ªñÊñá‰ª∂ÁªÑÊúâÂèØËÉΩË¢´ËÆøÈóÆ</td></tr><tr class="odd"><td>È°µÈù¢ËøòÂéü</td><td>‰∏çÈÄÇÁî®</td><td>ËøòÂéüÊçüÂùèÁöÑÈ°µÈù¢„ÄÇÂèØ‰ª•Âú®Êï∞ÊçÆÂ∫ìÂ§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅÊàñÊï∞ÊçÆÂ∫ì‰øùÊåÅÂú®Á∫øÁä∂ÊÄÅÔºàÂØπ‰∫éSQLServerÁöÑ‰ºÅ‰∏öÁâàÔºâÊó∂ÊâßË°åÈ°µÈù¢ËøòÂéü„ÄÇÂú®È°µÈù¢ËøòÂéüËøáÁ®ã‰∏≠ÔºåÊ≠£Âú®ËøòÂéüÁöÑÈ°µÈù¢‰∏ÄÁõ¥Â§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅ„ÄÇ„ÄÄÂøÖÈ°ªÂÖ∑ÊúâÂÆåÊï¥ÁöÑÊó•ÂøóÂ§á‰ªΩÈìæÔºàÂåÖÂê´ÂΩìÂâçÊó•ÂøóÊñá‰ª∂ÔºâÔºåÂπ∂‰∏îÂøÖÈ°ªÊÅ¢Â§çÊâÄÊúâËøô‰∫õÊó•ÂøóÂ§á‰ªΩÔºå‰ª•‰ΩøÈ°µÈù¢‰∏éÂΩìÂâçÊó•ÂøóÊñá‰ª∂‰øùÊåÅ‰∏ÄËá¥</td></tr><tr class="even"><td>ÊÆµËêΩËøòÂéü</td><td>ÊåâÊñá‰ª∂ÁªÑÁ∫ßÂà´Âπ∂‰ªé‰∏ªÊñá‰ª∂ÁªÑÂíåÊâÄÊúâËØªÂÜôËæÖÂä©Êñá‰ª∂ÁªÑÂºÄÂßãÔºåÂàÜÈò∂ÊÆµËøòÂéüÂíåÊÅ¢Â§çÊï∞ÊçÆÂ∫ì</td><td>ÊåâÊñá‰ª∂ÁªÑÁ∫ßÂà´Âπ∂‰ªé‰∏ªÊñá‰ª∂ÁªÑÂºÄÂßãÔºåÂàÜÈò∂ÊÆµËøòÂéüÂíåÊÅ¢Â§çÊï∞ÊçÆÂ∫ì</td></tr></tbody></table><p><u>ÊØèÁßçÊÅ¢Â§çÊ®°ÂºèÊîØÊåÅÁöÑËøòÂéüÊñπÊ°à‰ª•ÂèäÈÄÇÁî®ËåÉÂõ¥</u></p><table><thead><tr class="header"><th>ËøòÂéüÊìç‰Ωú</th><th>ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè</th><th>Â§ßÂÆπÈáèÊó•ÂøóÊÅ¢Â§çÊ®°Âºè</th><th>ÁÆÄÂçïÊÅ¢Â§çÊ®°Âºè</th></tr></thead><tbody><tr class="odd"><td>Êï∞ÊçÆËøòÂéü</td><td>ÂÆåÊï¥ËøòÂéüÔºàÂ¶ÇÊûúÊó•ÂøóÂèØÁî®Ôºâ</td><td>Êüê‰∫õÊï∞ÊçÆÂ∞Ü‰∏¢Â§±</td><td>Ëá™‰∏äÊ¨°ÂÆåÊï¥Â§á‰ªΩÊàñÂ∑ÆÂºÇÂ§á‰ªΩÂêéÁöÑ‰ªª‰ΩïÊï∞ÊçÆÂ∞Ü‰∏¢Â§±</td></tr><tr class="even"><td>Êó∂ÁÇπËøòÂéü</td><td>Êó•ÂøóÂ§á‰ªΩÊâÄÊ∂µÁõñÁöÑ‰ªª‰ΩïÊó∂Èó¥</td><td>Êó•ÂøóÂ§á‰ªΩÂåÖÂê´‰ªª‰ΩïÂ§ßÂÆπÈáèÊó•ÂøóÊõ¥ÊîπÊó∂‰∏çÂÖÅËÆ∏</td><td>‰∏çÊîØÊåÅ</td></tr><tr class="odd"><td>Êñá‰ª∂ËøòÂéü*</td><td>ÂÆåÂÖ®ÊîØÊåÅ</td><td>‰∏çÂÆåÂÖ®ÊîØÊåÅ</td><td>‰ªÖÂØπÂè™ËØªËæÖÂä©Êñá‰ª∂ÂèØÁî®</td></tr><tr class="even"><td>È°µÈù¢ËøòÂéü*</td><td>ÂÆåÂÖ®ÊîØÊåÅ</td><td>‰∏çÂÆåÂÖ®ÊîØÊåÅ</td><td>Êó†</td></tr><tr class="odd"><td>ÊÆµËêΩËøòÂéü*</td><td>ÂÆåÂÖ®ÊîØÊåÅ</td><td>‰∏çÂÆåÂÖ®ÊîØÊåÅ</td><td>‰ªÖÂØπÂè™ËØªËæÖÂä©Êñá‰ª∂ÂèØÁî®</td></tr></tbody></table><p>* ‰ªÖÈÄÇÁî®‰∫éSQL Server‰ºÅ‰∏öÁâà</p><h3 id="Êï∞ÊçÆÂ∫ìÂÆåÊï¥ËøòÂéü">Êï∞ÊçÆÂ∫ìÂÆåÊï¥ËøòÂéü</h3><p>Â∞Ü‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰ªéÊó†Âà∞ÊúâÔºåÂÆåÊï¥Âú∞ËøòÂéüÂá∫Êù•ÔºåÊòØÊúÄÂ∏∏‰ΩøÁî®ÁöÑËøòÂéüÊìç‰Ωú„ÄÇÂú®ÁÆÄÂçïÊÉÖÂÜµ‰∏ãÔºåËøòÂéüÊìç‰ΩúÂè™ÈúÄË¶Å‰∏Ä‰∏™ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ„ÄÅ‰∏Ä‰∏™Â∑ÆÂºÇÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÂíåÂêéÁª≠Êó•ÂøóÂ§á‰ªΩ„ÄÇ</p><p><u>Êï∞ÊçÆÂ∫ìÊÅ¢Â§çÂà∞ÊïÖÈöúÁÇπÁöÑÂü∫Êú¨Ê≠•È™§</u></p><p>Êï∞ÊçÆÂ∫ìÈúÄÊª°Ë∂≥Ôºö</p><ol type="1"><li>ÊÅ¢Â§çÊ®°ÂºèÂøÖÈ°ªÊòØÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè<ol type="1"><li>Â¶ÇÊûúÊ∫êÊï∞ÊçÆÂ∫ìÊòØÁÆÄÂçïÊ®°ÂºèÔºåÂàôÊ≤°ÊúâÁõ∏Â∫îÁöÑÊó•ÂøóÂ§á‰ªΩ</li></ol></li><li>ÁÅæÈöæÂèëÁîüÂâçÔºåÊï∞ÊçÆÂ∫ìÊõæÁªèÂÅöËøá‰∏Ä‰∏™ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÔºàÊàñÊúâ‰∏ÄÂ•óÂÆåÊï¥ÁöÑÊñá‰ª∂Â§á‰ªΩÔºâ„ÄÇ</li><li>Âú®‰∏äÊ¨°ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÂêéÔºåÂÅöËøáÁöÑ‰ªª‰ΩïÊó•ÂøóÂ§á‰ªΩÊØè‰∏™ÈÉΩËÉΩÊâæÂà∞</li></ol><p>Ê≠•È™§Ôºö</p><ol type="1"><li><p>Â§á‰ªΩÊ¥ªÂä®‰∫ãÂä°Êó•ÂøóÔºà‰πüÁß∞‰∏∫Êó•ÂøóÂ∞æÈÉ®Ôºâ„ÄÇ</p></li><li><p>ËøòÂéüÊúÄÊñ∞ÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÔºåËÄå‰∏î‰∏çÂÅö‰∫ãÂä°ÊÅ¢Â§ç<code>RESTORE DATABASE *database_name* FROM *backup_device* WITH NORECOVERY</code></p></li><li><p>Â¶ÇÊûúÂ≠òÂú®Â∑ÆÂºÇÂ§á‰ªΩÔºåÂàôËøòÂéüÊúÄÊñ∞ÁöÑÂ∑ÆÂºÇÂ§á‰ªΩÔºåËÄå‰∏çÂÅö‰∫ãÂä°ÊÅ¢Â§ç<code>WITH NORECOVERY</code></p></li><li><p>‰ªéËøòÂéüÂ§á‰ªΩÂêéÂàõÂª∫ÁöÑÁ¨¨‰∏Ä‰∏™‰∫ãÂä°Êó•ÂøóÂ§á‰ªΩÂºÄÂßãÔºå‰ΩøÁî®<code>NORECOVERY</code>‰æùÊ¨°ËøòÂéüÊó•Âøó</p></li><li><p>ÊÅ¢Â§çÊï∞ÊçÆÂ∫ìÂà∞Êüê‰∏™Êó∂Èó¥ÁÇπ<code>RESTORE DATABASE *database_name* WITH STOPAT='????????', RECOVERY</code>„ÄÇÊ≠§Ê≠•È™§‰πüÂèØ‰ª•‰∏éËøòÂéü‰∏ä‰∏ÄÊ¨°Êó•ÂøóÂ§á‰ªΩÁªìÂêà‰ΩøÁî®</p></li></ol><p>ÂÆû‰æãÔºöÊÅ¢Â§çAdventureWorksÊï∞ÊçÆÂ∫ìÔºåÂú®Ê≠§Á§∫‰æã‰πãÂâçÔºåÊï∞ÊçÆÂ∫ìÂ∑≤ÁªèÂÅöËøá‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂÆåÊï¥Â§á‰ªΩÂíå‰∏Ä‰∏™Êó•ÂøóÂ§á‰ªΩ„ÄÇ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--ÁÅæÈöæÂèëÁîüÂêéÔºåËØïÂõæÂàõÂª∫‰∏Ä‰∏™Â∞æÊó•ÂøóÂ§á‰ªΩ</span><br>BACKUP LOG AdventureWorks <br><span class="hljs-keyword">TO</span> DISK <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Z:\SQLServerBackups\AdventureWorks.bak&#x27;</span><br>   <span class="hljs-keyword">WITH</span> NORECOVERY; <br>GO<br><span class="hljs-comment">--‰ªéÂ§á‰ªΩÊÅ¢Â§ç‰∏Ä‰∏™ÂÖ®Â§á‰ªΩ</span><br>RESTORE DATABASE AdventureWorks <br>  <span class="hljs-keyword">FROM</span> DISK <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Z:\SQLServerBackups\AdventureWorks.bak&#x27;</span> <br>  <span class="hljs-keyword">WITH</span> FILE<span class="hljs-operator">=</span><span class="hljs-number">1</span>, <br>    NORECOVERY;<br><br><span class="hljs-comment">--‰ªéÂ§á‰ªΩ‰∏≠ÊÅ¢Â§ç‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑÊó•ÂøóÂ§á‰ªΩ</span><br>RESTORE LOG AdventureWorks <br>  <span class="hljs-keyword">FROM</span> DISK <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Z:\SQLServerBackups\AdventureWorks.bak&#x27;</span> <br>  <span class="hljs-keyword">WITH</span> FILE<span class="hljs-operator">=</span><span class="hljs-number">2</span>, <br>    NORECOVERY;<br><br><span class="hljs-comment">--Áî®STOPATÊÅ¢Â§çÂ∞æÊó•ÂøóÂ§á‰ªΩ</span><br>RESTORE LOG AdventureWorks <br>  <span class="hljs-keyword">FROM</span> DISK <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Z:\SQLServerBackups\AdventureWorks.bak&#x27;</span><br>  <span class="hljs-keyword">WITH</span> FILE<span class="hljs-operator">=</span><span class="hljs-number">3</span>, STOPAT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;XXXX xx:xx:xx&#x27;</span>,<br>   RECOVERY;<br>GO<br></code></pre></td></tr></table></figure><p><u>ÂÆåÊï¥ËøòÂéü‰ºòÁÇπ</u></p><ol type="1"><li>ÁÆ°ÁêÜÂíåÊâßË°åÈÉΩÊØîËæÉÁÆÄÂçï</li><li>ÊòØÊúÄÂπøÊ≥õ‰ΩøÁî®ÁöÑËøòÂéüÊñπÊ°à</li></ol><p><u>ÂÆåÊï¥ËøòÂéüÁº∫ÁÇπ</u></p><ol type="1"><li>Êï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥Â§á‰ªΩÊÅ¢Â§çËÄóÊó∂Â§™Èïø</li><li>ÂÆåÊï¥Â§á‰ªΩÂ§ßÂ∞èÂç†Á©∫Èó¥</li></ol><h3 id="Êñá‰ª∂ËøòÂéü">Êñá‰ª∂ËøòÂéü</h3><p><u>‰ªéÊñá‰ª∂Â§á‰ªΩÂíåÂ∑ÆÂºÇÊñá‰ª∂Â§á‰ªΩ‰∏≠ËøòÂéü‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂèóÊçüÊñá‰ª∂ÁöÑÂü∫Êú¨Ê≠•È™§</u></p><ol type="1"><li>ÂàõÂª∫Ê¥ªÂä®‰∫ãÂä°Êó•ÂøóÁöÑÂ∞æÊó•ÂøóÂ§á‰ªΩ<ol type="1"><li>ÂØπ‰∫éÁ¶ªÁ∫øÊñá‰ª∂ËøòÂéüÔºåÂú®Êñá‰ª∂ËøòÂéü‰πãÂâçÂøÖÈ°ªÂÖàËøõË°å‰∏ÄÊ¨°Â∞æÊó•ÂøóÂ§á‰ªΩ</li><li>ÂØπ‰∫éÂú®Á∫øÊñá‰ª∂ËøòÂéüÔºåÂú®Êñá‰ª∂ËøòÂéü‰πãÂêéÂøÖÈ°ªÂÖàËøõË°å‰∏ÄÊ¨°Êó•ÂøóÂ§á‰ªΩ</li></ol></li><li>‰ªéÊØè‰∏™ÊçüÂùèÁöÑÊñá‰ª∂ÁöÑÊúÄÊñ∞Êñá‰ª∂Â§á‰ªΩËøòÂéüÁõ∏Â∫îÊñá‰ª∂</li><li>ÈíàÂØπÊØè‰∏™ËøòÂéüÁöÑÊñá‰ª∂ÔºåËøòÂéüÊúÄËøëÁöÑÂ∑ÆÂºÇÊñá‰ª∂Â§á‰ªΩÔºàÂ¶ÇÊûúÊúâÔºâ„ÄÇ</li><li>ÊåâÈ°∫Â∫èËøòÂéü‰∫ãÂä°Êó•ÂøóÂ§á‰ªΩÔºå‰ªéË¶ÜÁõñÊúÄÊó©ËøòÂéüÊñá‰ª∂ÁöÑÂ§á‰ªΩÂºÄÂßãÔºåÂà∞Âú®Ê≠•È™§1‰∏≠ÂàõÂª∫ÁöÑÂ∞æÊó•ÂøóÂ§á‰ªΩÁªìÊùü„ÄÇ</li></ol><p><u>Á§∫‰æã</u></p><p>Êï∞ÊçÆÂ∫ìabcÔºàÂÆåÊï¥ÊÅ¢Â§çÊ®°ÂºèÔºâÂåÖÂê´‰∏â‰∏™Êñá‰ª∂ÁªÑÔºåÊñá‰ª∂ÁªÑA‰∏∫ËØª/ÂÜôÊñá‰ª∂ÁªÑÔºåËÄåÊñá‰ª∂ÁªÑBÂíåCÊòØÂè™ËØªÁöÑ„ÄÇÊúÄÂàùÔºåÊâÄÊúâÊñá‰ª∂ÁªÑÈÉΩÂ§Ñ‰∫éÂú®Á∫øÁä∂ÊÄÅ„ÄÇÁé∞Âú®Êñá‰ª∂ÁªÑA‰∏≠ÁöÑÊñá‰ª∂a1Â∑≤ÊçüÂùèÔºåÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÂëòÂÜ≥ÂÆöÂú®Êï∞ÊçÆÂ∫ìÂ§Ñ‰∫éÂú®Á∫øÁä∂ÊÄÅÊó∂ËøòÂéüËØ•Êñá‰ª∂„ÄÇ</p><ol type="1"><li><p>Âú®Á∫øËøòÂéüÊñá‰ª∂a1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">RESTORE DATABASE adb FILE<span class="hljs-operator">=</span><span class="hljs-string">&#x27;a1&#x27;</span> <span class="hljs-keyword">FROM</span> backup <span class="hljs-keyword">WITH</span> NORECOVERY<br></code></pre></td></tr></table></figure><p>Êñá‰ª∂a1Â§Ñ‰∫éRESTORINGÁä∂ÊÄÅÔºåÊñá‰ª∂ÁªÑAÂ§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅ</p></li><li><p>ËøõË°åÊñ∞ÁöÑÊó•ÂøóÂ§á‰ªΩ‰ª•Á°Æ‰øùÊçïËé∑Âà∞ËØ•Êñá‰ª∂Á¶ªÁ∫øÊó∂ÁöÑÁÇπ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ‰πãÂâçÊõæÁªèÂÅöËøá‰∏§Ê¨°Êó•ÂøóÂ§á‰ªΩ</span><br>BACKUP LOG adb <span class="hljs-keyword">TO</span> log_backup3 <span class="hljs-keyword">WITH</span> COPY_ONLY<br></code></pre></td></tr></table></figure></li><li><p>Âú®Á∫øËøòÂéüÊó•ÂøóÂ§á‰ªΩ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">RESTORE LOG adb <span class="hljs-keyword">FROM</span> log_backup1 <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> log_backup2 <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> log_backup3 <span class="hljs-keyword">WITH</span> RECOVERY<br></code></pre></td></tr></table></figure><p>Êñá‰ª∂a1Áé∞Â§Ñ‰∫éÂú®Á∫øÁä∂ÊÄÅ„ÄÇÊï∞ÊçÆÂ∫ìÊÅ¢Â§çÂÆåÊàê</p></li></ol><h3 id="È°µÈù¢ËøòÂéü">È°µÈù¢ËøòÂéü</h3><p>È°µÈù¢ËøòÂéüÁî®‰∫é‰øÆÂ§çÈöîÁ¶ªÁöÑÊçüÂùèÈ°µ„ÄÇÈ°µÈù¢ËøòÂéü‰ªÖÂèØ‰ª•ËøòÂéüÊï∞ÊçÆÈ°µ„ÄÇ</p><p><u>‰∏çËÉΩ‰ΩøÁî®È°µÈù¢ËøòÂéüÁöÑÂÜÖÂÆπ</u></p><ol type="1"><li>‰∫ãÂä°Êó•Âøó</li><li>ÂàÜÈÖçÈ°µÔºöÂÖ®Â±ÄÂàÜÈÖçÊò†Â∞ÑÔºàGAMÔºâÈ°µ„ÄÅÂÖ±‰∫´ÂÖ®Â±ÄÂàÜÈÖçÊò†Â∞ÑÔºàSGAMÔºâÈ°µÂíåÈ°µÂèØÁî®Á©∫Èó¥ÔºàPFSÔºâÈ°µ</li><li>ÊâÄÊúâÊï∞ÊçÆÊñá‰ª∂ÁöÑÈ°µ0ÔºàÊñá‰ª∂ÂêØÂä®È°µÔºâ</li><li>È°µ1:9ÔºàÊï∞ÊçÆÂ∫ìÂêØÂä®È°µÔºâ</li><li>ÂÖ®ÊñáÁõÆÂΩïÔºàFulltext search catalogÔºâ</li></ol><p><u>‰ΩøÁî®È°µÈù¢ËøòÂéüÁöÑË¶ÅÊ±Ç</u></p><ol type="1"><li>Êï∞ÊçÆÂ∫ìÂøÖÈ°ª‰ΩøÁî®ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè„ÄÇ‰ΩøÁî®Â§ßÂÆπÈáèÊó•ÂøóÊÅ¢Â§çÊ®°ÂºèÊó∂ÂèØËÉΩ‰∏çËÉΩÊàêÂäü„ÄÇÁÆÄÂçïÊÅ¢Â§çÊ®°ÂºèÊó†Ê≥ï‰ΩøÁî®Ëøô‰∏ÄÂäüËÉΩ„ÄÇ</li><li>Âè™ËØªÊñá‰ª∂ÁªÑ‰∏≠ÁöÑÈ°µÈù¢Êó†Ê≥ïËøòÂéü</li><li>ËøòÂéüÈ°∫Â∫èÂøÖÈ°ª‰ªéÂÆåÊï¥Â§á‰ªΩ„ÄÅÊñá‰ª∂Â§á‰ªΩÊàñÊñá‰ª∂ÁªÑÂ§á‰ªΩ‰∏≠ÊÅ¢Â§çÈ°µÈù¢ÂºÄÂßã</li><li>È°µÈù¢ËøòÂéüÈúÄË¶ÅÊà™Ê≠¢Âà∞ÂΩìÂâçÊó•ÂøóÊñá‰ª∂ÁöÑËøûÁª≠ÔºàÊó†Êà™Êñ≠ÔºâÊó•ÂøóÂ§á‰ªΩÔºåÂπ∂‰∏îÂøÖÈ°ªÊÅ¢Â§çÊâÄÊúâËøô‰∫õÊó•ÂøóÂ§á‰ªΩÂêéÔºåÈ°µÊâçËÉΩÊÅ¢Â§çÂà∞ÂΩìÂâçÊ≠£Â∏∏Áä∂ÊÄÅ</li><li>Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÂíåÈ°µÈù¢ËøòÂéü‰∏çËÉΩÂêåÊó∂ËøêË°å</li></ol><p><u>È°µÈù¢ËøòÂéüÁöÑÂü∫Êú¨Ê≠•È™§</u></p><ol type="1"><li>Ëé∑ÂèñË¶ÅËøòÂéüÁöÑÊçüÂùèÈ°µÁöÑÈ°µID<ol type="1"><li>Êü•ËØ¢msdbÊï∞ÊçÆÂ∫ìÈáåÁöÑ<code>suspect_pages</code>Ë°®</li><li>Êü•ËØ¢ÁõëËßÜ‰∫ã‰ª∂ÂíåSQL Server errorlogÊñá‰ª∂ÈáåÊâÄÊä•Âá∫ÁöÑÈîôËØØ‰ø°ÊÅØ</li></ol></li><li>‰ªéÂåÖÂê´È°µÁöÑÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ„ÄÅÊñá‰ª∂Â§á‰ªΩÊàñÊñá‰ª∂ÁªÑÂ§á‰ªΩÂºÄÂßãËøõË°åÈ°µÈù¢ËøòÂéü</li><li>Â∫îÁî®ÊúÄËøëÁöÑÂ∑ÆÂºÇÂ§á‰ªΩ</li><li>Â∫îÁî®ÂêéÁª≠Êó•ÂøóÂ§á‰ªΩ</li><li>ÂàõÂª∫Êñ∞ÁöÑÊï∞ÊçÆÂ∫ìÂ∞æÊó•ÂøóÂ§á‰ªΩ</li><li>ËøòÂéüÊñ∞ÁöÑÂ∞æÊó•ÂøóÂ§á‰ªΩ</li></ol><p><u>Á§∫‰æã</u></p><p>‰ΩøÁî®NORECOVERYËøòÂéüÊñá‰ª∂BÁöÑ4‰∏™ÊçüÂùèÈ°µ„ÄÇÈöèÂêéÔºåÂ∞Ü‰ΩøÁî®NORECOVERYÂ∫îÁî®‰∏§‰∏™Êó•ÂøóÂ§á‰ªΩÔºåÁÑ∂ÂêéÊòØÂ∞æÊó•ÂøóÂ§á‰ªΩÔºà‰ΩøÁî®RECOVERYËøòÂéüÔºâ„ÄÇÊñá‰ª∂BÁöÑÊñá‰ª∂ID‰∏∫1ÔºåÊçüÂùèÁöÑÈ°µÁöÑÈ°µIDÂàÜÂà´‰∏∫57„ÄÅ202„ÄÅ916Âíå1016„ÄÇ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">RESTORE DATABASE <span class="hljs-operator">&lt;</span>database<span class="hljs-operator">&gt;</span> PAGE<span class="hljs-operator">=</span><span class="hljs-string">&#x27;1:57, 1:202, 1:916, 1:1016&#x27;</span><br>   <span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>file_backup_of_file_B<span class="hljs-operator">&gt;</span> <br>   <span class="hljs-keyword">WITH</span> NORECOVERY;<br>RESTORE LOG <span class="hljs-operator">&lt;</span>database<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>log_backup<span class="hljs-operator">&gt;</span> <br>   <span class="hljs-keyword">WITH</span> NORECOVERY;<br>RESTORE LOG <span class="hljs-operator">&lt;</span>database<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>log_backup<span class="hljs-operator">&gt;</span> <br>   <span class="hljs-keyword">WITH</span> NORECOVERY; <br>BACKUP LOG <span class="hljs-operator">&lt;</span>database<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">TO</span> <span class="hljs-operator">&lt;</span>new_log_backup<span class="hljs-operator">&gt;</span> <br>RESTORE LOG <span class="hljs-operator">&lt;</span>database<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span>new_log_backup<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">WITH</span> RECOVERY;<br>GO<br></code></pre></td></tr></table></figure><h3 id="ÊÆµËêΩËøòÂéü">ÊÆµËêΩËøòÂéü</h3><p>ÊÆµËêΩËøòÂéüÂåÖÊã¨‰ªé‰∏ªÊñá‰ª∂ÁªÑÂºÄÂßãÁöÑ‰∏ÄÁ≥ªÂàóËøòÂéüÈ°∫Â∫èÔºåÊúâÊó∂‰πüÂèØ‰ª•‰ªé‰∏Ä‰∏™ÊàñÂ§ö‰∏™ËæÖÂä©Êñá‰ª∂ÁªÑÂºÄÂßã„ÄÇÂú®ËøòÂéüÈ°∫Â∫èÁªìÊùüÂêéÔºåÂ¶ÇÊûúÊÅ¢Â§çÁöÑÊñá‰ª∂ÊúâÊïàÂπ∂‰∏î‰∏éÊï∞ÊçÆÂ∫ì‰∏ÄËá¥ÔºåÂàôÊÅ¢Â§çÁöÑÊñá‰ª∂Â∞ÜËÉΩÁõ¥Êé•Âèò‰∏∫Âú®Á∫øÁä∂ÊÄÅÔºåÊÅ¢Â§çÁî®Êà∑ËÆøÈóÆ„ÄÇ</p><p><u>Á¶ªÁ∫øÊÆµËêΩËøòÂéüÊñπÊ°à</u></p><ol type="1"><li>Êï∞ÊçÆÂ∫ìÂú®ÈÉ®ÂàÜËøòÂéüÈ°∫Â∫è‰πãÂêéÂ§Ñ‰∫éÂú®Á∫øÁä∂ÊÄÅ</li><li>Â∞öÊú™ËøòÂéüÁöÑÊñá‰ª∂ÁªÑ‰øùÊåÅÁ¶ªÁ∫øÁä∂ÊÄÅÔºåËÄåÊï∞ÊçÆÂ∫ìÂøÖÈ°ªËøõÂÖ•Á¶ªÁ∫øÁä∂ÊÄÅÂêéÔºåÊâçËÉΩÁªßÁª≠ËøòÂéüÊ≤°ÊúâËøòÂéüÁöÑÊñá‰ª∂ÁªÑ</li></ol><p><u>Âú®Á∫øÊÆµËêΩËøòÂéüÊñπÊ°à</u></p><ol type="1"><li>SQL Server ‰ºÅ‰∏öÁâà</li><li>Êï∞ÊçÆÂ∫ìÂú®ÂÆåÊàêÈÉ®ÂàÜËøòÂéüÈ°∫Â∫èÂêéÔºå‰∏ªÊñá‰ª∂ÁªÑÂ∑≤ÁªèË¢´ÊÅ¢Â§çÔºåÂÆÉÂíåÊâÄÊúâÂÖ∂‰ªñÂ∑≤ÊÅ¢Â§çÁöÑËæÖÂä©Êñá‰ª∂ÁªÑÈÉΩÂ§Ñ‰∫éÂèØÁî®Áä∂ÊÄÅÔºåÊï∞ÊçÆÂ∫ìËøõÂÖ•Âú®Á∫øÁä∂ÊÄÅÔºåÁî®Êà∑ÂèØ‰ª•ËÆøÈóÆ</li><li>Â∞öÊú™ËøòÂéüÁöÑÊñá‰ª∂ÁªÑ‰øùÊåÅÁ¶ªÁ∫øÁä∂ÊÄÅÔºåËÄåÂêéÈù¢ËøòÂéüËøô‰∫õÊñá‰ª∂ÁªÑÊó∂ÔºåÊï∞ÊçÆÂ∫ìËøòËÉΩ‰øùÊåÅÂú®Á∫øÁä∂ÊÄÅ</li><li>Â¶ÇÊûú‰ªÖËøòÂéü‰∫Ü‰∏ÄÈÉ®ÂàÜÊñá‰ª∂ÁªÑÔºåÂàôÊï∞ÊçÆÂ∫ìÂíåËøô‰∫õÊñá‰ª∂ÁªÑÊúâÂÖ≥ÁöÑ‰∫ãÂä°ÂèØËÉΩ‰ºöË¢´ÊåÇËµ∑ÔºåÂΩ±Âìç‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆÈ°µÈù¢ÁöÑËÆøÈóÆ</li></ol><p>Âú®ÁÆÄÂçïÊÅ¢Â§çÊ®°Âºè‰∏ãÔºåÂèØ‰ª•Ë¢´Êé®ËøüÊÅ¢Â§çÁöÑÂè™ÊúâÂè™ËØªÊñá‰ª∂ÁªÑ„ÄÇ</p><p>Âú®ÂÆåÊï¥ÊÅ¢Â§çÊ®°ÂºèÊàñÂ§ßÂÆπÈáèÊó•ÂøóÊÅ¢Â§çÊ®°Âºè‰∏ãÔºå‰ªª‰ΩïÂåÖÂê´Â§ö‰∏™Êñá‰ª∂ÁªÑÁöÑÊï∞ÊçÆÂ∫ìÈÉΩÂèØ‰ª•‰ΩøÁî®ÊÆµËêΩËøòÂéüÔºåÂπ∂‰∏îÂèØ‰ª•Â∞ÜÊï∞ÊçÆÂ∫ìËøòÂéüÂà∞‰ªª‰ΩïÊó∂Èó¥ÁÇπ„ÄÇ</p><p><u>ÊÆµËêΩËøòÂéüÈ°∫Â∫è</u></p><ol type="1"><li><p>ÈÉ®ÂàÜËøòÂéüÈ°∫Â∫è</p><p>Á¨¨‰∏Ä‰∏™RESTORE DATABASEËØ≠Âè•ÂøÖÈ°ªÊâßË°å‰ª•‰∏ãÊìç‰ΩúÔºö</p><ol type="1"><li>ÊåáÂÆöPARTIALÈÄâÈ°πÔºàÂè™ËÉΩÊåáÂÆö‰∏ÄÊ¨°Ôºâ</li><li>‰ΩøÁî®ÂåÖÂê´‰∏ªÊñá‰ª∂ÁªÑÁöÑ‰ªª‰ΩïÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩÔºåËøòÂéüÈÉ®ÂàÜÂ§á‰ªΩÊù•ÂêØÂä®ÈÉ®ÂàÜËøòÂéüÈ°∫Â∫è„ÄÇ</li><li>Ëã•Ë¶ÅËøòÂéüÂà∞ÁâπÂÆöÁöÑÊó∂Èó¥ÁÇπÔºåÂøÖÈ°ªÂú®ÈÉ®ÂàÜËøòÂéüÈ°∫Â∫è‰∏≠ÊåáÂÆöËØ•Êó∂Èó¥„ÄÇËøòÂéüÈ°∫Â∫èÁöÑÊØè‰∏™ÂêéÁª≠Ê≠•È™§ÈÉΩÂøÖÈ°ªÊåáÂÆöÁõ∏ÂêåÁöÑÊó∂Èó¥ÁÇπ</li></ol></li><li><p>Êñá‰ª∂ÁªÑËøòÂéüÈ°∫Â∫è‰ºö‰ΩøÂÖ∂‰ªñÊñá‰ª∂ÁªÑÂú®Á∫øÂπ∂Â§Ñ‰∫é‰∏éÊï∞ÊçÆÂ∫ì‰∏ÄËá¥ÁöÑÊüê‰∏™ÁÇπ</p><ol type="1"><li>Â¶ÇÊûúÁâπÂÆöÂè™ËØªÊñá‰ª∂Êú™ÊçüÂùè‰∏î‰∏éÊï∞ÊçÆÂ∫ì‰∏ÄËá¥ÔºåÂàôËØ•Êñá‰ª∂Êó†È°ªËøòÂéü„ÄÇ</li><li>Â¶ÇÊûúÂú®Êñá‰ª∂Â§á‰ªΩÂàõÂª∫‰πãÂâçÔºåÂè™ËØªÊñá‰ª∂ÁªÑÂ∞±Â∑≤Â§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅÔºåÂàôËØ•Êñá‰ª∂ÁªÑÊó†È°ªÂ∫îÁî®Êó•ÂøóÂ§á‰ªΩÔºåÂπ∂‰∏îÊñá‰ª∂ËøòÂéü‰ºöË∑≥ËøáÊó•ÂøóÂ§á‰ªΩÁöÑÂ∫îÁî®ËøáÁ®ã„ÄÇ</li><li>Â¶ÇÊûúÊñá‰ª∂ÁªÑÊòØËØª/ÂÜôÊñá‰ª∂ÁªÑÔºåÂàôÂøÖÈ°ªÂ∞ÜÊú™‰∏≠Êñ≠ÁöÑÊó•ÂøóÂ§á‰ªΩÈìæÂ∫îÁî®‰∫é‰∏ä‰∏ÄÊ¨°ÂÆåÊï¥ËøòÂéüÊàñÂ∑ÆÂºÇËøòÂéüÔºåÊñá‰ª∂ÁªÑÊâçËÉΩÂâçËøõÂà∞ÂΩìÂâçÁöÑÊó•ÂøóÊñá‰ª∂</li></ol></li></ol><p><u>ÊÆµËêΩËøòÂéüÁöÑ‰ºòÁÇπ</u></p><ol type="1"><li>ËÉΩÂ∏ÆÂä©ËÆ©ÊúÄÈáçË¶ÅÁöÑÊï∞ÊçÆÊúÄÂÖà‰∏äÁ∫ø</li><li>ËÉΩÂÖÅËÆ∏Âú®Êï∞ÊçÆÂ∫ìÊÅ¢Â§çÂÖ∂‰ªñÊñá‰ª∂ÁªÑÁöÑÊó∂ÂÄôÔºåÂÖàÂâçÂ∑≤ÊÅ¢Â§çÁöÑÊñá‰ª∂ÁªÑ‰ªç‰øùÊåÅÂú®Á∫øÁä∂ÊÄÅ</li></ol><p><u>Á§∫‰æã</u></p><p>Êï∞ÊçÆÂ∫ìadbÂ∞ÜÂú®ÂèëÁîüÁÅæÈöæÊÄß‰∫ã‰ª∂ÂêéËøòÂéüÂà∞‰∏ÄÂè∞Êñ∞ËÆ°ÁÆóÊú∫„ÄÇËØ•Êï∞ÊçÆÂ∫ì‰ΩøÁî®ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè„ÄÇÂèëÁîüÁÅæÈöæÊÄß‰∫ã‰ª∂ÂâçÊâÄÊúâÊñá‰ª∂ÁªÑÈÉΩÂ§Ñ‰∫éÂú®Á∫øÁä∂ÊÄÅ„ÄÇÊñá‰ª∂ÁªÑBÊòØÂè™ËØªÁöÑ„ÄÇÂøÖÈ°ªËøòÂéüÊâÄÊúâËæÖÂä©Êñá‰ª∂ÁªÑÔºå‰ΩÜËøô‰∫õËæÖÂä©Êñá‰ª∂ÁªÑÂ∞ÜÊåâÈáçË¶ÅÊÄßÈ°∫Â∫èËøõË°åËøòÂéüÔºöAÊúÄÈ´òÔºåÂÖ∂Ê¨°ÊòØCÔºåÊúÄÂêéÊòØB„ÄÇÂú®Ê≠§Á§∫‰æã‰∏≠ÔºåÂ≠òÂú®4‰∏™Êó•ÂøóÂ§á‰ªΩÔºåÂÖ∂‰∏≠ÂåÖÊã¨Â∞æÊó•ÂøóÂ§á‰ªΩ„ÄÇ</p><ol type="1"><li><p>Â§á‰ªΩÊó•ÂøóÂ∞æÈÉ®ÔºàÊòØÂêéÈù¢ËøòÂéüÈ°∫Â∫è‰∏≠Â∞ÜË¶ÅÂ∫îÁî®ÁöÑÊúÄÂêé‰∏Ä‰∏™Â§á‰ªΩÔºâ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- Êï∞ÊçÆÂ∫ìÂ∑≤ÊçüÂùèÔºåÂõ†Ê≠§ÂàõÂª∫Â∞æÊó•ÂøóÂ§á‰ªΩË¶Å‰ΩøÁî®NO_TRUNCATEÈÄâÈ°π</span><br>BACKUP LOG adb <span class="hljs-keyword">TO</span> tailLogBackup <span class="hljs-keyword">WITH</span> NORECOVERY, NO_TRUNCATE<br></code></pre></td></tr></table></figure></li><li><p>ËøòÂéüÈ°∫Â∫è</p><ol type="1"><li><p>ÈÉ®ÂàÜËøòÂéü‰∏ªÊñá‰ª∂ÁªÑÂíåËæÖÂä©Êñá‰ª∂ÁªÑA</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">RESTORE DATABASE adb FILEGROUP<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Primary&#x27;</span> <span class="hljs-keyword">FROM</span> backup1 <br>   <span class="hljs-keyword">WITH</span> PARTIAL, NORECOVERY<br>RESTORE DATABASE adb FILEGROUP<span class="hljs-operator">=</span><span class="hljs-string">&#x27;A&#x27;</span> <span class="hljs-keyword">FROM</span> backup2 <br>   <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> backup3 <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> backup4 <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> backup5 <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> tailLogBackup <span class="hljs-keyword">WITH</span> RECOVERY<br></code></pre></td></tr></table></figure><ol type="1"><li>‰∏ªÊñá‰ª∂ÁªÑÂíåËæÖÂä©Êñá‰ª∂ÁªÑAÂ§Ñ‰∫éÂú®Á∫øÁä∂ÊÄÅ</li><li>Êñá‰ª∂ÁªÑBÂíåC‰∏≠ÁöÑÊâÄÊúâÊñá‰ª∂ÈÉΩÂ§Ñ‰∫éÊÅ¢Â§çÊåÇËµ∑Áä∂ÊÄÅÔºåÂ§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅ„ÄÇ</li><li>Ê≠•È™§1‰∏≠ÁöÑÊúÄÂêé‰∏ÄÊù°RESTORELOGËØ≠Âè•ÁöÑÊ∂àÊÅØ‰ºöÊåáÂá∫ÔºöÁî±‰∫éÊñá‰ª∂ÁªÑC‰∏çÂèØÁî®ÔºåÂõ†Ê≠§Ê∂âÂèäÊ≠§Êñá‰ª∂ÁªÑÁöÑ‰∫ãÂä°ÂõûÊªöÂ∑≤Âª∂Ëøü</li></ol></li><li><p>Âú®Á∫øËøòÂéüÊñá‰ª∂ÁªÑC</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">RESTORE DATABASE adb FILEGROUP<span class="hljs-operator">=</span><span class="hljs-string">&#x27;C&#x27;</span> <span class="hljs-keyword">FROM</span> backup2a <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> backup3 <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> backup4 <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> backup5 <span class="hljs-keyword">WITH</span> NORECOVERY<br>RESTORE LOG adb <span class="hljs-keyword">FROM</span> tailLogBackup <span class="hljs-keyword">WITH</span> RECOVERY<br></code></pre></td></tr></table></figure><ol type="1"><li>‰∏ªÊñá‰ª∂ÁªÑÂèäÊñá‰ª∂ÁªÑAÂíåCÂ§Ñ‰∫éÂú®Á∫øÁä∂ÊÄÅ</li><li>Êñá‰ª∂ÁªÑB‰∏≠ÁöÑÊñá‰ª∂Â§Ñ‰∫éÊÅ¢Â§çÊåÇËµ∑Áä∂ÊÄÅÔºåËØ•Êñá‰ª∂ÁªÑÂ§Ñ‰∫éÁ¶ªÁ∫øÁä∂ÊÄÅ</li><li>Ëß£ÊûêÂª∂ËøüÁöÑ‰∫ãÂä°ÂêéÔºåÊó•ÂøóË¢´Êà™Êñ≠</li></ol></li><li><p>Âú®Á∫øËøòÂéüÊñá‰ª∂ÁªÑB</p><p>Êñá‰ª∂ÁªÑBÁöÑÂ§á‰ªΩÊòØÂú®ËØ•Êñá‰ª∂ÁªÑÂèò‰∏∫Âè™ËØªÁä∂ÊÄÅ‰πãÂêéËøõË°åÁöÑÔºåÂõ†Ê≠§ÔºåÂú®ÊÅ¢Â§çËøáÁ®ã‰∏≠Êó†È°ªÂÜçÊÅ¢Â§çÊó•ÂøóÂ§á‰ªΩ„ÄÇ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">RESTORE DATABASE adb FILEGROUP<span class="hljs-operator">=</span><span class="hljs-string">&#x27;B&#x27;</span> <span class="hljs-keyword">FROM</span> backup2b <span class="hljs-keyword">WITH</span> RECOVERY<br></code></pre></td></tr></table></figure><p>ÊâÄÊúâÊñá‰ª∂ÁªÑÁé∞Âú®ÈÉΩÂ§Ñ‰∫éÂú®Á∫øÁä∂ÊÄÅ</p></li></ol><h3 id="Â≠§Á´ãÁî®Êà∑ÊïÖÈöúÊéíÈô§">Â≠§Á´ãÁî®Êà∑ÊïÖÈöúÊéíÈô§</h3><p><u>SQL ServerÁöÑÁî®Êà∑ÂÆâÂÖ®ÁÆ°ÁêÜ</u></p><ol type="1"><li><p>ÊúçÂä°Âô®Â±Ç</p><ol type="1"><li><p>ÁôªÂΩïË¥¶Âè∑ÔºàLoginÔºâ</p></li><li><p>ÁÆ°ÁêÜÊï¥‰∏™SQL ServerÊúçÂä°Âô®ÔºåÂºÄÂêØË∑üË∏™Ôºå‰øÆÊîπSQLServerÂÆâÂÖ®ÈÖçÁΩÆÔºåÂ§á‰ªΩÊâÄÊúâÊï∞ÊçÆÂ∫ìÁ≠â</p></li><li><p>ÊâÄÊúâÁôªÂΩïË¥¶Âè∑ÁöÑ‰ø°ÊÅØÔºåÂ≠òÊîæÂú®masterÊï∞ÊçÆÂ∫ìÈáå</p><ol type="1"><li><p>Êü•ËØ¢<code>sys.server_principals</code></p><figure><imgsrc="/2022/07/29/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/image-20220707101818615.png"alt="Êü•ËØ¢sys.server_principals" /><figcaption aria-hidden="true">Êü•ËØ¢sys.server_principals</figcaption></figure></li></ol></li><li><p>ÊØè‰∏™ÁôªÂΩïË¥¶Âè∑ÈÉΩÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁºñÂè∑SID</p><ol type="1"><li>ÂØπ‰∫éWindows Login, SIDÂ∞±ÊòØWindowsÁî®Êà∑Âú®ÂüüÈáåÁöÑSID</li><li>ÂØπ‰∫éSQL Login, ‰ºöÈöèÊú∫ÁîüÊàêSIDÔºåÊØèÊ¨°ÁîüÊàêÁöÑSIDÈÉΩÊúâÂèØËÉΩ‰∏ç‰∏ÄÊ†∑</li></ol></li></ol></li><li><p>Êï∞ÊçÆÂ∫ìÂ±Ç</p><ol type="1"><li>Êï∞ÊçÆÂ∫ìÁî®Êà∑ÔºàDatabase UserÔºâ</li><li>ÂèØ‰ª•ËÆæÁΩÆÂÆÉÂØπËøô‰∏™ÁâπÂÆöÁöÑÊï∞ÊçÆÂ∫ìÊúâËØªÂÜô„ÄÅ‰øÆÊîπË°®Ê†ºÁªìÊûÑ„ÄÅÂ≠òÂÇ®ËøáÁ®ãÂÆö‰πâÁ≠âÊùÉÈôê</li><li>Êü•ËØ¢<code>sys.database_principals</code>‰∫ÜËß£Áî®Êà∑‰ø°ÊÅØ</li><li>ÊØè‰∏™Êï∞ÊçÆÂ∫ìÁî®Êà∑Èô§‰∫ÜÂêçÂ≠óÔºå‰πüÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑSID</li></ol></li><li><p>SQLServerÁôªÂΩïË¥¶Êà∑ÂøÖÈ°ªË¶ÅÂíåÊüê‰∏™Êï∞ÊçÆÂ∫ìÁî®Êà∑Áõ∏ÂØπÂ∫îÂêéÔºåÊâçËÉΩË¢´Êï∞ÊçÆÂ∫ìÊé•Á∫≥</p><ol type="1"><li>Âç≥Áî®Êà∑Êï∞ÊçÆÂ∫ìsys.database_principalsÈáåÁöÑSIDÂíåmasterÊï∞ÊçÆÂ∫ìsys.server_principalsÈáåÁöÑSIDÂåπÈÖç</li><li>ÂØπ‰∫éWindowsÁôªÂΩïË¥¶Âè∑ÔºåÂ¶ÇÊûúÊñ∞ÁöÑÊúçÂä°Âô®ÂíåÂéüÂÖàÁöÑÊúçÂä°Âô®Âú®Âêå‰∏Ä‰∏™ÂüüÈáåÔºåÈÇ£‰πàÂêåÊ†∑ÁöÑWindowsÁôªÂΩïË¥¶Âè∑‰ºöÊúâ‰∏ÄÊ†∑ÁöÑSID</li><li>ÂØπ‰∫éSQLÁôªÂΩïË¥¶Âè∑ÔºåÂΩìÁî®Êà∑Êï∞ÊçÆÂ∫ìÊÅ¢Â§çÂà∞Êñ∞ÁöÑÊúçÂä°Âô®‰∏äÂêéÔºåmasterÊï∞ÊçÆÂ∫ìsys.server_principalsÈáåÂπ∂Ê≤°ÊúâËøô‰∏™Ë¥¶Âè∑Ôºå‰ΩÜÊòØÁî®Êà∑Êï∞ÊçÆÂ∫ìÈáåËøòÊòØÊúâ‚Äútest‚ÄùËøô‰∏™Êï∞ÊçÆÂ∫ìÁî®Êà∑Ôºå‰∫éÊòØËøô‰∏™Áî®Êà∑Ë¢´‚ÄúÂ≠§Á´ã‚Äù‰∫Ü</li></ol></li><li><p>Ê£ÄÊµãÂ≠§Á´ãÁî®Êà∑</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE <span class="hljs-operator">&lt;</span>database_name<span class="hljs-operator">&gt;</span>;<br>GO; <br><span class="hljs-keyword">EXEC</span> sp_change_users_login <span class="hljs-string">&#x27;Report&#x27;</span>;<br></code></pre></td></tr></table></figure></li><li><p>ÈìæÊé•Â≠§Á´ãÁî®Êà∑</p><ol type="1"><li><p>SQLÁôªÂΩïË¥¶Âè∑</p><ol type="1"><li><p>ÂàõÂª∫Áõ∏Â∫îÁöÑSQLÁôªÈôÜË¥¶Âè∑</p></li><li><p>‰ΩøÁî®ÂëΩ‰ª§ÈáçÊñ∞ÈìæÊé•ÊúçÂä°Âô®ÁôªÂΩïË¥¶Êà∑‰∏éÊï∞ÊçÆÂ∫ìÁî®Êà∑Ôºå‰øÆÊîπSID‰∏∫‰∏ÄËá¥</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE <span class="hljs-operator">&lt;</span>database_name<span class="hljs-operator">&gt;</span>;<br>GO<br><span class="hljs-keyword">EXEC</span> sp_change_users_login <span class="hljs-variable">@Action</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;update_one&#x27;</span>, <span class="hljs-variable">@UserNamePattern</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;&lt;database_user&gt;&#x27;</span>, <span class="hljs-variable">@LoginName</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;&lt;login_name&gt;&#x27;</span>;<br></code></pre></td></tr></table></figure></li></ol></li><li><p>WindowsÁôªÂΩïË¥¶Âè∑</p><ol type="1"><li>Â¶ÇÊûúSID‰∏çÂêåÔºåËØ¥ÊòéÂüü‰πüÂèëÁîü‰∫ÜÂèòÂåñ</li><li>WindowsÊúçÂä°Âô®ÁôªÂΩïË¥¶Êà∑ÂíåÊï∞ÊçÆÂ∫ìÁî®Êà∑ÊòØ‰∏çËÉΩÂº∫Âà∂ÈìæÊé•Âú®‰∏ÄËµ∑ÁöÑ</li></ol></li></ol></li></ol></li></ol><h2 id="Á≥ªÁªüÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ‰∏éÊÅ¢Â§ç">Á≥ªÁªüÊï∞ÊçÆÂ∫ìÂ§á‰ªΩ‰∏éÊÅ¢Â§ç</h2><p>ÊØèÊ¨°ËøõË°åËøáÁ≥ªÁªüÊõ¥Êñ∞ÂêéÔºåÈÉΩÂøÖÈ°ªÂ§á‰ªΩÂ§ö‰∏™Á≥ªÁªüÊï∞ÊçÆÂ∫ì</p><p>Êúâ‰ªª‰ΩïÊï∞ÊçÆÂ∫ìÂú®ÊúçÂä°Âô®ÂÆû‰æã‰∏ä‰ΩøÁî®‰∫ÜÂ§çÂà∂ÔºåÂàôËøòÂøÖÈ°ªÂ§á‰ªΩdistributionÁ≥ªÁªüÊï∞ÊçÆÂ∫ì</p><table><thead><tr class="header"><th>Á≥ªÁªüÊï∞ÊçÆÂ∫ì</th><th>ËØ¥„ÄÄ„ÄÄÊòé</th><th>ÊòØÂê¶ÊîØ ÊåÅÂ§á‰ªΩ</th><th>ÊÅ¢Â§ç Ê®°Âºè</th><th>Ê≥®„ÄÄ„ÄÄÈáä</th></tr></thead><tbody><tr class="odd"><td>master</td><td>ËÆ∞ÂΩïSQL ServerÁ≥ªÁªüÁöÑÊâÄÊúâÁ≥ªÁªüÁ∫ß‰ø°ÊÅØÁöÑÊï∞ÊçÆÂ∫ì</td><td>ÊîØÊåÅ</td><td>ÁÆÄÂçï</td><td>ÂøÖÈ°ªÁªèÂ∏∏Â§á‰ªΩmasterÊï∞ÊçÆÂ∫ìÔºå‰ª•‰æøÊ†πÊçÆ‰∏öÂä°ÈúÄË¶ÅÂÖÖÂàÜ‰øùÊä§Êï∞ÊçÆ„ÄÇÂª∫ËÆÆ‰ΩøÁî®ÂÆöÊúüÂ§á‰ªΩËÆ°ÂàíÔºåËøôÊ†∑Âú®Â§ßÈáèÊõ¥Êñ∞‰πãÂêéÂèØ‰ª•Ë°•ÂÖÖÊõ¥Â§öÁöÑÂ§á‰ªΩ</td></tr><tr class="even"><td>model</td><td>Âú®SQL ServerÂÆû‰æã‰∏ä‰∏∫ÊâÄÊúâÊï∞ÊçÆÂ∫ìÂàõÂª∫ÁöÑÊ®°Êùø</td><td>ÊîØÊåÅ</td><td>Áî®Êà∑ ÂèØÈÖçÁΩÆ</td><td>‰ªÖÂú®‰∏öÂä°ÈúÄË¶ÅÊó∂Â§á‰ªΩmodelÊï∞ÊçÆÂ∫ìÔºå‰æãÂ¶ÇËá™ÂÆö‰πâÂÖ∂Êï∞ÊçÆÂ∫ìÈÄâÈ°πÂêéÁ´ãÂç≥Â§á‰ªΩ„ÄÇÊúÄ‰Ω≥ÊñπÊ≥ïÔºöÂª∫ËÆÆÊÇ®‰ªÖÊ†πÊçÆÈúÄË¶ÅÂàõÂª∫modelÊï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ„ÄÇÁî±‰∫émodelÊï∞ÊçÆÂ∫ìËæÉÂ∞èËÄå‰∏îÂæàÂ∞ëÊõ¥ÊîπÔºåÂõ†Ê≠§Êó†È°ªÂ§á‰ªΩÊó•Âøó</td></tr><tr class="odd"><td>msdb</td><td>SQLServer‰ª£ÁêÜÁî®Êù•ÂÆâÊéíË≠¶Êä•Âíå‰Ωú‰∏ö‰ª•ÂèäËÆ∞ÂΩïÊìç‰ΩúÂëò‰ø°ÊÅØÁöÑÊï∞ÊçÆÂ∫ì„ÄÇmsdbÊï∞ÊçÆÂ∫ìËøòÂåÖÂê´ÂéÜÂè≤ËÆ∞ÂΩïË°®Ôºå‰æãÂ¶ÇÂ§á‰ªΩÂíåËøòÂéüÂéÜÂè≤ËÆ∞ÂΩïË°®</td><td>ÊîØÊåÅ</td><td>ÁÆÄÂçï ÔºàÈªòËÆ§ÂÄºÔºâ</td><td>Êõ¥Êñ∞Êó∂Â§á‰ªΩmsdbÊï∞ÊçÆÂ∫ì</td></tr><tr class="even"><td>ResourceÔºàRDBÔºâ</td><td>ÂåÖÂê´SQL ServerÈôÑÂ∏¶ÁöÑÊâÄÊúâÁ≥ªÁªüÂØπË±°ÂâØÊú¨ÁöÑÂè™ËØªÊï∞ÊçÆÂ∫ì</td><td>‰∏çÊîØÊåÅ</td><td>‚Äî</td><td>ResourceÊï∞ÊçÆÂ∫ì‰Ωç‰∫émssqlsy-stemresource.mdfÊñá‰ª∂‰∏≠ÔºåËØ•Êñá‰ª∂‰ªÖÂåÖÂê´‰ª£Á†Å„ÄÇÂõ†Ê≠§ÔºåSQLServer‰∏çËÉΩÂ§á‰ªΩResourceÊï∞ÊçÆÂ∫ì</td></tr><tr class="odd"><td>tempdb</td><td>Áî®‰∫é‰øùÂ≠ò‰∏¥Êó∂Êàñ‰∏≠Èó¥ÁªìÊûúÈõÜÁöÑÂ∑•‰ΩúÁ©∫Èó¥„ÄÇÊØèÊ¨°ÂêØÂä®SQLServerÂÆû‰æãÊó∂ÈÉΩ‰ºöÈáçÊñ∞ÂàõÂª∫Ê≠§Êï∞ÊçÆÂ∫ì„ÄÇÊúçÂä°Âô®ÂÆû‰æãÂÖ≥Èó≠Êó∂ÔºåÂ∞ÜÊ∞∏‰πÖÂà†Èô§tempdbÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊâÄÊúâÊï∞ÊçÆ</td><td>‰∏çÊîØÊåÅ</td><td>ÁÆÄÂçï</td><td>Êó†Ê≥ïÂ§á‰ªΩtempdbÁ≥ªÁªüÊï∞ÊçÆÂ∫ì</td></tr><tr class="even"><td>distribution</td><td>Âè™ÊúâÂ∞ÜÊúçÂä°Âô®ÈÖçÁΩÆ‰∏∫Â§çÂà∂ÂàÜÂèëÊúçÂä°Âô®Êó∂ÊâçÂ≠òÂú®Ê≠§Êï∞ÊçÆÂ∫ì„ÄÇÊ≠§Êï∞ÊçÆÂ∫ìÂ≠òÂÇ®ÂÖÉÊï∞ÊçÆ„ÄÅÂêÑÁßçÂ§çÂà∂ÁöÑÂéÜÂè≤ËÆ∞ÂΩïÊï∞ÊçÆ‰ª•ÂèäÁî®‰∫é‰∫ãÂä°Â§çÂà∂ÁöÑ‰∫ãÂä°</td><td>ÊîØÊåÅ</td><td>ÁÆÄÂçï</td><td>Ê†πÊçÆÊÇ®ÂÖ∑‰ΩìÁöÑÂ§çÂà∂ÈÖçÁΩÆÂÜ≥ÂÆö</td></tr></tbody></table><h3 id="masterÊï∞ÊçÆÂ∫ì">masterÊï∞ÊçÆÂ∫ì</h3><p>Âª∫ËÆÆÁªèÂ∏∏ÂÅömasterÁöÑÂÆåÊï¥Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ</p><p><u>MasterÊï∞ÊçÆÂ∫ìÂåÖÂê´ÁöÑ‰ø°ÊÅØ</u></p><ol type="1"><li>SQLServerÁ≥ªÁªüÁöÑÊâÄÊúâÁ≥ªÁªüÁ∫ß‰ø°ÊÅØÔºå‰æãÂ¶ÇÁôªÂΩïË¥¶Êà∑„ÄÅÁ≥ªÁªüÈÖçÁΩÆËÆæÁΩÆ„ÄÅÁ´ØÁÇπÂíåÂá≠ÊçÆ‰ª•ÂèäËÆøÈóÆÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÊâÄÈúÄÁöÑ‰ø°ÊÅØ</li><li>ËÆ∞ÂΩïÂêØÂä®ÊúçÂä°Âô®ÂÆû‰æãÊâÄÈúÄÁöÑÂàùÂßãÂåñ‰ø°ÊÅØÔºåÊØè‰∏™ÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑ‰∏ªÊñá‰ª∂‰ΩçÁΩÆ</li><li>ÊòØSQL ServerÂêØÂä®ÁöÑÊó∂ÂÄôÊâìÂºÄÁöÑÁ¨¨‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì</li></ol><p><u>ÈáçÂª∫masterÊï∞ÊçÆÂ∫ì</u></p><ol type="1"><li>Â¶ÇÊûúÁî±‰∫émasterÊï∞ÊçÆÂ∫ìÊçüÂùè‰∏•ÈáçÂà∞Êó†Ê≥ïÂêØÂä®ÊúçÂä°Âô®ÂÆû‰æãÔºåÂèàÊ≤°ÊúâÂ§á‰ªΩÔºåÂàôÂøÖÈ°ªÈáçÂª∫</li><li>ÈáçÂª∫masterÊï∞ÊçÆÂ∫ìÂ∞Ü‰ΩøÊâÄÊúâÁöÑÁ≥ªÁªüÊï∞ÊçÆÂ∫ìÊÅ¢Â§çÂà∞ÂÖ∂ÂéüÂßãÁä∂ÊÄÅÔºåSQLServerÂ∞±ÂÉèË¢´ÈáçË£ÖËøá‰∏ÄÊ†∑</li></ol><p><u>ÂØºËá¥masterÊï∞ÊçÆÂ∫ìÊõ¥Êñ∞Âπ∂Ë¶ÅÊ±ÇËøõË°åÂ§á‰ªΩÁöÑÊìç‰ΩúÁ±ªÂûã</u></p><ol type="1"><li>ÂàõÂª∫ÊàñÂà†Èô§Áî®Êà∑Êï∞ÊçÆÂ∫ì<ol type="1"><li>Áî®Êà∑Êï∞ÊçÆÂ∫ìËá™Âä®Â¢ûÈïø‰ª•ÂÆπÁ∫≥Êñ∞Êï∞ÊçÆÊó∂ÔºåmasterÊï∞ÊçÆÂ∫ì‰∏çÂèóÂΩ±Âìç</li></ol></li><li>Ê∑ªÂä†ÊàñÂà†Èô§Êñá‰ª∂ÂíåÊñá‰ª∂ÁªÑ</li><li>Ê∑ªÂä†ÁôªÂΩïÊàñÂÖ∂‰ªñ‰∏éÁôªÂΩïÂÆâÂÖ®Áõ∏ÂÖ≥ÁöÑÊìç‰Ωú<ol type="1"><li>Êï∞ÊçÆÂ∫ìÂ±ÇÈù¢ÁöÑÂÆâÂÖ®Êìç‰ΩúÔºàÂ¶ÇÂêëÊï∞ÊçÆÂ∫ì‰∏≠Ê∑ªÂä†Áî®Êà∑ÔºâÂØπmasterÊï∞ÊçÆÂ∫ìÊ≤°ÊúâÂΩ±Âìç</li></ol></li><li>Êõ¥ÊîπÊúçÂä°Âô®ËåÉÂõ¥ÁöÑÈÖçÁΩÆÈÄâÈ°πÊàñÊï∞ÊçÆÂ∫ìÈÖçÁΩÆÈÄâÈ°π</li><li>ÂàõÂª∫ÊàñÂà†Èô§ÈÄªËæëÂ§á‰ªΩËÆæÂ§á</li><li>ÈÖçÁΩÆÁî®‰∫éÂàÜÂ∏ÉÂºèÊü•ËØ¢ÂíåËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÔºàRPCÔºâÁöÑÊúçÂä°Âô®ÔºåÂ¶ÇÊ∑ªÂä†ÈìæÊé•ÊúçÂä°Âô®ÊàñËøúÁ®ãÁôªÂΩï</li></ol><p><u>ÊÅ¢Â§çmasterÊï∞ÊçÆÂ∫ì</u></p><ol type="1"><li>RESTOR</li><li>ËøòÂéümasterÊï∞ÊçÆÂ∫ìÂêéÔºåSQL ServerÂÆû‰æãÂ∞ÜËá™Âä®ÂÅúÊ≠¢</li><li>Â∞ÜmasterÊï∞ÊçÆÂ∫ìÊÅ¢Â§çÂà∞‰∏ÄÂè∞Êñ∞ÁöÑÊúçÂä°Âô®‰∏äÊó∂ÔºåÊñá‰ª∂Âú∞ÂùÄ‰ºöÂèëÁîüÂèòÂåñÔºåÈúÄË¶Å‰ΩøÁî®ÂçïÁî®Êà∑Ê®°ÂºèÂêØÂä®SQLServerÔºåÂ∞ÜmasterÊï∞ÊçÆÂ∫ìÈáåÁöÑ‰ø°ÊÅØ‰øÆÊîπÊàêÊñ∞ÁöÑÂú∞ÂùÄ<ol type="1"><li>ÂçïÁî®Êà∑Ê®°ÂºèÈáçÊñ∞ÂêØÂä®ÊúçÂä°Âô®Êó∂ÔºåÂ∫îÈ¶ñÂÖàÂÅúÊ≠¢ÊâÄÊúâSQLServerÊúçÂä°ÔºàÊúçÂä°Âô®ÂÆû‰æãÊú¨Ë∫´Èô§Â§ñÔºâÔºåÂπ∂ÂÅúÊ≠¢ÊâÄÊúâSQL ServerÂÆûÁî®Â∑•ÂÖ∑</li></ol></li></ol><h3 id="modelÊï∞ÊçÆÂ∫ì">modelÊï∞ÊçÆÂ∫ì</h3><ol type="1"><li>modelÊï∞ÊçÆÂ∫ìÊòØSQL Server‰ΩøÁî®ÁöÑÊ®°Êùø</li><li>modelÊï∞ÊçÆÂ∫ìÁöÑÂÖ®ÈÉ®ÂÜÖÂÆπÔºàÂåÖÊã¨Êï∞ÊçÆÂ∫ìÈÄâÈ°πÔºâÈÉΩ‰ºöË¢´Â§çÂà∂Âà∞Êñ∞ÁöÑÊï∞ÊçÆÂ∫ì</li><li>‰∏çÊé®ËçêÂÅö‰ªª‰Ωï‰øÆÊîπÔºå‰∏çË¶ÅÊää‰ªª‰ΩïÁî®Êà∑Êï∞ÊçÆÊîæÂú®Ëøô‰∏™Êï∞ÊçÆÂ∫ìÈáå</li><li>ËøòÂéümodelÊï∞ÊçÆÂ∫ì‰∏éÂØπÁî®Êà∑Êï∞ÊçÆÂ∫ìÊâßË°åÂÆåÊï¥ÁöÑÊï∞ÊçÆÂ∫ìËøòÂéüÁõ∏Âêå</li></ol><h3 id="msdbÊï∞ÊçÆÂ∫ì">msdbÊï∞ÊçÆÂ∫ì</h3><ol type="1"><li>Â≠òÂÇ®Êï∞ÊçÆÔºåÂåÖÊã¨ËÆ°Âàí‰ø°ÊÅØ‰ª•ÂèäÂ§á‰ªΩ‰∏éËøòÂéüÂéÜÂè≤ËÆ∞ÂΩï‰ø°ÊÅØ</li><li>SQLServerÂ∞ÜÂú®msdbÊï∞ÊçÆÂ∫ì‰∏≠Ëá™Âä®Áª¥Êä§‰∏Ä‰ªΩÂÆåÊï¥ÁöÑÂú®Á∫øÂ§á‰ªΩ‰∏éËøòÂéüÂéÜÂè≤ËÆ∞ÂΩï</li><li>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåmsdbÊï∞ÊçÆÂ∫ì‰ΩøÁî®ÁÆÄÂçïÊÅ¢Â§çÊ®°Âºè</li><li>Â¶ÇÊûúÂú®ÊÅ¢Â§çÁî®Êà∑Êï∞ÊçÆÂ∫ìÊó∂‰ΩøÁî®msdbÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂ§á‰ªΩ‰∏éËøòÂéüÂéÜÂè≤ËÆ∞ÂΩï‰ø°ÊÅØÔºåÂª∫ËÆÆÂØπmsdbÊï∞ÊçÆÂ∫ì‰ΩøÁî®ÂÆåÊï¥ÊÅ¢Â§çÊ®°Âºè</li></ol><h3 id="tempdb">tempdb</h3><ol type="1"><li>ÊØèÊ¨°ÂêØÂä®SQL ServerÊó∂ÈÉΩ‰ºöÈáçÊñ∞ÂàõÂª∫tempdbÊï∞ÊçÆÂ∫ì</li><li>‰∏çÈúÄË¶ÅÂ§á‰ªΩ</li></ol><h3 id="ËµÑÊ∫êÊï∞ÊçÆÂ∫ìresource-database">ËµÑÊ∫êÊï∞ÊçÆÂ∫ìÔºàResourceDatabaseÔºâ</h3><ol type="1"><li>Âè™ËØªÊï∞ÊçÆÂ∫ì</li><li>ÂåÖÂê´‰∫ÜSQLServer‰∏≠ÁöÑÊâÄÊúâÁ≥ªÁªüÂØπË±°Ôºå‰∏çÂåÖÂê´‰ªª‰ΩïÁî®Êà∑Êï∞ÊçÆÊàñÁî®Êà∑ÂÖÉÊï∞ÊçÆ</li><li>ÂØπ‰∫éÂêå‰∏Ä‰∏™ÁâàÊú¨ÁöÑSQL ServerÔºåÂÆÉ‰ª¨ÁöÑResourceÊï∞ÊçÆÂ∫ìÂ∫îËØ•ÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑ</li><li>Áâ©ÁêÜÊñá‰ª∂ÂêçÔºömssqlsystemresource.mdfÂíåmssqlsystemresource.ldf</li><li>ÊØè‰∏™SQLServerÂÆû‰æãÈÉΩÊúâ‰∏îÂè™Êúâ‰∏Ä‰∏™ÂÖ≥ËÅîÁöÑmssqlsystemresource.mdfÊñá‰ª∂ÔºåÂπ∂‰∏îÂÆû‰æãÈó¥‰∏çÂÖ±‰∫´Ê≠§Êñá‰ª∂</li><li>ÁêÜËÆ∫‰∏ä‰∏çÁî®Â§á‰ªΩResourceÊï∞ÊçÆÂ∫ìÔºå‰ΩÜÊòØÊúÄÂ•ΩÂÅöÂü∫‰∫éÊñá‰ª∂ÁöÑÂ§á‰ªΩÊàñÂü∫‰∫éÁ£ÅÁõòÁöÑÂ§á‰ªΩÔºåÊÅ¢Â§çÊó∂Ê≥®ÊÑèÁâàÊú¨ÈóÆÈ¢ò</li></ol><h2id="Â∏¶ÊúâfilestreamÂäüËÉΩÁöÑÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÂíåÊÅ¢Â§ç">Â∏¶ÊúâFILESTREAMÂäüËÉΩÁöÑÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÂíåÊÅ¢Â§ç</h2><p>ÂØπ‰∫éÊúâFILESTREAMÂäüËÉΩÁöÑÊï∞ÊçÆÂ∫ìÔºåÂú®ËøõË°åÂ§á‰ªΩÂíåÊÅ¢Â§çÊó∂Ôºå‰ºöËá™Âä®ÂåÖÂê´FILESTREAMÊï∞ÊçÆÔºåÂπ∂‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÂÅöÊñá‰ª∂Á∫ßÂà´ÁöÑÂ§á‰ªΩÂíåÊÅ¢Â§ç„ÄÇ</p><ol type="1"><li><p>ÂêØÂä®FILESTREAM</p><ol type="1"><li><p>ÊâìÂºÄÊï∞ÊçÆÂ∫ìÁöÑÈÖçÁΩÆÁÆ°ÁêÜÂô®ÔºåÊâæÂà∞Êï∞ÊçÆÂ∫ìÊúçÂä°ÔºåÂπ∂Âè≥ÈîÆÁÇπÂáªÂ±ûÊÄß„ÄÇÊâæÂà∞FILESTREAMÁöÑËÆæÁΩÆÔºåÂêØÁî®FILESTREAM</p></li><li><p>ÊâßË°åËØ≠Âè•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">EXEC</span> sp_configure filestream_access_level, <span class="hljs-number">2</span><br>RECONFIGURE<br></code></pre></td></tr></table></figure></li><li><p>ÈáçÊñ∞ÂêØÂä®Êï∞ÊçÆÂ∫ìÊúçÂä°</p></li></ol></li><li><p>ÂàõÂª∫TESTDBÔºåÊåáÂÆöÊñá‰ª∂ÁªÑ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE TESTFSDB<br>GO<br><br><span class="hljs-keyword">ALTER</span> DATABASE TESTFSDB <br><span class="hljs-keyword">ADD</span> FILEGROUOP [FSGroup] <span class="hljs-keyword">CONTAINS</span> FILESTREAM<br>GO<br><br><span class="hljs-keyword">ALTER</span> DATABASE TESTFSDB<br><span class="hljs-keyword">ADD</span> FILE (NAME<span class="hljs-operator">=</span>N‚ÄôFSDATA‚Äô, FILENAME<span class="hljs-operator">=</span>N‚ÄôD:\FSData‚Äô) <span class="hljs-keyword">TO</span> FILEGROUP FSGroup<br>GO<br></code></pre></td></tr></table></figure></li><li><p>ÂàõÂª∫Ë°®Âπ∂ÂºÄÂêØFILESTREAMÂäüËÉΩ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">use TESTFSDB<br>go<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> FSTable<br>(<br>[Id] [uniqueidentifier] ROWGUIDCOL <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>, <br>[FileName] NVARCHAR(<span class="hljs-number">100</span>) ,<br>[BlobData] <span class="hljs-type">VARBINARY</span>(MAX) FILESTREAM <span class="hljs-keyword">NULL</span><br>)<br></code></pre></td></tr></table></figure></li><li><p>ÊèíÂÖ•Êï∞ÊçÆ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> FSTable<br><span class="hljs-keyword">SELECT</span> NEWID(), <span class="hljs-string">&#x27;File1&#x27;</span>, <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <br>OPENROWSET(BULK N<span class="hljs-string">&#x27;D:\temp\Image.jpg&#x27;</span>, SINGLE_BLOB) <span class="hljs-keyword">AS</span> Document<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> FSTable<br><span class="hljs-keyword">SELECT</span> NEWID(), <span class="hljs-string">&#x27;File2&#x27;</span>, <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <br>OPENROWSET(BULK N<span class="hljs-string">&#x27;D:\temp\Image.jpg&#x27;</span>, SINGLE_BLOB) <span class="hljs-keyword">AS</span> Document<br></code></pre></td></tr></table></figure></li><li><p>Â§á‰ªΩ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">BACKUP DATABASE [TESTFSDB] <span class="hljs-keyword">TO</span> DISK<span class="hljs-operator">=</span><span class="hljs-string">&#x27;C:\temp\TESTFSDB.bak&#x27;</span><br>BACKUP LOG [TESTFSDB] <span class="hljs-keyword">TO</span> DISK<span class="hljs-operator">=</span><span class="hljs-string">&#x27;C:\temp\TESTFSDB.bak&#x27;</span><br></code></pre></td></tr></table></figure></li><li><p>Êàë‰ª¨ÂÖ≥Èó≠Êï∞ÊçÆÂ∫ìÊúçÂä°ÔºåÂπ∂‰∏îÂà†Èô§Êï¥‰∏™D:„ÄÇÈöèÂêéÔºåÈáçÊñ∞ÂêØÂä®Êï∞ÊçÆÂ∫ìÊúçÂä°ÔºåÂπ∂‰æùÊçÆTESTFSDB.bakÊñá‰ª∂ÂØπÊï∞ÊçÆÂ∫ìTESTFSDBËøõË°åÊÅ¢Â§ç„ÄÇ</p></li><li><p>Êàë‰ª¨‰ºöÂèëÁé∞ÔºåD:„ÄÇÂπ∂‰∏îÊü•ËØ¢Ë°®FSTableÔºåÊàë‰ª¨ËÉΩÂæóÂà∞Ê≠£Á°ÆÁöÑÊï∞ÊçÆ„ÄÇ</p></li></ol><p>## Â∫îÂØπÁî±‰∫éÂ§á‰ªΩÊçüÂùèÂØºËá¥ÁöÑËøòÂéüÈîôËØØ</p><ol type="1"><li><p>ÂøΩÁï•ÈîôËØØÁªßÁª≠ÊâßË°åÊìç‰Ωú</p><ol type="1"><li><p>‰ΩøÁî®CONTINUE_AFTER_ERRORÔºå‰ΩøËøòÂéüÊìç‰ΩúË∑≥ËøáÈîôËØØÁªßÁª≠ËøõË°åÔºåÂπ∂ËøòÂéüSQLServerÁé∞Âú®ÊâÄËÉΩËøòÂéüÁöÑÊâÄÊúâÂÜÖÂÆπ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">RESTORE DATABASE database_name <br><span class="hljs-keyword">FROM</span> backup_device <span class="hljs-keyword">WITH</span> CONTINUE_AFTER_ERROR, [ NORECOVERY ]<br></code></pre></td></tr></table></figure></li><li><p>Â¶ÇÊûúÈîôËØØÂèëÁîüÂú®‰∏Ä‰∫õÊØîËæÉÂÖ≥ÈîÆÁöÑÂú∞ÊñπÔºåÊØîÂ¶ÇÊüê‰∏™Êï∞ÊçÆÊñá‰ª∂ÁöÑÊñá‰ª∂Â§¥‰ø°ÊÅØÔºåÈÇ£‰πàÊÅ¢Â§çËøòÊòØÊúâÂèØËÉΩÂÆåÂÖ®Â§±Ë¥•ÔºåÊï∞ÊçÆÂ∫ìÊó†Ê≥ïÊÅ¢Â§ç</p></li><li><p>Âú®ÂøΩÁï•ÈîôËØØÂêéÔºå‰ΩøÁî®DBCC CHECKDBÔºàWITH TABLOCKÔºâ‰øÆÂ§çÊï∞ÊçÆÂ∫ì</p></li></ol></li><li><p>Âª∫Á´ãÂ§áÁî®ÔºàStandbyÔºâÊúçÂä°Âô®</p><ol type="1"><li>Â∞ÜÂÅöÂ•ΩÁöÑÂ§á‰ªΩ‰ΩøÁî®LogShippingÊàñËÄÖÂÖ∂‰ªñÁ±ª‰ººÁöÑÊú∫Âà∂Âú®Â§áÁî®ÊúçÂä°Âô®‰∏äÈ¢ÑÂÖàÊÅ¢Â§çÂ•Ω</li></ol></li></ol><h2id="ÂÆû‰æãÂ∞ÜÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÂú®‰∏ÄÂè∞Êñ∞ÊúçÂä°Âô®‰∏äÊÅ¢Â§ç">ÂÆû‰æãÔºöÂ∞ÜÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÂú®‰∏ÄÂè∞Êñ∞ÊúçÂä°Âô®‰∏äÊÅ¢Â§ç</h2><p>ÂÅáËÆæÁé∞Âú®ÁÆ°ÁêÜÂëòÈÅáÂà∞‰∫Ü‰∏ãÈù¢Ëøô‰∫õÊåëÊàòÔºö</p><ul><li><p>ÂéüÂÖàÊúçÂä°Âô®Âá∫Áé∞Á°¨‰ª∂ÊïÖÈöúÔºåÂ∑≤ÁªèÊó†Ê≥ïÂêØÂä®„ÄÇÈúÄË¶ÅÂ∞ÜÊï¥‰∏™SQLServerÁ≥ªÁªüÁ¥ßÊÄ•ËøÅÁßªÂà∞‰∏ÄÂè∞Â§áÁî®ÊúçÂä°Âô®‰∏ä„ÄÇÔºàÂ§áÁî®ÊúçÂä°Âô®ÂêçÂ≠óÂè´sqlserverpcÔºåSQLServerÊòØÈªòËÆ§ÂÆû‰æã„ÄÇÔºâ</p></li><li><p>Â§áÁî®ÊúçÂä°Âô®ÂíåÂéüÊúçÂä°Âô®‰∏çÂêåÂêçÔºåSQLServerÂÆâË£ÖÁöÑË∑ØÂæÑ‰πü‰∏ç‰∏ÄÊ†∑„ÄÇÔºàÂ§áÁî®ÊúçÂä°Âô®ÂÆâË£ÖË∑ØÂæÑ‰∏∫C:FilesSQLServer.4„ÄÇÔºâ</p></li><li><p>Âõ†‰∏∫ËâØÂ•ΩÁöÑÂ§á‰ªΩÁ≠ñÁï•ÔºåÁé∞Âú®ÊâãÂ§¥ÊúâÊúÄÊñ∞ÁöÑmaster„ÄÅmsdbÂíåmodelÊï∞ÊçÆÂ∫ìÂ§á‰ªΩÔºå‰ª•ÂèäÂÖ∂‰ªñÊâÄÊúâÁî®Êà∑Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ„ÄÇ</p></li><li><p>Áé∞Âú®ÈúÄË¶ÅÂ∞ÜÁ≥ªÁªüÊï∞ÊçÆÂ∫ìÊÅ¢Â§çÔºå‰ª•ËøòÂéüÊâÄÊúâÊï∞ÊçÆÂ∫ìÁ≥ªÁªü‰ø°ÊÅØÔºàÁî®Êà∑„ÄÅÂØÜÁ†Å„ÄÅ‰ªªÂä°Á≠âÔºâ„ÄÇÁÑ∂ÂêéÊâçËÉΩÊÅ¢Â§çÁî®Êà∑Êï∞ÊçÆÂ∫ì„ÄÇ</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Reading</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Server 2012 ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçóNoteÔºöÈ´òÂèØÁî®ÊÄßÂíåÁÅæÈöæÊÅ¢Â§çÊäÄÊúØ</title>
    <link href="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/"/>
    <url>/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/</url>
    
    <content type="html"><![CDATA[<h1id="sql-server-2012-ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçónoteÈ´òÂèØÁî®ÊÄßÂíåÁÅæÈöæÊÅ¢Â§çÊäÄÊúØ">SQLServer 2012 ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçóNoteÔºöÈ´òÂèØÁî®ÊÄßÂíåÁÅæÈöæÊÅ¢Â§çÊäÄÊúØ</h1><p>SQL Server‚ÄúÈ´òÂèØÁî®ÊÄß‚ÄùÂíå‚ÄúÁÅæÈöæÊÅ¢Â§ç‚ÄùÂõõ‰∏™‰º†ÁªüÊäÄÊúØÔºöÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ(Cluster)„ÄÅÊó•Âøó‰º†ÈÄÅ(LogShipping)„ÄÅÂ§çÂà∂(Replication)ÂíåÊï∞ÊçÆÂ∫ìÈïúÂÉè(database Mirroring)</p><h2 id="È´òÂèØÁî®ÊÄß‰∏éÁÅæÈöæÊÅ¢Â§ç">‚ÄúÈ´òÂèØÁî®ÊÄß‚Äù‰∏é‚ÄúÁÅæÈöæÊÅ¢Â§ç‚Äù</h2><p>Êï∞ÊçÆÂ∫ìÊúçÂä°ÁöÑÂèØÁî®Êó∂Èó¥=Âú®Á∫øÊó∂Èó¥/ÔºàÂú®Á∫øÊó∂Èó¥+ÂÆïÊú∫Êó∂Èó¥Ôºâ</p><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608130753104-16546649635641.png"alt="Êï∞ÊçÆÂ∫ìÊúçÂä°ÁöÑÂèØÁî®Êó∂Èó¥" /><figcaption aria-hidden="true">Êï∞ÊçÆÂ∫ìÊúçÂä°ÁöÑÂèØÁî®Êó∂Èó¥</figcaption></figure><p>SQL ServerÊúçÂä°Áî±‰∏§ÈÉ®ÂàÜÁªÑÊàêÔºö</p><ol type="1"><li>SQL Server‰Ωú‰∏∫Â∫îÁî®ÊúçÂä°ÔºåÁî±Windows‰∏äÁöÑÂèØÊâßË°åÊñá‰ª∂Êèê‰æõÂäüËÉΩ„ÄÇ</li><li>ÂÇ®Â≠òÂú®Á°¨Áõò‰∏äÁöÑÊï∞ÊçÆ„ÄÇ</li></ol><p>‚ÄúÈ´òÂèØÁî®ÊÄß‚ÄùÔºàHighAvailabilityÔºåÁÆÄÁß∞HAÔºâÊåáÁöÑÊòØÊï∞ÊçÆÂ∫ìÊúçÂä°ËÉΩÂ§üÂßãÁªà‰øùÊåÅÂú®Á∫øËøêË°åÔºåÈíàÂØπÁöÑÊòØËΩØ‰ª∂ÊàñÁ°¨‰ª∂ÈóÆÈ¢òÈÄ†ÊàêÁöÑÊï∞ÊçÆÂ∫ìÁ≥ªÁªü‰∏çÂèØÁî®„ÄÇ</p><p>‚ÄúÁÅæÈöæÊÅ¢Â§ç‚ÄùÔºàDisasterRecoveryÔºåÁÆÄÁß∞DRÔºâÊåáÁöÑÊòØÂΩìÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊï∞ÊçÆÂèëÁîüÊçüÂùèÊàñËÄÖ‰∏çÂèØËÆøÈóÆÊó∂ÔºåÂèØ‰ª•Âú®Â∞ΩÂèØËÉΩÁü≠ÁöÑÊó∂Èó¥ÊÅ¢Â§çÂÖ®ÈÉ®Êï∞ÊçÆÊàñËÄÖÊÅ¢Â§çÂ∞ΩÂèØËÉΩÂ§öÁöÑÊï∞ÊçÆÔºå‰ªéËÄå‰øùËØÅÂ∫îÁî®Á≥ªÁªüÁöÑÊ≠£Â∏∏ËøêË°åÔºåÈíàÂØπÁöÑÊòØ‰øùÂ≠òÂú®Êï∞ÊçÆÂ∫ìÁ≥ªÁªü‰∏≠ÁöÑÊï∞ÊçÆ‰∏çÂèØÁî®„ÄÇ</p><h2 id="sql-serverÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ">SQL ServerÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ</h2><p><em>SQLServerÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ</em>ÊòØ‰∏ÄÈ°πÂü∫‰∫é<em>WindowsÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ</em>ÁöÑ‰∏ÄÁßçÊäÄÊúØ„ÄÇ</p><h3 id="windowsÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ">WindowsÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ</h3><h4 id="ÁªìÊûÑ">ÁªìÊûÑ</h4><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608131602446.png"alt="ÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜÁöÑÁªìÊûÑ" /><figcaption aria-hidden="true">ÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜÁöÑÁªìÊûÑ</figcaption></figure><ol type="1"><li>WindowsÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜÁî±Â§ö‰∏™ÊúçÂä°Âô®ÔºàNodeÔºâÁªÑÊàêÔºåÊØè‰∏™NodeÈÉΩËøêË°åÁùÄMicrosoftÈõÜÁæ§ÊúçÂä°ÔºàMSCSÔºâ</li><li>ÂÖ±‰∫´Á£ÅÁõòÔºàShared ArrayÔºâÔºöÂ≠òÊîæÈúÄË¶ÅÂÖ±‰∫´ÁöÑÊï∞ÊçÆÔºåÂ¶ÇSQLServerÁöÑÊï∞ÊçÆÂ∫ìÊñá‰ª∂„ÄÅÈîôËØØÊó•ÂøóÁ≠â</li><li>Êú¨Âú∞Á£ÅÁõòÔºàDriveCÔºâÔºöÊØè‰∏™ËäÇÁÇπÁöÑÊú¨Âú∞Á£ÅÁõòÔºåÂ≠òÊîæ‰∏çÈúÄË¶ÅÂÖ±‰∫´ÁöÑÂÜÖÂÆπ„ÄÇÂΩìÊüêËäÇÁÇπÊòØÊ¥ªË∑ÉËäÇÁÇπÊó∂ÔºåÁî®Êà∑ÂèØ‰ª•ËÆøÈóÆÂÖ∂Êú¨Âú∞Á£ÅÁõòËÄå‰∏çËÉΩËÆøÈóÆÂÖ∂‰ªñNodeÁöÑÊú¨Âú∞Á£ÅÁõò„ÄÇ</li><li>ÁßÅÊúâÁΩëÁªúÔºàPrivateNetworkÔºâÔºöÁî±ÊØè‰∏™Node‰∏äÁöÑÁßÅÊúâÁΩëÂç°Áõ∏‰∫íËøûÊé•ÂΩ¢ÊàêÔºåÁî®‰∫é‚ÄúÂøÉËÑèÁ∫ø‚Äù‰ø°Âè∑ÔºåÂç≥ËäÇÁÇπÁõ∏‰∫íÊÑüÁü•ÂΩºÊ≠§ÊòØÂê¶Ê≠£Â∏∏Â∑•‰ΩúÔºåÂ¶ÇÊüêËäÇÁÇπÊó†Ê≥ïÂõûÂ∫î‰ø°Âè∑ÔºåÂç≥Ë¢´ÊéíÂá∫Áæ§ÈõÜ„ÄÇ</li><li>ÂÖ¨Áî®ÁΩëÁªúÔºàPublicNetworkÔºâÔºöÂ§ñÈÉ®ËµÑÊ∫êÈÄöËøáËäÇÁÇπ‰∏äÁöÑÂÖ¨ÂÖ±ÁΩëÂç°ËÆøÈóÆËØ•ËäÇÁÇπ„ÄÇ</li><li>Ê∑∑ÂêàÁΩëÁªúÔºàMixedNetworkÔºâÔºöÁî±‰∫éÁßÅÊúâÁΩëÂç°ÂíåÂÖ¨ÂÖ±ÁΩëÂç°Âú®Áâ©ÁêÜ‰∏äÂèØ‰ª•ÊòØ‰∏ÄÂùóÁΩëÂç°ÔºåÁæ§ÈõÜÂèØ‰ª•ÈÄöËøá‰∏Ä‰∏™ÁΩëÁªúÂÆåÊàêÁßÅÊúâÂíåÂÖ¨ÂÖ±ÁΩëÁªúÁöÑÂäüËÉΩ„ÄÇ</li><li>ËôöÊãüÊúçÂä°Âô®ÔºàVirtualServerÔºâÔºöÁî±Áæ§ÈõÜÂÜÖÊâÄÊúâËäÇÁÇπÁªÑÊàêÁöÑ‰∏Ä‰∏™ÔºàËôöÊãüÔºâÊúçÂä°Âô®„ÄÇÊúâ‰∏éÁæ§ÈõÜÂÜÖ‰ªª‰ΩïËäÇÁÇπÈÉΩ‰∏çÂêåÁöÑIPÂú∞ÂùÄÔºàËôöÊãüIPÔºâÂíåÊú∫Âô®ÂêçÔºàËôöÊãüÁΩëÁªúÂêçÔºâ„ÄÇËôöÊãüIP‰∏ÄÂÆöË¶ÅÂíåÂÖ¨ÂÖ±ÁΩëÁªúÈÖçÁΩÆÂú®Âêå‰∏Ä‰∏™ÁΩëÊÆµÈáå„ÄÇ</li><li>ËµÑÊ∫êÔºöÊåáÂú®WindowsÁæ§ÈõÜ‰∏≠ÔºåËôöÊãüIPÔºåËôöÊãüÁΩëÁªúÂêçÔºåÂÖ±‰∫´Á£ÅÁõòÔºåSQLServerÁ≠âÁ≠â„ÄÇÂú®‰ªªÊÑèÊó∂ÂàªÔºåÂè™ÊúâÁæ§ÈõÜ‰∏≠ÁöÑ‰∏Ä‰∏™ËäÇÁÇπÔºàÊ¥ªË∑ÉËäÇÁÇπÔºåÁî®Êà∑ÂÆûÈôÖÁôªÂΩïÁöÑËäÇÁÇπÔºâËÉΩÊèê‰æõÁî®Êà∑ÊâÄÈúÄÁöÑÊúçÂä°ÂíåËµÑÊ∫êÔºåËÄåÂÖ∂‰ªñËäÇÁÇπÈÉΩÂ§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅ„ÄÇ</li><li>Ê¥ªË∑ÉËäÇÁÇπÔºöÂΩìÂâçÊã•ÊúâËØ•Áæ§ÈõÜËµÑÊ∫êÁöÑËäÇÁÇπÔºåÁî±WindowsÁæ§ÈõÜÊúçÂä°ÂÜ≥ÂÆö„ÄÇ</li><li>ÂÆ¢Êà∑Á´ØÁöÑËøûÊé•Êåá‰ª§ÂßãÁªàÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºöÊåáÂêëËôöÊãüIPÔºåÊàñËÄÖËôöÊãüÁΩëÁªúÂêçÔºåÂØπËôöÊãüÊúçÂä°Âô®ÁöÑËØ∑Ê±Ç‰ºöË¢´ËΩ¨ÂêëÂà∞Ê¥ªË∑ÉËäÇÁÇπ‰∏ä„ÄÇ</li></ol><h4 id="ÊïÖÈöúËΩ¨Áßªfailover">ÊïÖÈöúËΩ¨ÁßªÔºàFailoverÔºâ</h4><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608134016918.png"alt="ËµÑÊ∫êÁöÑÊïÖÈöúËΩ¨Áßª" /><figcaption aria-hidden="true">ËµÑÊ∫êÁöÑÊïÖÈöúËΩ¨Áßª</figcaption></figure><p>ÂΩìÂâçÊã•ÊúâËµÑÊ∫êÁöÑËäÇÁÇπNodeAÂá∫Áé∞ÊïÖÈöúÊó∂ÔºåWindowsÁæ§ÈõÜ‰ºöËá™Âä®ÂèëËµ∑ÊïÖÈöúËΩ¨ÁßªÔºåËΩ¨ÁßªÂêéNodeBÊã•ÊúâËµÑÊ∫ê„ÄÇ</p><p>ÊïÖÈöúËΩ¨ÁßªÂèëÁîüÔºö</p><ol type="1"><li>Áî±‰∫éÊïÖÈöúËá™Âä®ÂàáÊç¢</li><li>Á≥ªÁªüÁÆ°ÁêÜÂëòÊâãÂä®ÂàáÊç¢</li></ol><h3 id="sql-serverÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ-1">SQL ServerÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜ</h3><p>SQL ServerÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜÔºåÂç≥Â∞ÜSQLServerÈÉ®ÁΩ≤Âú®WindowsÁæ§ÈõÜ‰∏≠ÁöÑÂ§ö‰∏™ËäÇÁÇπ‰∏ä‰ª•ÁªÑÊàê‰∏Ä‰∏™ËôöÊãüSQLServerÂÆû‰æã„ÄÇÂú®ÂΩìÂâçÊ¥ªË∑ÉËäÇÁÇπ‰∏çÂèØÁî®Êó∂ÔºåSQLServerÂèØ‰ª•Ë¢´ÂàáÊç¢Âà∞Â∑•‰ΩúÊ≠£Â∏∏ÁöÑËäÇÁÇπ‰∏äÁªßÁª≠ËøõË°åÊúçÂä°„ÄÇ</p><h4 id="sql-serverÁæ§ÈõÜËµÑÊ∫êÁªÑÁöÑÁªìÊûÑ">SQL ServerÁæ§ÈõÜËµÑÊ∫êÁªÑÁöÑÁªìÊûÑ</h4><p>‚ÄúËµÑÊ∫êÁªÑ‚ÄùÊòØÁî±‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÔºàÁõ∏‰∫íÂÖ≥ËÅîÔºâÁöÑËµÑÊ∫êÁªÑÊàêÁöÑÁªÑÔºåÂú®‰ªª‰ΩïÊó∂ÂÄôÊØè‰∏™ËµÑÊ∫êÁªÑÈÉΩ‰ªÖÂ±û‰∫éÂÖ∂‚ÄúÊ¥ªË∑ÉËäÇÁÇπ‚ÄùÔºåÊâÄÊúâÁöÑÊïÖÈöúËΩ¨ÁßªÈÉΩÊòØ‰ª•ËµÑÊ∫êÁªÑ‰∏∫Âçï‰ΩçÂèëÁîü„ÄÇ</p><p>ÂØπ‰∫éSQL ServerËµÑÊ∫êÁªÑÔºåÈÄöÂ∏∏ÂåÖÂê´‰ª•‰∏ãËµÑÊ∫êÔºö</p><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608144213186.png"alt="ÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜÁÆ°ÁêÜÂô®‰∏≠Êü•ÁúãSQL ServerËµÑÊ∫êÁªÑÁöÑÊã•ÊúâËÄÖ" /><figcaption aria-hidden="true">ÊïÖÈöúËΩ¨ÁßªÁæ§ÈõÜÁÆ°ÁêÜÂô®‰∏≠Êü•ÁúãSQLServerËµÑÊ∫êÁªÑÁöÑÊã•ÊúâËÄÖ</figcaption></figure><h5 id="sql-serverÁΩëÁªúÂêçÂíåsql-server-ipÂú∞ÂùÄ">SQL ServerÁΩëÁªúÂêçÂíåSQLServer IPÂú∞ÂùÄ</h5><p>SQL ServerÂÆû‰æãÊã•Êúâ‰∏ìÂ±ûÁöÑËôöÊãüÁΩëÁªúÂêçÂíåIPÂú∞ÂùÄÔºåÂÆÉ‰ª¨Êèê‰æõ‰∫ÜÂ∫îÁî®Á®ãÂ∫èËÆøÈóÆSQLServerÊó∂‰ΩøÁî®ÁöÑÊú∫Âô®ÂêçÊàñËÄÖIPÂú∞ÂùÄ„ÄÇSQLServerÁæ§ÈõÜÂπ∂‰∏ç‰ΩøÁî®WindowsÁæ§ÈõÜÁöÑËôöÊãüÁΩëÁªúÂêçÂíåËôöÊãüIPÂú∞ÂùÄÊù•‰Ωú‰∏∫Â∫îÁî®Á®ãÂ∫èËÆøÈóÆÂÆÉÁöÑÊé•Âè£„ÄÇ</p><h5 id="sql-serverÂíåsql-server-agent">SQL ServerÂíåSQL Server Agent</h5><p>SQL ServerÁæ§ÈõÜ‰∏≠ÊâÄÊúâËäÇÁÇπÈÉΩÂÆâË£ÖÊúâSQL ServerÂíåSQL ServerAgentÊúçÂä°‰ª•Âèä‰∏éÊúçÂä°ÊâÄÂØπÂ∫îÁöÑ‰∫åËøõÂà∂Êñá‰ª∂„ÄÅÊ≥®ÂÜåË°®ÈîÆÂÄºÁ≠â„ÄÇ</p><p>Âú®Áæ§ÈõÜÊ≠£Â∏∏ËøêË°åÁöÑÊÉÖÂÜµ‰∏ãÔºåÂè™ÊúâÊ¥ªË∑ÉËäÇÁÇπÁöÑSQLServerÂÆû‰æãÊòØRunningÁöÑÔºåÂÖ∂‰ªñËäÇÁÇπ‰∏äÈÉΩÊòØStopped„ÄÇ</p><p>SQL ServerËµÑÊ∫êÂêçÔºö</p><ol type="1"><li>SQL ServerÊòØÈªòËÆ§ÂÆû‰æãÔºåËµÑÊ∫êÂêç‰∏∫SQL Sever</li><li>SQL ServerÊòØÂëΩÂêçÂÆû‰æãÔºåËµÑÊ∫êÂêç‰∏∫SQL ServerÔºàÂÆû‰æãÂêçÔºâÔºåeg ‚ÄúSQL Server(MSSQLSERVER)‚Äù</li></ol><p>ÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÈÄöËøá‚ÄúËôöÊãüÁΩëÁªúÂêç‚ÄùËÆøÈóÆSQL ServerÂÆû‰æã„ÄÇ</p><h5 id="ÂÖ±‰∫´Á£ÅÁõò">ÂÖ±‰∫´Á£ÅÁõò</h5><p>ÂÖ±‰∫´Á£ÅÁõòËµÑÊ∫êÂèØ‰ª•ÊòØ‰∏ÄÂùó<em>ÈÄªËæëÁ£ÅÁõò</em>Ôºå‰πüÂèØ‰ª•ÊòØ‰∏ÄÂùóÁ£ÅÁõò‰∏äÁöÑ‰∏Ä‰∏™<em>mountpoint</em>„ÄÇ</p><p>ÂÖ±‰∫´Á£ÅÁõò‰øùÂ≠òSQL ServerÁæ§ÈõÜÂÆû‰æãÁöÑÔºö</p><ol type="1"><li>Êï∞ÊçÆÂ∫ìÁöÑÊâÄÊúâÊï∞ÊçÆÊñá‰ª∂Âíå‰∫ãÂä°Êó•ÂøóÊñá‰ª∂ÔºàMDFÔºåNDFÂíåLDFÔºâ</li><li>SQL ServerÂíåSQL Server AgentÁöÑÊó•ÂøóÊñá‰ª∂ÔºàERRORLOGÔºâ</li><li>ÂÖ∂‰ªñÁöÑÊñá‰ª∂ÂíåÁõÆÂΩï</li></ol><p>ÂÖ±‰∫´Á£ÅÁõòÂíåSQL ServerÂøÖÈ°ªÂú®Áî®‰∏ÄËµÑÊ∫êÁªÑÈáåÔºåSQLServer‰æùËµñ‰∫éÂÖ±‰∫´Á£ÅÁõò„ÄÇ</p><p>‰∏Ä‰∏™ÂÖ±‰∫´Á£ÅÁõòËµÑÊ∫êÂè™ËÉΩÂ±û‰∫é‰∏Ä‰∏™SQL ServerÂÆû‰æãÔºå‰ΩÜÊòØ‰∏Ä‰∏™SQLServerÁæ§ÈõÜÂÆû‰æãÂèØ‰ª•‰ΩøÁî®Â§ö‰∏™ÂÖ±‰∫´Á£ÅÁõò„ÄÇ</p><h5 id="ÂÖ∂‰ªñ">ÂÖ∂‰ªñ</h5><p>ÂèØËÉΩÂåÖÂê´Ôºö</p><ol type="1"><li>File ShareËµÑÊ∫êÔºöÂ¶ÇÊûú SQL ServerË¶Å‰ΩøÁî®FileStream</li><li>Analysis ServicesËµÑÊ∫ê</li></ol><h5 id="ËµÑÊ∫êÁä∂ÊÄÅ">ËµÑÊ∫êÁä∂ÊÄÅ</h5><p><strong>‰∏äÁ∫øÔºàonlineÔºâÔºö</strong>ËØ•ËµÑÊ∫êÂú®Êüê‰∏™ËäÇÁÇπ‰∏äÊ≠£Â∏∏Â∑•‰Ωú‰∏≠„ÄÇ</p><p><strong>Á¶ªÁ∫øÔºàofflineÔºâÔºö</strong>ËØ•ËµÑÊ∫êÂú®Êüê‰∏™ËäÇÁÇπ‰∏äÂ§Ñ‰∫éÂÅúÊ≠¢Â∑•‰ΩúÁä∂ÊÄÅÔºåÊó†Ê≥ïÊèê‰æõÁõ∏Â∫îÁöÑÊúçÂä°„ÄÇ</p><p><strong>Â§±Ë¥•ÔºàfailedÔºâÔºö</strong>ËØ•ËµÑÊ∫êÂú®ÊüêËäÇÁÇπÂ∞ùËØï‰∏äÁ∫øÔºå‰ΩÜÊòØÁî±‰∫éÊüê‰∫õÂºÇÂ∏∏Êó†Ê≥ï‰∏äÁ∫øÊàêÂäü„ÄÇ</p><p><strong>‰∏äÁ∫øÊåÇËµ∑ÔºàonlinependingÔºâÔºö</strong>ËµÑÊ∫êÂ∞ùËØïËøõÂÖ•‰∏äÁ∫øÁä∂ÊÄÅÔºå‰ΩÜÊòØËøòÊ≤°ÂÆåÂÖ®ÊàêÂäü‰∏äÁ∫ø„ÄÇ</p><p><strong>Á¶ªÁ∫øÊåÇËµ∑ÔºàofflinependingÔºâÔºö</strong>ËµÑÊ∫êÂ∞ùËØïËøõÂÖ•Á¶ªÁ∫øÁä∂ÊÄÅÔºå‰ΩÜÊòØËøòÊ≤°ÂÆåÂÖ®ÊàêÂäüÁ¶ªÁ∫ø„ÄÇ</p><h4 id="ÈõÜÁæ§ËµÑÊ∫êÁöÑÈÖçÁΩÆ">ÈõÜÁæ§ËµÑÊ∫êÁöÑÈÖçÁΩÆ</h4><p>Âú® <strong>Properties</strong>‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•ÂØπ‰∫éÁæ§ÈõÜËµÑÊ∫êËøõË°åËÆæÁΩÆÔºö</p><h5 id="dependencies">Dependencies</h5><p>‰∏Ä‰∏™ËµÑÊ∫êÊâÄ‰æùËµñÁöÑÂÖ∂‰ªñËµÑÊ∫êÂøÖÈ°ªË¶ÅÂíåËøô‰∏™ËµÑÊ∫êÂ§Ñ‰∫é<u>Âêå‰∏Ä‰∏™ËµÑÊ∫êÁªÑ</u>ÈáåÔºåË∑®ËµÑÊ∫êÁªÑÁöÑ‰æùËµñÂÖ≥Á≥ªÊòØ‰∏çÂ≠òÂú®ÁöÑ</p><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608151524630.png"alt="DependenciesÈÄâÊã©Âç°" /><figcaption aria-hidden="true">DependenciesÈÄâÊã©Âç°</figcaption></figure><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608151633015.png"alt="SQL ServerËµÑÊ∫êÁªÑ‰∏≠Â±ûÊÄßÁöÑ‰æùËµñÂÖ≥Á≥ª" /><figcaption aria-hidden="true">SQLServerËµÑÊ∫êÁªÑ‰∏≠Â±ûÊÄßÁöÑ‰æùËµñÂÖ≥Á≥ª</figcaption></figure><h5 id="policies">Policies</h5><p>PoliciesÂÜ≥ÂÆö‰∫ÜËØ•ËµÑÊ∫êÂèëÁîüÊïÖÈöúËΩ¨ÁßªÊó∂ÁöÑË°å‰∏∫„ÄÇ</p><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608151828624.png"alt="PoliciesÈÄâÊã©Âç°" /><figcaption aria-hidden="true">PoliciesÈÄâÊã©Âç°</figcaption></figure><p>Affect the GroupËÆæÁΩÆÔºö</p><ul class="task-list"><li><input type="checkbox" disabled="" checked="" />If resource fails,attempt restart on current node</li><li><input type="checkbox" disabled="" checked="" />If restart isunsuccessful, fail over all resources in this service orapplication</li></ul><p>‚Äã ÈÄÇÁî®‰∫éÔºöSQLServerËµÑÊ∫êÔºåÂÖ±‰∫´Á£ÅÁõòËµÑÊ∫êÔºåËôöÊãüIPÂú∞ÂùÄËµÑÊ∫êÔºåËôöÊãüÊúçÂä°ÂêçËµÑÊ∫ê</p><p>Not affect the GroupËÆæÁΩÆÔºö</p><ul class="task-list"><li><input type="checkbox" disabled="" checked="" />If resource fails,attempt restart on current node</li><li><input type="checkbox" disabled="" />If restart is unsuccessful,fail over all resources in this service or application</li></ul><p>‚Äã ÈÄÇÁî®‰∫éÔºöÔºàÂá∫‰∫éÊúÄÂ§ßÂåñÈ´òÂèØÁî®ÁõÆÁöÑÔºåÊ∂àÈô§‰∏çÂøÖË¶ÅÁöÑFailoverÔºâSQL ServerAgentËµÑÊ∫êÔºåFill ShareËµÑÊ∫êÔºåAnalysis ServicesËµÑÊ∫ê</p><h5 id="advanced-policies">Advanced Policies</h5><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608152531006.png"alt="Advanced PoliciesÈÄâÊã©Âç°" /><figcaption aria-hidden="true">Advanced PoliciesÈÄâÊã©Âç°</figcaption></figure><p><code>Basic resource health check interval</code>Âíå<code>Thorough resource health check interval</code>ÊòØWindowsClusterÂú®‰∏çÂêåÊó∂Èó¥Èó¥ÈöîÂÅöÁöÑ‰∏§Áßç‰∏çÂêåÁ®ãÂ∫¶ÁöÑÊ£ÄÊü•ÔºàLooks alive checkÔºåIs alivecheckÔºâÔºåÁî®‰∫éÁ°ÆËÆ§ÊØè‰∏™ËµÑÊ∫êÊòØÂê¶Âú®Ê≠£Â∏∏Â∑•‰Ωú„ÄÇ</p><h3 id="sql-serverÁæ§ÈõÜ‰ªÄ‰πàÊó∂ÂÄô‰ºöÂèëÁîüÊïÖÈöúËΩ¨Áßª">SQLServerÁæ§ÈõÜ‰ªÄ‰πàÊó∂ÂÄô‰ºöÂèëÁîü‚ÄúÊïÖÈöúËΩ¨Áßª‚Äù</h3><p>ÂΩìLooks alive checkÊàñIs alivecheckÊ£ÄÊü•Â§±Ë¥•Êó∂ÔºåËøõË°åÊïÖÈöúËΩ¨Áßª„ÄÇÁî±‰∫éÊïÖÈöúËΩ¨Áßª‰∏ÄËà¨ÊòØÊÑèÂ§ñÂèëÁîüÁöÑÔºåÊâÄ‰ª•SQLServerÂàáÊç¢Âà∞Êñ∞ËäÇÁÇπ‰ª•ÂêéÔºåËøòÈúÄË¶Å‰∏ÄÊÆµÊó∂Èó¥Êù•ÂÅöÊï∞ÊçÆÂ∫ìÁöÑrecovery„ÄÇ</p><p>Áæ§ÈõÜÈáåÁöÑÊØè‰∏™ËµÑÊ∫êÈÉΩÊòØ‰∏ÄÁßçËµÑÊ∫êÁ±ªÂûã„ÄÇÊ†πÊçÆ‰∏çÂêåÁ±ªÂûãÁöÑËµÑÊ∫êÔºå‰ºö‰ΩøÁî®‰∏çÂêåÁöÑÊñπÂºèËøõË°åisaliveÂíålooksaliveÊ£ÄÊü•„ÄÇ| ËµÑÊ∫ê | ËµÑÊ∫êÁ±ªÂûã | | ---------- | ------------ | | ÂÖ±‰∫´Á£ÅÁõò |physicaldisk | | ËôöÊãüIP | IP Address | | SQL Server | SQL Server |</p><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/clip_image002.png"alt="ËµÑÊ∫êÁ±ªÂûã„ÄÅËµÑÊ∫êDLLÂíåËµÑÊ∫êÁöÑÂÖ≥Á≥ª" /><figcaptionaria-hidden="true">ËµÑÊ∫êÁ±ªÂûã„ÄÅËµÑÊ∫êDLLÂíåËµÑÊ∫êÁöÑÂÖ≥Á≥ª</figcaption></figure><p>WindowsÁæ§ÈõÜÊúçÂä°ËøõÁ®ãclussvc.exe‰ºö‰∫ßÁîüÂêç‰∏∫RHS.exeÁöÑËøõÁ®ãÔºåRHS.exe‰ºöË£ÖËΩΩresourcedllÔºåÂπ∂‰∏îË∞ÉÁî®dll‰∏≠ÂÆö‰πâÁöÑÊñπÊ≥ïÊù•Ê£ÄÊü•Áõ∏Â∫îresourceÁöÑÁä∂ÊÄÅ„ÄÇ‰∏Ä‰∏™ËµÑÊ∫êÂÖ∂Â±ûÊÄßÁöÑAdvancedPolicesÈÄâÈ°πÂç°‰∏≠Â¶ÇÊûúÊ≤°ÊúâÂãæÈÄâ‚Äúrun this resource in a separate Resource‚ÄùÔºåÂÆÉÁöÑresourcedllÂ∞±‰ºöË£ÖËΩΩÂú®‰∏Ä‰∏™ÈªòËÆ§ÁöÑRHS.exe‰∏≠ÔºõÂèç‰πãÔºåÂàô‰ºöÊúâ‰∏Ä‰∏™ÂçïÁã¨ÁöÑRHS.exeÊù•Ë£ÖËΩΩËØ•ËµÑÊ∫êÁöÑresourcedll„ÄÇÊâÄ‰ª•Âú®‰ªªÂä°ÁÆ°ÁêÜÂô®‰∏≠‰Ω†ÂèØËÉΩÁúãÂà∞Â§ö‰∏™RHS.exeËøõÁ®ã„ÄÇ</p><figure><imgsrc="/2022/07/17/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E9%AB%98%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%8A%80%E6%9C%AF/image-20220608162438129.png"alt="Â§ö‰∏™RHS.exeËøõÁ®ã" /><figcaption aria-hidden="true">Â§ö‰∏™RHS.exeËøõÁ®ã</figcaption></figure><p>WindowsÁæ§ÈõÜËá™Â∏¶ÁöÑËµÑÊ∫êÁ±ªÂûãÔºö</p><ol type="1"><li>physical disk, IP, network nameÂíåDTCÁ≠â</li><li>Ê£ÄÊü•ÁöÑÊñπÊ≥ïÂÆö‰πâÂú®resource DLLÔºå<code>clusres.dll</code>‰∏≠</li></ol><p>ÈùûWindowsÁæ§ÈõÜËá™Â∏¶ÁöÑËµÑÊ∫êÁ±ªÂûãÔºö</p><ol type="1"><li><p>SQL Server</p></li><li><p>Â¶ÇÊúâ‰∏ìÂ±ûËµÑÊ∫êÁ±ªÂûãÂíå‰∏ìÂ±ûresource dllÔºåÂú®resourcedll‰∏≠ÂÆö‰πâÊ£ÄÊü•ÊñπÊ≥ï</p><blockquote><p>SQL ServerDÁöÑresource dllÔºö</p><p>SQL ServerËµÑÊ∫êÔºàÈÄöÂ∏∏affect the groupÊ®°ÂºèÔºâ--&gt;<code>sqsrvres.dll</code></p><p>‚Äã LooksaliveÔºöÈªòËÆ§5Áßí‰∏ÄÊ¨°ÔºåÈÄöËøáÊúçÂä°ÊéßÂà∂ÁÆ°ÁêÜÂô®ÔºàService ControlManagerÔºåÁÆÄÁß∞SCMÔºâÊ£ÄÊü•SQL ServerÊúçÂä°Âú®Ê¥ªË∑ÉËäÇÁÇπÊòØÂê¶Â§Ñ‰∫é‚ÄúÂêØÂä®Áä∂ÊÄÅ‚Äù</p><p>‚ÄãIsaliveÔºöÈªòËÆ§60Áßí‰∏ÄÊ¨°ÔºåÂ¶ÇlookaliveÊ£ÄÊü•ÁöÑÁªìÊûúÂ§±Ë¥•ÔºåÁ´ãÂàªËß¶ÂèëIsaliveÊ£ÄÊü•„ÄÇSQL2012‰πãÂâçÔºåÈÄöËøáËøû Êé•SQLServerÁæ§ÈõÜÂÆû‰æãÂπ∂Ëé∑ÂèñËøêË°åÂëΩ‰ª§ÁöÑËøîÂõûÁªìÊûúÊù•ËøõË°åÂà§Êñ≠„ÄÇÂ¶ÇÊûúËøûÊé•‰∏ç‰∏äSQLServerÁæ§ÈõÜÂÆû‰æãÊàñËÄÖËØ≠Âè•ËøêË°åÂ§±Ë¥•ÔºåÈÇ£‰πàIsaliveÊ£ÄÊü•Â§±Ë¥•„ÄÇÊ≠§Êó∂WindowsÁæ§ÈõÜ‰ºöÂÜçÂÅö3-5Ê¨°ÔºàÊ†πÊçÆWindowsÁöÑÁâàÊú¨ÂíåËÆæÁΩÆ‰∏çÂêåÔºâIsaliveÊ£ÄÊü•„ÄÇÂ¶ÇÊúÄÁªàÊ£ÄÊü•Â§±Ë¥•ÔºåÂàôËøõË°åÊïÖÈöúËΩ¨Áßª„ÄÇ</p><p>SQL Server AgentËµÑÊ∫ê--&gt;<code>sqagtres.dll</code></p></blockquote></li></ol><p>‚ÄùÈÄöÁî®ÊúçÂä°‚ÄúÔºàGeneric ServiceÔºâËµÑÊ∫êÁ±ªÂûãÔºö</p><ol type="1"><li>Analysis Service</li><li>‰ΩøÁî®<code>clusres.dll</code>Êù•‰Ωú‰∏∫resourcedllÂπ∂Ê≤øÁî®ÂÆö‰πâËøõË°åÊ£ÄÊü•„ÄÇ</li></ol><p>Cluster-awareÊúçÂä°Ôºö</p><ol type="1"><li>ÂèØ‰ª•ÈÄöËøáresource dllÂΩ¢ÊàêÁæ§ÈõÜËµÑÊ∫ê</li><li>SQL Server„ÄÅSQL Server AgentÔºåAnalysis ServiceÊúçÂä°</li></ol><p>ÈùûCluster-awareÊúçÂä°Ôºö</p><ol type="1"><li>Êó†Ê≥ïÈÄöËøá‰ªª‰ΩïresourcedllÂú®WindowsÁæ§ÈõÜ‰∏≠ÂΩ¢ÊàêËµÑÊ∫êÔºåÂç≥‰ΩøÂÆâË£ÖÂú®Áæ§ÈõÜÁöÑËäÇÁÇπ‰∏ä‰πü‰ºöË¢´ËßÜ‰ΩúÂÆâË£ÖÂú®ÂçïÊú∫ÁéØÂ¢ÉÔºåÊó†Ê≥ïÊïÖÈöúËΩ¨Áßª„ÄÇ</li><li>SQL browser, Reporting ServiceÁ≠â</li><li>IntegrationServices‰∏çÊòØCluster-awareÔºåÂèØ‰ª•‰∫∫‰∏∫ÈÖçÁΩÆ‰∏∫Áæ§ÈõÜËµÑÊ∫êÔºà‰∏çÊé®ËçêÔºâÔºå‰ΩÜÊòØ‰∏çÂÖ∑ÊúâËá™Âä®ÊïÖÈöúËΩ¨ÁßªÂäüËÉΩ„ÄÇ</li></ol>]]></content>
    
    
    <categories>
      
      <category>Reading</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Server 2012 Internal Note_Logging and recovery</title>
    <link href="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/"/>
    <url>/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/</url>
    
    <content type="html"><![CDATA[<h1 id="sql-server-2012-internal-note_logging-and-recovery">SQL Server2012 Internal Note_Logging and recovery</h1><h2 id="transaction-log-internals">Transaction log internals</h2><ol type="1"><li><p>The transaction log</p><ol type="1"><li><p>records changes made to the database and stores enoughinformation to allow SQL Server to recover the database</p></li><li><p>Physically, the transaction log is one or more files associatedwith a database at the time the database is created or altered.</p></li><li><p>Each log record is labeled with a unique log sequence number(LSN)</p></li><li><p>Transaction log is written before the changes to the database arewritten (Buffer Manager)</p><ol type="1"><li><p>Every time a page is changed, the LSN corresponding to the logentry for that change is written into the header of the data page</p><p>Log records for a transaction are written to disk before the commitacknowledgement is sent to the client process</p></li></ol></li></ol></li><li><p>Recovery is the process of reconciling the data files and thelog.</p></li><li><p>A restart recovery runs every time SQL Server is started</p><ol type="1"><li>The process runs on each database because each database has its owntransaction log.</li></ol></li><li><p>A restore recovery (or media recovery), is run by request when arestore operation is executed</p></li></ol><h3 id="phases-of-recovery">Phases of recovery</h3><p>During recovery, only changes that occurred or were in progress sincethe last checkpoint are evaluated to determine whether they need to beredone or undone</p><figure><imgsrc="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/image-20220719155358320.png"alt="The three phases of the SQL Server recovery process" /><figcaption aria-hidden="true">The three phases of the SQL Serverrecovery process</figcaption></figure><p><u>Phase 1: Analysis</u></p><ol type="1"><li>Starting at the last checkpoint record in the transaction log</li><li>Constructs a dirty page table (DPT) consisting of pages that mighthave been dirty at the time SQL Server stopped</li><li>Build an active transaction table that consists of uncommittedtransactions at the time SQL Server stopped</li></ol><p><u>Phase 2: Redo</u></p><ol type="1"><li>This phase returns the database to the state it was in at the timethe SQL Server service stopped</li><li>If the SQL Server service stops after a transaction commits butbefore the data is written out to the data pages, when SQL Server startsand runs recovery, the transaction must be rolled forward</li></ol><p><u>Phase 3: Undo</u></p><ol type="1"><li>It rolls each of these active transactions back individually.</li><li>Any uncommitted transaction at the time SQL Server stopped is undoneso that the database reflects none of the changes</li></ol><p>SQL Server uses multiple threads to process the recovery operationson the different data bases simultaneously.</p><h3 id="page-lsns-and-recovery">Page LSNs and recovery</h3><p>Every database page has an LSN in the page header that reflects thelocation in the transaction log of the last log entry that modified arow on that page</p><figure><imgsrc="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/image-20220720103706785.png"alt="Comparing LSNs to decide whether to process the log entry during recovery" /><figcaption aria-hidden="true">Comparing LSNs to decide whether toprocess the log entry during recovery</figcaption></figure><p>A transaction log can‚Äôt be truncated before the point of the earliesttransaction that‚Äôs still open</p><p>If a transaction remains open, the log must be preserved because it‚Äôsstill not clear whether the transaction is done or ever will be done</p><h3 id="log-reading">Log reading</h3><p>The transaction log enables SQL Server to guarantee recoverability incase of statement or system failure and to allow a system administratorto take backups of the changes to a SQL Server database</p><h3 id="the-log-cache">The log cache</h3><p><u>SQL Server caches log records before they are physicallywritten</u></p><ol type="1"><li>The log cache contains up to 128 entries on 64-bit systems or 32entries on 32-bit systems</li><li>Each entry can maintain a buffer to store the log records beforethey get written to disk as a single block (from 512 bytes to 60KB)</li><li>As the log buffers are written to disk, SQL Server can reuse thebuffer</li></ol><p><u>Log pool</u></p><ol type="1"><li>The log pool is a hash table hashed on the block ID and the databaseID</li><li>The log pool allows SQL Server to access sets of log records neededfor different technologies that need access to the log</li></ol><h2 id="changes-in-log-size">Changes in log size</h2><p>SQL Server always treats the log as one contiguous stream</p><h3 id="understanding-virtual-log-files">Understanding virtual logfiles</h3><p>The transaction log for any database is managed as a set of virtuallog files (VLFs) whose size is determined internally by SQL Server basedon the total size of all log files and the growth increment used whenenlarging the log.</p><p>A log always grows in units of entire VLFs and can be shrunk only toa VLF boundary</p><figure><imgsrc="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/image-20220720151742031.png"alt="Multiple VLFs that make up a physical log file" /><figcaption aria-hidden="true">Multiple VLFs that make up a physical logfile</figcaption></figure><p><u>A VLF can be in one of four states</u></p><p><strong>Active</strong></p><p>The active portion of the log begins at the minimum LSN representingan active transaction. The active portion of the log ends at the lastLSN written.</p><p><strong>Recoverable</strong></p><p>The portion of the log preceding the oldest active transaction isneeded only to maintain a sequence of log backups for restoring thedatabase to a former state</p><p><strong>Reusable</strong></p><p>If transaction log backups aren‚Äôt being maintained or you‚Äôve alreadybacked up the log, VLFs before the oldest active transaction aren‚Äôtneeded and can be reused. Truncating or backing up the transaction logchanges recoverable VLFs into reusable VLFs.</p><p><strong>Unused</strong></p><p>One or more VLFs at the physical end of the log files might not havebeen used yet if not enough logged activity has taken place</p><h3 id="observing-virtual-log-files">Observing virtual log files</h3><p><code>DBCC LOGINFO</code> to observe the key properties of virtuallog files.</p><figure><imgsrc="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/image-20220720162036037.png"alt="Viewing VLFs" /><figcaption aria-hidden="true">Viewing VLFs</figcaption></figure><p><code>FileId</code>: indicates which of the log‚Äôs physical filescontains the VLF</p><p><code>FileSize</code> <code>StartOffset</code>in bytes</p><p><code>FSeqNo</code>: the use order (logical order), the FSeqNo valuesdon‚Äôt start at 0 or 1</p><p><code>Status</code>: indicates whether the VLF is reusable. 2: eitheractive or recoverable, 0: reusable or completely unused</p><p><code>CreateLSN</code>: lists the current LSN value at the time theVLF was added to the transaction log, 0 means that the VLF was part ofthe original log file created when the database was created</p><p>The first physical page of a log file contains header information,not log records, so the VLF is considered to start on the secondpage</p><p>If all the VLFs in the log have a status of 2, SQL Server needs toadd new VLFs to the log to record new transaction activity.</p><p>Try to keep your VLFs less than 1 GB in size; try to keep the numberof VLFs to no more than a few hundred, with possibly 1,000 as an upperlimit.</p><h3 id="using-multiple-log-files">Using multiple log files</h3><p>All VLFs in one physical file are used before any VLFs in the secondfile are used.</p><p>If none of the VLFs in multiple physical log files is available forreuse when a new VLF is needed, SQL Server adds new VLFs to eachphysical log file in round-robin fashion</p><h3id="understanding-automatic-truncation-of-virtual-log-files">Understandingautomatic truncation of virtual log files</h3><p>SQL Server assumes that you‚Äôre not maintaining a sequence of logbackups if any of the following is true (in autotruncate mode):</p><ol type="1"><li>You have configured the database to truncate the log regularly bysetting the recovery model to SIMPLE.</li><li>You have never taken a full database backup</li><li>You haven‚Äôt taken a full database backup since switching thedatabase to FULL or BULK_ LOGGED recovery model from SIMPLE recoverymodel.</li></ol><p><code>sys.database_recovery_status</code> column<code>last_log_backup_lsn</code>, if <code>null</code>, then inautotruncate mode.</p><p><u>Autotruncate mode</u></p><p>SQL Server truncates the database‚Äôs transaction log every time itgets ‚Äúfull enough‚Äù</p><p>‚ÄúFull enough‚Äù means that more log records exist than can be redone ina reasonable amount of time during system startup‚Äîthe recoveryinterval</p><p>Truncation: all log records prior to the oldest active transactionare invalidated and all VLFs not containing any part of the active logare marked as reusable.</p><p><u>The checkpoint process</u></p><p>The thread checks the database and then truncates the inactiveportion of the log.</p><p>If the log is regularly truncated, SQL Server can reuse space in thephysical file by cycling back to an earlier VLF when it reaches the endof the physical log file.</p><h3 id="maintaining-a-recoverable-log">Maintaining a recoverablelog</h3><figure><imgsrc="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/image-20220721120550290.png"alt="The active portion of the log cycling back to the beginning of the physical log file" /><figcaption aria-hidden="true">The active portion of the log cyclingback to the beginning of the physical log file</figcaption></figure><p>If a log backup sequence is being maintained, the part of the logbefore the minimum LSN can‚Äôt be overwritten until those log records haveactually been backed up. The VLF status stays at 2 until the log backupoccurs. After the log backup, the status changes to 0 and SQL Server cancycle back to the beginning of the file.</p><h3 id="automatically-shrinking-the-log">Automatically shrinking thelog</h3><p>A database should be truncated so that it‚Äôs the most shrinkable, andif the log is in autotruncate mode and the autoshrink option is set, thelog is physically shrunk at regular intervals.</p><p>Autotruncate means only that VLFs considered recoverable are markedas reusable at regular intervals, but VLFs in an active state aren‚Äôtaffected.</p><h3 id="viewing-the-log-file-size">Viewing the log file size</h3><p><code>DBCC SQLPERF(‚Äòlogspace‚Äô)</code></p><figure><imgsrc="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/image-20220721143841535.png"alt="DBCC result" /><figcaption aria-hidden="true">DBCC result</figcaption></figure><p><code>sys.dm_os_performance_counters</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> instance_name <span class="hljs-keyword">as</span> [Database],<br> cntr_value <span class="hljs-keyword">as</span> &quot;LogFullPct&quot;<br><span class="hljs-keyword">FROM</span> sys.dm_os_performance_counters<br><span class="hljs-keyword">WHERE</span> counter_name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;Percent Log Used%&#x27;</span><br> <span class="hljs-keyword">AND</span> instance_name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (<span class="hljs-string">&#x27;_Total&#x27;</span>, <span class="hljs-string">&#x27;mssqlsystemresource&#x27;</span>)<br> <span class="hljs-keyword">AND</span> cntr_value <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/image-20220721143923238.png"alt="View result" /><figcaption aria-hidden="true">View result</figcaption></figure><h2 id="database-backup-and-restore">Database backup and restore</h2><h3 id="understanding-the-types-of-backups">Understanding the types ofbackups</h3><p><u>Full backup</u></p><p>Backup copies all the pages from a database onto a backup device</p><p><u>Differential backup</u></p><p>Backup copies only the extents that changed since the last fullbackup was made.</p><p>Each time a full backup is made, all bits in the DIFF are cleared to0. When any page in an extent is changed, the bit in the DIFF pagecorresponding to that extent is changed to 1.</p><p><u>Log backup</u></p><p>Backup copies all log records that have been written to thetransaction log since the last log backup was made.</p><p><u>File and filegroup backup</u></p><p>SQL Server records the current log sequence number (LSN) at the timethe backup starts and again at the time the backup ends.</p><h3 id="understanding-recovery-models">Understanding recoverymodels</h3><h4 id="minimally-logged-operations">Minimally logged operations</h4><p>Minimally logged operations are ones that don‚Äôt write every singleindividual row because doing so modifies the transaction log. At aminimum, enough information has to be logged when a minimally loggedoperation is performed to allow SQL Server to rollback a transactionthat has failed. Even when SQL Server logs the changed data, it doesn‚Äôtactually write it to the log in the sequence that it was changed. It‚Äôs afeature that minimizes the amount of logging for the operationsconfigured.</p><h4 id="full-recovery-model">FULL recovery model</h4><ol type="1"><li>the least risk of losing work</li><li>all operations are fully logged</li></ol><h4 id="bulk_logged-recovery-model">BULK_LOGGED recovery model</h4><p>When you execute one of these minimally logged operations in adatabase in BULK_LOGGED recovery, SQL Server logs only that theoperation occurred and logs information about space allocations.</p><p>Because of the reduced logging for minimally logged operations, theoperations themselves can potentially be carried out much faster than inthe FULL recovery model.(the speed improvement isn‚Äôt guaranteed)</p><p>Minimally logged operations might actually be slower in BULK_LOGGEDrecovery than in FULL recovery in certain cases</p><p>The BULK_LOGGED recovery model allows you to restore a databasecompletely in case of media failure and gives you the best performanceand least log space usage for certain minimally logged operations</p><p>The time it takes to restore a log backup made in the BULK_LOGGEDrecovery model is similar to the time it takes to restore a log backupmade in the FULL recovery mode</p><h4 id="simple-recovery-model">SIMPLE recovery model</h4><p>the logging that takes place in SIMPLE recovery is exactly the sameas the logging in BULK_LOGGED recovery, but transaction log is truncatedwhenever a checkpoint occurs, the only types of backups that can be madeare those that don‚Äôt require log backups</p><h3 id="switching-recovery-models">Switching recovery models</h3><p>When created, a database starts in whatever recovery model is used bythe model database on the instance</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> DATABASE <span class="hljs-operator">&lt;</span>database_name<span class="hljs-operator">&gt;</span><br> <span class="hljs-keyword">SET</span> RECOVERY [<span class="hljs-keyword">FULL</span> <span class="hljs-operator">|</span> BULK_LOGGED <span class="hljs-operator">|</span> SIMPLE]<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-keyword">returns</span> the recovery model <span class="hljs-keyword">and</span> the state <span class="hljs-keyword">of</span> database<br><span class="hljs-keyword">SELECT</span> name, database_id, suser_sname(owner_sid) <span class="hljs-keyword">as</span> owner ,<br> state_desc, recovery_model_desc<br><span class="hljs-keyword">FROM</span> sys.databases<br><span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AdventureWorks2008R2&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="choosing-a-backup-type">Choosing a backup type</h3><p><u>A differential backup</u></p><ol type="1"><li>Is faster if your environment includes many changes to the samedata. It backs up only the most recent change, whereas a log backupcaptures every individual update</li><li>Captures the entire B-tree structures for new indexes, whereas a logbackup captures each individual step in building the index.</li><li>Is cumulative. When you recover from a media failure, only the mostrecent differential backup needs to be restored because it contains allthe changes since the last full database backup</li></ol><p><u>A log backup</u></p><ol type="1"><li>Allows you to restore to any point in time because it is asequential record of all changes.</li><li>This allows you to recover right up to the point of thefailure.</li><li>Is sequential and discrete, all log backups must be applied in theorder that they were made.</li></ol><h3 id="restoring-a-database">Restoring a database</h3><figure><imgsrc="/2022/07/10/SQL%20Server%202012%20Internal%20Note_Logging%20and%20recovery/image-20220721153220762.png"alt="The combined use of log and differential backups, which reduces total restore time" /><figcaption aria-hidden="true">The combined use of log and differentialbackups, which reduces total restore time</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>Reading</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Web crawler for Shenzhen Exchange</title>
    <link href="/2022/07/08/Web%20crawler%20for%20Shenzhen%20Exchange/"/>
    <url>/2022/07/08/Web%20crawler%20for%20Shenzhen%20Exchange/</url>
    
    <content type="html"><![CDATA[<h1 id="web-crawler-for-shenzhen-exchange">Web crawler for ShenzhenExchange</h1><p><ahref="https://github.com/jason5306/WebCrawlerForShenzhenExchange">Ê∑±Âú≥‰∫íÂä®ÊòìÂÖ¨Âè∏ÈóÆÁ≠îÊï∞ÊçÆÁà¨Ëô´Github</a></p><img src="/2022/07/08/Web%20crawler%20for%20Shenzhen%20Exchange/DemoImg.png" class="" title="DemoImg"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><span class="hljs-keyword">from</span> selenium.webdriver.chrome.service <span class="hljs-keyword">import</span> Service<br><span class="hljs-keyword">from</span> selenium.webdriver.common.action_chains <span class="hljs-keyword">import</span> ActionChains<br><span class="hljs-keyword">from</span> selenium.webdriver.common.keys <span class="hljs-keyword">import</span> Keys<br><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><br><span class="hljs-comment"># Ê∑±‰∫§ÊâÄÂÖ¨Âè∏‰ª£Á†Å</span><br>code = pd.read_excel(<span class="hljs-string">&#x27;./code.xlsx&#x27;</span>, header = <span class="hljs-number">0</span>, dtype=<span class="hljs-built_in">str</span>)<br>code_list = code[<span class="hljs-string">&#x27;code&#x27;</span>].tolist()<br><br><br><span class="hljs-comment">#for code in code_list:</span><br>driver = webdriver.Chrome()<br><span class="hljs-comment"># a new window for QA site</span><br>driver2 = webdriver.Chrome()<br>url = <span class="hljs-string">&#x27;http://irm.cninfo.com.cn/ircs/index&#x27;</span><br><br><span class="hljs-keyword">for</span> code <span class="hljs-keyword">in</span> code_list:<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Collecting data for company ... &#x27;</span> + code + <span class="hljs-string">&#x27;...........&#x27;</span>)<br><br>    driver.set_window_size(<span class="hljs-number">1000</span>,<span class="hljs-number">30000</span>)<br><br>    driver.get(url)<br>    table_content_translate_box = []<br>    <span class="hljs-comment">#while(True): # Stop manually </span><br><br>    <span class="hljs-comment"># scoll down</span><br>    <span class="hljs-comment">#driver.execute_script(&quot;window.scrollBy(0,8000)&quot;)</span><br>    <span class="hljs-comment">#time.sleep(1)</span><br><br>    <span class="hljs-comment"># find search box and search company code</span><br>    time.sleep(<span class="hljs-number">2</span>)<br>    searc_box = driver.find_element_by_class_name(<span class="hljs-string">&#x27;el-input__inner&#x27;</span>)<br>    searc_box.click()<br>    time.sleep(<span class="hljs-number">1</span>)<br>    searc_box.send_keys(code)<br>    searc_box.send_keys(Keys.ENTER)<br>    time.sleep(<span class="hljs-number">1</span>)<br><br>    <span class="hljs-comment"># go to QA section</span><br>    tablist = driver.find_element_by_css_selector(<span class="hljs-string">&#x27;.el-tabs__nav.is-top&#x27;</span>)<br>    tablist.find_element_by_id(<span class="hljs-string">&#x27;tab-2&#x27;</span>).click()<br><br>    <span class="hljs-comment"># find date search</span><br>    date_search_box = driver.find_element_by_class_name(<span class="hljs-string">&#x27;el-range-input&#x27;</span>)<br>    date_search_box.click()<br>    date_search_box.clear()<br>    time.sleep(<span class="hljs-number">1</span>)<br>    date_search_box.send_keys(<span class="hljs-string">&#x27;2012-01-01&#x27;</span>)<br>    time.sleep(<span class="hljs-number">1</span>)<br>    action = ActionChains(driver)<br>    action.move_by_offset(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>).click().perform()<br><br><br>    <span class="hljs-comment"># max page number</span><br>    page = driver.find_element_by_class_name(<span class="hljs-string">&#x27;el-pager&#x27;</span>)<br>    pages = page.find_elements_by_class_name(<span class="hljs-string">&#x27;number&#x27;</span>)<br>    page_number = []<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> pages:<br>        page_number.append(<span class="hljs-built_in">int</span>(item.text))<br>        <span class="hljs-comment">#print(item.text)</span><br><br>    max_page_number = <span class="hljs-built_in">max</span>(page_number)<br>    <span class="hljs-comment">#print(max_page_number)</span><br><br>    <span class="hljs-comment">#data_ids = []</span><br><br>    <span class="hljs-comment"># header</span><br>    result = []<br>    header = [<span class="hljs-string">&#x27;Ê∑±Â∏Ç‰ª£Á†Å&#x27;</span>, <span class="hljs-string">&#x27;ÊèêÈóÆ&#x27;</span>, <span class="hljs-string">&#x27;ÊèêÈóÆÊó∂Èó¥&#x27;</span>, <span class="hljs-string">&#x27;ÂõûÂ§ç&#x27;</span>, <span class="hljs-string">&#x27;ÂõûÂ§çÊó∂Èó¥&#x27;</span>]<br>    result.append(header)<br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-comment"># current page number</span><br>        page = driver.find_element_by_class_name(<span class="hljs-string">&#x27;el-pager&#x27;</span>)<br>        active_page_number = page.find_element_by_css_selector(<span class="hljs-string">&#x27;.number.active&#x27;</span>).text<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Current page:&quot;</span> + <span class="hljs-built_in">str</span>(max_page_number) + <span class="hljs-string">&#x27;/&#x27;</span> + <span class="hljs-built_in">str</span>(active_page_number))<br><br><br>        <span class="hljs-comment"># find QA of this page </span><br>        search_content_box = driver.find_elements_by_class_name(<span class="hljs-string">&#x27;search-content-box&#x27;</span>)<br>        time.sleep(<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> search_content_box:<br>            temp_item1 = item.find_element_by_css_selector(<span class="hljs-string">&#x27;.item-question.left-content.table-list.pd-r-20&#x27;</span>)<br>            temp_item2 = temp_item1.find_element_by_css_selector(<span class="hljs-string">&#x27;.table-content.div-translate&#x27;</span>)<br>            data_id = temp_item2.get_attribute(<span class="hljs-string">&#x27;data-id&#x27;</span>)<br>            <span class="hljs-built_in">print</span>(data_id)<br>            <span class="hljs-comment">#data_ids.append(data_id)</span><br>            time.sleep(<span class="hljs-number">1</span>)<br><br>            <span class="hljs-comment"># get QA for each data id</span><br>            url_QA = <span class="hljs-string">&#x27;http://irm.cninfo.com.cn/ircs/question/questionDetail?questionId=&#x27;</span> + data_id<br>            driver2.get(url_QA)<br>            time.sleep(<span class="hljs-number">3</span>)<br>            <span class="hljs-comment"># have Q and A</span><br>            Q = driver2.find_element_by_css_selector(<span class="hljs-string">&#x27;.question-detail.translate-box.pd-30&#x27;</span>).text<br>            time.sleep(<span class="hljs-number">1</span>)<br>            <span class="hljs-built_in">print</span>(Q)<br>            Qtime = driver2.find_element_by_class_name(<span class="hljs-string">&#x27;question-time&#x27;</span>).text.split(<span class="hljs-string">&#x27;¬∑&#x27;</span>)[<span class="hljs-number">0</span>]<br>            time.sleep(<span class="hljs-number">1</span>)<br>            <span class="hljs-built_in">print</span>(Qtime)<br>            <span class="hljs-keyword">try</span>:<br>                A = driver2.find_element_by_css_selector(<span class="hljs-string">&#x27;.left-content.no-data&#x27;</span>).text<br>                <span class="hljs-built_in">print</span>(A)<br>                Atime = <span class="hljs-string">&#x27;ÊöÇÊó†ÂõûÂ§ç&#x27;</span><br>                <span class="hljs-built_in">print</span>(Atime)<br>            <span class="hljs-keyword">except</span> Exception:<br><br>                A = driver2.find_element_by_css_selector(<span class="hljs-string">&#x27;.reply-content.translate-box&#x27;</span>).text<br>                <span class="hljs-built_in">print</span>(A)<br><br>                Atime = driver2.find_element_by_css_selector(<span class="hljs-string">&#x27;.question-time.hidden-xs-only&#x27;</span>).text.split(<span class="hljs-string">&#x27;Ôºö&#x27;</span>)[<span class="hljs-number">1</span>]<br>                <span class="hljs-built_in">print</span>(Atime)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;________________&#x27;</span>)<br>            time.sleep(<span class="hljs-number">2</span>)<br>            result.append([code, Q, Qtime, A, Atime])<br><br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Page finished&#x27;</span>)<br><br>        <span class="hljs-comment"># next page</span><br>        next_btn = driver.find_element_by_class_name(<span class="hljs-string">&#x27;btn-next&#x27;</span>)<br>        next_btn.find_element_by_css_selector(<span class="hljs-string">&#x27;.el-icon.el-icon-arrow-right&#x27;</span>).click()<br>        time.sleep(<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">int</span>(active_page_number) == max_page_number:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;All pages done&quot;</span>)<br>            <span class="hljs-keyword">break</span><br>    <span class="hljs-comment"># export to csv        </span><br>        df = pd.DataFrame(result)<br>        df.to_csv(<span class="hljs-string">&#x27;./&#x27;</span>+code+<span class="hljs-string">&#x27;.csv&#x27;</span>, index = <span class="hljs-literal">False</span>, header = <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Script</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>Web Crawler</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Script_Backup databases iteratively and truncate name</title>
    <link href="/2022/07/05/Script_Backup%20databases%20iteratively%20and%20truncate%20name/"/>
    <url>/2022/07/05/Script_Backup%20databases%20iteratively%20and%20truncate%20name/</url>
    
    <content type="html"><![CDATA[<h1id="script_backup-databases-iteratively-and-truncate-name">Script_Backupdatabases iteratively and truncate name</h1><p><u>Problem</u></p><p>For the database backup script, if the name <code>@dbname</code> istoo long, longer than <code>128</code>, there will be an error since thelength of <code>name</code> column in <code>msdb.dbo.backupset</code> is<code>nvarchar(128)</code>.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">BACKUP DATABASE <span class="hljs-variable">@name</span>_small <span class="hljs-keyword">TO</span> DISK <span class="hljs-operator">=</span> <span class="hljs-variable">@fileName</span>_small <span class="hljs-keyword">WITH</span> NOFORMAT, NOINIT,<br>NAME <span class="hljs-operator">=</span> <span class="hljs-variable">@dbName</span>, <span class="hljs-keyword">SKIP</span>, REWIND, NOUNLOAD, COMPRESSION, STATS <span class="hljs-operator">=</span> <span class="hljs-number">10</span><br></code></pre></td></tr></table></figure><p><u>Script logic</u></p><ul><li>Backup all databases except for some required databases</li><li>Truncate necessary characters when the length is larger than<code>128</code></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@name</span>_small NVARCHAR(<span class="hljs-number">128</span>) <br><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@path</span>_small NVARCHAR(<span class="hljs-number">512</span>)  <br><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@fileName</span>_small NVARCHAR(<span class="hljs-number">512</span>) <br><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@fileDate</span>_small NVARCHAR(<span class="hljs-number">40</span>) <br><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@errorMessage</span> NVARCHAR(<span class="hljs-number">256</span>)<br><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@dbName</span> NVARCHAR(<span class="hljs-number">128</span>) <br><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@counter</span> <span class="hljs-type">int</span><br><br><span class="hljs-comment">-- specify database backup directory</span><br><span class="hljs-keyword">SET</span> <span class="hljs-variable">@path</span>_small <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\Backup\&#x27;</span>   <br><br><span class="hljs-comment">-- specify filename format</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@fileDate</span>_small <span class="hljs-operator">=</span> replace(<span class="hljs-keyword">convert</span>(<span class="hljs-type">varchar</span>, getdate(),<span class="hljs-number">101</span>),<span class="hljs-string">&#x27;/&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>) <span class="hljs-operator">+</span> replace(<span class="hljs-keyword">convert</span>(<span class="hljs-type">varchar</span>, getdate(),<span class="hljs-number">108</span>),<span class="hljs-string">&#x27;:&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>) <br><br><span class="hljs-comment">-- Cursor for small databases </span><br><span class="hljs-keyword">DECLARE</span> db_cursor_small <span class="hljs-keyword">CURSOR</span> READ_ONLY <span class="hljs-keyword">FOR</span>  <br><span class="hljs-keyword">SELECT</span> name <br><span class="hljs-keyword">FROM</span> master.sys.databases <br><span class="hljs-keyword">WHERE</span> name <br><span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;WSS_Content_xchange&#x27;</span>,<span class="hljs-string">&#x27;tempdb&#x27;</span>)  <span class="hljs-comment">-- Fill in databases you want to exclude here</span><br><span class="hljs-keyword">AND</span> state <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-comment">-- database is online</span><br><span class="hljs-keyword">AND</span> is_in_standby <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-comment">-- database is not read only for log shipping</span><br><br>PRINT(<span class="hljs-string">&#x27;The backup script will skip the following databases as required:&#x27;</span>)<br>PRINT N<span class="hljs-string">&#x27;WSS_Content_xchange&#x27;</span><br>PRINT N<span class="hljs-string">&#x27;tempdb&#x27;</span><br>PRINT(<span class="hljs-string">&#x27;The backup script will skip the following databases as they are not ONLINE:&#x27;</span>)<br><span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@xmltmp</span> xml <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> name, state_desc <span class="hljs-keyword">FROM</span> sys.databases <span class="hljs-keyword">where</span> state_desc <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">&#x27;ONLINE&#x27;</span> <span class="hljs-keyword">FOR</span> XML AUTO)<br>PRINT <span class="hljs-keyword">CONVERT</span>(NVARCHAR(MAX), <span class="hljs-variable">@xmltmp</span>)<br><br><span class="hljs-keyword">OPEN</span> db_cursor_small   <br><span class="hljs-keyword">FETCH</span> NEXT <span class="hljs-keyword">FROM</span> db_cursor_small <span class="hljs-keyword">INTO</span> <span class="hljs-variable">@name</span>_small   <br><br><span class="hljs-keyword">SET</span> <span class="hljs-variable">@counter</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br> <br>WHILE @<span class="hljs-variable">@FETCH</span>_STATUS <span class="hljs-operator">=</span> <span class="hljs-number">0</span>   <br><span class="hljs-keyword">BEGIN</span><br>   <span class="hljs-keyword">SET</span> <span class="hljs-variable">@counter</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@counter</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span><br>   <span class="hljs-comment">-- Truncate database name if too long</span><br>   IF len(<span class="hljs-variable">@name</span>_small<span class="hljs-operator">+</span><span class="hljs-string">&#x27;_&#x27;</span><span class="hljs-operator">+</span><span class="hljs-variable">@fileDate</span>_small) <span class="hljs-operator">&gt;</span> <span class="hljs-number">128</span><br><span class="hljs-keyword">SET</span> <span class="hljs-variable">@dbName</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">LEFT</span>(<span class="hljs-variable">@name</span>_small,len(<span class="hljs-variable">@name</span>_small)<span class="hljs-operator">-</span>len(<span class="hljs-string">&#x27;_&#x27;</span><span class="hljs-operator">+</span><span class="hljs-variable">@fileDate</span>_small))<span class="hljs-operator">+</span><span class="hljs-string">&#x27;_&#x27;</span><span class="hljs-operator">+</span><span class="hljs-variable">@fileDate</span>_small<br>   <span class="hljs-keyword">ELSE</span> <br><span class="hljs-keyword">SET</span> <span class="hljs-variable">@dbName</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@name</span>_small <span class="hljs-operator">+</span> <span class="hljs-string">&#x27;_&#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">@fileDate</span>_small<br>   PRINT(<span class="hljs-string">&#x27;-------------------&#x27;</span>)<br>   PRINT(<span class="hljs-string">&#x27;Start backup database: &#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">@name</span>_small <span class="hljs-operator">+</span> <span class="hljs-string">&#x27; AS &#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">@dbName</span>)<br><br>   <span class="hljs-keyword">SET</span> <span class="hljs-variable">@fileName</span>_small <span class="hljs-operator">=</span> <span class="hljs-variable">@path</span>_small <span class="hljs-operator">+</span> <span class="hljs-variable">@dbName</span> <span class="hljs-operator">+</span> <span class="hljs-string">&#x27;.BAK&#x27;</span><br>   <span class="hljs-keyword">SET</span> <span class="hljs-variable">@errorMessage</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Verify failed. Backup information for database &#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-variable">@name</span>_small <span class="hljs-operator">+</span> <span class="hljs-string">&#x27; not found.&#x27;</span><br>   BACKUP DATABASE <span class="hljs-variable">@name</span>_small <span class="hljs-keyword">TO</span> DISK <span class="hljs-operator">=</span> <span class="hljs-variable">@fileName</span>_small <span class="hljs-keyword">WITH</span> NOFORMAT, NOINIT,<br>   NAME <span class="hljs-operator">=</span> <span class="hljs-variable">@dbName</span>, <span class="hljs-keyword">SKIP</span>, REWIND, NOUNLOAD, COMPRESSION, STATS <span class="hljs-operator">=</span> <span class="hljs-number">10</span><br>   <span class="hljs-keyword">DECLARE</span> <span class="hljs-variable">@backupSetId</span> <span class="hljs-keyword">AS</span> <span class="hljs-type">int</span><br>   <span class="hljs-keyword">SELECT</span> <span class="hljs-variable">@backupSetId</span> <span class="hljs-operator">=</span> position <span class="hljs-keyword">FROM</span> msdb..backupset <br>   <span class="hljs-keyword">WHERE</span> database_name <span class="hljs-operator">=</span> <span class="hljs-variable">@name</span>_small <br>   <span class="hljs-keyword">AND</span> backup_set_id<span class="hljs-operator">=</span>(<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">max</span>(backup_set_id) <span class="hljs-keyword">FROM</span> msdb..backupset <span class="hljs-keyword">WHERE</span> database_name <span class="hljs-operator">=</span> <span class="hljs-variable">@name</span>_small)<br>   IF <span class="hljs-variable">@backupSetId</span> <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">BEGIN</span> RAISERROR(<span class="hljs-variable">@errorMessage</span>, <span class="hljs-number">16</span>, <span class="hljs-number">1</span>) <span class="hljs-keyword">END</span><br>   RESTORE VERIFYONLY <span class="hljs-keyword">FROM</span>  DISK <span class="hljs-operator">=</span> <span class="hljs-variable">@fileName</span>_small <span class="hljs-keyword">WITH</span>  FILE <span class="hljs-operator">=</span> <span class="hljs-variable">@backupSetId</span>,  NOUNLOAD,  NOREWIND<br>  <br>   <span class="hljs-keyword">FETCH</span> NEXT <span class="hljs-keyword">FROM</span> db_cursor_small <span class="hljs-keyword">INTO</span> <span class="hljs-variable">@name</span>_small   <br><span class="hljs-keyword">END</span>   <br>PRINT(<span class="hljs-string">&#x27;-------------------&#x27;</span>)<br>PRINT(<span class="hljs-string">&#x27;Total backups:&#x27;</span>)<br>PRINT(<span class="hljs-variable">@counter</span>)<br><br><span class="hljs-keyword">CLOSE</span> db_cursor_small   <br><span class="hljs-keyword">DEALLOCATE</span> db_cursor_small<br><br></code></pre></td></tr></table></figure><img src="/2022/07/05/Script_Backup%20databases%20iteratively%20and%20truncate%20name/image001.png" class="" title="Script result"><blockquote><p>This was the very first T-SQL script I write when I interned as aSupport Engineer at Microsoft.</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Script</category>
      
    </categories>
    
    
    <tags>
      
      <tag>T-SQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Server 2012 Internal Note_SQL Server Architecture and Configuration</title>
    <link href="/2022/06/29/SQL%20Server%202012%20Internal%20Note_SQL%20Server%20Architecture%20and%20Configuration/"/>
    <url>/2022/06/29/SQL%20Server%202012%20Internal%20Note_SQL%20Server%20Architecture%20and%20Configuration/</url>
    
    <content type="html"><![CDATA[<h2id="sql-server-2012-internal-note_sql-server-architecture-and-configuration">SQLServer 2012 Internal Note_SQL Server Architecture and Configuration</h2><h3 id="sql-server-editions">SQL Server Editions</h3><p><strong>Verify what edition you are running</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> SERVERPROPERTY(<span class="hljs-string">&#x27;Edition&#x27;</span>);<br><span class="hljs-keyword">SELECT</span> SERVERPROPERTY(<span class="hljs-string">&#x27;EngineEdition&#x27;</span>);<br><span class="hljs-comment">-- EngineEdition = 3, Enterprise, Enterprise Evaluation, or Developer</span><br><span class="hljs-comment">-- EngineEdition = 2, Standard, Web, or Business Intelligence, and fewer features are available</span><br><span class="hljs-comment">-- EngineEdition = 4, Express</span><br><span class="hljs-comment">-- EngineEdition = 5, SQL Azure</span><br></code></pre></td></tr></table></figure><h3 id="sql-tools">SQL Tools</h3><ol type="1"><li>For graphical system, use client tool as SQL Server ManagementStudio.</li><li>For non-graphical system, use commend line tools as SQLCMD in SQLPowerShell.</li></ol><h2 id="sql-server-metadata">SQL Server Metadata</h2><h3 id="system-base-tables">System base tables</h3><p>System base tables store information about the SQL server, and areused for internal purposes within the Databased Engine.</p><p><strong>View names of all system tables as an admin</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE master;<br><span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> sys.objects<br><span class="hljs-keyword">WHERE</span> type_desc <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;SYSTEM_TABLE&#x27;</span>;<br></code></pre></td></tr></table></figure><p>The <strong>only</strong> way to see the data in the system basetable is to make connection using DAC (dedicated administratorconnection).</p><p>In SQL Server 2012, three types of system metadata objects areintended for general use: Compatibility Views, Catalog Views, andDynamic Management Objects.</p><h3 id="compatibility-views">Compatibility Views</h3><p>Compatibility views provides the access to a subset of the SQL Server2000 system tables and are accessible from any database, backwardcompatibility only (no metadata related to added features)</p><h3 id="catalog-views">Catalog Views</h3><p>SQL Server 2005 introduced a set of catalog views as a generalinterface to the persisted system metadata.</p><p>All catalog views (as well as the Dynamic Management Objects andcompatibility views) are in the <code>sys</code> schema, which you mustreference by name when you access the objects.</p><p><strong>Reference a catalog view called<code>objects</code></strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.objects;<br></code></pre></td></tr></table></figure><p><strong>Columns displayed for catalog views vs compatibilityviews</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.databases;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sysdatabases; <br><span class="hljs-comment">/* Interchangable</span><br><span class="hljs-comment">SELECT * FROM sys.sysdatabases;</span><br><span class="hljs-comment">SELECT * FROM sysdatabases;</span><br><span class="hljs-comment">SELECT * FROM dbo.sysdatabases;</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>There are more columns for <code>SELECT * FROM sys.databases</code>,each possible database property has its own column in<code>sys.databases</code>.</p><figure><imgsrc="/2022/06/29/SQL%20Server%202012%20Internal%20Note_SQL%20Server%20Architecture%20and%20Configuration/image-20220601111344995.png"alt="image-20220601111344995" /><figcaption aria-hidden="true">image-20220601111344995</figcaption></figure><p>As a view, <code>sys.databases</code> can be queried andfiltered:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- Find databases are in the simple recovery model</span><br><span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> sys.databases<br><span class="hljs-keyword">WHERE</span> recovery_model_desc <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;SIMPLE&#x27;</span>;<br></code></pre></td></tr></table></figure><p><strong>Inheritance model of catalog views</strong></p><p>The base views contain a subset of columns and a superset of rows,and the derived views contain a superset of columns and a subset ofrows.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.objects;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.tables;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.views;<br></code></pre></td></tr></table></figure><p><code>sys.objects</code> contains all the columns for attributescommon to all types of objects and shows metadata for procedures andviews in addition to that for tables.</p><p><code>sys.tables</code> contains all the columns in<code>sys.object</code> and additional columns that are meaningful fortables, and shows only rows for tables.</p><figure><imgsrc="/2022/06/29/SQL%20Server%202012%20Internal%20Note_SQL%20Server%20Architecture%20and%20Configuration/image-20220601121558169.png"alt="image-20220601121558169" /><figcaption aria-hidden="true">image-20220601121558169</figcaption></figure><blockquote><p>Note that metadata appearing only in the <code>msdb</code> databaseisn‚Äôt available through catalog views but is still available in systemtables, in the schema <code>dbo</code>.</p></blockquote><p><strong>See definition of views</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- See the definition of sys.tables</span><br><span class="hljs-comment">-- Method 1</span><br><span class="hljs-keyword">SELECT</span> object_definition (object_id(<span class="hljs-string">&#x27;sys.tables&#x27;</span>));<br><span class="hljs-comment">-- Method 2</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.system_sql_modules<br><span class="hljs-keyword">WHERE</span> object_id <span class="hljs-operator">=</span> object_id(<span class="hljs-string">&#x27;sys.tables&#x27;</span>);<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/29/SQL%20Server%202012%20Internal%20Note_SQL%20Server%20Architecture%20and%20Configuration/image-20220601122525275.png"alt="image-20220601122525275" /><figcaption aria-hidden="true">image-20220601122525275</figcaption></figure><h3 id="dynamic-management-objects">Dynamic Management Objects</h3><p>DMV, Dynamic Management Objects include both views and functions,provides internal behavior of SQL Server, some of them allow tracking ofdetailed resource history, they are all in <code>sys</code> schema andhave a name that starts with <code>dm_</code>.</p><p>The DMVs aren‚Äôt based on real tables stored in database files but arebased on internal server structures</p><p><strong>Main categories of DMVs</strong></p><table><thead><tr class="header"><th>Category</th><th>Contains</th><th>Example</th></tr></thead><tbody><tr class="odd"><td><code>dm_exec_*</code></td><td>Information about user execution code and connections</td><td><code>sys.dm_exec_sessions</code></td></tr><tr class="even"><td><code>dm_os_*</code></td><td>Low-level system information such as memory and scheduling</td><td><code>sys.dm_os_schedulers</code></td></tr><tr class="odd"><td><code>dm_tran_*</code></td><td>Information about current transactions</td><td><code>sys.dm_tran_locks</code></td></tr><tr class="even"><td><code>dm_logpool*</code></td><td>Details about log pools used to manage SQL Server 2012‚Äôs logcache</td><td></td></tr><tr class="odd"><td><code>dm_io_*</code></td><td>Keeps track of input/output activity on network and disks</td><td><code>sys.dm_io_virtual_file_stats</code></td></tr><tr class="even"><td><code>dm_db_*</code></td><td>Details about databases and database objects such as indexes</td><td><code>sys.dm_db_index_operational_stats</code></td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- Return statistics for the log file in the AdventureWorks2019 database</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.dm_io_virtual_file_stats(DB_ID(N<span class="hljs-string">&#x27;AdventureWorks2019&#x27;</span>), <span class="hljs-number">2</span>);  <br>GO<br><span class="hljs-comment">-- Returns information for all tables and indexes within the instance of SQL Server</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.dm_db_index_operational_stats( <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">NULL</span>);    <br>GO<br></code></pre></td></tr></table></figure><h3 id="other-metadata">Other Metadata</h3><h4 id="information-schema-views">Information Schema Views</h4><p>Information schema views, introduced in SQL Server 7.0, were theoriginal system table-independent view of the SQL Server metadata. Theinformation schema views show only objects compatible with the SQL-92standard.</p><h4 id="system-functions">System Functions</h4><p><strong>Property function</strong></p><p>Property functions provide individual values for many SQL Serverobjects as well as for SQL Server databases and the SQL Server instanceitself.</p><p>Return values are <strong>scalars</strong>, they can be used asvalues returned by SELECT statements and as values to populate columnsin tables.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- View the recovery model of a single database</span><br><span class="hljs-keyword">SELECT</span> DATABASEPROPERTYEX(<span class="hljs-string">&#x27;msdb&#x27;</span>, <span class="hljs-string">&#x27;Recovery&#x27;</span>);<br><span class="hljs-comment">-- View the recovery model of all databases</span><br><span class="hljs-comment">-- _desc are &quot;friendly name&quot; columns</span><br><span class="hljs-keyword">SELECT</span> name, recovery_model, recovery_model_desc<br><span class="hljs-keyword">FROM</span> sys.databases;<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/29/SQL%20Server%202012%20Internal%20Note_SQL%20Server%20Architecture%20and%20Configuration/image-20220601155752867.png"alt="image-20220601155752867" /><figcaption aria-hidden="true">image-20220601155752867</figcaption></figure><p><strong>Short-cuts for catalog view access</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- Find the database ID for the AdventrureWorks2019</span><br><span class="hljs-comment">-- 1</span><br><span class="hljs-keyword">SELECT</span> database_id<br><span class="hljs-keyword">FROM</span> sys.databases<br><span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AdventureWorks2019&#x27;</span>;<br><span class="hljs-comment">-- 2</span><br><span class="hljs-keyword">SELECT</span> DB_ID(<span class="hljs-string">&#x27;AdventureWorks2019&#x27;</span>);<br></code></pre></td></tr></table></figure><h4 id="system-stored-procedures">System Stored Procedures</h4><p>System stored procedures are the original metadata access tool.</p><p>Most of the system stored procedures introduced in the very firstversion of SQL Server are still available.</p><p>With the system stored procedures, you have to accept the data thatit returns.</p><p>Better to use catalog views: <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- See databases that the login sue owns</span><br><span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> sys.databases<br><span class="hljs-keyword">WHERE</span> suser_sname(owner_sid) <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;sue&#x27;</span>;<br><span class="hljs-comment">-- See databases that are in a lower compatibility level</span><br><span class="hljs-keyword">SELECT</span> name <span class="hljs-keyword">FROM</span> sys.databases<br><span class="hljs-keyword">WHERE</span> compatibility_level <span class="hljs-operator">&lt;</span> <span class="hljs-number">150</span>;<br></code></pre></td></tr></table></figure></p><h3 id="layers-of-metadata">Layers Of Metadata</h3><p>‚ÄúOther Metadata‚Äù refers to system information not contained in systemtables.</p><p>Preferred interfaces to the system metadata are the <strong>catalogviews</strong> and system functions.</p><figure><imgsrc="/2022/06/29/SQL%20Server%202012%20Internal%20Note_SQL%20Server%20Architecture%20and%20Configuration/image-20220601165008965.png"alt="image-20220601165008965" /><figcaption aria-hidden="true">image-20220601165008965</figcaption></figure><h2 id="components-of-the-sql-server-engine">Components of the SQLServer engine</h2><figure><imgsrc="/2022/06/29/SQL%20Server%202012%20Internal%20Note_SQL%20Server%20Architecture%20and%20Configuration/image-20220609144911920.png"alt="The major components of the SQL Server Database Engine." /><figcaption aria-hidden="true">The major components of the SQL ServerDatabase Engine.</figcaption></figure><h3 id="protocols">Protocols</h3><p>Translate client requests for relational engine, translate resultsfor clients.</p><p>The SQL Server Network Interface (SNI) protocol layer on both theserver and client computers encapsulates the TDS (tabular data stream)packet inside a standard communication protocol, such as TCP/IP or NamedPipes.</p><p>SQL Server can support multiple protocols; each client connects toSQL Server with a single protocol.</p><p><strong>Available protocols:</strong></p><ul><li>Shared Memory<ul><li>The simplest protocol</li><li>Clients using this protocol can connect to only a SQL Serverinstance running on the same computer</li><li>Use this protocol for trouble-shooting when you suspect that theother protocols are configured incorrectly.</li></ul></li><li>Named Pipes<ul><li>For local area network (LANs)</li><li>A portion of memory is used by one process (output) to passinformation (input) to another process (local or remote computer)</li></ul></li><li>TCP/IP<ul><li>Most widely used</li><li>Communicate across interconnected computer networks with diversehardware architectures and operating systems</li><li>Includes standards for routing network traffic and offers advancedsecurity features.</li></ul></li></ul><h3 id="query-processor-relational-engine">Query processor (Relationalengine)</h3><p>Determine exactly what your query needs to do and the best way to doit.</p><h4 id="parsing-and-binding-components">Parsing and bindingcomponents</h4><p>Process queries into <em>query trees</em>, raise syntax or nameresolution error and identify where the error occurs.</p><p>Parsing component:</p><ol type="1"><li>Check proper syntax and spelling of keywords</li></ol><p>Binding component:</p><ol type="1"><li>Resolve object names into unique object ID</li></ol><p>After parsing and binding, convert queries into <em>querytrees</em></p><h4 id="the-query-optimizer">The Query Optimizer</h4><p>Takes the <em>query tree</em>, compile entire command batch andoptimize optimizable queries, result in an <em>execution plan</em>.</p><p>Non-optimizable statements:</p><ol type="1"><li>Compile into an internal form</li><li>Such as flow-of-control and Data Definition Language (DDL)commands</li></ol><p>Optimizable statements:</p><ol type="1"><li>Pass to Query Optimizer</li><li>Such as Data Manipulation Language (DML) statements SELECT, INSERT,UPDATE, DELETE, and MERGE</li></ol><p>Steps:</p><ol type="1"><li>Normalization<ol type="1"><li>breaks down a single query into multiple, fine-grained queries</li></ol></li><li>Optimization<ol type="1"><li>Determine the most cost-effective execution plan based on internalmetrics that include estimated memory requirements, CPU utilization, andnumber of required I/Os involving sampling data (<em>distributionstatistics</em>).</li><li>Avoid exhaustive optimization to ensure the time for optimizing isless than executing any plan.</li></ol></li><li>Compilation<ol type="1"><li>Compile <em>normalized tree</em> into <em>execution plan</em> (adata structure)</li></ol></li></ol><p>The execution plan:</p><ul><li>A data structure</li><li>Includes actual commands, steps for checking constraints</li><li>Steps for calling a trigger are not compiled into the executionplan, the existence of a trigger can cause many more steps to beexecuted.</li></ul><h4 id="the-query-executor">The query executor</h4><p>Run the execution plan, dispatch all commands in the plan.</p><p>Most commands require interaction with the storage engine to modifyor retrieve data and to manage transactions and locking. (Object Linkingand Embedding (OLE) DB rowsets involved)</p><h3 id="storage-engine">Storage engine</h3><p>Include components responsible for accessing and managing data in thedatabase.</p><h4 id="access-methods">Access methods</h4><p>Contains components to open a table, retrieve qualified data, andupdate data.</p><p>Used for any data modification operations that need to modify indexentries (SELECT, UPDATE, DELETE)</p><h5 id="row-and-index-operations">Row and index operations</h5><p>Row operation:</p><ul><li>Manipulated on data.</li><li>Retrieves, modifies, and performs operations on individualrows.</li><li>Can handle large object type (LOB)‚Äîtext, image, or ntext</li></ul><p>Index operation:</p><ul><li>Manipulated on index pages</li><li>Maintains and supports searches on B-trees</li><li>An index is structured as a tree, with a root page andintermediate-level and lower level pages</li></ul>]]></content>
    
    
    <categories>
      
      <category>Reading</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Server IAM Page</title>
    <link href="/2022/06/26/SQL%20Server%20IAM%20Page/"/>
    <url>/2022/06/26/SQL%20Server%20IAM%20Page/</url>
    
    <content type="html"><![CDATA[<h1 id="sql-server-iam-page">SQL Server IAM Page</h1><p>Index Allocation Map (IAM) pages keep track of the extents in a 4 GBsection of a database file used by an allocation unit.</p><p><u>Allocation unit</u></p><p>An allocation unit is a set of pages belonging to a single partitionin a table or index and comprises pages of one of three storagetypes:</p><ol type="1"><li>pages holding regular in-row data</li><li>pages holding Large Object (LOB) data</li><li>pages holding row-overflow data</li></ol><p><u>Multiple IAM pages</u></p><p>A single IAM page covers only a 4 GB section of a single file.</p><ol type="1"><li>if the partition spans files</li><li>if the file is more than 4 GB in size</li><li>if the partition uses pages in more than one 4 GB section</li></ol><p><u>IAM page structure</u></p><ol type="1"><li>96-byte page header</li><li>An IAM page header<ol type="1"><li>Contains eight page-pointer slots</li></ol></li><li>Contains bitmap<ol type="1"><li>A set of bits that map a range of extents onto a file</li><li>Each bit of the bitmap represents an extent in the range</li><li>1, is allocated; 0, unallocated</li></ol></li></ol><p>Running the defined procedure <code>sp_AllocationMetadata</code> inthe <code>AdventureWorks2019</code>, we can see the page number of thefirst IAM pages.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">EXEC</span> [sp_AllocationMetadata] N<span class="hljs-string">&#x27;HumanResources.Employee&#x27;</span>;<br>GO<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/26/SQL%20Server%20IAM%20Page/image-20220623131334311.png"alt="sp_AllocationMetadata result" /><figcaption aria-hidden="true">sp_AllocationMetadata result</figcaption></figure><p>As we can see, the object <code>Employee</code> has 6 partitions. Forthe partition that has partition ID of <code>72057594056933376</code>,its first IAM page is <code>2105</code>.</p><p>Then let's take a closer look at the page <code>2105</code>.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">DBCC TRACEON(<span class="hljs-number">3604</span>)<br>DBCC PAGE(<span class="hljs-string">&#x27;AdventureWorks2019&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2105</span>, <span class="hljs-number">3</span>)<br>DBCC TRACEOFF(<span class="hljs-number">3604</span>)<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/26/SQL%20Server%20IAM%20Page/image-20220623133029678.png"alt="Mode 3 result" /><figcaption aria-hidden="true">Mode 3 result</figcaption></figure><p>The 8 slots listed under the <code>Single Page Allocations</code>mean they are in the mixed extent.</p><p>Following the <code>Extent Alloc Status Slot</code> are pages inuniform extent. The result suggests that page <code>12640</code> andpage <code>12672</code> are allocated</p><p>We can check the allocation status by running the query:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> allocated_page_file_id <span class="hljs-keyword">AS</span> [FileID],<br>allocated_page_page_id <span class="hljs-keyword">AS</span> [PageID],<br>page_type_desc,extent_page_id<span class="hljs-operator">/</span><span class="hljs-number">8</span> <span class="hljs-keyword">AS</span> ExtentID,<br>is_mixed_page_allocation,<br>extent_page_id <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">First</span> Page <span class="hljs-keyword">in</span> Extent],<br>extent_page_id<span class="hljs-operator">+</span><span class="hljs-number">7</span> <span class="hljs-keyword">AS</span> [LastPage <span class="hljs-keyword">in</span> Extent],<br>is_allocated <br><span class="hljs-keyword">FROM</span> sys.dm_db_database_page_allocations(db_id(),object_id(<span class="hljs-string">&#x27;HumanResources.Employee&#x27;</span>),<span class="hljs-keyword">null</span>,<span class="hljs-keyword">null</span>,<span class="hljs-string">&#x27;detailed&#x27;</span>)  <br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> allocated_page_page_id<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/26/SQL%20Server%20IAM%20Page/image-20220623134406196.png"alt="Allocation status result" /><figcaption aria-hidden="true">Allocation status result</figcaption></figure><p>As shown in the result, page <code>12640</code> and<code>12672</code> are allocated, and clearly there are<code>(12672-12640)/8=4</code> extents between them, which is proved bythe corresponding extent ID, <code>1580</code> and<code>1584</code>.</p><p>Let's validate our observation by dive into the page in mode 1.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">DBCC TRACEON(<span class="hljs-number">3604</span>)<br>DBCC PAGE(<span class="hljs-string">&#x27;AdventureWorks2019&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2105</span>, <span class="hljs-number">1</span>)<br>DBCC TRACEOFF(<span class="hljs-number">3604</span>)<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/26/SQL%20Server%20IAM%20Page/image-20220623140010858.png"alt="Mode 1 result" /><figcaption aria-hidden="true">Mode 1 result</figcaption></figure><ol type="1"><li><p><code>0000381f</code> is fixed.</p></li><li><p>Slot 0 is for mixed extent; Slot 1 is for the uniformextent</p></li><li><p>For string <code>00000000 0010</code> and<code>0100 00000000</code> in Slot 1</p><p>Each bit in the table stands for one extent.</p><p>Note we need to convert little-endian into normal binary.</p><table><thead><tr class="header"><th>HEX</th><th>00 00 00 00 00</th><th>10</th></tr></thead><tbody><tr class="odd"><td>Binary (Little endian)</td><td>many 0</td><td>0001 0000</td></tr><tr class="even"><td>Binary (normal)</td><td>many 0</td><td>0000 1000</td></tr></tbody></table><table><thead><tr class="header"><th>HEX</th><th>01</th><th>00 00 00 00 00</th></tr></thead><tbody><tr class="odd"><td>Binary (Little endian)</td><td>0000 0001</td><td>many 0</td></tr><tr class="even"><td>Binary (normal)</td><td>1000 0000</td><td>many 0</td></tr></tbody></table><p>That is, for <code>10 01</code> we have<code>0000 1000 1000 0000</code> in binary, the difference is 4 extent,from <code>1580</code> to <code>1584</code>.</p><figure><imgsrc="/2022/06/26/SQL%20Server%20IAM%20Page/image-20220624094601306.png"alt="Endian example" /><figcaption aria-hidden="true">Endian example</figcaption></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Server 2012 Internal Note_Databases and database file</title>
    <link href="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/"/>
    <url>/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/</url>
    
    <content type="html"><![CDATA[<h1 id="sql-server-2012-internal-note_databases-and-database-file">SQLServer 2012 Internal Note_Databases and database file</h1><p>A Microsoft SQL Server database is a collection of objects that holdand manipulate data.</p><ul><li>It‚Äôs a collection of many objects (tables, views, stored procedures,functions, and constraints)</li><li>It‚Äôs owned by a single SQL Server login account</li><li>It maintains a set of user accounts, roles, schemas, andsecurity</li><li>It has a set of system tables</li><li>It‚Äôs the primary unit of recovery and maintains logical consistencyamong objects within it</li><li>It has and manages its transaction logs</li><li>It can span multiple disk drives and operating system files</li><li>It can range in size from 2 MB to a technical limit of 1524,272TB.</li><li>It can grow and shrink automatically or manually</li><li>It can have specific properties enabled or disabled</li></ul><h2 id="understanding-database-files">Understanding database files</h2><p>A database file is an operating system file</p><p>A database spans at least two (one for data one for the transactionlog) or more database files, and the files are specified when a databaseis created or altered.</p><p><strong>Three types of database files:</strong></p><ol type="1"><li>Primary data files<ol type="1"><li><p>One for each database</p></li><li><p>Keeps track of all the rest of the files and stores data</p></li><li><p><code>.mdf</code></p></li><li><p>Has pointers into a table in the master database that containsinformation about all the files belonging to the database</p><ol type="1"><li><p>Use <code>SELECT * FROM sys.database_files</code> to see thetable</p><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220621124602041.png"alt="Files belong to Archive database" /><figcaption aria-hidden="true">Files belong to Archivedatabase</figcaption></figure></li></ol></li></ol></li><li>Secondary data files<ol type="1"><li>Zero or more for each data files</li><li><code>.ndf</code></li></ol></li><li>Log files<ol type="1"><li>At least one for each database</li><li>Contains the information necessary to recover all transactions in adatabase</li><li><code>.ldf</code></li></ol></li></ol><p><strong>Five properties of each database file:</strong></p><ol type="1"><li>a logical filename</li><li>a physical filename</li><li>an initial size</li><li>a maximum size</li><li>a growth increment</li></ol><p>Information on database files can be seen in<code>sys.database_files</code> view.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.database_files<br></code></pre></td></tr></table></figure><h3 id="creating-a-database">Creating a database</h3><p>Use <strong>Object Explorer</strong> in Management Studio or<code>CREATE DATABASE</code>.</p><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220621093314483.png"alt="Create Database" /><figcaption aria-hidden="true">Create Database</figcaption></figure><p><u><code>CREATE DATABASE newdb</code></u></p><ol type="1"><li>Create a <code>newdb</code> database with default values, withdefault size, on two files with logical names <code>newdb</code> and<code>newdb_log</code> and corresponding physical files,<code>newdb.mdf</code> and <code>newdb_log.ldf</code> are created in thedefault data directory</li><li>Permission (who can create a database):<ol type="1"><li>Anyone in the sysadmin role</li><li>Anyone has CONTROL or ALTER permission on the server</li><li>Anyone has CREATE DATABASE permission</li></ol></li><li>This command is case-insensitive</li><li>Default size<ol type="1"><li>Data file: 3 MB (size of the primary data file of the modeldatabase)</li><li>Log file: 0.75 MB</li></ol></li><li>Database owner<ol type="1"><li>The login account that created the database</li><li>A database can have only one actual owner</li><li>When the owner uses the database, the user name would be<code>dbo</code></li></ol></li></ol><p><u>The model database</u></p><ol type="1"><li>SQL Server copies the model database when creating a newdatabase</li><li>Objects and database options are copied in all subsequently createddatabases</li><li>Use <code>SELECT * FROM sys.objects</code> to see objects in themodel database</li></ol><h3 id="using-create-database-an-example">Using CREATE DATABASE: anexample</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE Archive<br><span class="hljs-keyword">ON</span><br><span class="hljs-keyword">PRIMARY</span><br>( NAME <span class="hljs-operator">=</span> Arch1,<br>FILENAME <span class="hljs-operator">=</span><br>    <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\DATA\archdat1.mdf&#x27;</span>,<br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">100</span>MB,<br>MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">200</span>MB,<br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">20</span>MB),<br>( NAME <span class="hljs-operator">=</span> Arch2,<br>FILENAME <span class="hljs-operator">=</span><br>    <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\DATA\archdat2.ndf&#x27;</span>,<br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">10</span>GB,<br>MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">50</span>GB,<br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">250</span>MB) # file expansion size<br>LOG <span class="hljs-keyword">ON</span><br>( NAME <span class="hljs-operator">=</span> Archlog1,<br>FILENAME <span class="hljs-operator">=</span><br>    <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\DATA\archlog1.ldf&#x27;</span>,<br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">2</span>GB,<br>MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">10</span>GB,<br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">100</span>MB);<br></code></pre></td></tr></table></figure><p>If you find that by executing the query there is error message:</p><p><code>Could not obtain exclusive lock on database 'model'. Retry the operation later.</code></p><p>Use this to see which session is occupying the model database:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> request_session_id<br><span class="hljs-keyword">from</span> sys.dm_tran_locks<br><span class="hljs-keyword">where</span> resource_type <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;database&#x27;</span> <span class="hljs-keyword">and</span><br>      resource_database_id <span class="hljs-operator">=</span> <span class="hljs-number">3</span> <span class="hljs-keyword">and</span><br>      request_type <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;LOCK&#x27;</span> <span class="hljs-keyword">and</span><br>      request_status <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;GRANT&#x27;</span>;<br></code></pre></td></tr></table></figure><p>Then just <code>KILL</code> the session.</p><h2 id="expanding-or-shrinking-a-database">Expanding or shrinking adatabase</h2><h3 id="automatic-file-expansion">Automatic file expansion</h3><p><code>FILEGROWTH</code> property determines how the file expands withsuffix TB, GB, MB, KB, or %.</p><p><code>MAXSIZE</code> property sets an upper limit on the filesize</p><p>Enabling autogrow might prevent some failures due to unexpectedincreases in data volume.</p><p>Shortcomings:</p><ol type="1"><li>Time-consuming if fast file initialization is not activated</li><li>Result in physical fragmentation</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-keyword">Returns</span> a list <span class="hljs-keyword">of</span> the amount <span class="hljs-keyword">of</span> <span class="hljs-keyword">free</span> disk space <span class="hljs-keyword">on</span> <span class="hljs-keyword">each</span> <span class="hljs-keyword">of</span> your <span class="hljs-keyword">local</span> volumes<br><span class="hljs-keyword">exec</span> xp_fixeddrives<br></code></pre></td></tr></table></figure><h3 id="manual-file-expansion">Manual file expansion</h3><p>Use <code>ALTER DATABASE</code> command with <code>MODIFY FILE</code>option to change the <code>SIZE</code> property of the files.</p><p>Note that the new file size must be larger than the current size.</p><h3 id="fast-file-initialization">Fast file initialization</h3><p>Instant file initialization adds space to the data file (not logfiles) without filling the newly added space with zeros (If want filesare zeroed out, use <code>tracefalge 1806</code> or deny<code>SE_MANAGE_VOLUME_NAME</code> rights of your account), the disk isoverwritten when the new data is written to the files.</p><h3 id="automatic-shrinkage">Automatic shrinkage</h3><p>Never recommended (resource-intensive)</p><p>Database property <code>autoshrink</code> controls the option, andhas the same effect as running<code>DBCC SHRINKDATABASE (dbname, 25)</code>.</p><h3 id="manual-shrinkage">Manual shrinkage</h3><h4 id="dbcc-shrinkfile">DBCC SHRINKFILE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"># Attemps <span class="hljs-keyword">to</span> shrink the file <span class="hljs-keyword">to</span> target size <span class="hljs-keyword">in</span> the <span class="hljs-keyword">current</span> database<br>DBCC SHRINKFILE ( &#123;file_name <span class="hljs-operator">|</span> file_id &#125;<br>[, target_size][, &#123;EMPTYFILE <span class="hljs-operator">|</span> NOTRUNCATE <span class="hljs-operator">|</span> TRUNCATEONLY&#125; ] )<br></code></pre></td></tr></table></figure><h4 id="dbcc-shrinkdatabase">DBCC SHRINKDATABASE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"># Shrinks <span class="hljs-keyword">all</span> files <span class="hljs-keyword">in</span> a database (larger than its minimum size)<br># target_percent <span class="hljs-keyword">is</span> a percentage <span class="hljs-keyword">of</span> <span class="hljs-keyword">free</span> space <span class="hljs-keyword">to</span> leave <span class="hljs-keyword">in</span> <span class="hljs-keyword">each</span> file <span class="hljs-keyword">of</span> the database<br>DBCC SHRINKDATABASE (database_name [, target_percent]<br>[, &#123;NOTRUNCATE <span class="hljs-operator">|</span> TRUNCATEONLY&#125; ] )<br></code></pre></td></tr></table></figure><h2 id="using-database-filegroups">Using database filegroups</h2><p>Filegroups are data files in a database grouped for allocation andadministration purposes.</p><p><u>Primary filegroup</u></p><ol type="1"><li>The filegroup containing the primary data file</li><li>Only one primary filegroup exists</li><li>By default, the primary filegroup is the default filegroup</li></ol><p><u>Create filegroups</u></p><p>Use <code>FILEGROUP</code> keyword in the<code>CREATE DATABASE</code> or <code>ALTER DATABASE</code>statement.</p><h3 id="the-default-filegroup">The default filegroup</h3><p>One filegroup always has the <strong>property</strong> ofDEFAULT.</p><p>One default filegroup for each database.</p><p>Change the default filegroup by using <code>ALTER DATABASE</code></p><p>When an object (table or index) is created, it‚Äôs created in thedefault filegroup if no specific filegroup is specified.</p><p><u>Proportional fill</u></p><ol type="1"><li>Data is stored in a proportional fill manner in the file group</li><li>Creating all your files to be the same size is recommended to avoidthe issues of proportional fill</li></ol><p><u>Why use multiple files</u></p><ol type="1"><li>Partial restore</li><li>The flexibility of easily moving the database onto separatedrives</li></ol><p><u>Partial restore using filegroups</u></p><ol type="1"><li>Partial restore and backup (objects created on the restoredfilegroups are available)</li><li>The database goes online as soon as the primary filegroup isrestored</li><li>For large databases and a failure of a subset of the disks</li></ol><h3 id="a-filegroup-creation-example">A FILEGROUP CREATION example</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE Sales <br><span class="hljs-keyword">ON</span> <span class="hljs-keyword">PRIMARY</span> <br>( NAME <span class="hljs-operator">=</span> salesPrimary1, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\salesPrimary1.</span><br><span class="hljs-string">mdf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>, MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">5000</span>, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">1000</span> ), <br>( NAME <span class="hljs-operator">=</span> salesPrimary2, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\salesPrimary2.</span><br><span class="hljs-string">ndf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>, MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">5000</span>, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">1000</span> ), <br>FILEGROUP SalesGroup1 <br>( NAME <span class="hljs-operator">=</span> salesGrp1Fi1e1, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\salesGrp1Fi1e1.</span><br><span class="hljs-string">ndf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">500</span>, MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">3000</span>, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">500</span> ), <br>( NAME <span class="hljs-operator">=</span> salesGrp1Fi1e2, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\salesGrp1Fi1e2.</span><br><span class="hljs-string">ndf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">500</span>, MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">3000</span>, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">500</span> ), <br>FILEGROUP SalesGroup2 <br>( NAME <span class="hljs-operator">=</span> salesGrp2Fi1e1, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\salesGrp2Fi1e1.</span><br><span class="hljs-string">ndf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>, MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">50000</span>, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">5000</span> ), <br>( NAME <span class="hljs-operator">=</span> salesGrp2Fi1e2, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\salesGrp2Fi1e2.</span><br><span class="hljs-string">ndf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>, MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">50000</span>, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">500</span> ) <br>LOG <span class="hljs-keyword">ON</span> <br>( NAME <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Sales_log&#x27;</span>, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\saleslog.ldf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">500</span>MB, MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">2500</span>MB, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">500</span>MB );<br></code></pre></td></tr></table></figure><h3 id="filestream-filegroups">Filestream filegroups</h3><p><u>Filestream filegroups</u></p><ol type="1"><li>Contain one file reference, and the file is specified as anoperating system folder</li><li>The path up to the last folder must exist, and the last folder mustnot exist</li><li>No space is preallocated to the filegroup<ol type="1"><li>The file and filegroup grow as data is added to tables that arecreated with filestream columns</li></ol></li><li>Note that you can‚Äôt move a file from one filegroup to another.</li></ol><p><u>Create filestream filegroups</u></p><p>Before creating it, we need to enable the feature.</p><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220621134152163.png"alt="Enable filestream" /><figcaption aria-hidden="true">Enable filestream</figcaption></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE MyMovieReviews # <span class="hljs-keyword">or</span> <span class="hljs-keyword">ALTER</span> DATABASE <span class="hljs-keyword">for</span> existing databases<br><span class="hljs-keyword">ON</span><br><span class="hljs-keyword">PRIMARY</span> <br> ( NAME <span class="hljs-operator">=</span> Reviews_data,<br> FILENAME <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;c:\data\Reviews_data.mdf&#x27;</span>),<br>FILEGROUP MovieReviewsFSGroup1 <span class="hljs-keyword">CONTAINS</span> FILESTREAM<br> ( NAME <span class="hljs-operator">=</span> Reviews_FS,<br> FILENAME <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;c:\data\Reviews_FS&#x27;</span>) # the path C:\Data must exist, but <br>  # the Reviews_FS subfolder can‚Äôt exist<br>LOG <span class="hljs-keyword">ON</span> ( NAME <span class="hljs-operator">=</span> Reviews_log,<br> FILENAME <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;c:\data\Reviews_log.ldf&#x27;</span>);<br>GO<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220621134333252.png"alt="File structure" /><figcaption aria-hidden="true">File structure</figcaption></figure><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220621134512226.png"alt="File structure" /><figcaption aria-hidden="true">File structure</figcaption></figure><p><code>filestream.hdr</code> file is a FILESTREAM container headerfile, which shouldn‚Äôt be modified or removed.</p><p>When filestream with a filestream filegroup is enabled, we can managefile data using Windows applications.</p><h2 id="altering-a-database">Altering a database</h2><p>The <code>ALTER DATABASE</code> statement can only make changes eachtime it is executed.</p><h3 id="alter-database-examples">ALTER DATABASE examples</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"># Increases the size <span class="hljs-keyword">of</span> a database file<br>USE master <br>GO <br><span class="hljs-keyword">ALTER</span> DATABASE Test1<br>MODIFY FILE <br>( NAME <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;test1dat3&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">2000</span>MB);<br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-keyword">create</span> a <span class="hljs-keyword">new</span> filegroup <span class="hljs-keyword">in</span> a database<br># <span class="hljs-keyword">add</span> two <span class="hljs-number">500</span> MB files <span class="hljs-keyword">to</span> the filegroup<br># make the <span class="hljs-keyword">new</span> filegroup the <span class="hljs-keyword">default</span><br><span class="hljs-keyword">ALTER</span> DATABASE Test1 <br><span class="hljs-keyword">ADD</span> FILEGROUP Test1FG1; <br>GO <br><span class="hljs-keyword">ALTER</span> DATABASE Test1 <br><span class="hljs-keyword">ADD</span> FILE <br>( NAME <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;test1dat4&#x27;</span>, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\t1dat4.ndf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">500</span>MB, <br>MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>MB, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">50</span>MB), <br>( NAME <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;test1dat5&#x27;</span>, <br>FILENAME <span class="hljs-operator">=</span> <br> <span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\t1dat5.ndf&#x27;</span>, <br>SIZE <span class="hljs-operator">=</span> <span class="hljs-number">500</span>MB, <br>MAXSIZE <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>MB, <br>FILEGROWTH <span class="hljs-operator">=</span> <span class="hljs-number">50</span>MB) <br><span class="hljs-keyword">TO</span> FILEGROUP Test1FG1; <br>GO <br><span class="hljs-keyword">ALTER</span> DATABASE Test1 <br>MODIFY FILEGROUP Test1FG1 <span class="hljs-keyword">DEFAULT</span>; <br>GO<br></code></pre></td></tr></table></figure><h3 id="databases-under-the-hood">Databases under the hood</h3><p>A database consists of user-defined space (allocated in one or moreoperating system files) for the permanent storage of user objects suchas tables and indexes.</p><p>Databases are divided into logical pages (of 8 KB each), numberedcontiguously from 0 to N.</p><p><u>Enlarge/Shrink a file</u></p><ol type="1"><li>new space is added to the end of the file</li><li>pages are removed starting at the end of the pages</li></ol><p><u>New a database</u></p><ol type="1"><li><p>A unique database ID created</p></li><li><p>View <code>sys.databases</code> shows basic information abouteach database</p><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220621141438184.png"alt="sys.databases results" /><figcaption aria-hidden="true">sys.databases results</figcaption></figure></li></ol><h3 id="space-allocation">Space allocation</h3><p><u>Extents</u></p><ol type="1"><li>eight logically contiguous pages (or 64 KB of space)</li><li>Types<ol type="1"><li>Uniform extents<ol type="1"><li>All eight pages owned by a single object</li></ol></li><li>Mixed extents<ol type="1"><li>shared by up to eight objects</li></ol></li></ol></li><li>Allocation<ol type="1"><li>For a new table or index, allocates mixed extents</li><li>When the table or index grows to eight pages, all future allocationsuse uniform extents</li></ol></li></ol><p><u>GAM pages</u></p><ol type="1"><li>record which extents have been allocated for any type of use.</li><li>On page 2, another GAM appears every 511,230 pages after the firstGAM on page 2</li><li>Each GAM covers about 64,000 extents, or almost 4 GB of data</li></ol><p><u>SGAM pages</u></p><ol type="1"><li>record which extents are now used as mixed extents and have at leastone unused page</li><li>On page 3, another SGAM appears every 511,230 pages after the firstSGAM on page 3</li><li>each SGAM covers about 64,000 extents, or almost 4 GB of data</li></ol><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220621170801666.png"alt="Bit settings in GAM and SGAM pages" /><figcaption aria-hidden="true">Bit settings in GAM and SGAMpages</figcaption></figure><h2 id="setting-database-options">Setting database options</h2><p>By default, all the options that require ON or OFF have an initialvalue of OFF unless the option was set to ON in the model database.</p><p>All databases created after an option is changed in the model havethe same values as the model.</p><p><code>sys.databases</code> lists the current values of all theoptions.</p><h3 id="state-options">State options</h3><p>State options control who can use the database and for whatoperations:</p><ol type="1"><li><strong>User access state</strong> determines which users can usethe database.</li><li><strong>Status state</strong> determines whether the database isavailable to anybody for use</li><li><strong>Updateability state</strong> determines what operations canbe performed on the database</li></ol><h4 id="single_user-restricted_user-multi_user">SINGLE_USER |RESTRICTED_USER | MULTI_USER</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> DATABASE AdventureWorks <span class="hljs-keyword">SET</span> SINGLE_USER;<br></code></pre></td></tr></table></figure><ol type="1"><li><p>Describe the user access property of a database</p></li><li><p>Mutually exclusive</p></li><li><p>SINGLE_USER</p><ol type="1"><li>Allow only one connection at a time</li></ol></li><li><p>RESTRICTED_USER</p><ol type="1"><li>Allow qualified connections</li><li>Qualified: dbcreator, sysadmin server role, db_owner role</li></ol></li><li><p>MULTI_USER (default)</p><ol type="1"><li>Allow connections with a valid user name</li></ol></li><li><p>Check current option</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> USER_ACCESS_DESC <span class="hljs-keyword">FROM</span> sys.databases<br><span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;&lt;name of database&gt;&#x27;</span>;<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220621172739994.png"alt="Current access option" /><figcaption aria-hidden="true">Current access option</figcaption></figure></li></ol><h4 id="offline-online-emergency">OFFLINE | ONLINE | EMERGENCY</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> DATABASE AdventureWorks <span class="hljs-keyword">SET</span> OFFLINE;<br></code></pre></td></tr></table></figure><ol type="1"><li><p>Describe the status of a database</p></li><li><p>Mutually exclusive</p></li><li><p>ONLINE (default)</p></li><li><p>OFFLINE</p><ol type="1"><li>it‚Äôs closed and shut down cleanly and marked as offline</li><li>cannot be modified</li></ol></li><li><p>EMERGENCY</p><ol type="1"><li>allows you to access the data while you copy it to a newlocation.</li></ol></li><li><p>Check current status</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> state_desc <span class="hljs-keyword">from</span> sys.databases <br><span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AdventureWorks&#x27;</span>;<br></code></pre></td></tr></table></figure><p>Can have another status:</p><ol type="1"><li>RESTORING</li><li>RECOVERING</li><li>RECOVERY_PENDING</li></ol></li></ol><h4 id="read_only-read_write">READ_ONLY | READ_WRITE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> DATABASE AdventureWorks <span class="hljs-keyword">SET</span> READ_ONLY;<br></code></pre></td></tr></table></figure><ol type="1"><li><p>describe a database‚Äôs ability to be updated</p></li><li><p>mutually exclusive</p></li><li><p>READ_WRITE (default)</p><ol type="1"><li>any user with the appropriate permissions can carry out datamodification operations</li></ol></li><li><p>READ_ONLY</p><ol type="1"><li>no INSERT, UPDATE, or DELETE operations can be executed</li><li>automatic recovery will not run when the SQL server isrestarted</li><li>no locks are needed for SELECT</li><li>Cannot shrink databases</li><li>Cannot set to READ_ONLY if any connections are made to thedatabase</li></ol></li><li><p>Check</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> name, is_read_only <span class="hljs-keyword">FROM</span> sys.databases<br><span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AdventureWorks&#x27;</span>;<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220622094135221.png"alt="Updatability status" /><figcaption aria-hidden="true">Updatability status</figcaption></figure><p>1 for READ_ONLY, 0 for READ_WRITE</p></li></ol><h3 id="termination-options">Termination options</h3><p>Termination options determine the behavior of the SQL Server whenseveral state options cannot be set.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> DATABASE AdventureWorks <span class="hljs-keyword">SET</span> SINGLE_USER <span class="hljs-keyword">WITH</span> NO_WAIT; <br></code></pre></td></tr></table></figure><p>Wait is the default option</p><h4 id="rollback-after-integer-seconds">ROLLBACK AFTER integer[SECONDS]</h4><ol type="1"><li>wait for the specified number of seconds and then break unqualifiedconnections.</li><li>Incomplete transactions are rolled back.</li></ol><h4 id="rollback-immediate">ROLLBACK IMMEDIATE</h4><ol type="1"><li>breaks unqualified connections immediately</li><li>All incomplete transactions are rolled back</li></ol><h4 id="no_wait">NO_WAIT</h4><ol type="1"><li>check for connections before attempting to change the database stateand causes the ALTER DATABASE statement to fail if certain connectionsexist (generates an error)</li></ol><h3 id="cursor-options">Cursor options</h3><p>The cursor options control the behavior of server-side cursorsdefined using one of the following T-SQL commands for defining andmanipulating cursors: DECLARE, OPEN, FETCH, CLOSE, and DEALLOCAT</p><h4 id="cursor_close_on_commit-on-off">CURSOR_CLOSE_ON_COMMIT {ON |OFF}</h4><ol type="1"><li>ON<ol type="1"><li>any open cursors are closed when a transaction is committed orrolled back</li></ol></li><li>OFF (default)<ol type="1"><li>cursors remain open after a transaction is committed</li></ol></li></ol><h4 id="cursor_default-local-global">CURSOR_DEFAULT {LOCAL |GLOBAL}</h4><ol type="1"><li>LOCAL and cursors aren‚Äôt specified as GLOBAL when they arecreated</li><li>The cursor name is valid only within this batch</li><li>GLOBAL and cursors aren‚Äôt specified as LOCAL when they are created<ol type="1"><li>The cursor name can be referenced in any stored procedure or batchexecuted by the connection.</li></ol></li></ol><h3 id="auto-options">Auto options</h3><p>Affect actions that SQL Server might take automatically</p><h4 id="auto_close">AUTO_CLOSE</h4><ol type="1"><li>On<ol type="1"><li>the database is closed and shut down cleanly when the last user ofthe database exits</li></ol></li></ol><h4 id="auto_shrink">AUTO_SHRINK</h4><ol type="1"><li>On<ol type="1"><li>all of a database‚Äôs files are candidates for periodic shrinking</li><li>never recommended</li></ol></li></ol><h4 id="auto_create_statistics">AUTO_CREATE_STATISTICS</h4><ol type="1"><li>On (default)<ol type="1"><li>the SQL Server Query Optimizer creates statistics on columnsreferenced in a query‚Äôs WHERE, ON, GROUP BY, or DISTINCT clauses.</li></ol></li></ol><h4 id="auto_update_statistics">AUTO_UPDATE_STATISTICS</h4><ol type="1"><li>On (default)<ol type="1"><li>existing statistics are updated if the data in the tables haschanged</li></ol></li></ol><h3 id="sql-options">SQL options</h3><p>The SQL options control how various SQL statements areinterpreted.</p><p>Default is OFF for all.</p><h4 id="ansi_null_default">ANSI_NULL_DEFAULT</h4><ol type="1"><li>ON<ol type="1"><li>if you don‚Äôt specifically indicate whether a column in a tableallows NULL values, NULLs are allowed</li></ol></li><li>OFF<ol type="1"><li>newly created columns don‚Äôt allow NULLs if no nullability constraintis specified</li></ol></li></ol><h4 id="ansi_nulls">ANSI_NULLS</h4><ol type="1"><li>ON<ol type="1"><li>any comparisons with a NULL value result in UNKNOWN</li></ol></li><li>OFF<ol type="1"><li>comparisons of non-Unicode values to NULL result in a value of TRUEif both values being compared are NULL</li></ol></li></ol><h4 id="ansi_padding">ANSI_PADDING</h4><ol type="1"><li>ON<ol type="1"><li>strings being compared with each other are set to the same lengthbefore the comparison takes place</li></ol></li><li>OFF<ol type="1"><li>No padding</li></ol></li></ol><h4 id="ansi_warnings">ANSI_WARNINGS</h4><ol type="1"><li>ON<ol type="1"><li>errors or warnings are issued when conditions such asdivision-by-zero or arithmetic overflow occur</li></ol></li></ol><h4 id="arithabort">ARITHABORT</h4><ol type="1"><li>ON<ol type="1"><li>a query is terminated when an arithmetic overflow ordivision-by-zero error is encountered during the execution of aquery</li></ol></li><li>OFF<ol type="1"><li>the query returns NULL as the result of the operation</li></ol></li></ol><h4 id="concat_null_yields_null">CONCAT_NULL_YIELDS_NULL</h4><ol type="1"><li>ON<ol type="1"><li>concatenating two strings results in a NULL string if either stringis NULL</li></ol></li><li>OFF<ol type="1"><li>a NULL string is treated as an empty (zero-length) string forconcatenation</li></ol></li></ol><h4 id="numeric_roundabort">NUMERIC_ROUNDABORT</h4><ol type="1"><li>ON<ol type="1"><li>an error is generated if an expression results in a loss ofprecision</li></ol></li><li>OFF<ol type="1"><li>the result is simply rounded</li></ol></li></ol><h4 id="quoted_identifier">QUOTED_IDENTIFIER</h4><ol type="1"><li>ON<ol type="1"><li>identifiers such as table and column names can be delimited bydouble quotation marks, and literals must then be delimited by singlequotation marks</li></ol></li><li>OFF<ol type="1"><li>identifiers can‚Äôt be in quotation marks and must follow all T-SQLrules for identifiers</li></ol></li></ol><h4 id="recursive_triggers">RECURSIVE_TRIGGERS</h4><ol type="1"><li>ON<ol type="1"><li>triggers can fire recursively, either directly or indirectly</li></ol></li><li>OFF<ol type="1"><li>triggers can‚Äôt be fired recursively.</li></ol></li></ol><h3 id="database-recovery-options">Database recovery options</h3><h4 id="recovery-full-bulk_logged-or-simple">RECOVERY (FULL,BULK_LOGGED, or SIMPLE)</h4><ol type="1"><li>determines how much recovery can be done on a SQL Serverdatabase</li><li>controls how much information is logged and how much of the log isavailable for backups</li></ol><h4 id="page_verify">PAGE_VERIFY</h4><p>Discover damaged database pages caused by disk I/O path errors, whichcan cause database corruption problems.</p><ol type="1"><li>CHECKSUM<ol type="1"><li>SQL Server calculates a checksum over the contents of each page andstores the value in the page header when a page is written to thedisk</li><li>When reading the page, a checksum is calculated and compared withthe stored one, if not match, error message 824</li><li>run <code>DBCC CHECKDB</code> to determine the type of database pageor pages affected</li></ol></li><li>TORN_PAGE_DETECTION<ol type="1"><li>allows SQL Server to detect incomplete I/O operations caused bypower failures or other system outages</li></ol></li><li>NONE</li></ol><h2 id="understanding-database-security">Understanding databasesecurity</h2><p><u>Authentication</u></p><p>SQL Server validates and establishes the identity of an individualwho wants to access a resource</p><p><u>Authorization</u></p><p>SQL Server decides whether a given identity is allowed to access aresource</p><p><u>Securable</u></p><ol type="1"><li>This is an entity on which permissions can be granted.</li><li>Securable include databases, schemas, and objects.</li></ol><p><u>Principal</u></p><ol type="1"><li>This entity can access securable</li><li>A primary principal represents a single user</li><li>A secondary principal represents multiple users</li></ol><h3 id="database-access">Database access</h3><p><u>Authentication logins</u></p><ol type="1"><li><p>Windows authentication</p><ol type="1"><li>SQL Server login security is integrated directly with Windowssecurity to authenticate SQL Server users</li><li>The SID is the same as the OS</li></ol></li><li><p>SQL Server authentication</p><ol type="1"><li>An administrator creates SQL Server login accounts within SQLServer</li></ol></li><li><p>Login names</p><ol type="1"><li><p>Check login names in <code>sys.server_principals</code> view</p><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220622134755663.png"alt="sys.server_principals view" /><figcaption aria-hidden="true">sys.server_principals view</figcaption></figure></li></ol></li></ol><p><u>Security modes</u></p><ol type="1"><li><p>Windows authentication mode</p><ol type="1"><li>Use only Windows authentication</li><li>The default SQL Server sa login is disabled</li></ol></li><li><p>Mixed mode</p><ol type="1"><li>Use both Windows authentication and SQL Server authentication</li><li>The sa login can be enabled using the <code>ALTER LOGIN</code>command</li></ol></li><li><p>Change mode</p><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220622134603728.png"alt="Choosing an authentication mode for your SQL Server instance in the Server Properties sheet" /><figcaption aria-hidden="true">Choosing an authentication mode for yourSQL Server instance in the Server Properties sheet</figcaption></figure></li></ol><h3 id="database-security">Database security</h3><p>Databases are owned by login names.</p><p>Most objects within a database are owned by database principals.</p><p>The SID used by a principal determines which databases that principalhas access to.</p><p><code>sys.database_principals</code> is a mapping table that mapslogin names to users in that particular database</p><p><u>Database user types</u></p><ol type="1"><li>a user that maps to a SQL Server login</li><li>a user that maps to a Windows login</li><li>a user who doesn‚Äôt map to any login<ol type="1"><li>have a user to be the owner of objects, who never actually uses thedatabase</li></ol></li><li>a user without a login<ol type="1"><li>have access to only that database.</li></ol></li><li>Within a database, users own objects and are grantedpermissions</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"># Shows the mapping <span class="hljs-keyword">of</span> users <span class="hljs-keyword">in</span> the database <span class="hljs-keyword">to</span> login names<br><span class="hljs-keyword">SELECT</span> s.name <span class="hljs-keyword">as</span> [Login Name], d.name <span class="hljs-keyword">as</span> [<span class="hljs-keyword">User</span> Name],<br>     default_schema_name <span class="hljs-keyword">as</span> [<span class="hljs-keyword">Default</span> Schema] <br>   <span class="hljs-keyword">FROM</span> sys.database_principals d  <br>      <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> sys.server_principals s <br>   <span class="hljs-keyword">ON</span> s.sid <span class="hljs-operator">=</span> d.sid<br> <span class="hljs-keyword">WHERE</span> d.type_desc <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;SQL_USER&#x27;</span>;<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220622142154463.png"alt="Mapping of users" /><figcaption aria-hidden="true">Mapping of users</figcaption></figure><h3 id="databases-vs.-schemas">Databases vs. schemas</h3><p><u>Schemas</u></p><p>A schema is defined as a collection of database objects that areowned by a single user and form a single namespace (a container ofobjects)</p><p>No two tables in the same schema can have the same name.</p><p><u>Namespace</u></p><p>A namespace is a set of objects that can‚Äôt have duplicate names</p><h3 id="principals-and-schemas">Principals and schemas</h3><p>Users and schemas are two separate things</p><p>Permissions are granted to users, but objects are placed inschemas.</p><p>Schemas contain objects, not users</p><blockquote><p>The statement <code>GRANT CREATE TABLE</code> TO sue refers to theuser sue.</p><p>Then sue creates a table</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> mytable (col1 <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>));<br></code></pre></td></tr></table></figure><p>Then the table is placed in sue's default schema, maybe the schemasue.</p><p>If another user wants to select from this table, then</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> col1 <span class="hljs-keyword">FROM</span> sue.mytable;<br></code></pre></td></tr></table></figure><p>Here, sue refers to the schema that contains the table</p></blockquote><p>An object is referenced by the schema n which it is contained</p><p>In most cases, the owner of the schema is the same as the owner ofall objects within the schema</p><p>The column <code>pricipal_id</code> in the view<code>sys.objects</code> contains the user_id of an object‚Äôs owner if itisn‚Äôt the same as the owner of the object‚Äôs schema.</p><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220622144848733.png"alt="sys.objects view" /><figcaption aria-hidden="true">sys.objects view</figcaption></figure><p>The default for the default schema is the dbo schema.</p><h3 id="default-schemas">Default schemas</h3><p>Every database also has a schema called sys, which provides a way toaccess all the system tables and views.</p><p>A user can have at most one default schema at any time</p><p>A user‚Äôs default schema is used for name resolution during objectcreation or object reference</p><p>You should always specify the schema name for all object access aswell as object management</p><p><u>To create an object in a schema</u></p><ol type="1"><li>The schema must exist</li><li>The user creating the object must have permission to create theobject</li><li>The user creating the object must have permission to alter theschema</li></ol><h2 id="moving-or-copying-a-database">Moving or copying a database</h2><h3 id="detaching-and-reattaching-a-database">Detaching and reattachinga database</h3><p><u>Detach</u></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">EXEC</span> sp_detach_db <span class="hljs-operator">&lt;</span>name <span class="hljs-keyword">of</span> database<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><ol type="1"><li>Requires that no one is using the database.<ol type="1"><li>User <code>ALTER DATABASE</code> to <code>SINGLE_USER</code> mode tobreak connections</li></ol></li><li>Ensure no incomplete transactions and no dirty pages exist</li><li>The database is removed from the <code>sys.databases</code> view andunderlying system tables</li></ol><p><u>DROP DATABASE</u></p><ol type="1"><li>Doesn‚Äôt check for dirty pages or open transactions</li><li>Will remove the physical files</li></ol><p><u>Reattach</u></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE database_name  <br>    <span class="hljs-keyword">ON</span> <span class="hljs-operator">&lt;</span>filespec<span class="hljs-operator">&gt;</span> [ ,...n ]  <br>    <span class="hljs-keyword">FOR</span> &#123; ATTACH  <br>        <span class="hljs-operator">|</span> ATTACH_REBUILD_LOG &#125;<br></code></pre></td></tr></table></figure><ol type="1"><li>The primary file is required to have a entry</li><li>The <code>FOR ATTACH_REBUILD_LOG</code> option is limited toread/write databases</li><li>When attaching a read-only database, you must specify the log fileor files in the FOR ATTACH clause</li></ol><h3 id="backing-up-and-restoring-a-database">Backing up and restoring adatabase</h3><p>The database doesn‚Äôt need to come offline at all because the backupis a completely online operation</p><h2 id="understanding-compatibility-levels">Understanding compatibilitylevels</h2><p><u>Compatibility levels</u></p><p>110 (for SQL Server 2012), 100 (for SQL Server 2008), or 90 (for SQLServer 2005)</p><p><u>Check compatibility level</u></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> compatibility_level <span class="hljs-keyword">FROM</span> sys.databases<br><span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;&lt;database name&gt;&#x27;</span>;<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/25/SQL%20Server%202012%20Internal%20Note_Databases%20and%20database%20file/image-20220622155851528.png"alt="Compatibility levels" /><figcaption aria-hidden="true">Compatibility levels</figcaption></figure><p><u>Change compatibility level</u></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> DATABASE <span class="hljs-operator">&lt;</span>database name<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">SET</span> COMPATIBILITY_LEVEL <span class="hljs-operator">=</span> <span class="hljs-operator">&lt;</span>compatibility<span class="hljs-operator">-</span>level<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Reading</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Server 2012 ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçóNoteÔºöÊï∞ÊçÆÂ∫ìÁ©∫Èó¥ÁÆ°ÁêÜ</title>
    <link href="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/"/>
    <url>/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="sql-server-2012-ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçónoteÊï∞ÊçÆÂ∫ìÁ©∫Èó¥ÁÆ°ÁêÜ">SQL Server2012 ÂÆûÊñΩ‰∏éÁÆ°ÁêÜÂÆûÊàòÊåáÂçóNoteÔºöÊï∞ÊçÆÂ∫ìÁ©∫Èó¥ÁÆ°ÁêÜ</h1><p>Êï∞ÊçÆÂ∫ì‰ª•Êï∞ÊçÆÊñá‰ª∂ÂíåÊó•ÂøóÊñá‰ª∂ÁöÑÂΩ¢Âºè‰øùÂ≠ò„ÄÇ</p><p>Âú®Êï∞ÊçÆÂ∫ìÁ©∫Èó¥ÁÆ°ÁêÜ‰∏äÁªèÂ∏∏‰ºöÈÅáÂà∞ÁöÑÈóÆÈ¢òÔºö</p><ol type="1"><li>Êï∞ÊçÆÊñá‰ª∂ÔºàData FileÔºâÁ©∫Èó¥Áî®Â∞Ω</li><li>Êó•ÂøóÊñá‰ª∂ÔºàLog FileÔºâ‰∏çÂÅúÂ¢ûÈïø„ÄÇ</li><li>Êï∞ÊçÆÊñá‰ª∂Á©∫Èó¥Êó†Ê≥ïÊî∂Áº©</li><li>Ëá™Âä®Â¢ûÈïøÔºàAuto growÔºâÂíåËá™Âä®Êî∂Áº©ÔºàAuto shrinkÔºâ„ÄÇ</li></ol><h2 id="Êï∞ÊçÆÊñá‰ª∂ÁöÑÁ©∫Èó¥‰ΩøÁî®ÂíåÁÆ°ÁêÜ">Êï∞ÊçÆÊñá‰ª∂ÁöÑÁ©∫Èó¥‰ΩøÁî®ÂíåÁÆ°ÁêÜ</h2><p>Êï∞ÊçÆÊñá‰ª∂Á±ªÂûãÔºö</p><ol type="1"><li><p>‰∏ªÊï∞ÊçÆÊñá‰ª∂<code>.mdf</code></p><p>Â≠òÂÇ®ÊåáÂêëÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÂÖ∂‰ªñÊñá‰ª∂Ë∑ØÂæÑ</p><p>ÊØè‰∏™Êï∞ÊçÆÂ∫ìÈÉΩÊúâ‰∏Ä‰∏™‰∏ªÊï∞ÊçÆÊñá‰ª∂</p></li><li><p>ËæÖÂä©Êï∞ÊçÆÊñá‰ª∂<code>.ndf</code></p><ol type="1"><li><p>nameÔºàÈÄªËæëÊñá‰ª∂ÂêçÔºâ</p><p>Êñá‰ª∂Âú®SQL ServerÈáåÁöÑÂêçÂ≠óÔºåÁ¨¶ÂêàSQL ServerÊ†áËØÜÁ¨¶ËßÑÂàôÔºåÂîØ‰∏Ä„ÄÇ</p></li><li><p>physical_nameÔºàÁâ©ÁêÜÊñá‰ª∂ÂêçÔºâ</p><p>Êñá‰ª∂Âú®Êìç‰ΩúÁ≥ªÁªüÈáåÁöÑÂêçÂ≠óÂíåË∑ØÂæÑÔºåÁ¨¶ÂêàÊìç‰ΩúÁ≥ªÁªüÊñá‰ª∂ÂëΩÂêçËßÑÂàô</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image002.jpg"alt="Êï∞ÊçÆÂ∫ìÁöÑÈÄªËæëÊñá‰ª∂ÂêçÂíåÁâ©ÁêÜÊñá‰ª∂Âêç" /><figcaptionaria-hidden="true">Êï∞ÊçÆÂ∫ìÁöÑÈÄªËæëÊñá‰ª∂ÂêçÂíåÁâ©ÁêÜÊñá‰ª∂Âêç</figcaption></figure></li></ol></li></ol><h3 id="Êï∞ÊçÆÊñá‰ª∂Â≠òÂÇ®ÁªìÊûÑ">Êï∞ÊçÆÊñá‰ª∂Â≠òÂÇ®ÁªìÊûÑ</h3><p>È°µÔºàPageÔºâ</p><ol type="1"><li><p>SQL Server‰∏≠Êï∞ÊçÆÂ≠òÂÇ®ÁöÑÂü∫Êú¨Âçï‰ΩçÊòØÈ°µ</p></li><li><p>Êï∞ÊçÆÊñá‰ª∂Âç†ÊçÆÁöÑÁ£ÅÁõòÁ©∫Èó¥‰ªéÈÄªËæë‰∏äÂàíÂàÜÊàêÈ°µÔºà0Âà∞nËøûÁª≠ÁºñÂè∑Ôºâ</p></li><li><p>SQL ServerËØªÂèñÊàñÂÜôÂÖ•Êï∞ÊçÆÁöÑÊúÄÂ∞èÂçï‰ΩçÊòØ‰ª•8 KB‰∏∫Âçï‰ΩçÁöÑÈ°µ</p></li><li><p>È°µÂ§¥</p><ol type="1"><li>ÊØèÈ°µÂºÄÂ§¥ÁöÑ96Â≠óËäÇ</li><li>ÂÇ®Â≠òÂåÖÊã¨È°µÁ†ÅÔºåÈ°µÁ±ªÂûãÔºåÈ°µÁöÑÂèØÁî®Á©∫Èó¥ÔºåÊã•ÊúâËØ•È°µÁöÑÂØπË±°ÁöÑÂàÜÈÖçÂçïÂÖÉIDÁ≠âÊúâÂÖ≥È°µÁöÑÁ≥ªÁªü‰ø°ÊÅØ</li></ol></li><li><p>‰∏çÂêåÁ±ªÂûãÁöÑÊï∞ÊçÆÔºåÂ≠òÂÇ®Âú®‰∏çÂêåÁ±ªÂûãÁöÑÈ°µÈù¢Èáå</p><table><thead><tr class="header"><th>È°µ Á±ª Âûã</th><th>ÂÜÖ„ÄÄ„ÄÄÂÆπ</th></tr></thead><tbody><tr class="odd"><td>Global Allocation Map(GAM)</td><td>GAMÂú®Êï∞ÊçÆÊñá‰ª∂‰∏≠ÁöÑÁ¨¨‰∏â‰∏™È°µ‰∏ä„ÄÇÊñá‰ª∂ÂíåÈ°µÁºñÂè∑‰∏∫(1:2)„ÄÇÂÆÉÁî®bit‰ΩçÊù•Ê†áËØÜÁõ∏Â∫îÁöÑÂå∫(extents)ÊòØÂê¶Â∑≤ÁªèË¢´ÂàÜÈÖç„ÄÇÂÆÉÂ∑Æ‰∏çÂ§öËÉΩÊ†áËØÜÁ∫¶64000‰∏™Âå∫(8kpage * 8 bits perbyte)„ÄÇ‰πüÂ∞±ÊòØ4GÁöÑÁ©∫Èó¥„ÄÇÂ¶ÇÊûúÊï∞ÊçÆÁ©∫Èó¥Ë∂ÖËøá4GÔºåÈÇ£‰πàÊï∞ÊçÆÂ∫ì‰ºöÁî®Âè¶Â§ñ‰∏Ä‰∏™GAMÈ°µÊù•Ê†áËØÜ‰∏ã‰∏Ä‰∏™4GÁ©∫Èó¥„ÄÇBit=1: Ê†áËØÜÂΩìÂâçÁöÑÂå∫ÊòØÁ©∫Èó≤ÁöÑÔºåÂèØ‰ª•Áî®Êù•ÂàÜÈÖç Bit=0:Ê†áËØÜÂΩìÂâçÁöÑÂå∫Â∑≤ÁªèË¢´Êï∞ÊçÆ‰ΩøÁî®‰∫Ü„ÄÇ</td></tr><tr class="even"><td>Shared Global Allocation Map (SGAM)</td><td>SGAMÂú®Êï∞ÊçÆÊñá‰ª∂‰∏≠ÁöÑÁ¨¨Âõõ‰∏™È°µ‰∏ä„ÄÇÊñá‰ª∂ÂíåÈ°µÁºñÂè∑‰∏∫(1:3)„ÄÇÂÆÉÁöÑÁªìÊûÑÂíåGAMÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇÂå∫Âà´Âú®‰∫éBit‰ΩçÁöÑÂê´‰πâ‰∏çÂêå„ÄÇBit=1: Âå∫ÊòØÊ∑∑ÂêàÂå∫Ôºå‰∏îÂå∫ÂÜÖËá≥Â∞ëÊúâ‰∏Ä‰∏™È°µÊòØÂèØ‰ª•Ë¢´Áî®Êù•ÂàÜÈÖçÁöÑ Bit=0:Âå∫ÊòØÁªü‰∏ÄÂå∫ÔºåÊàñËÄÖÊòØÊ∑∑ÂêàÂå∫‰ΩÜÂå∫ÂÜÖÊâÄÊúâÁöÑÈ°µÈÉΩÊòØÂú®Ë¢´‰ΩøÁî®ÁöÑ</td></tr><tr class="odd"><td>Page Free Space</td><td>Â≠òÂÇ®Êú¨Êï∞ÊçÆÊñá‰ª∂ÈáåÊâÄÊúâÈ°µÂàÜÈÖçÂíåÈ°µÁöÑÂèØÁî®Á©∫Èó¥ÁöÑ‰ø°ÊÅØ„ÄÇ</td></tr><tr class="even"><td>Index Allocation Map</td><td>Ë°®ÊàñÁ¥¢ÂºïÊâÄ‰ΩøÁî®ÁöÑÂå∫ÁöÑ‰ø°ÊÅØ</td></tr><tr class="odd"><td>Bulk Changed Map</td><td>Ëá™ÊúÄÂêé‰∏ÄÊù°BACKUP LOGËØ≠Âè•‰πãÂêéÁöÑÂ§ßÂÆπÈáèÊìç‰ΩúÊâÄ‰øÆÊîπÁöÑÂå∫ÁöÑ‰ø°ÊÅØ</td></tr><tr class="even"><td>Differential Changed Map</td><td>Ëá™ÊúÄÂêé‰∏ÄÊù°BACKUP DATABASEËØ≠Âè•‰πãÂêéÊõ¥ÊîπÁöÑÂå∫ÁöÑ‰ø°ÊÅØ</td></tr><tr class="odd"><td>Data</td><td>Áî®Êù•Â≠òÊîæÊï∞ÊçÆ</td></tr><tr class="even"><td>Row Overflow Page</td><td>ÂΩì‰∏ÄÊù°ËÆ∞ÂΩïË∂ÖËøá8000Â≠óËäÇÁöÑÊó∂ÔºåËøôÊó∂ÂÄôÂ∞±Ë¶ÅÂÄüÂä©Row OverflowPageÁî®Êù•Â≠òÊîæË∂ÖÂá∫ÈÉ®ÂàÜÁöÑÊï∞ÊçÆ</td></tr><tr class="odd"><td>LOB</td><td>Áî®Êù•Â≠òÊîæÂ§ßÂûãÂØπË±°Êï∞ÊçÆÁ±ªÂûãÔºötext„ÄÅntext„ÄÅimage„ÄÅnvarchar(max)„ÄÅvarchar(max)„ÄÅvarbinary(max)ÂíåxmlÊï∞ÊçÆ„ÄÇ</td></tr></tbody></table></li><li><p>Êï∞ÊçÆÈ°µÁªìÊûÑ</p><ol type="1"><li><p>Âú®Ê≠£Â∏∏È°µ‰∏äÔºåÊï∞ÊçÆË°åÁ¥ßÊé•ÁùÄÈ°µÁöÑÊ†áÂ§¥ÊåâÈ°∫Â∫èÊîæÁΩÆ„ÄÇ</p></li><li><p>È°µÁöÑÊú´Â∞æÊòØË°åÂÅèÁßªÈáèË°®ÔºåÂØπ‰∫éÈ°µ‰∏≠ÁöÑÊØè‰∏ÄË°åÔºåÊØè‰∏™Ë°åÂÅèÁßªË°®ÈÉΩÂåÖÂê´‰∏Ä‰∏™Êù°ÁõÆ„ÄÇ</p></li><li><p>ÊØè‰∏™Êù°ÁõÆËÆ∞ÂΩïÂØπÂ∫îË°åÁöÑÁ¨¨‰∏Ä‰∏™Â≠óËäÇ‰∏éÈ°µÈ¶ñÁöÑË∑ùÁ¶ª„ÄÇ</p></li><li><p>Ë°åÂÅèÁßªË°®‰∏≠ÁöÑÊù°ÁõÆÁöÑÈ°∫Â∫è‰∏éÈ°µ‰∏≠Ë°åÁöÑÈ°∫Â∫èÁõ∏Âèç</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image002-16551059962499.jpg"alt="È°µÁöÑÁªìÊûÑ" /><figcaption aria-hidden="true">È°µÁöÑÁªìÊûÑ</figcaption></figure></li></ol></li></ol><p>Âå∫ÔºàExtentÔºâ</p><ol type="1"><li>8‰∏™Áâ©ÁêÜ‰∏äËøûÁª≠ÁöÑÈ°µÁöÑÈõÜÂêàÔºåÁî®‰∫éÁÆ°ÁêÜÈ°µ</li><li>Áªü‰∏ÄÂå∫<ol type="1"><li>Âå∫ÂÜÖÁöÑ8‰∏™È°µÂ±û‰∫éÂêå‰∏Ä‰∏™Ë°®</li></ol></li><li>Ê∑∑ÂêàÂå∫<ol type="1"><li>Âå∫ÂÜÖÁöÑ8‰∏™È°µÂàÜÂà´Â±û‰∫éËá≥Â∞ë‰∏§‰∏™‰∏çÂêåÁöÑË°®</li></ol></li><li>‰∏Ä‰∏™Êï∞ÊçÆÊñá‰ª∂ÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™Ë°®</li></ol><p>‰∏Ä‰∏™Êï∞ÊçÆÊñá‰ª∂ÂèØËÉΩÁöÑÁªìÊûÑÔºö</p><p>Â§ßÂ§öÊï∞È°µÈù¢‰∏∫Data„ÄÅText„ÄÅImageÁ±ªÂûãÔºåÊï∞ÊçÆÊñá‰ª∂ÂºÄÂ§¥Â§ö‰∏∫ÁÆ°ÁêÜÈ°µÈù¢</p><table style="width:100%;"><thead><tr class="header"><th>È°µÂêç</th><th>Header</th><th>PFS</th><th>GAM</th><th>SGAM</th><th>Unused</th><th>Unused</th><th>DCM</th><th>BCM</th><th>‚Ä¶</th><th>Data</th><th>‚Ä¶</th></tr></thead><tbody><tr class="odd"><td>È°µÂè∑</td><td>1:0</td><td>1:1</td><td>1:2</td><td>1:3</td><td>1:4</td><td>1:5</td><td>1:6</td><td>1:7</td><td>‚Ä¶</td><td>1:1400</td><td>‚Ä¶</td></tr></tbody></table><h3 id="Ë°®Â≠òÂÇ®ÁªìÊûÑ">Ë°®Â≠òÂÇ®ÁªìÊûÑ</h3><p>SQLServerÈÄöËøáÊØè‰∏™È°µÈù¢ÁöÑ96‰∏™Â≠óËäÇÁöÑÈ°µÂ§¥ÂíåÁ≥ªÁªüË°®Ôºå‰ªéÈÄªËæëÂ±ÇÈù¢‰∏äÔºåÊääË°®ÁöÑÂ≠òÂÇ®ÁªìÊûÑÁÆ°ÁêÜËµ∑Êù•„ÄÇ</p><p>Ë°®Ê¶ÇÂøµÂÖ≥Á≥ªÔºö</p><ol type="1"><li><p>ÊØèÂº†Ë°®‰ºöÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑObject ID</p></li><li><p>ÊØèÂº†Ë°®Êã•Êúâ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™partition</p></li><li><p>ÊØè‰∏™partition‰ºöÊúâ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Heap or B-Tree(Hobt)</p></li><li><p>ÊØè‰∏™Hobt‰ºöÊúâËá≥Â§ö‰∏â‰∏™ÂàÜÈÖçÂçïÂÖÉÔºàDataÔºåLOBÔºåRow-OverflowÔºâÁî®‰∫éÂ≠òÊîæÊï∞ÊçÆ</p></li><li><p>ÊØè‰∏™ÂàÜÈÖçÂçïÂÖÉÂèØ‰ª•ÊúâËÆ∏Â§öÈ°µ</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image002-16550895343212.jpg"alt="Table organization with partitions" /><figcaption aria-hidden="true">Table organization withpartitions</figcaption></figure></li></ol><p>ÂàÜÈÖçÂçïÂÖÉÂÜÖÊï∞ÊçÆÈ°µÁöÑÁªÑÁªáÊñπÂºèÔºö</p><ol type="1"><li><p>Ë°®Ê≤°Êúâ‰ªª‰ΩïÁ¥¢Âºï</p><ol type="1"><li><p>ÊåâHeapÁªìÊûÑÂÇ®Â≠òÔºåÂè™Êúâ‰∏Ä‰∏™partitionÔºåËøô‰∏™partition‰∏ãÈù¢ÁöÑÊØè‰∏™ÂàÜÈÖçÂçïÂÖÉÈÉΩÊúâ‰∏Ä‰∏™ËøûÊé•ÊåáÂêëIAMÈ°µÔºåÊâÄÊúâÁöÑIAMÈ°µÊòØËøûÊé•Ëµ∑Êù•ÁöÑ</p></li><li><p>Êï∞ÊçÆÈ°µ‰πãÈó¥Ê≤°Êúâ‰ªª‰ΩïÂÖ≥Á≥ªÔºåÂÆåÂÖ®‰æùËµñIAMÈ°µÁªÑÁªá</p></li><li><p>ÂØπ‰∫é‰∏Ä‰∏™SELECTËØ≠Âè•ÔºåSQLServer‰ºöÈ¶ñÂÖàÊü•ËØ¢IAMÈ°µÔºåÁÑ∂ÂêéÊ†πÊçÆIAMÈ°µÊèê‰æõÁöÑ‰ø°ÊÅØÔºåÈÅçÂéÜÊØè‰∏™Âå∫,ÊääÂå∫ÂÜÖÁ¨¶ÂêàÊù°‰ª∂ÁöÑÈ°µËøîÂõû</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image002-16550899862434.jpg"alt="HeapÁöÑÂ≠òÂÇ®ÁªìÊûÑ" /><figcaption aria-hidden="true">HeapÁöÑÂ≠òÂÇ®ÁªìÊûÑ</figcaption></figure></li></ol></li><li><p>ÊúâÈùûËÅöÈõÜÁ¥¢ÂºïËÄåÊ≤°ÊúâËÅöÈõÜÁ¥¢ÂºïÁöÑË°®</p><ol type="1"><li><p>ÊØè‰∏™ÈùûËÅöÈõÜÁ¥¢ÈÉΩÊúâ‰∏Ä‰∏™Áõ∏ÂØπÂ∫îÁöÑpartitionÔºåÂØπ‰∫éËøô‰∏™partition‰∏ãÈù¢ÁöÑÊØè‰∏™ÂàÜÈÖçÂçïÂÖÉÈÉΩÊúâ‰∏Ä‰∏™ËøûÊé•ÊåáÂêërootpageÔºàÊ†πÈ°µÔºâ</p></li><li><p>Êï∞ÊçÆÈ°µ‰πãÈó¥ÈÄöËøáÂâçÂêéÊåáÈíà‰∫íÁõ∏ËÅîÁ≥ª</p></li><li><p>ÁúüÊ≠£ÁöÑÊï∞ÊçÆÊòØ‰ª•Â†Ü(Heap)ÁöÑÁªìÊûÑÂ≠òÊîæÁöÑ</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image001.gif"alt="ÈùûËÅöÈõÜÁ¥¢ÂºïÁöÑÂ≠òÂÇ®ÁªìÊûÑ" /><figcaption aria-hidden="true">ÈùûËÅöÈõÜÁ¥¢ÂºïÁöÑÂ≠òÂÇ®ÁªìÊûÑ</figcaption></figure></li></ol></li><li><p>Ë°®ÊúâËÅöÈõÜÁ¥¢Âºï</p><ol type="1"><li><p>Ë°®‰∏≠ÁöÑËÅöÈõÜÁ¥¢ÂºïÔºåÂØπÂ∫îÁöÑÁ¥¢ÂºïÂè∑ÊòØ1ÔºåÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑpartitionÔºåÂØπ‰∫éËøô‰∏™partition‰∏ãÈù¢ÁöÑÊØè‰∏™ÂàÜÈÖçÂçïÂÖÉÈÉΩÊúâ‰∏Ä‰∏™ËøûÊé•ÊåáÂêëÊ†πÈ°µ</p></li><li><p>Âè∂Â≠êËäÇÁÇπÈáåÂ≠òÊîæÁöÑÊòØÁúüÊ≠£ÁöÑÊï∞ÊçÆ</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image001-16550904385237.gif"alt="ËÅöÈõÜÁ¥¢ÂºïÁöÑÂ≠òÂÇ®ÁªìÊûÑ" /><figcaption aria-hidden="true">ËÅöÈõÜÁ¥¢ÂºïÁöÑÂ≠òÂÇ®ÁªìÊûÑ</figcaption></figure></li></ol></li></ol><h3 id="Ê°à‰æãË∑üË∏™Á¥¢ÂºïÁöÑÂ≠òÂÇ®ÁªìÊûÑ">Ê°à‰æãÔºöË∑üË∏™Á¥¢ÂºïÁöÑÂ≠òÂÇ®ÁªìÊûÑ</h3><p>Ë∑üË∏™AdventureWorks2019‰∏≠Ë°®EmployeeÁöÑÁ©∫Èó¥‰ΩøÁî®„ÄÇ</p><p>ÂæóÂà∞Ë°®EmployeeÁöÑobject_idÔºö</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.objects <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Employee&#x27;</span><br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220613152251686.png"alt="Êü•ËØ¢Ë°®ÁöÑobject_id" /><figcaption aria-hidden="true">Êü•ËØ¢Ë°®ÁöÑobject_id</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞object_idÊòØ<code>1893581784</code>.</p><p>Êü•ËØ¢Ë°®Ê†º‰∏≠ÂåÖÂê´ÁöÑpartitionÔºö</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.partitions <span class="hljs-keyword">WHERE</span> object_id <span class="hljs-operator">=</span> <span class="hljs-number">1893581784</span><br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220613152528367.png"alt="Êü•ËØ¢Ë°®ÁöÑpartitions" /><figcaption aria-hidden="true">Êü•ËØ¢Ë°®ÁöÑpartitions</figcaption></figure><p>Ë°®EmployeeÊúâ6‰∏™partitionÔºåÂàÜÂà´ÂØπÂ∫î‰∫é‰∏çÂêåÁöÑÁ¥¢ÂºïÔºåÊØè‰∏™partitionÊúâ290Êù°ËÆ∞ÂΩï„ÄÇ<code>hobt_id</code>Áî®Êù•Ë°®Á§∫Âú®ËØ•partitionÂÜÖheapÊàñ BÊ†ëÁªìÊûÑÁöÑÊ†áËØÜ„ÄÇ</p><p>Êü•ËØ¢partitionÁºñÂè∑5ÁöÑÂàÜÈÖçÂçïÂÖÉ‰ø°ÊÅØÔºö</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.allocation_units <span class="hljs-keyword">WHERE</span> container_id <span class="hljs-operator">=</span> <span class="hljs-number">72057594054770688</span><br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220613153048177.png"alt="Êü•ËØ¢ÂàÜÈÖçÂçïÂÖÉ‰ø°ÊÅØ" /><figcaption aria-hidden="true">Êü•ËØ¢ÂàÜÈÖçÂçïÂÖÉ‰ø°ÊÅØ</figcaption></figure><p>Êü•ËØ¢ÁªìÊûúËØ¥ÊòéÔºåÂØπ‰∫é<code>partition_id = 72057594054770688</code>ÔºåÂè™Êúâ‰∏Ä‰∏™ÂàÜÈÖçÂçïÂÖÉÔºåÁî®‰∫éÂ≠òÊîæÊï∞ÊçÆÈ°µÔºàIN_ROW_DATAÔºâÔºåÂ§ßÂ∞è‰∏∫25‰∏™pageÔºåÂÖ∂‰∏≠Êï∞ÊçÆÈ°µ‰∏∫2‰∏™È°µ„ÄÇ</p><p>Êü•ËØ¢Êõ¥Âä†ËØ¶ÁªÜÁöÑÂàÜÈÖçÂçïÂÖÉ‰ø°ÊÅØÔºö</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.system_internals_allocation_units <span class="hljs-keyword">WHERE</span> container_id <span class="hljs-operator">=</span> <span class="hljs-number">72057594054770688</span><br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220613153517266.png"alt="ÊòæÁ§∫Êõ¥ÂÖ∑‰ΩìÁöÑÂàÜÈÖçÂçïÂÖÉ‰ø°ÊÅØ" /><figcaption aria-hidden="true">ÊòæÁ§∫Êõ¥ÂÖ∑‰ΩìÁöÑÂàÜÈÖçÂçïÂÖÉ‰ø°ÊÅØ</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞ÔºåÊ†πÈ°µÁöÑ‰ΩçÁΩÆÊòØ<code>0x302700000100</code>Ôºå‰ΩøÁî®ÂÄíÂ∫èËß£Á†ÅÔºå‰∏ÄÊ¨°Âéª‰∏Ä‰∏™Â≠óËäÇÔºà‰∏§‰ΩçÔºâÔºåÂ≠óËäÇ‰∏≠È°∫Â∫è‰∏çÂèòÔºåËß£Á†Å‰∏∫<code>00 01 00 00 27 30</code>ÔºåÂâçÈù¢‰∏§‰∏™Â≠óËäÇË°®ÊòéÁöÑÊòØÊâÄÂú®ÁöÑÊñá‰ª∂ÁªÑÁºñÂè∑ÔºåÂêéÈù¢ÁöÑ4‰∏™Â≠óËäÇË°®ÊòéÈ°µÁöÑÁºñÂè∑ÔºåÊâÄ‰ª•È°µÈù¢ÁºñÂè∑ÊòØÔºà1Ôºå10032Ôºâ</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image002-165528044275119.jpg"alt="È°µÁöÑÁªìÊûÑ" /><figcaption aria-hidden="true">È°µÁöÑÁªìÊûÑ</figcaption></figure><p>ËæìÂá∫‰∏ÄÂÆöÊ†ºÂºèÁöÑÊåáÂÆöÈ°µÈù¢Ôºö</p><p>DBCC PAGE ÂëΩ‰ª§Ôºå‰ΩøÁî®ÂâçÈúÄË¶ÅÊâìÂºÄË∑üË∏™Ê†áÂøó3604</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"># DBCC PAGE(<span class="hljs-operator">&lt;</span>db_name<span class="hljs-operator">|</span>db ID<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span>file_id<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span>page_id<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span>format_id<span class="hljs-operator">&gt;</span>)<br># format_id <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> Â∏∏Áî®<span class="hljs-number">1</span>, <span class="hljs-number">3</span><br>DBCC TRACEON(<span class="hljs-number">3604</span>)<br>DBCC PAGE(<span class="hljs-string">&#x27;AdventureWorks2019&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10032</span>, <span class="hljs-number">1</span>)<br>DBCC TRACEOFF(<span class="hljs-number">3604</span>)<br></code></pre></td></tr></table></figure><p>ËæìÂá∫ÁöÑÁªìÊûúÂ¶Ç‰∏ãÔºö</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">DBCC</span> execution completed. If DBCC printed error messages, contact your system administrator.<br><br><span class="hljs-attribute">PAGE</span>: (<span class="hljs-number">1</span>:<span class="hljs-number">10032</span>)<br><br><br><span class="hljs-attribute">BUFFER</span>:<br><br><br><span class="hljs-attribute">BUF</span> @<span class="hljs-number">0</span>x000002E5CBD5FE40<br><br><span class="hljs-attribute">bpage</span> = <span class="hljs-number">0</span>x000002E5B8EB0000          bPmmpage = <span class="hljs-number">0</span>x0000000000000000       bsort_r_nextbP = <span class="hljs-number">0</span>x000002E5CBD5FD90<br><span class="hljs-attribute">bsort_r_prevbP</span> = <span class="hljs-number">0</span>x0000000000000000 bhash = <span class="hljs-number">0</span>x0000000000000000          bpageno = (<span class="hljs-number">1</span>:<span class="hljs-number">10032</span>)<br><span class="hljs-attribute">bpart</span> = <span class="hljs-number">2</span>                           ckptGen = <span class="hljs-number">0</span>x0000000000000000        bDirtyRefCount = <span class="hljs-number">0</span><br><span class="hljs-attribute">bstat</span> = <span class="hljs-number">0</span>x9                         breferences = <span class="hljs-number">1</span>                     berrcode = <span class="hljs-number">0</span><br><span class="hljs-attribute">bUse1</span> = <span class="hljs-number">47457</span>                       bstat2 = <span class="hljs-number">0</span>x0                        blog = <span class="hljs-number">0</span>x15ab215a<br><span class="hljs-attribute">bsampleCount</span> = <span class="hljs-number">0</span>                    bIoCount = <span class="hljs-number">0</span>                        resPoolId = <span class="hljs-number">0</span><br><span class="hljs-attribute">bcputicks</span> = <span class="hljs-number">0</span>                       bReadMicroSec = <span class="hljs-number">251</span>                 bDirtyContext = <span class="hljs-number">0</span>x0000000000000000<br><span class="hljs-attribute">bDbPageBroker</span> = <span class="hljs-number">0</span>x0000000000000000  bdbid = <span class="hljs-number">5</span>                           bpru = <span class="hljs-number">0</span>x000002E5BD500040<br><br><span class="hljs-attribute">PAGE</span> HEADER:<br><br><br><span class="hljs-attribute">Page</span> @<span class="hljs-number">0</span>x000002E5B8EB0000<br><br><span class="hljs-attribute">m_pageId</span> = (<span class="hljs-number">1</span>:<span class="hljs-number">10032</span>)                m_headerVersion = <span class="hljs-number">1</span>                 m_type = <span class="hljs-number">2</span><br><span class="hljs-attribute">m_typeFlagBits</span> = <span class="hljs-number">0</span>x0                m_level = <span class="hljs-number">1</span>                         m_flagBits = <span class="hljs-number">0</span>x220<br><span class="hljs-attribute">m_objId</span> (AllocUnitId.idObj) = <span class="hljs-number">379</span>   m_indexId (AllocUnitId.idInd) = <span class="hljs-number">256</span> <br><span class="hljs-attribute">Metadata</span>: AllocUnitId = <span class="hljs-number">72057594062766080</span>                                <br><span class="hljs-attribute">Metadata</span>: PartitionId = <span class="hljs-number">72057594054770688</span>                                Metadata: IndexId = <span class="hljs-number">5</span><br><span class="hljs-attribute">Metadata</span>: ObjectId = <span class="hljs-number">1893581784</span>     m_prevPage = (<span class="hljs-number">0</span>:<span class="hljs-number">0</span>)                  m_nextPage = (<span class="hljs-number">0</span>:<span class="hljs-number">0</span>)<br><span class="hljs-attribute">pminlen</span> = <span class="hljs-number">7</span>                         m_slotCnt = <span class="hljs-number">2</span>                       m_freeCnt = <span class="hljs-number">8038</span><br><span class="hljs-attribute">m_freeData</span> = <span class="hljs-number">150</span>                    m_reservedCnt = <span class="hljs-number">0</span>                   m_lsn = (<span class="hljs-number">38</span>:<span class="hljs-number">4326</span>:<span class="hljs-number">40</span>)<br><span class="hljs-attribute">m_xactReserved</span> = <span class="hljs-number">0</span>                  m_xdesId = (<span class="hljs-number">0</span>:<span class="hljs-number">2188</span>)                 m_ghostRecCnt = <span class="hljs-number">0</span><br><span class="hljs-attribute">m_tornBits</span> = -<span class="hljs-number">637479848</span>             DB Frag ID = <span class="hljs-number">1</span>                      <br><br><span class="hljs-attribute">Allocation</span> Status<br><br><span class="hljs-attribute">GAM</span> (<span class="hljs-number">1</span>:<span class="hljs-number">2</span>) = ALLOCATED               SGAM (<span class="hljs-number">1</span>:<span class="hljs-number">3</span>) = NOT ALLOCATED          <br><span class="hljs-attribute">PFS</span> (<span class="hljs-number">1</span>:<span class="hljs-number">8088</span>) = <span class="hljs-number">0</span>x40 ALLOCATED   <span class="hljs-number">0</span>_PCT_FULL                               DIFF (<span class="hljs-number">1</span>:<span class="hljs-number">6</span>) = NOT CHANGED<br><span class="hljs-attribute">ML</span> (<span class="hljs-number">1</span>:<span class="hljs-number">7</span>) = NOT MIN_LOGGED           <br><br><span class="hljs-attribute">DATA</span>:<br><br><br><span class="hljs-attribute">Slot</span> <span class="hljs-number">0</span>, Offset <span class="hljs-number">0</span>x60, Length <span class="hljs-number">27</span>, DumpStyle BYTE<br><br><span class="hljs-attribute">Record</span> Type = INDEX_RECORD          Record Attributes =  VARIABLE_COLUMNS<br><span class="hljs-attribute">Record</span> Size = <span class="hljs-number">27</span>                    <br><span class="hljs-attribute">Memory</span> Dump @<span class="hljs-number">0</span>x000000F51E7F8060<br><br><span class="hljs-attribute">0000000000000000</span>:   <span class="hljs-number">26</span>f82600 <span class="hljs-number">00010001</span> <span class="hljs-number">001</span>b0031 <span class="hljs-number">00300037</span> <span class="hljs-number">00300038</span>  &amp;√∏&amp;........<span class="hljs-number">1.0.7.0</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">0000000000000014</span>:   <span class="hljs-number">00310030</span> <span class="hljs-number">003000</span>                               .<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<br><br><span class="hljs-attribute">Slot</span> <span class="hljs-number">1</span>, Offset <span class="hljs-number">0</span>x7b, Length <span class="hljs-number">27</span>, DumpStyle BYTE<br><br><span class="hljs-attribute">Record</span> Type = INDEX_RECORD          Record Attributes =  VARIABLE_COLUMNS<br><span class="hljs-attribute">Record</span> Size = <span class="hljs-number">27</span>                    <br><span class="hljs-attribute">Memory</span> Dump @<span class="hljs-number">0</span>x000000F51E7F807B<br><br><span class="hljs-attribute">0000000000000000</span>:   <span class="hljs-number">26002700</span> <span class="hljs-number">00010001</span> <span class="hljs-number">001</span>b0038 <span class="hljs-number">00370032</span> <span class="hljs-number">00360038</span>  &amp;.&#x27;........<span class="hljs-number">8.7.2.6</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">0000000000000014</span>:   <span class="hljs-number">00380033</span> <span class="hljs-number">003700</span>                               .<span class="hljs-number">8</span>.<span class="hljs-number">3</span>.<span class="hljs-number">7</span>.<br><br><span class="hljs-attribute">OFFSET</span> TABLE:<br><br><span class="hljs-attribute">Row</span> - Offset                        <br><span class="hljs-attribute">1</span> (<span class="hljs-number">0</span>x1) - <span class="hljs-number">123</span> (<span class="hljs-number">0</span>x7b)                <br><span class="hljs-attribute">0</span> (<span class="hljs-number">0</span>x0) - <span class="hljs-number">96</span> (<span class="hljs-number">0</span>x60)                 <br><br><br><span class="hljs-attribute">DBCC</span> execution completed. If DBCC printed error messages, contact your system administrator.<br><span class="hljs-attribute">DBCC</span> execution completed. If DBCC printed error messages, contact your system administrator.<br><br><span class="hljs-attribute">Completion</span> time: <span class="hljs-number">2022</span>-<span class="hljs-number">06</span>-<span class="hljs-number">15</span>T16:<span class="hljs-number">06</span>:<span class="hljs-number">02</span>.<span class="hljs-number">9847148</span>+<span class="hljs-number">08</span>:<span class="hljs-number">00</span><br></code></pre></td></tr></table></figure><ol type="1"><li><p>BUFFERÊ†áËØÜËØ•Êï∞ÊçÆÈ°µÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆ</p></li><li><p>PAGE HEADERÊòæÁ§∫‰∫ÜÈ°µÂ§¥ÁöÑ‰ø°ÊÅØ</p><ol type="1"><li><p>ËøôÈáå<code>m_prevPage = (0:0) m_nextPage = (0:0)</code>ÂèØ‰ª•ÁúãÂá∫ËøôÈ°µÊòØÊ†πÈ°µ</p></li><li><p>ÈÉ®ÂàÜÈ°µÂ§¥Â±ûÊÄßËß£Êûê</p><table><thead><tr class="header"><th>È°µÂ§¥Â±ûÊÄß</th><th>Ëß£Êûê</th></tr></thead><tbody><tr class="odd"><td>m_pageID</td><td>È°µÁöÑÁºñÂè∑</td></tr><tr class="even"><td>m_headerVersion</td><td>È°µÂ§¥Ê†ºÂºèÁöÑÁâàÊú¨ÔºåËøô‰∏™ÂÄºÊòØ1</td></tr><tr class="odd"><td>m_type</td><td>È°µÁöÑÁ±ªÂûã1ÔºöË°®ÊòéÊòØÊï∞ÊçÆÈ°µ„ÄÇÂåÖÊã¨heapÁªìÊûÑÁöÑÊï∞ÊçÆÔºåÂíåËÅöÈõÜÁ¥¢ÂºïÈáåBÊ†ëÁªìÊûÑÁöÑÊúÄÂ∫ïÂ±ÇÈ°µ2ÔºöÁ¥¢ÂºïÈ°µ„ÄÇÂåÖÊã¨ËÅöÈõÜÁ¥¢ÂºïÈáåBÊ†ëÁªìÊûÑÁöÑÈùûÂ∫ïÂ±ÇÈ°µÂíåÈùûËÅöÈõÜÁ¥¢ÂºïÁöÑÊâÄÊúâÈ°µÂÖ∂‰ªñÈ°µÁ±ªÂûãÔºåÂú®Ê≠§ÊöÇ‰∏çÊèêÂèä„ÄÇ</td></tr><tr class="even"><td>m_typeFlagBits</td><td>Âü∫Êú¨‰∏äÁî®‰∏çÂà∞</td></tr><tr class="odd"><td>m_level</td><td>Âú®BÊ†ëÁªìÊûÑ‰∏≠ÁöÑÂ±ÇÁ∫ß„ÄÇÊúÄÂ∫ïÂ±ÇÁöÑÂ±ÇÁ∫ßÊòØ0.</td></tr><tr class="even"><td>m_flagBits</td><td>È°µÁöÑÂ±ûÊÄß„ÄÇÂ¶Ç0x200Ë°®ÊòéÈ°µÊúâchecksumÊ£ÄÊü•</td></tr><tr class="odd"><td>m_prevPage, m_nextPage</td><td>Âú®BÊ†ëÁªìÊûÑÁöÑÂêå‰∏ÄÂ±ÇÁ∫ßÊï∞ÊçÆÈ°µ‰πãÈó¥Ôºå‰∫íÁõ∏ÈÄöËøám_prevPageÂíåm_nextPageËøûÊé•Ëµ∑Êù•„ÄÇ</td></tr><tr class="even"><td>m_slotCnt</td><td>ÂΩìÂâçÈ°µ‰∏≠ÔºåÊúâÂ§öÂ∞ëÊù°ËÆ∞ÂΩï</td></tr><tr class="odd"><td>m_freeCnt</td><td>ËøôÊòØÂΩìÂâçÈ°µ‰∏≠ÔºåËøòÂâ©‰∏ãÂ§öÂ∞ëÁ©∫Èó¥Ôºå‰ª•Â≠óËäÇ‰∏∫Âçï‰Ωç</td></tr><tr class="even"><td>m_lsn</td><td>ËøôÊòØÂΩìÂâçÈ°µÁöÑÊâÄÊúâËÆ∞ÂΩï‰∏≠ÔºåÊúÄÂêé‰∏Ä‰∏™ÊîπÂèòÁõ∏ÂØπÂ∫îÁöÑÊó•ÂøóËÆ∞ÂΩïÂè∑(Log SequenceNumber)</td></tr></tbody></table></li></ol></li><li><p>Ê≥®ÊÑèËøôÈáåÁ¨¨‰∏Ä‰∏™offsetÊ≠£Â•ΩÊòØ96ÔºåÂØπÂ∫îÈ°µÂ§¥‰ø°ÊÅØ</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Row</span> - Offset                        <br><span class="hljs-attribute">1</span> (<span class="hljs-number">0</span>x1) - <span class="hljs-number">123</span> (<span class="hljs-number">0</span>x7b)                <br><span class="hljs-attribute">0</span> (<span class="hljs-number">0</span>x0) - <span class="hljs-number">96</span> (<span class="hljs-number">0</span>x60) <br></code></pre></td></tr></table></figure></li><li><p>ÈùûËÅöÈõÜÁ¥¢ÂºïÈîÆÊåáÂêëÁöÑÂÜÖÂÆπ</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs maxima">Slot <span class="hljs-number">0</span>, Offset <span class="hljs-number">0x60</span>, Length <span class="hljs-number">27</span>, DumpStyle BYTE<br>...<br><span class="hljs-number">0000000000000000</span>:   26f82600 <span class="hljs-number">00010001</span> <span class="hljs-number">001b0031</span> <span class="hljs-number">00300037</span> <span class="hljs-number">00300038</span>  &amp;√∏&amp;........<span class="hljs-number">1.0</span><span class="hljs-number">.7</span><span class="hljs-number">.0</span><span class="hljs-number">.8</span><br><span class="hljs-number">0000000000000014</span>:   <span class="hljs-number">00310030</span> <span class="hljs-number">003000</span>                               .<span class="hljs-number">1.0</span><span class="hljs-number">.0</span>.<br>Slot <span class="hljs-number">1</span>, Offset <span class="hljs-number">0x7b</span>, Length <span class="hljs-number">27</span>, DumpStyle BYTE<br>...<br><span class="hljs-number">0000000000000000</span>:   <span class="hljs-number">26002700</span> <span class="hljs-number">00010001</span> <span class="hljs-number">001b0038</span> <span class="hljs-number">00370032</span> <span class="hljs-number">00360038</span>  &amp;.&#x27;........<span class="hljs-number">8.7</span><span class="hljs-number">.2</span><span class="hljs-number">.6</span><span class="hljs-number">.8</span><br><span class="hljs-number">0000000000000014</span>:   <span class="hljs-number">00380033</span> <span class="hljs-number">003700</span>                               .<span class="hljs-number">8.3</span><span class="hljs-number">.7</span>.<br></code></pre></td></tr></table></figure><ol type="1"><li><p>ÂØπ‰∫é<code>10708100</code>ÔºåÊâÄÊåáÂêëÁöÑÈ°µÈù¢‰ΩçÁΩÆÊòØ<code>f82600 000100</code>ÔºåÂç≥(1,9976)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">DBCC TRACEON(<span class="hljs-number">3604</span>)<br>DBCC PAGE(<span class="hljs-string">&#x27;AdventureWorks2019&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9976</span>, <span class="hljs-number">1</span>)<br>DBCC TRACEOFF(<span class="hljs-number">3604</span>)<br></code></pre></td></tr></table></figure><ol type="1"><li><p>Âú®Page HeaderÂèØ‰ª•ÂèëÁé∞ÔºåËøô‰∏ÄÈ°µÂú®Ê†ëÁöÑËæπÁºòÔºå‰∏ã‰∏ÄÈ°µÈ°µÊòØ(1:9984)</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">m_prevPage</span> = (<span class="hljs-number">0</span>:<span class="hljs-number">0</span>)                  m_nextPage = (<span class="hljs-number">1</span>:<span class="hljs-number">9984</span>)<br></code></pre></td></tr></table></figure></li><li><p>ÂèØ‰ª•ÁúãÂà∞‰∏ÄÂÖ±Êúâ255‰∏™slotÔºåÂç≥Ëøô‰∏™È°µÈù¢Êúâ255‰∏™child node</p></li></ol></li><li><p>ÂØπ‰∫é<code>87268837</code>ÔºåÊâÄÊåáÂêëÁöÑÈ°µÈù¢‰ΩçÁΩÆÊòØ<code>02700 000100</code>ÔºåÂç≥(1,9984)Ôºå‰∏é‰∏äËø∞ÂèëÁé∞Áõ∏Á¨¶</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">DBCC TRACEON(<span class="hljs-number">3604</span>)<br>DBCC PAGE(<span class="hljs-string">&#x27;AdventureWorks2019&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9984</span>, <span class="hljs-number">1</span>)<br>DBCC TRACEOFF(<span class="hljs-number">3604</span>)<br></code></pre></td></tr></table></figure><ol type="1"><li><p>Âú®page headerÂèØ‰ª•ÂèëÁé∞ÔºåËøô‰∏ÄÈ°µÂú®Ê†ëÁöÑÂè¶‰∏ÄËæπÁºòÔºåÂâç‰∏ÄÈ°µÊòØ(1:9976)</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">m_prevPage</span> = (<span class="hljs-number">1</span>:<span class="hljs-number">9976</span>)               m_nextPage = (<span class="hljs-number">0</span>:<span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure></li><li><p>ÂèØ‰ª•ÁúãÂà∞‰∏ÄÂÖ±Êúâ35‰∏™slot</p></li></ol></li><li><p>Â¶ÇÊûúÊàë‰ª¨Êü•ÁúãÂØπ‰∫éEmployeeËøô‰∏™objectÔºåindex=5ÁöÑÊó∂ÂÄôÔºåÂØπÂ∫îÁöÑ‰ø°ÊÅØÊòØNationalIDNumber</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.indexes <span class="hljs-keyword">Where</span> object_id <span class="hljs-operator">=</span> <span class="hljs-number">1893581784</span><br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615163547071.png"alt="Êü•ËØ¢objectid" /><figcaption aria-hidden="true">Êü•ËØ¢objectid</figcaption></figure></li><li><p>Áõ¥Êé•Êü•ÁúãNationalIDNumberÔºåÊàë‰ª¨ÂèØ‰ª•ÂèëÁé∞Ôºå‰∏ÄÂÖ±Êúâ290=255+35Ë°åÔºå10708100Âíå87268837Â±û‰∫éNationalIDNumber„ÄÇ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> NationalIDNumber <span class="hljs-keyword">FROM</span> HumanResources.Employee<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615163940802.png"alt="Êü•ËØ¢NationalIDNumber" /><figcaption aria-hidden="true">Êü•ËØ¢NationalIDNumber</figcaption></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615165055657.png"alt="ÈùûËÅöÈõÜÁ¥¢ÂºïÁªìÊûÑ" /><figcaption aria-hidden="true">ÈùûËÅöÈõÜÁ¥¢ÂºïÁªìÊûÑ</figcaption></figure></li></ol></li></ol><h3id="Ê°à‰æã‰ΩøÁî®sp_allocationmetadataÊü•ÁúãÂàÜÈÖçÂçïÂÖÉ‰ø°ÊÅØ">Ê°à‰æãÔºö‰ΩøÁî®sp_AllocationMetadataÊü•ÁúãÂàÜÈÖçÂçïÂÖÉ‰ø°ÊÅØ</h3><blockquote><p>Reference <ahref="https://www.sqlskills.com/blogs/paul/inside-the-storage-engine-sp_allocationmetadata-putting-undocumented-system-catalog-views-to-work/">InsideThe Storage Engine: sp_AllocationMetadata - Paul S. Randal(sqlskills.com)</a></p></blockquote><p>ÂàõÂª∫procedure</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">/*============================================================================</span><br><span class="hljs-comment">  File:     sp_AllocationMetadata.sql</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">  Summary:  This script cracks the system tables to provide top-level</span><br><span class="hljs-comment">            metadata about a table or index</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">  SQL Server Versions: 2005 onwards</span><br><span class="hljs-comment">------------------------------------------------------------------------------</span><br><span class="hljs-comment">  Written by Paul S. Randal, SQLskills.com</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">  (c) 2014, SQLskills.com. All rights reserved.</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">  For more scripts and sample code, check out</span><br><span class="hljs-comment">    http://www.SQLskills.com</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">  You may alter this code for your own *non-commercial* purposes. You may</span><br><span class="hljs-comment">  republish altered code as long as you include this copyright and give due</span><br><span class="hljs-comment">  credit, but you must obtain prior permission before blogging this code.</span><br><span class="hljs-comment"> </span><br><span class="hljs-comment">  THIS CODE AND INFORMATION ARE PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF</span><br><span class="hljs-comment">  ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED</span><br><span class="hljs-comment">  TO THE IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A</span><br><span class="hljs-comment">  PARTICULAR PURPOSE.</span><br><span class="hljs-comment">============================================================================*/</span><br> <br><span class="hljs-comment">-- USE [master];</span><br><span class="hljs-comment">-- GO</span><br> <br>IF OBJECT_ID (N<span class="hljs-string">&#x27;sp_AllocationMetadata&#x27;</span>) <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br>    <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PROCEDURE</span> [sp_AllocationMetadata];<br>GO<br> <br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PROCEDURE</span> [sp_AllocationMetadata]<br>(<br>    <span class="hljs-variable">@object</span> SYSNAME <span class="hljs-operator">=</span> <span class="hljs-keyword">NULL</span><br>)<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span><br>    OBJECT_NAME ([sp].[object_id]) <span class="hljs-keyword">AS</span> [Object Name],<br>    [sp].[index_id] <span class="hljs-keyword">AS</span> [Index ID],<br>    [sp].[partition_id] <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">Partition</span> ID],<br>        [sa].[allocation_unit_id] <span class="hljs-keyword">AS</span> [Alloc Unit ID],<br>    [sa].[type_desc] <span class="hljs-keyword">AS</span> [Alloc Unit Type],<br>    <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">VARCHAR</span> (<span class="hljs-number">6</span>),<br>        <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">INT</span>,<br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_page], <span class="hljs-number">6</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_page], <span class="hljs-number">5</span>, <span class="hljs-number">1</span>))) <span class="hljs-operator">+</span><br>    <span class="hljs-string">&#x27;:&#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">VARCHAR</span> (<span class="hljs-number">20</span>),<br>        <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">INT</span>,<br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_page], <span class="hljs-number">4</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_page], <span class="hljs-number">3</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_page], <span class="hljs-number">2</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_page], <span class="hljs-number">1</span>, <span class="hljs-number">1</span>))) <span class="hljs-operator">+</span><br>    <span class="hljs-string">&#x27;)&#x27;</span> <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">First</span> Page],<br>    <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">VARCHAR</span> (<span class="hljs-number">6</span>),<br>        <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">INT</span>,<br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[root_page], <span class="hljs-number">6</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[root_page], <span class="hljs-number">5</span>, <span class="hljs-number">1</span>))) <span class="hljs-operator">+</span><br>    <span class="hljs-string">&#x27;:&#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">VARCHAR</span> (<span class="hljs-number">20</span>),<br>        <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">INT</span>,<br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[root_page], <span class="hljs-number">4</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[root_page], <span class="hljs-number">3</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[root_page], <span class="hljs-number">2</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[root_page], <span class="hljs-number">1</span>, <span class="hljs-number">1</span>))) <span class="hljs-operator">+</span><br>    <span class="hljs-string">&#x27;)&#x27;</span> <span class="hljs-keyword">AS</span> [Root Page],<br>    <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">VARCHAR</span> (<span class="hljs-number">6</span>),<br>        <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">INT</span>,<br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_iam_page], <span class="hljs-number">6</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_iam_page], <span class="hljs-number">5</span>, <span class="hljs-number">1</span>))) <span class="hljs-operator">+</span><br>    <span class="hljs-string">&#x27;:&#x27;</span> <span class="hljs-operator">+</span> <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">VARCHAR</span> (<span class="hljs-number">20</span>),<br>        <span class="hljs-keyword">CONVERT</span> (<span class="hljs-type">INT</span>,<br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_iam_page], <span class="hljs-number">4</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_iam_page], <span class="hljs-number">3</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_iam_page], <span class="hljs-number">2</span>, <span class="hljs-number">1</span>) <span class="hljs-operator">+</span><br>            <span class="hljs-built_in">SUBSTRING</span> ([sa].[first_iam_page], <span class="hljs-number">1</span>, <span class="hljs-number">1</span>))) <span class="hljs-operator">+</span><br>    <span class="hljs-string">&#x27;)&#x27;</span> <span class="hljs-keyword">AS</span> [<span class="hljs-keyword">First</span> IAM Page]<br><span class="hljs-keyword">FROM</span><br>    sys.system_internals_allocation_units <span class="hljs-keyword">AS</span> [sa],<br>    sys.partitions <span class="hljs-keyword">AS</span> [sp]<br><span class="hljs-keyword">WHERE</span><br>    [sa].[container_id] <span class="hljs-operator">=</span> [sp].[partition_id]<br><span class="hljs-keyword">AND</span> [sp].[object_id] <span class="hljs-operator">=</span><br>    (<span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> (<span class="hljs-variable">@object</span> <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>)<br>        <span class="hljs-keyword">THEN</span> [sp].[object_id]<br>        <span class="hljs-keyword">ELSE</span> OBJECT_ID (<span class="hljs-variable">@object</span>)<br>    <span class="hljs-keyword">END</span>);<br>GO<br> <br><span class="hljs-keyword">EXEC</span> sys.sp_MS_marksystemobject [sp_AllocationMetadata];<br>GO<br> <br><span class="hljs-comment">--USE [AdventureWorks];</span><br><span class="hljs-comment">--GO</span><br><span class="hljs-comment">--EXEC [sp_AllocationMetadata] N&#x27;HumanResources.Employee&#x27;;</span><br><span class="hljs-comment">--GO</span><br></code></pre></td></tr></table></figure><p>Âú®Âè¶Â§ñÁöÑËøûÊé•‰∏≠ÊâßË°å</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">EXEC</span> [sp_AllocationMetadata] N<span class="hljs-string">&#x27;HumanResources.Employee&#x27;</span>;<br>GO<br></code></pre></td></tr></table></figure><p>Âç≥ÂèØÊü•Áúã</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615165642548.png"alt="sp_AllocationMetadataÁªìÊûú" /><figcaption aria-hidden="true">sp_AllocationMetadataÁªìÊûú</figcaption></figure><h2 id="Êó•ÂøóÊñá‰ª∂ÁöÑÁ©∫Èó¥‰ΩøÁî®ÂíåÁÆ°ÁêÜ">Êó•ÂøóÊñá‰ª∂ÁöÑÁ©∫Èó¥‰ΩøÁî®ÂíåÁÆ°ÁêÜ</h2><p>ÊØè‰∏™Êï∞ÊçÆÂ∫ìÈÉΩÊúâ‰∫ãÂä°Êó•ÂøóÔºåÁî®‰∫éËÆ∞ÂΩïÊâÄÊúâ‰∫ãÂä°‰ª•ÂèäÊØè‰∏™‰∫ãÂä°ÂØπÊï∞ÊçÆÂ∫ìÊâÄÂÅöÁöÑ‰øÆÊîπ„ÄÇ</p><p>SQLServerÂØπÊï∞ÊçÆÈ°µÁöÑÊèíÂÖ•„ÄÅ‰øÆÊîπÂíåÂà†Èô§ÔºåÊòØÂØπÁºìÂÜ≤Âå∫È´òÈÄüÁºìÂ≠òÔºàÂÜÖÂ≠òÔºâ‰∏≠ÁöÑÈ°µÂâØÊú¨ËøõË°åÊìç‰ΩúÔºåÊìç‰ΩúÂÆåÊàêÂêéÂ∞±Êèê‰∫§‰∫ãÂä°ÔºåÂΩìÊï∞ÊçÆÂ∫ì‰∏≠Âá∫Áé∞Ê£ÄÊü•ÁÇπÊàñÁºìÂÜ≤Âå∫‰∏çÂ§üÊó∂ÔºåÊâçÂÜôÂÖ•Á£ÅÁõò„ÄÇ</p><p>SQL Server‰ºöÁ°Æ‰øùÂú®Êèê‰∫§‰∫ãÂä°Êó∂Êàñ‰πãÂâçÂ∞±Â∞ÜÊó•ÂøóËÆ∞ÂΩïÂÜôÂÖ•Á£ÅÁõò„ÄÇ</p><p>Â¶ÇÊûúÊó•ÂøóÊñá‰ª∂Áº∫Â§±ÊàñËÄÖÊçüÂùèÔºåÂ∞ÜÁ≠âÂêå‰∫éÊï∞ÊçÆÂ∫ìÊçüÂùè„ÄÇ</p><p>Âà∑Êñ∞È°µÔºöÂ∞Ü‰øÆÊîπÂêéÁöÑÊï∞ÊçÆÈ°µ‰ªéÈ´òÈÄüÁºìÂÜ≤Â≠òÂÇ®Âô®ÂÜôÂÖ•Á£ÅÁõò</p><p>ËÑèÈ°µÔºöÂú®È´òÈÄüÁºìÂ≠ò‰∏≠‰øÆÊîπ‰ΩÜÂ∞öÊú™ÂÜôÂÖ•Á£ÅÁõòÁöÑÈ°µ</p><p>Êó•ÂøóÊñá‰ª∂ÁªÑÁªáÊñπÂºèÔºö</p><ol type="1"><li>ÊØè‰∏ÄÁâ©ÁêÜÊó•ÂøóÊñá‰ª∂Áî±Â§ö‰∏™ËôöÊãüÊó•ÂøóÂçïÂÖÉÁªÑÊàê</li><li>ËôöÊãüÊó•ÂøóÂçïÂÖÉÊ≤°ÊúâÂõ∫ÂÆöÂ§ßÂ∞è</li><li>‰∏Ä‰∏™Áâ©ÁêÜÊó•ÂøóÊñá‰ª∂ÊâÄÂåÖÂê´ÁöÑËôöÊãüÊó•ÂøóÂçïÂÖÉÊï∞‰∏çÂõ∫ÂÆö</li><li>ÁÆ°ÁêÜÂëò‰∏çËÉΩÈÖçÁΩÆÊàñËÆæÁΩÆËôöÊãüÊó•ÂøóÂçïÂÖÉÁöÑÂ§ßÂ∞èÊàñÊï∞Èáè</li><li>‰∏Ä‰∏™ËôöÊãüÊó•ÂøóÂçïÂÖÉÂèØ‰ª•ÂàÜÊàêÂæàÂ§öÂùóÔºåÂùóÂÜÖÊúâÂæàÂ§öÂÖ∑‰ΩìÁöÑÊó•ÂøóËÆ∞ÂΩï</li><li>ÂØπ‰∫éÊØèÊù°Êó•ÂøóËÆ∞ÂΩïÔºåÈÉΩÊúâ‰∏Ä‰∏™LSN(Log Sequence Number)ÁºñÂè∑<ol type="1"><li>ËôöÊãüÊó•ÂøóÂçïÂÖÉ(Virtual LogFile)ÁöÑÂ∫èÂàóÂè∑ÔºöËôöÊãüÊó•ÂøóÂçïÂÖÉ‰∏≠ÂùóÁöÑÁºñÂè∑ÔºöÂùó‰∏≠Êó•ÂøóËÆ∞ÂΩïÁöÑÁºñÂè∑</li><li>Â¶ÇÂØπ‰∫éÊüê‰∏™LSNÔºåÂÖ∂ÁºñÂè∑‰∏∫0000001D:000000FD:0002ÔºåËøôË°®ÊòéËøô‰∏™LSNÊòØÂ±û‰∫éËôöÊãüÊó•Âøó0000001DÔºåÂú®ËØ•ËôöÊãüÊó•Âøó‰∏≠Â±û‰∫éÂùó000000FD, ÁÑ∂ÂêéÂú®ËØ•Âùó‰∏≠ÂØπÂ∫îËÆ∞ÂΩï2</li></ol></li></ol><p>‰∫ãÂä°Êó•ÂøóÊñá‰ª∂ÁªìÊûÑÔºö</p><ol type="1"><li><p>ÂõûÁªï</p></li><li><p>ÂΩìÂàõÂª∫Êï∞ÊçÆÂ∫ìÊó∂ÔºåÈÄªËæëÊó•ÂøóÊñá‰ª∂‰ªéÁâ©ÁêÜÊó•ÂøóÊñá‰ª∂ÁöÑÂßãÁ´ØÂºÄÂßãÔºåÊñ∞Êó•ÂøóËÆ∞ÂΩïË¢´Ê∑ªÂä†Âà∞ÈÄªËæëÊó•ÂøóÁöÑÊú´Á´ØÔºåÁÑ∂ÂêéÂêëÁâ©ÁêÜÊó•ÂøóÁöÑÊú´Á´ØÊâ©Âº†ÔºåÊâ©Âº†Âà∞Áâ©ÁêÜÊó•ÂøóÊñá‰ª∂Êú´Á´ØÊó∂ÔºåÂõûÁªïÂà∞ÂßãÁ´Ø</p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image002-165511277762811.jpg"alt="‰∫ãÂä°Êó•ÂøóÁöÑÂ§ñËßÇ" /><figcaption aria-hidden="true">‰∫ãÂä°Êó•ÂøóÁöÑÂ§ñËßÇ</figcaption></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image002-165511279443213.jpg"alt="‰∫ãÂä°Êó•ÂøóÂæ™ÁéØ‰ΩøÁî®" /><figcaption aria-hidden="true">‰∫ãÂä°Êó•ÂøóÂæ™ÁéØ‰ΩøÁî®</figcaption></figure></li></ol><p>Êü•ÁúãÊó•ÂøóÊñá‰ª∂‰∏≠ÁöÑ‰ø°ÊÅØÔºö</p><ol type="1"><li><p>DBCC LOG</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"># DBCC <span class="hljs-built_in">LOG</span>(<span class="hljs-operator">&lt;</span>db_id<span class="hljs-operator">|</span>db name<span class="hljs-operator">&gt;</span>, <span class="hljs-operator">&lt;</span>formart_id<span class="hljs-operator">&gt;</span>)<br># <span class="hljs-operator">&lt;</span>db_id<span class="hljs-operator">|</span>db name<span class="hljs-operator">&gt;</span>ÔºöÁõÆÊ†áÊï∞ÊçÆÂ∫ìÁºñÂè∑ÊàñËÄÖÊòØÊï∞ÊçÆÂ∫ìÂêç<br># <span class="hljs-operator">&lt;</span>format_id<span class="hljs-operator">&gt;</span>ÔºöDBCC LOGÂëΩ‰ª§ÁøªËØëÂíåËß£ÈáäÊó•ÂøóËÆ∞ÂΩïÁöÑÊñπÂºèÔºå‰∏ÄËà¨‰ΩøÁî®<span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql"># ÂàõÂª∫ÊµãËØïÊï∞ÊçÆÂ∫ìÔºåËßÇÂØüËÆ∞ÂΩï<br><span class="hljs-keyword">CREATE</span> DATABASE [TESTLOG]<br>GO<br>USE [TESTLOG]<br>GO<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> [TEST] (<br>[ID] <span class="hljs-type">int</span>,<br>[name] nvarchar(<span class="hljs-number">50</span>)<br>)<br>GO<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> [TEST] <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;aaaa&#x27;</span>) <br><span class="hljs-keyword">UPDATE</span> [TEST] <span class="hljs-keyword">set</span> [name] <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;xxxx&#x27;</span> <span class="hljs-keyword">where</span> [ID] <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>GO<br>DBCC TRACEON(<span class="hljs-number">3604</span>)<br>GO<br>DBCC <span class="hljs-built_in">LOG</span>(TESTLOG,<span class="hljs-number">3</span>)<br>GO<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/clip_image002-165511347884615.jpg"alt="DBCC LOGÁªìÊûú‰∏≠3Êù°ÂíåUPDATEÂä®‰ΩúÁõ∏ÂÖ≥ÁöÑËÆ∞ÂΩï" /><figcaption aria-hidden="true">DBCCLOGÁªìÊûú‰∏≠3Êù°ÂíåUPDATEÂä®‰ΩúÁõ∏ÂÖ≥ÁöÑËÆ∞ÂΩï</figcaption></figure></li><li><p>ApexSQL Log</p></li></ol><p>Êï∞ÊçÆÂ∫ìÁöÑÊõ¥Êñ∞Êìç‰ΩúÔºö</p><ol type="1"><li>Êï∞ÊçÆÂ∫ìÊó•ÂøóÊñá‰ª∂ËÆ∞ÂΩï‰∫ÜÊóßÂÄºÂíåÊñ∞ÂÄº</li><li>Ë°åÁ∫ßÂà´Êìç‰Ωú</li><li>RedoÂ∞±ÊòØÁî®Êñ∞ÁöÑÂÄºË¶ÜÁõñ</li><li>UndoÂ∞±ÊòØÁî®ÊóßÁöÑÂÄºË¶ÜÁõñ</li><li>DELETEÂíåTRUNCATE<ol type="1"><li>‰ΩøÁî®DELECTÂà†Èô§Ë°®ÔºåÊòØË°åÁ∫ßÂà´ÁöÑÂà†Èô§ÔºåLSNÁºñÂè∑‰∏çÂêåÔºåÊï¥‰∏™DELECTËØ≠Âè•ÊòØ‰∏Ä‰∏™‰∫ãÂä°ÔºåÊâÄ‰ª•‰∫ãÂä°ÁºñÂè∑Áõ∏Âêå</li><li>‰ΩøÁî®TRUNCATEÂà†Èô§Ë°®Ôºå‰∏çËÆ∞ÂΩïÊó•Âøó<ol type="1"><li>Âà†Èô§ËÆ∞ÂΩïÈáèÂ§ßÁöÑË°®ÔºåÈÅøÂÖç‰∫ßÁîüÂ§ßÈáèÊó•ÂøóÊñá‰ª∂</li><li>‰ΩÜÊòØ‰∏çËÉΩUndo</li></ol></li></ol></li></ol><p>SQL ServerÁöÑÊó•ÂøóËÆ∞ÂΩïÁâπÁÇπÔºö</p><ol type="1"><li>Êó•ÂøóËÆ∞ÂΩïÁöÑÊòØÊï∞ÊçÆÁöÑÂèòÂåñÔºåÈù¢ÂêëÊï∞ÊçÆÂ∫ìÊúçÂä°</li><li>ÊØèÊù°ËÆ∞ÂΩïÈÉΩÊúâÂÆÉÂîØ‰∏ÄÁöÑÁºñÂè∑ÔºàLSNÔºâÔºåÂπ∂‰∏îËÆ∞ÂΩï‰∫ÜÂÆÉÂ±û‰∫éÁöÑ‰∫ãÂä°Âè∑</li><li>Êó•ÂøóËÆ∞ÂΩïÁöÑË°åÊï∞ÂíåÂÆûÈôÖ‰øÆÊîπÁöÑÊï∞ÊçÆÈáèÊúâÂÖ≥Ôºå‰øÆÊîπË∂äÂ§öÔºåÊó•ÂøóË°åÊï∞Ë∂äÂ§ö</li><li>Êó•ÂøóËÆ∞ÂΩï‰∫Ü‰∫ãÂä°ÂèëÁîüÁöÑÊó∂Èó¥Ôºå‰ΩÜÊòØ‰∏çËÆ∞ÂΩïÂèëËµ∑ËÄÖÁöÑÁ®ãÂ∫èÂêçÁß∞ÂíåÂÆ¢Êà∑Á´Ø‰ø°ÊÅØ</li><li>SQL ServerËÉΩÂ§ü‰ªéÊó•ÂøóËÆ∞ÂΩïÈáåÈù¢ËØªÂà∞Êï∞ÊçÆ‰øÆÊîπÂâçÁöÑÂÄºÂíå‰øÆÊîπÂêéÁöÑÂÄº</li></ol><h2 id="Á©∫Èó¥‰ΩøÁî®ËÆ°ÁÆóÊñπÊ≥ï">Á©∫Èó¥‰ΩøÁî®ËÆ°ÁÆóÊñπÊ≥ï</h2><table><thead><tr class="header"><th>ÂëΩ„ÄÄ„ÄÄ‰ª§</th><th>Á≤æÁ°ÆÂçï‰Ωç</th><th>ÊÄßËÉΩÂΩ±Âìç</th><th>ÂáÜÁ°ÆÊÄß</th></tr></thead><tbody><tr class="odd"><td>DBCC SHOWFILESTATS</td><td>Âå∫</td><td>Êó†</td><td>Âü∫Êú¨ÂáÜÁ°Æ</td></tr><tr class="even"><td>sp_spaceused</td><td>È°µ</td><td>Êó†</td><td>ÊúâÊó∂‰∏çÂáÜÁ°Æ</td></tr><tr class="odd"><td>sp_spaceused + <em>updateusage</em></td><td>È°µ</td><td>Á®çÊúâ</td><td>Âü∫Êú¨ÂáÜÁ°Æ</td></tr><tr class="even"><td>sys.dm_db_partition_stats</td><td>È°µ</td><td>Êó†</td><td>ÊúâÊó∂‰∏çÂáÜÁ°Æ</td></tr><tr class="odd"><td>DBCC SHOWCONTIG</td><td>È°µ/Âå∫</td><td>Êúâ</td><td>ÂáÜÁ°Æ</td></tr></tbody></table><h3 id="Á©∫Èó¥‰ΩøÁî®ËÆ°ÁÆóÊñπÊ≥ï-1">Á©∫Èó¥‰ΩøÁî®ËÆ°ÁÆóÊñπÊ≥ï</h3><ol type="1"><li><p><code>sp_spaceused</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"># ÊòæÁ§∫Ë°åÊï∞„ÄÅ‰øùÁïôÁöÑÁ£ÅÁõòÁ©∫Èó¥‰ª•ÂèäÂΩìÂâçÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®„ÄÅÁ¥¢ÂºïËßÜÂõæÁ≠âÊï∞ÊçÆÂ∫ìÂØπË±°ÊâÄ‰ΩøÁî®ÁöÑÁ£ÅÁõòÁ©∫Èó¥<br># Ëã•‰∏çÊåáÂÆöobjectnameÔºåÂàôËøîÂõûÊï¥‰∏™Êï∞ÊçÆÂ∫ìÁöÑÁªìÊûú<br>sp_spaceused [[ <span class="hljs-variable">@objname</span> <span class="hljs-operator">=</span> ] <span class="hljs-string">&#x27;objname&#x27;</span> ]   <br>[, [ <span class="hljs-variable">@updateusage</span> <span class="hljs-operator">=</span> ] <span class="hljs-string">&#x27;updateusage&#x27;</span> ]  <br>[, [ <span class="hljs-variable">@mode</span> <span class="hljs-operator">=</span> ] <span class="hljs-string">&#x27;mode&#x27;</span> ]  <br>[, [ <span class="hljs-variable">@oneresultset</span> <span class="hljs-operator">=</span> ] oneresultset ]  <br>[, [ <span class="hljs-variable">@include</span>_total_xtp_storage <span class="hljs-operator">=</span> ] include_total_xtp_storage ]<br></code></pre></td></tr></table></figure><ol type="1"><li><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220614144152951.png"alt="sp_spaceusedËøîÂõûÁªìÊûú" /><figcaption aria-hidden="true">sp_spaceusedËøîÂõûÁªìÊûú</figcaption></figure></li><li><p>ÁªüËÆ°Âçï‰ΩçÔºöÈ°µ</p></li><li><p>Â±ÄÈôêÔºö</p><ol type="1"><li>Êï∞ÊçÆÂ∫ìÂèëÁîüËæÉÂ§ßÂèòÂåñÂêéÔºåÁªìÊûúÂ∏∏Â∏∏‰∏çÂáÜÁ°Æ<ol type="1"><li>‰ΩøÁî®<code>sp_spaceused + updateusage</code>Êù•Ë¶ÅÊ±ÇSQLServer‰∏∫ËøôÂè•Êåá‰ª§Êõ¥Êñ∞ÁÆ°ÁêÜËßÜÂõæÈáåÁöÑÁªüËÆ°‰ø°ÊÅØ</li><li>‰ΩÜÊ∂àËÄóËµÑÊ∫ê</li></ol></li><li>Êó†Ê≥ïÁªüËÆ°tempdb</li><li>‰∏ÄÊ¨°Âè™ËÉΩÊü•ËØ¢‰∏Ä‰∏™ÂØπË±°<ol type="1"><li>ÂèØ‰ª•ÈÄöËøáÁõ¥Êé•Êü•ËØ¢sys.dm_db_partition_stats‰ª•ÂèäÁõ∏ÂÖ≥ÁöÑÁÆ°ÁêÜËßÜÂõæÊù•Ëß£ÂÜ≥</li></ol></li></ol></li></ol></li><li><p><strong>Management Studio --&gt; Right click on data base --&gt;Reports --&gt; Standard Reports --&gt; Disk Usage</strong></p><ol type="1"><li><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220614144631043.png"alt="Management StudioÁöÑDisk UsageÊä•Ë°®" /><figcaption aria-hidden="true">Management StudioÁöÑDiskUsageÊä•Ë°®</figcaption></figure></li><li><p>Ë∞ÉÁî®‰∫Ü<code>DBCC ShowFileStats</code>ÂëΩ‰ª§</p></li></ol></li><li><p><code>DBCC ShowFileStats</code></p><ol type="1"><li>ÊåâÁÖßÂå∫ÁöÑ‰ΩøÁî®ÊÉÖÂÜµÁªüËÆ°Êï∞ÊçÆÊñá‰ª∂ÁöÑ‰ΩøÁî®Â§ßÂ∞è</li><li>‰ªéÁ≥ªÁªüÂàÜÈÖçÈ°µÈù¢ÔºàGAM„ÄÅSGAMÔºâËØªÂèñÂå∫ÂàÜÈÖç‰ø°ÊÅØ‰ª•ËÆ°ÁÆóÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÊñá‰ª∂Âå∫ÁöÑÊÄªÊï∞ÂíåÂ∑≤‰ΩøÁî®ÁöÑÂå∫ÁöÑÊÄªÊï∞„ÄÇ</li><li>ÊØîËæÉÂáÜÁ°ÆÂèØÈù†</li><li>‰∏ç‰ºöÂ¢ûÂä†È¢ùÂ§ñÁ≥ªÁªüË¥üÊãÖ</li><li><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220614155239877.png"title="fig:" alt="DBCC SHOWFILESTATSÁªìÊûú" /></li></ol></li><li><p><code>sys.dm_db_partition_stats</code></p><ol type="1"><li><p>ÁªüËÆ°Âçï‰ΩçÔºöÈ°µ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"># ÂØπÊï∞ÊçÆÂ∫ìÂÜÖÊâÄÊúâÂØπË±°ËøõË°åÁªüËÆ°<br><span class="hljs-keyword">SELECT</span> o.name ,<br>         <span class="hljs-built_in">SUM</span> (p.reserved_page_count) <span class="hljs-keyword">AS</span> reserved_page_count,<br>         <span class="hljs-built_in">SUM</span> (p.used_page_count) <span class="hljs-keyword">AS</span> used_page_count,<br>         <span class="hljs-built_in">SUM</span> (<br>            <span class="hljs-keyword">CASE</span><br>                <span class="hljs-keyword">WHEN</span> (p.index_id <span class="hljs-operator">&lt;</span> <span class="hljs-number">2</span>) <span class="hljs-keyword">THEN</span> (p.in_row_data_page_count <span class="hljs-operator">+</span> <br>                  p.lob_used_page_count <span class="hljs-operator">+</span> p.row_overflow_used_page_count)<br>                <span class="hljs-keyword">ELSE</span> p.lob_used_page_count <span class="hljs-operator">+</span> p.row_overflow_used_page_count<br>            <span class="hljs-keyword">END</span><br>            ) <span class="hljs-keyword">AS</span> DataPages,<br>         <span class="hljs-built_in">SUM</span> (<br>            <span class="hljs-keyword">CASE</span><br>                <span class="hljs-keyword">WHEN</span> (p.index_id <span class="hljs-operator">&lt;</span> <span class="hljs-number">2</span>) <span class="hljs-keyword">THEN</span> row_count<br>                <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span><br>            <span class="hljs-keyword">END</span><br>            ) <span class="hljs-keyword">AS</span> rowCounts<br>    <span class="hljs-keyword">FROM</span> sys.dm_db_partition_stats p <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> sys.objects o<br>        <span class="hljs-keyword">ON</span> p.object_id <span class="hljs-operator">=</span> o.object_id<br>    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> o.name<br><br><br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220614160536391.png"alt="sys.dm_db_partition_statsÊü•ËØ¢ÁªìÊûú" /><figcaptionaria-hidden="true">sys.dm_db_partition_statsÊü•ËØ¢ÁªìÊûú</figcaption></figure></li></ol></li><li><p><code>DBCC SHOWCONTIG</code></p><ol type="1"><li>ÁªüËÆ°ÊüêÂº†Ë°®ÔºàÊàñÁ¥¢ÂºïÔºâÁî®‰∫ÜÂ§öÂ∞ëÈ°µÈù¢„ÄÅÂ§öÂ∞ëÂå∫ÔºåÁîöËá≥È°µÈù¢‰∏äÁöÑÂπ≥ÂùáÊï∞ÊçÆÈáè</li><li>ËÄåÊâ´ÊèèÁöÑËøáÁ®ã‰∏≠ÔºåSQLServerÊòØË¶ÅÂä†ÈîÅÁöÑÔºõË¶ÅÂæóÂà∞ÁöÑÁªìÊûúË∂äÁ≤æÁ°ÆÔºåÊâ´ÊèèÁöÑËåÉÂõ¥Â∞±Ë∂äÂ§ß<ol type="1"><li>LIMITEDÊ®°ÂºèËøêË°åÊúÄÂø´ÔºåÊâ´ÊèèÁöÑÈ°µÊï∞ÊúÄÂ∞ë</li><li>SAMPLEDÊ®°ÂºèÂ∞ÜËøîÂõûÂü∫‰∫éÁ¥¢ÂºïÊàñÂ†Ü‰∏≠ÊâÄÊúâÈ°µÁöÑ1ÔºÖÊ†∑Êú¨ÁöÑÁªüËÆ°‰ø°ÊÅØ</li><li>DETAILEDÊ®°ÂºèÂ∞ÜÊâ´ÊèèÊâÄÊúâÈ°µÂπ∂ËøîÂõûÊâÄÊúâÁªüËÆ°‰ø°ÊÅØ</li></ol></li><li>ÊúÄÁ≤æÁ°ÆÁöÑÊñπÊ≥ïÔºå‰ΩÜÊòØÂú®Êï∞ÊçÆÂ∫ìÂ§Ñ‰∫éÂ∑•‰ΩúÈ´òÂ≥∞Êó∂Â∫îÈÅøÂÖç‰ΩøÁî®</li><li><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220614160926210.png"title="fig:" alt="DBCC SHOWCONTIGÁªìÊûú" /></li></ol></li></ol><h3 id="ÂàÜÊûêÊó•ÂøóÊñá‰ª∂Â≠òÂÇ®Á©∫Èó¥">ÂàÜÊûêÊó•ÂøóÊñá‰ª∂Â≠òÂÇ®Á©∫Èó¥</h3><p><code>DBCC SQLPERF(LOGSPACE)</code></p><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220614161059720.png"alt="DBCC SQLPERF(LOGSPACE)ÁªìÊûú" /><figcaption aria-hidden="true">DBCC SQLPERF(LOGSPACE)ÁªìÊûú</figcaption></figure><ol type="1"><li>ÁªìÊûúËøîÂõûÊâÄÊúâÊï∞ÊçÆÂ∫ìÂ§ßÂ∞èÔºå‰ΩøÁî®ÊØîÁéá</li><li>ÂØπÊÄßËÉΩÊ≤°ÊúâÂΩ±Âìç</li><li>ÁªìÊûúÊÄªÊòØÂáÜÁ°Æ</li><li>ÂèØÈöèÊó∂ËøêË°å</li></ol><h2 id="tempdbÁöÑÁ©∫Èó¥‰ΩøÁî®">TEMPDBÁöÑÁ©∫Èó¥‰ΩøÁî®</h2><p>TempdbÁ≥ªÁªüÊï∞ÊçÆÂ∫ìÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄËµÑÊ∫êÔºå‰∏ªË¶ÅÁî®‰∫é‰øùÂ≠òÔºö</p><h3 id="Áî®Êà∑ÂØπË±°">Áî®Êà∑ÂØπË±°</h3><ol type="1"><li><p>Áî±Áî®Êà∑ÊòæÂºèÂàõÂª∫</p></li><li><p>ÂèØ‰Ωç‰∫éÁî®Êà∑‰ºöËØùÁöÑ‰ΩúÁî®Âüü‰∏≠ÔºõÂèØ‰Ωç‰∫éÂàõÂª∫ÂØπË±°ÊâÄÁî®‰æãÁ®ãÁöÑ‰ΩúÁî®Âüü‰∏≠</p></li><li><p>‰æãÁ®ãÂèØ‰ª•ÊòØÂ≠òÂÇ®ËøáÁ®ã„ÄÅËß¶ÂèëÂô®ÊàñÁî®Êà∑ÂÆö‰πâÂáΩÊï∞</p></li><li><p>ÂåÖÊã¨Ôºö</p><ol type="1"><li>Áî®Êà∑ÂÆö‰πâÁöÑË°®ÂíåÁ¥¢Âºï</li><li>Á≥ªÁªüË°®ÂíåÁ¥¢Âºï</li><li>ÂÖ®Â±Ä‰∏¥Êó∂Ë°®ÂíåÁ¥¢Âºï</li><li>Â±ÄÈÉ®‰∏¥Êó∂Ë°®ÂíåÁ¥¢Âºï</li><li>tableÂèòÈáè</li><li>Ë°®ÂÄºÂáΩÊï∞‰∏≠ËøîÂõûÁöÑË°®</li></ol></li></ol><h3 id="ÂÜÖÈÉ®ÂØπË±°">ÂÜÖÈÉ®ÂØπË±°</h3><ol type="1"><li>SQL ServerÊï∞ÊçÆÂ∫ìÂºïÊìéÂàõÂª∫ÔºåÁî®‰∫éÂ§ÑÁêÜSQL ServerËØ≠Âè•</li><li>ÂèØ‰ª•Âú®ËØ≠Âè•ÁöÑ‰ΩúÁî®Âüü‰∏≠ÂàõÂª∫ÂíåÂà†Èô§</li><li>ÊØè‰∏™ÂÜÖÈÉ®ÂØπË±°Ëá≥Â∞ë‰ΩøÁî®9È°µÔºö‰∏Ä‰∏™IAMÈ°µÔºå‰∏Ä‰∏™8È°µÁöÑÂå∫</li><li>ÂåÖÊã¨Ôºö<ol type="1"><li>Áî®‰∫éÊ∏∏Ê†áÊàñÂÅáËÑ±Êú∫Êìç‰Ωú‰ª•Âèä‰∏¥Êó∂Â§ßÂûãÂØπË±°ÔºàLOBÔºâÂ≠òÂÇ®ÁöÑÂ∑•‰ΩúË°®</li><li>Áî®‰∫éÂìàÂ∏åËÅîÊé•ÊàñÂìàÂ∏åËÅöÂêàÊìç‰ΩúÁöÑÂ∑•‰ΩúÊñá‰ª∂</li><li>Áî®‰∫éÂàõÂª∫ÊàñÈáçÊñ∞ÁîüÊàêÁ¥¢ÂºïÁ≠âÊìç‰ΩúÔºàÂ¶ÇÊûúÊåáÂÆö‰∫ÜSORT_IN_TEMPDBÔºâÁöÑ‰∏≠Èó¥ÊéíÂ∫èÁªìÊûúÔºåÊàñËÄÖÊüê‰∫õGROUPBY„ÄÅORDER BYÊàñUNIONÊü•ËØ¢ÁöÑ‰∏≠Èó¥ÊéíÂ∫èÁªìÊûú</li></ol></li></ol><h3 id="ÁâàÊú¨Â≠òÂÇ®Âå∫">ÁâàÊú¨Â≠òÂÇ®Âå∫</h3><ol type="1"><li>Êï∞ÊçÆÈ°µÁöÑÈõÜÂêàÔºåÂåÖÂê´ÊîØÊåÅ‰ΩøÁî®Ë°åÁâàÊú¨ÊéßÂà∂ÁöÑÂäüËÉΩÊâÄÈúÄÁöÑÊï∞ÊçÆË°å</li><li>‰∏ªË¶ÅÁî®Êù•ÊîØÊåÅÂø´ÁÖßÔºàSnapshotÔºâ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´</li><li>‰∏ªË¶ÅÊúâ‰∏§‰∏™ÁâàÊú¨Â≠òÂÇ®Âå∫ÔºöÂÖ¨Áî®ÁâàÊú¨Â≠òÂÇ®Âå∫ÂíåËÅîÊú∫Á¥¢ÂºïÁîüÊàêÁâàÊú¨Â≠òÂÇ®Âå∫</li></ol><h3 id="tempdbÁ©∫Èó¥‰ΩøÁî®Ë∑üË∏™">TempdbÁ©∫Èó¥‰ΩøÁî®Ë∑üË∏™</h3><p>‰ΩøÁî®ÁÆ°ÁêÜËßÜÂõæ<code>sys.dm_db_file_space_usage</code>ÔºåÂåÖÂê´ÁöÑÂ≠óÊÆµÊúâÔºö</p><table><thead><tr class="header"><th>Âàó„ÄÄ„ÄÄÂêç</th><th>Êï∞ÊçÆÁ±ªÂûã</th><th>ËØ¥„ÄÄ„ÄÄÊòé</th></tr></thead><tbody><tr class="odd"><td>database_id</td><td>smallint</td><td>Êï∞ÊçÆÂ∫ìID</td></tr><tr class="even"><td>file_id</td><td>smallint</td><td>Êñá‰ª∂ID„ÄÇ file_idÊò†Â∞ÑÂà∞sys.dm_io_virtual_file_stats‰∏≠ÁöÑfile_idÔºåÂπ∂Êò†Â∞ÑÂà∞sys.sysfiles‰∏≠ÁöÑfileid</td></tr><tr class="odd"><td>unallocated_extent_ page_count</td><td>Bigint</td><td>Êñá‰ª∂ÁöÑÊú™ÂàÜÈÖçÂå∫‰∏≠ÁöÑÊÄªÈ°µÊï∞„ÄÇ ‰∏çÂåÖÊã¨Â∑≤ÂàÜÈÖçÂå∫‰∏≠ÁöÑÊú™‰ΩøÁî®È°µ</td></tr><tr class="even"><td>version_store_ reserved_page_count</td><td>Bigint</td><td>‰∏∫ÁâàÊú¨Â≠òÂÇ®ÂàÜÈÖçÁöÑÁªü‰∏ÄÂå∫‰∏≠ÁöÑÊÄªÈ°µÊï∞</td></tr><tr class="odd"><td>user_object_reserved_ page_count</td><td>bigint</td><td>‰ªéÁªü‰∏ÄÂå∫‰∏∫Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÁî®Êà∑ÂØπË±°ÂàÜÈÖçÁöÑÊÄªÈ°µÊï∞„ÄÇËÆ°Êï∞‰∏≠ÂåÖÊã¨Â∑≤ÂàÜÈÖçÂå∫‰∏≠Êú™‰ΩøÁî®ÁöÑÈ°µ„ÄÇÂèØ‰ΩøÁî®sys.allocation_unitsÁõÆÂΩïËßÜÂõæ‰∏≠ÁöÑtotal_pagesÂàóÊù•ËøîÂõûÁî®Êà∑ÂØπË±°‰∏≠ÊØè‰∏™ÂàÜÈÖçÂçïÂÖÉÁöÑ‰øùÁïôÈ°µËÆ°Êï∞</td></tr><tr class="even"><td>internal_object_ reserved_page_count</td><td>bigint</td><td>‰ªéÁªü‰∏ÄÂå∫‰∏∫Êñá‰ª∂‰∏≠ÁöÑÂÜÖÈÉ®ÂØπË±°ÂàÜÈÖçÁöÑÊÄªÈ°µÊï∞„ÄÇËÆ°Êï∞‰∏≠ÂåÖÊã¨Â∑≤ÂàÜÈÖçÂå∫‰∏≠Êú™‰ΩøÁî®ÁöÑÈ°µ„ÄÇ‰∏çÂ≠òÂú®ÂèØËøîÂõûÊØè‰∏™ÂÜÖÈÉ®ÂØπË±°ÁöÑÈ°µËÆ°Êï∞ÁöÑÁõÆÂΩïËßÜÂõæÊàñÂä®ÊÄÅÁÆ°ÁêÜÂØπË±°</td></tr><tr class="odd"><td>mixed_extent_page_ count</td><td>bigint</td><td>Êñá‰ª∂ÁöÑÂ∑≤ÂàÜÈÖçÊ∑∑ÂêàÂå∫‰∏≠ÁöÑÂ∑≤ÂàÜÈÖçÂíåÊú™ÂàÜÈÖçÊÄªÈ°µÊï∞„ÄÇÊ∑∑ÂêàÂå∫ÂåÖÂê´ÂàÜÈÖçÁªô‰∏çÂêåÂØπË±°ÁöÑÈ°µ„ÄÇÊ≠§ËÆ°Êï∞ÂåÖÂê´Êñá‰ª∂‰∏≠ÁöÑÊâÄÊúâIAMÈ°µ</td></tr></tbody></table><p>Â¶Ç‰ΩïËÆæÁΩÆtempdbÂàùÂßãÂ§ßÂ∞èÔºö</p><ol type="1"><li>Âü∫‰∫éÁîü‰∫ßÁéØÂ¢ÉËøõË°åÊµãËØï<ol type="1"><li>ËÆæÁΩÆtempdbÁöÑËá™Âä®Â¢ûÈïø</li><li>Ê®°ÊãüÂêÑ‰∏™ÂçïÁã¨ÁöÑÊü•ËØ¢ÊàñÂ∑•‰Ωú‰ªªÂä°ÔºåÂêåÊó∂ÁõëËßÜtempdbÁ©∫Èó¥‰ΩøÁî®</li><li>Ê®°ÊãüÊâßË°å‰∏Ä‰∫õÁ≥ªÁªüÁª¥Êä§Êìç‰ΩúÔºå‰æãÂ¶ÇÔºåÈáçÊñ∞ÁîüÊàêÁ¥¢ÂºïÔºåÂêåÊó∂ÁõëËßÜtempdbÁ©∫Èó¥</li><li>‰ΩøÁî®ÂâçÈù¢2Âíå3Ê≠•‰∏≠tempdbÁ©∫Èó¥‰ΩøÁî®ÂÄºÊù•È¢ÑÊµãÊÄªÁöÑÂ∑•‰ΩúË¥üËç∑‰∏ãÔºå‰ºö‰ΩøÁî®Â§öÂ∞ëÁ©∫Èó¥ÔºõÂπ∂ÈíàÂØπËÆ°ÂàíÁöÑÂπ∂ÂèëÂ∫¶Ë∞ÉÊï¥Ê≠§ÂÄº</li><li>Ê†πÊçÆÁ¨¨4Ê≠•ÂæóÂà∞ÁöÑÂÄºÔºåËÆæÁΩÆtempdbÂú®Áîü‰∫ßÁéØÂ¢É‰∏ãÁöÑÂàùÂßãÂ§ßÂ∞è„ÄÇÂêåÊó∂‰πüÂºÄÂêØËá™Âä®Â¢ûÈïø</li></ol></li></ol><h3id="Ê°à‰æãÈÄöËøáËÑöÊú¨ÁõëËßÜtempdbÁ©∫Èó¥‰ΩøÁî®">Ê°à‰æãÔºöÈÄöËøáËÑöÊú¨ÁõëËßÜtempdbÁ©∫Èó¥‰ΩøÁî®</h3><p>‰ª•‰∏ÄÂÆöÁöÑÈó¥ÈöîÊó∂Èó¥ËøêË°åËÉΩÂ§üÁõëËßÜÁ≥ªÁªüËøêË°åÁä∂ÂÜµÁöÑDBCCÂëΩ‰ª§„ÄÅÊü•ËØ¢ÁÆ°ÁêÜËßÜÂõæÔºàDMVÔºâ‰ª•ÂèäÁÆ°ÁêÜÂáΩÊï∞ÔºàDMFÔºâÁ≠âÔºåÊääÁªìÊûúËæìÂá∫Âà∞‰∏Ä‰∏™Êñá‰ª∂Èáå„ÄÇ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs sql"># Ë¢´ÁõëÊéßÁöÑquery<br><span class="hljs-keyword">select</span> @<span class="hljs-variable">@spid</span><br>go<br>use AdventureWorks2019<br>go<br><span class="hljs-keyword">select</span> getdate()<br>go<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">into</span> #mySalesOrderDetail<br><span class="hljs-keyword">from</span> Sales.SalesOrderDetail<br><span class="hljs-comment">-- ÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂Ë°®</span><br><span class="hljs-comment">-- Ëøô‰∏™Êìç‰ΩúÂ∫îËØ•‰ºöÁî≥ËØ∑Áî®Êà∑ÂØπË±°È°µÈù¢</span><br>go<br>waitfor delay <span class="hljs-string">&#x27;0:0:2&#x27;</span><br><span class="hljs-keyword">select</span> getdate()<br>go<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> #mySalesOrderDetail<br><span class="hljs-comment">-- Âà†Èô§‰∏Ä‰∏™‰∏¥Êó∂Ë°®</span><br><span class="hljs-comment">-- Ëøô‰∏™Êìç‰ΩúÂêéÁî®Êà∑ÂØπË±°È°µÈù¢Êï∞ÈáèÂ∫îËØ•‰ºö‰∏ãÈôç</span><br>go<br>waitfor delay <span class="hljs-string">&#x27;0:0:2&#x27;</span><br><span class="hljs-keyword">select</span> getdate()<br>go<br><span class="hljs-keyword">select</span> top <span class="hljs-number">100000</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span><br>[Sales].[SalesOrderDetail]<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> [Sales].[SalesOrderHeader] <br><span class="hljs-keyword">ON</span> [Sales].[SalesOrderHeader] .[SalesOrderID] <span class="hljs-operator">=</span> [Sales].[SalesOrderHeader].[SalesOrderID];<br><span class="hljs-comment">-- ËøôÈáåÂÅö‰∫Ü‰∏Ä‰∏™ÊØîËæÉÂ§ßÁöÑËÅîÊé• </span><br><span class="hljs-comment">-- Â∫îËØ•‰ºöÊúâÁ≥ªÁªüÂØπË±°ÁöÑÁî≥ËØ∑.</span><br>go<br><span class="hljs-keyword">select</span> getdate()<br><span class="hljs-comment">-- join ËØ≠Âè•ÂÅöÂÆå‰ª•ÂêéÁ≥ªÁªüÂØπË±°È°µÈù¢Êï∞ÁõÆÂ∫îËØ•‰∏ãÈôç</span><br>go<br><br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs sql"># ÁõëËßÜËÑöÊú¨<br># ÂÖàËøêË°åÊ≠§ËÑöÊú¨ÔºåÈÄâÊã©<span class="hljs-keyword">Result</span> <span class="hljs-keyword">to</span> FileÔºåÁÑ∂ÂêéËøêË°åË¢´ÊµãËØïqueryÔºåË¢´ÊµãËØïËøêË°åÁªìÊùüÂêéÔºåÂÅúÊ≠¢ÁõëËßÜËÑöÊú¨<br>use tempdb<br><span class="hljs-comment">-- ÊØèÈöî1ÁßíÈíüËøêË°å‰∏ÄÊ¨°ÔºåÁõ¥Âà∞Áî®Êà∑ÊâãÂ∑•ÁªàÊ≠¢ËÑöÊú¨ËøêË°å</span><br>while <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span><br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">select</span> getdate()<br><span class="hljs-comment">-- ‰ªéÊñá‰ª∂Á∫ßÁúãtempdb‰ΩøÁî®ÊÉÖÂÜµ</span><br>dbcc showfilestats<br><span class="hljs-comment">-- Query 1</span><br><span class="hljs-comment">-- ËøîÂõûÊâÄÊúâÂÅöËøáÁ©∫Èó¥Áî≥ËØ∑ÁöÑ‰ºöËØù‰ø°ÊÅØ</span><br><span class="hljs-keyword">Select</span> <span class="hljs-string">&#x27;Tempdb&#x27;</span> <span class="hljs-keyword">as</span> DB, getdate() <span class="hljs-keyword">as</span> <span class="hljs-type">Time</span>,<br>    <span class="hljs-built_in">SUM</span> (user_object_reserved_page_count)<span class="hljs-operator">*</span><span class="hljs-number">8</span> <span class="hljs-keyword">as</span> user_objects_kb,          <br>    <span class="hljs-built_in">SUM</span> (internal_object_reserved_page_count)<span class="hljs-operator">*</span><span class="hljs-number">8</span> <span class="hljs-keyword">as</span> internal_objects_kb,  <br>    <span class="hljs-built_in">SUM</span> (version_store_reserved_page_count)<span class="hljs-operator">*</span><span class="hljs-number">8</span>  <span class="hljs-keyword">as</span> version_store_kb,      <br>    <span class="hljs-built_in">SUM</span> (unallocated_extent_page_count)<span class="hljs-operator">*</span><span class="hljs-number">8</span> <span class="hljs-keyword">as</span> freespace_kb                <br><span class="hljs-keyword">From</span> sys.dm_db_file_space_usage<br><span class="hljs-keyword">Where</span> database_id <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br><span class="hljs-comment">-- Query 2</span><br><span class="hljs-comment">-- Ëøô‰∏™ÁÆ°ÁêÜËßÜÂõæËÉΩÂ§üÂèçÊò†ÂΩìÊó∂tempdbÁ©∫Èó¥ÁöÑÊÄª‰ΩìÂàÜÈÖç</span><br><span class="hljs-keyword">SELECT</span> t1.session_id,<br>t1.internal_objects_alloc_page_count,  t1.user_objects_alloc_page_count,<br>t1.internal_objects_dealloc_page_count , t1.user_objects_dealloc_page_count,<br>t3.<span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> sys.dm_db_session_space_usage <span class="hljs-keyword">as</span>  t1 ,<br><span class="hljs-comment">-- ÂèçÊò†ÊØè‰∏™‰ºöËØùÁ¥ØËÆ°Á©∫Èó¥Áî≥ËØ∑</span><br>sys.dm_exec_sessions <span class="hljs-keyword">as</span> t3<br><span class="hljs-comment">-- ÊØè‰∏™‰ºöËØùÁöÑ‰ø°ÊÅØ</span><br><span class="hljs-keyword">where</span><br>t1.session_id <span class="hljs-operator">=</span> t3.session_id<br><span class="hljs-keyword">and</span> (t1.internal_objects_alloc_page_count<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span><br><span class="hljs-keyword">or</span> t1.user_objects_alloc_page_count <span class="hljs-operator">&gt;</span><span class="hljs-number">0</span><br><span class="hljs-keyword">or</span> t1.internal_objects_dealloc_page_count<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span><br><span class="hljs-keyword">or</span> t1.user_objects_dealloc_page_count<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span>)<br><span class="hljs-comment">-- Query 3</span><br><span class="hljs-comment">-- ËøîÂõûÊ≠£Âú®ËøêË°åÂπ∂‰∏îÂÅöËøáÁ©∫Èó¥Áî≥ËØ∑ÁöÑ‰ºöËØùÊ≠£Âú®ËøêË°åÁöÑËØ≠Âè•</span><br><span class="hljs-keyword">SELECT</span> t1.session_id,<br>st.text<br><span class="hljs-keyword">from</span> sys.dm_db_session_space_usage <span class="hljs-keyword">as</span> t1,<br>sys.dm_exec_requests <span class="hljs-keyword">as</span> t4<br><span class="hljs-keyword">CROSS</span> APPLY sys.dm_exec_sql_text(t4.sql_handle) <span class="hljs-keyword">AS</span> st<br> <span class="hljs-keyword">where</span>  t1.session_id <span class="hljs-operator">=</span> t4.session_id <br>   <span class="hljs-keyword">and</span> t1.session_id <span class="hljs-operator">&gt;</span><span class="hljs-number">50</span> <br><span class="hljs-keyword">and</span> (t1.internal_objects_alloc_page_count<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span> <br><span class="hljs-keyword">or</span> t1.user_objects_alloc_page_count <span class="hljs-operator">&gt;</span><span class="hljs-number">0</span><br><span class="hljs-keyword">or</span> t1.internal_objects_dealloc_page_count<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span> <br><span class="hljs-keyword">or</span> t1.user_objects_dealloc_page_count<span class="hljs-operator">&gt;</span><span class="hljs-number">0</span>)<br>waitfor delay <span class="hljs-string">&#x27;0:0:1&#x27;</span><br><span class="hljs-keyword">end</span><br><br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615093337598.png"alt="ÊµãËØïËÑöÊú¨ËæìÂá∫" /><figcaption aria-hidden="true">ÊµãËØïËÑöÊú¨ËæìÂá∫</figcaption></figure><h2 id="Êï∞ÊçÆÊñá‰ª∂ÁöÑÊî∂Áº©">Êï∞ÊçÆÊñá‰ª∂ÁöÑÊî∂Áº©</h2><h3 id="Âà†Èô§Êï∞ÊçÆ">Âà†Èô§Êï∞ÊçÆ</h3><p>DELETEÂëΩ‰ª§Âπ∂‰∏çËÉΩÂÆåÂÖ®ÈáäÊîæË°®Ê†ºÊàñÁ¥¢ÂºïÁöÑÊï∞ÊçÆÁªìÊûÑ‰ª•ÂèäÂÆÉ‰ª¨Áî≥ËØ∑ÁöÑÈ°µÈù¢</p><p>Âà†Èô§Êï∞ÊçÆÈáäÊîæÁ©∫Èó¥ÊñπÊ≥ïÔºö</p><ol type="1"><li>Âú®Ë°®Ê†º‰∏äÂª∫Á´ãËÅöÈõÜÁ¥¢Âºï</li><li>Â¶ÇÊûúÊâÄÊúâÊï∞ÊçÆÈÉΩ‰∏çË¶Å‰∫ÜÔºåË¶Å‰ΩøÁî®TRUNCATE TABLEËÄå‰∏çÊòØDELETE<ol type="1"><li>TRUNCATE TABLEÈáäÊîæÊï∞ÊçÆÈ°µÔºå‰∏çËÆ∞ÂΩï‰∫ãÂä°Êó•Âøó</li><li>TRUNCATE TABLEÂßãÁªàÈîÅÂÆöË°®ÂíåÈ°µÔºåËÄå‰∏çÊòØÈîÅÂÆöÂêÑË°å</li><li>TRUNCATE TABLE‰∏çÁïô‰∏ãÁ©∫È°µ</li><li>TRUNCATETABLEÂà†Èô§Ë°®‰∏≠ÁöÑÊâÄÊúâË°åÔºå‰ΩÜË°®ÁªìÊûÑÂèäÂÖ∂Âàó„ÄÅÁ∫¶Êùü„ÄÅÁ¥¢ÂºïÁ≠â‰øùÊåÅ‰∏çÂèò</li></ol></li><li>Â¶ÇÊûúË°®Ê†ºÊú¨Ë∫´‰∏çË¶Å‰∫ÜÔºåÂ∞±Áõ¥Êé•DROP TABLE</li></ol><h3 id="Êî∂Áº©Êï∞ÊçÆÂ∫ì">Êî∂Áº©Êï∞ÊçÆÂ∫ì</h3><p>ÂáÜÂ§áÂ∑•‰ΩúÔºö</p><ol type="1"><li>Á°ÆËÆ§Êî∂Áº©ÈáèÁöÑÂ§ßÂ∞è‰∏çË∂ÖËøáÂΩìÂâçÊñá‰ª∂ÁöÑÁ©∫Èó≤Á©∫Èó¥ÁöÑÂ§ßÂ∞èÔºåÈáäÊîæÂá∫Áõ∏Â∫îÁ©∫Èó¥</li><li>‰∏ªÊï∞ÊçÆÊñá‰ª∂ÔºàPrimaryFileÔºâÊòØ‰∏çËÉΩË¢´Ê∏ÖÁ©∫ÁöÑ„ÄÇËÉΩË¢´ÂÆåÂÖ®Ê∏ÖÁ©∫ÁöÑÂè™ÊúâËæÖÂä©Êï∞ÊçÆÊñá‰ª∂</li><li>Â¶ÇÊûúË¶ÅÊää‰∏Ä‰∏™Êñá‰ª∂ÁªÑÊï¥‰∏™Ê∏ÖÁ©∫ÔºåË¶ÅÂà†Èô§ÂàÜÈÖçÂú®Ëøô‰∏™Êñá‰ª∂ÁªÑ‰∏äÁöÑÂØπË±°ÔºàË°®Ê†ºÊàñÁ¥¢ÂºïÔºâÔºåÊàñËÄÖÊääÂÆÉ‰ª¨ÁßªÂà∞ÂÖ∂‰ªñÊñá‰ª∂ÁªÑ‰∏ä</li></ol><p><code>DBCC SHRINKDATABASE</code></p><ol type="1"><li><p>Êî∂Áº©ÊåáÂÆöÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊâÄÊúâÊï∞ÊçÆÊñá‰ª∂ÂíåÊó•ÂøóÊñá‰ª∂ÁöÑÂ§ßÂ∞èÔºå‰∏çËÉΩÂØπÊØè‰∏™Êñá‰ª∂ÊåáÂÆöÊìç‰Ωú</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sql">DBCC SHRINKDATABASE   <br>( database_name <span class="hljs-operator">|</span> database_id <span class="hljs-operator">|</span> <span class="hljs-number">0</span>   <br>     [ , target_percent ]   <br>     [ , &#123; NOTRUNCATE <span class="hljs-operator">|</span> TRUNCATEONLY &#125; ]   <br>)  <br>[ <span class="hljs-keyword">WITH</span> <br>    NO_INFOMSGS ,<br>    &#123;     <br>         [ WAIT_AT_LOW_PRIORITY <br>            [ ( <br>                  <span class="hljs-operator">&lt;</span>wait_at_low_priority_option_list<span class="hljs-operator">&gt;</span><br>             )] <br>         ] <br>    &#125;<br>]<br>       <br><span class="hljs-operator">&lt;</span> wait_at_low_priority_option <span class="hljs-operator">&gt;</span> ::<span class="hljs-operator">=</span> <br> ABORT_AFTER_WAIT <span class="hljs-operator">=</span> &#123; SELF <span class="hljs-operator">|</span> BLOCKERS &#125;<br></code></pre></td></tr></table></figure></li></ol><p><code>DBCC SHRINKFILE</code></p><ol type="1"><li><p>Êî∂Áº©ÂΩìÂâçÊï∞ÊçÆÂ∫ìÊåáÂÆöÊï∞ÊçÆÊñá‰ª∂ÊàñÊó•ÂøóÊñá‰ª∂ÁöÑÂ§ßÂ∞è</p></li><li><p>Êú¨Ë¥®ÊòØÊää‰ΩøÁî®ËøáÁöÑÂå∫ÂâçÁßªÔºåÂ∞ÜÊ≤°ÊúâÂú®‰ΩøÁî®ÁöÑÂå∫‰ªéÊñá‰ª∂‰∏≠ÁßªÈô§‰ª•ËææÂà∞ÂáèÂ∞èÊñá‰ª∂Â§ßÂ∞èÁöÑÊïàÊûú„ÄÇÂΩìÂæàÂ§öÁ©∫È°µÈù¢ÂàÜÂ∏ÉÂú®ÂêÑ‰∏™Âå∫ÔºåÂØºËá¥Ê≤°ÊúâÂæàÂ§öÁ©∫ÁöÑÂå∫ÁöÑÊó∂ÂÄôÔºåÊî∂Áº©ÊïàÊûú‰ºö‰∏çÂ•Ω„ÄÇ</p></li><li><p>ËøêË°åÊó∂‰ºöÊâ´ÊèèÊï∞ÊçÆÊñá‰ª∂Âπ∂ÂØπÊ≠£Âú®ËØªÁöÑÈ°µÈù¢Âä†ÈîÅÔºåÂØπÊÄßËÉΩÊúâ‰∏ÄÂÆöÂΩ±ÂìçÔºõËøêË°åÊó∂ÂÖ∂‰ªñÁî®Êà∑ÂèØ‰ª•ÂØπÊï∞ÊçÆÂ∫ìËøõË°åËØªÂÜôÊìç‰Ωú</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql">DBCC SHRINKFILE   <br>(  <br>    &#123; file_name <span class="hljs-operator">|</span> file_id &#125;   <br>    &#123; [ , EMPTYFILE ]   <br>    <span class="hljs-operator">|</span> [ [ , target_size ] [ , &#123; NOTRUNCATE <span class="hljs-operator">|</span> TRUNCATEONLY &#125; ] ]  <br>    &#125;  <br>)  <br>[ <span class="hljs-keyword">WITH</span> <br>    NO_INFOMSGS ,<br>    &#123;     <br>         [ WAIT_AT_LOW_PRIORITY <br>            [ ( <br>                  <span class="hljs-operator">&lt;</span>wait_at_low_priority_option_list<span class="hljs-operator">&gt;</span><br>             )] <br>         ] <br>]<br>       <br><span class="hljs-operator">&lt;</span> wait_at_low_priority_option <span class="hljs-operator">&gt;</span> ::<span class="hljs-operator">=</span> <br> ABORT_AFTER_WAIT <span class="hljs-operator">=</span> &#123; SELF <span class="hljs-operator">|</span> BLOCKERS &#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="Ê°à‰æãÊî∂Áº©Êï∞ÊçÆÂ∫ì">Ê°à‰æãÔºöÊî∂Áº©Êï∞ÊçÆÂ∫ì</h3><p>ÂàõÂª∫Êï∞ÊçÆÂ∫ìÔºåÂπ∂ÂàõÂª∫‰∏Ä‰∏™ÊØè‰∏ÄË°åÈÉΩ‰ºöÂç†Áî®‰∏Ä‰∏™È°µÈù¢ÁöÑË°®Ê†ºÔºåÁî±‰∫éË°®Ê†º‰∏äÊ≤°ÊúâËÅöÈõÜÁ¥¢ÂºïÔºåË°®Ê†º‰ª•Â†ÜÂ≠òÂÇ®„ÄÇ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database test_shrink<br>go<br>use test_shrink<br>go<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> show_extent<br>(a <span class="hljs-type">int</span>,<br>b nvarchar(<span class="hljs-number">3900</span>))<br>go<br><span class="hljs-keyword">declare</span> <span class="hljs-variable">@i</span> <span class="hljs-type">int</span><br><span class="hljs-keyword">set</span> <span class="hljs-variable">@i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>while <span class="hljs-variable">@i</span> <span class="hljs-operator">&lt;=</span><span class="hljs-number">1000</span><br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> show_extent <span class="hljs-keyword">values</span> (<span class="hljs-number">1</span>, REPLICATE ( N<span class="hljs-string">&#x27;a&#x27;</span> ,<span class="hljs-number">3900</span> ))<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> show_extent <span class="hljs-keyword">values</span> (<span class="hljs-number">2</span>, REPLICATE ( N<span class="hljs-string">&#x27;b&#x27;</span> ,<span class="hljs-number">3900</span> ))<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> show_extent <span class="hljs-keyword">values</span> (<span class="hljs-number">3</span>, REPLICATE ( N<span class="hljs-string">&#x27;c&#x27;</span> ,<span class="hljs-number">3900</span> ))<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> show_extent <span class="hljs-keyword">values</span> (<span class="hljs-number">4</span>, REPLICATE ( N<span class="hljs-string">&#x27;d&#x27;</span> ,<span class="hljs-number">3900</span> ))<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> show_extent <span class="hljs-keyword">values</span> (<span class="hljs-number">5</span>, REPLICATE ( N<span class="hljs-string">&#x27;e&#x27;</span> ,<span class="hljs-number">3900</span> ))<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> show_extent <span class="hljs-keyword">values</span> (<span class="hljs-number">6</span>, REPLICATE ( N<span class="hljs-string">&#x27;f&#x27;</span> ,<span class="hljs-number">3900</span> ))<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> show_extent <span class="hljs-keyword">values</span> (<span class="hljs-number">7</span>, REPLICATE ( N<span class="hljs-string">&#x27;g&#x27;</span> ,<span class="hljs-number">3900</span> ))<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> show_extent <span class="hljs-keyword">values</span> (<span class="hljs-number">8</span>, REPLICATE ( N<span class="hljs-string">&#x27;h&#x27;</span> ,<span class="hljs-number">3900</span> ))<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@i</span> <span class="hljs-operator">=</span> <span class="hljs-variable">@i</span> <span class="hljs-operator">+</span><span class="hljs-number">1</span><br><span class="hljs-keyword">end</span><br>dbcc showcontig(<span class="hljs-string">&#x27;show_extent&#x27;</span>)<br>go<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615101858653.png"alt="DBCC SHOWCONTIGÁªìÊûú" /><figcaption aria-hidden="true">DBCC SHOWCONTIGÁªìÊûú</figcaption></figure><p>ÂèØ‰ª•ÁúãÂà∞Âç†Áî®‰∫Ü8000È°µ</p><p>Âà†Èô§ÊØè‰∏™Âå∫ÈáåÈù¢ÁöÑ7‰∏™È°µÈù¢ÔºåÂè™‰øùÁïôa=5ÁöÑËøô‰∫õËÆ∞ÂΩï</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">delete</span> show_extent <span class="hljs-keyword">where</span> a <span class="hljs-operator">&lt;&gt;</span><span class="hljs-number">5</span><br>go<br>sp_spaceused show_extent<br>go<br>dbcc showcontig(<span class="hljs-string">&#x27;show_extent&#x27;</span>)<br>go<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615132811184.png"alt="sp_spaceusedÁªìÊûú" /><figcaption aria-hidden="true">sp_spaceusedÁªìÊûú</figcaption></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615132828368.png"alt="dbcc showcontigÁªìÊûú" /><figcaption aria-hidden="true">dbcc showcontigÁªìÊûú</figcaption></figure><p>ÂèØ‰ª•ÂèëÁé∞ÔºåËøôÈáå<code>Pages Scanned</code>ËØ¥‰∏ÄÂçä‰ª•‰∏äÁöÑpagesËøòÂú®‰ΩøÁî®Ôºå<code>Scan Density</code>ËØ¥ÊòéÂå∫ÈáåÈ°µÁöÑÂç†Áî®Áéá‰∏çÈ´òÔºåÊùæÊï£Ôºå<code>Extents Scanned</code>ËØ¥ÊòéÊâÄÊúâÂå∫ÈÉΩËøòÂú®Ë¢´‰ΩøÁî®„ÄÇ</p><p>Ëøô‰∏™Êó∂ÂÄôÂ¶ÇÊûúËøõË°åÊî∂Áº©</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">dbcc shrinkfile (<span class="hljs-number">1</span>, <span class="hljs-number">40</span>)<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615133740691.png"alt="Êî∂Áº©ÂêéÁªìÊûú" /><figcaption aria-hidden="true">Êî∂Áº©ÂêéÁªìÊûú</figcaption></figure><p>‰ºöÂèëÁé∞ÊòØÊ≤°Êúâ‰ªÄ‰πàÊïàÊûúÁöÑ„ÄÇ</p><p>Â¶ÇÊûúÈáçÂª∫Á¥¢ÂºïÔºåÊääÈ°µÈù¢ÈáçÊñ∞ÊéíÂàó‰∏ÄÊ¨°</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> clustered index show_I <br><span class="hljs-keyword">on</span> show_extent (a)<br>go<br>dbcc showcontig(<span class="hljs-string">&#x27;show_extent&#x27;</span>)<br>go<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615134144834.png"alt="ÈáçÂª∫Á¥¢ÂºïÂêédbcc showcontigÁªìÊûú" /><figcaption aria-hidden="true">ÈáçÂª∫Á¥¢ÂºïÂêédbccshowcontigÁªìÊûú</figcaption></figure><p>ÂèØ‰ª•ÂèëÁé∞ÔºåÈáçÂª∫Á¥¢ÂºïÂêéÔºåÁî±‰∫é‰πãÂâç‰ª•Â†ÜÂ≠òÊîæÁöÑÈ°µÈù¢‰ª•BÊï∞ÈáçÊñ∞ÊéíÂàóÔºåË¢´Âç†Áî®ÁöÑÈ°µÈù¢ÈáäÊîæÂá∫Êù•ÔºåË¢´Âç†Áî®ÁöÑÂå∫‰πüÈáäÊîæÂá∫Êù•„ÄÇÂØÜÂ∫¶‰πüÂ¢ûÂä†‰∫Ü„ÄÇËøô‰∏™Êó∂ÂÄôÂÜçÂéªÊî∂Áº©Â∞±ÊúâÊïàÊûú‰∫Ü„ÄÇ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">dbcc shrinkfile (<span class="hljs-number">1</span>, <span class="hljs-number">40</span>)<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615134518079.png"alt="ÈáçÂª∫Á¥¢ÂºïÂêéÊî∂Áº©ÁªìÊûú" /><figcaption aria-hidden="true">ÈáçÂª∫Á¥¢ÂºïÂêéÊî∂Áº©ÁªìÊûú</figcaption></figure><p>Â¶ÇÊûú‰∏çÊÉ≥Âª∫ËÅöÈõÜÁ¥¢ÂºïÔºåÂèØËÉΩÂè™ÊúâÊääËøôÂº†Ë°®ÁöÑÊï∞ÊçÆÂÖàÁßªËµ∞ÔºåÁÑ∂ÂêéÊ∏ÖÁ©∫Ë°®Ê†ºÔºåÂÜçÊääÊï∞ÊçÆÊèíÂõûÊù•</p><p>ÂØπ‰∫éÂå∫‰∏≠Â≠òÊîætextÊàñËÄÖimageÁ≠âÊï∞ÊçÆÔºàSQLServer‰ΩøÁî®ÂçïÁã¨È°µÈù¢Â≠òÊîæÔºâÔºåÈáçÂª∫Á¥¢Âºï‰∏ç‰ºöÂΩ±ÂìçÂà∞Ëøô‰∫õÊï∞ÊçÆÔºåÂ∫îËØ•ÊÄé‰πàËß£ÂÜ≥Âë¢Ôºü</p><p>‰ΩøÁî®<code>DBCC EXTENTINFO</code>ÊâìÂá∫Êï∞ÊçÆÊñá‰ª∂ÈáåÁöÑÊâÄÊúâÂå∫ÁöÑÂàÜÈÖç‰ø°ÊÅØÔºåÁÑ∂ÂêéËÆ°ÁÆóÊØè‰∏™ÂØπË±°ÁêÜËÆ∫‰∏äÂå∫ÁöÑÊï∞ÁõÆÂíåÂÆûÈôÖÁöÑÊï∞ÁõÆ„ÄÇÂ¶ÇÊûúÂÆûÈôÖÊï∞ÁõÆËøúÂ§ß‰∫éÁêÜËÆ∫ÁöÑÊï∞ÁõÆÔºåÈÇ£Ëøô‰∏™ÂØπË±°Â∞±ÊòØÁ¢éÁâáËøáÂ§öÔºåËÄÉËôëÈáçÂª∫ÂØπË±°„ÄÇ</p><h2 id="Êó•ÂøóÊñá‰ª∂‰∏çÂÅúÂú∞Â¢ûÈïø">Êó•ÂøóÊñá‰ª∂‰∏çÂÅúÂú∞Â¢ûÈïø</h2><h3 id="sql-serverÈúÄË¶ÅÁöÑÊó•ÂøóËÆ∞ÂΩï">SQL ServerÈúÄË¶ÅÁöÑÊó•ÂøóËÆ∞ÂΩï</h3><ol type="1"><li>ÊâÄÊúâÊ≤°ÊúâÁªèËøá‚ÄúÊ£ÄÊü•ÁÇπ‚ÄùÁöÑÊó•ÂøóËÆ∞ÂΩïÔºåÁªèËøáÊ£ÄÊü•ÁÇπÂêé‰ºö‰øùËØÅÊâÄÊúâÁöÑ‚ÄúËÑèÈ°µ‚ÄùÈÉΩË¢´ÂÜôÂÖ•Á°¨Áõò<ol type="1"><li>ÂØπ‰∫é‰∏çÈúÄË¶ÅÁöÑÊó•ÂøóËÆ∞ÂΩïÔºåÂú®ÊØè‰∏™Ê£ÄÊü•ÁÇπ‰ºöËøõË°åÊà™Êñ≠ÔºåÊääËøô‰∫õËÆ∞ÂΩïÂç†Áî®ÁöÑÁ©∫Èó¥Ê†áÂøóÊàêÂèØÈáçÁî®</li><li>ÂÅöÊ£ÄÊü•ÁÇπÁöÑÈ¢ëÁéáÂèñÂÜ≥‰∫éÊúçÂä°Âô®Â±ûÊÄß‚ÄúRecovery Interval‚Äù</li></ol></li><li>ÊâÄÊúâÊ≤°ÊúâÊèê‰∫§ÁöÑ‰∫ãÂä°ÊâÄ‰∫ßÁîüÁöÑÊó•ÂøóËÆ∞ÂΩïÔºå‰ª•ÂèäÂú®ÂÆÉ‰ª¨‰πãÂêéÁöÑÊâÄÊúâÊó•ÂøóËÆ∞ÂΩï„ÄÇ<ol type="1"><li>Âõ†‰∏∫‰∏Ä‰∏™Ê≤°ÊúâÊèê‰∫§ÁöÑ‰∫ãÂä°ÂèØ‰ª•Âú®‰ªª‰ΩïÊó∂ÂÄôÂõûÊªöÔºåÈúÄË¶ÅÊ†áËÆ∞ÊâÄÊúâ‰ªéËøô‰∏™‰∫ãÂä°ÂºÄÂßãÁöÑÊó•ÂøóËÆ∞ÂΩï</li></ol></li><li>ÊâÄÊúâË¶ÅÂÅöÂ§á‰ªΩÁöÑÊó•ÂøóËÆ∞ÂΩï</li><li>ÊúâÂÖ∂‰ªñÈúÄË¶ÅËØªÂèñÊó•ÂøóÁöÑÊï∞ÊçÆÂ∫ìÂäüËÉΩÊ®°Âùó<ol type="1"><li>‰∫ãÂä°ÂûãÂ§çÂà∂ÔºàTransactional ReplicationÔºâ</li><li>ÂíåÊï∞ÊçÆÂ∫ìÈïúÂÉèÔºàDatabase MirroringÔºâ</li></ol></li></ol><h3 id="Êó•ÂøóÊñá‰ª∂‰∏çÂÅúÂú∞Â¢ûÈïøÈÄöÂ∏∏ÂéüÂõ†">Êó•ÂøóÊñá‰ª∂‰∏çÂÅúÂú∞Â¢ûÈïøÈÄöÂ∏∏ÂéüÂõ†</h3><ol type="1"><li>Êï∞ÊçÆÂ∫ìÊÅ¢Â§çÊ®°Âºè‰∏çÊòØÁÆÄÂçïÊ®°ÂºèÔºå‰ΩÜÊòØÊ≤°ÊúâÂÆâÊéíÊó•ÂøóÂ§á‰ªΩÂØºËá¥Ê≤°ÊúâÊà™Êñ≠ÔºåÊó†Ê≥ïÈáäÊîæÁ©∫Èó¥</li><li>Êï∞ÊçÆÂ∫ì‰∏äÈù¢Êúâ‰∏Ä‰∏™ÂæàÈïøÊó∂Èó¥ÈÉΩÊ≤°ÊúâÊèê‰∫§ÁöÑ‰∫ãÂä°ÔºåÂØºËá¥‰∏ÄÁõ¥ËÆ∞ÂΩïÊó•Âøó</li><li>Êï∞ÊçÆÂ∫ì‰∏äÊúâ‰∏Ä‰∏™ÂæàÂ§ßÁöÑ‰∫ãÂä°Ê≠£Âú®ËøêË°å</li><li>Êï∞ÊçÆÂ∫ìÂ§çÂà∂ÊàñËÄÖÈïúÂÉèÂá∫‰∫ÜÂºÇÂ∏∏</li></ol><h3 id="Ê°à‰æãÊó•ÂøóÂ¢ûÈïøÂéüÂõ†ÂÆö‰Ωç">Ê°à‰æãÔºöÊó•ÂøóÂ¢ûÈïøÂéüÂõ†ÂÆö‰Ωç</h3><ol type="1"><li><p>Ê£ÄÊü•Êó•ÂøóÁé∞Âú®‰ΩøÁî®ÊÉÖÂÜµÂíåÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"># Ê£ÄÊü•ÂΩìÂâçÊó•ÂøóÁöÑ‰ΩøÁî®ÁôæÂàÜÊØî„ÄÅÊï∞ÊçÆÂ∫ìÊÅ¢Â§çÊ®°ÂºèÂíåÊó•ÂøóÈáçÁî®Á≠âÂæÖÁä∂ÊÄÅ<br>DBCC SQLPERF(LOGSPACE)<br>GO<br># ÂèçÊò†<span class="hljs-keyword">SQL</span> ServerËÆ§‰∏∫ÁöÑÔºå‰∏çËÉΩÊà™Êñ≠Êó•ÂøóÁöÑÂéüÂõ†<br><span class="hljs-keyword">SELECT</span> name, recovery_model_desc, log_reuse_wait,log_reuse_wait_desc <br>    <span class="hljs-keyword">FROM</span> sys.databases<br>GO<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615144944222.png"alt="Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÊó•Âøó‰∏çËÉΩTRUNCATEÁöÑÁõ¥Êé•ÂéüÂõ†" /><figcaptionaria-hidden="true">Ê£ÄÊü•Êï∞ÊçÆÂ∫ìÊó•Âøó‰∏çËÉΩTRUNCATEÁöÑÁõ¥Êé•ÂéüÂõ†</figcaption></figure><table><thead><tr class="header"><th>1.</th><th>log_reuse_waitÂÄº</th><th>log_reuse_wait_descÂÄº</th></tr></thead><tbody><tr class="odd"><td>0</td><td>NOTHING</td><td>ÂΩìÂâçÊúâ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂèØÈáçÁî®ÁöÑËôöÊãüÊó•ÂøóÊñá‰ª∂</td></tr><tr class="even"><td>1</td><td>CHECKPOINT</td><td>Ëá™‰∏äÊ¨°Êó•ÂøóÊà™Êñ≠‰πãÂêéÔºåÂ∞öÊú™Âá∫Áé∞Ê£ÄÊü•ÁÇπÔºåÊàñËÄÖÊó•ÂøóÂ§¥ÈÉ®Â∞öÊú™Ë∑®‰∏Ä‰∏™ËôöÊãüÊó•ÂøóÊñá‰ª∂ÁßªÂä®ËåÉÂõ¥ÔºàÊâÄÊúâÊÅ¢Â§çÊ®°ÂºèÔºâ</td></tr><tr class="odd"><td>2</td><td>LOG_BACKUP</td><td>SQLServerÂú®Á≠âÂæÖÁùÄÊó•ÂøóÂ§á‰ªΩ„ÄÇË¶ÅÊ±ÇÊó•ÂøóÂ§á‰ªΩÂ∞ÜÊó•ÂøóÊ†áÂ§¥ÂâçÁßªÔºà‰ªÖÈÄÇÁî®‰∫éÂÆåÊï¥ÊÅ¢Â§çÊ®°ÂºèÊàñÂ§ßÂÆπÈáèÊó•ÂøóÊÅ¢Â§çÊ®°ÂºèÔºâ„ÄÇÊó•ÂøóÂ§á‰ªΩÂÆåÊàêÂêéÔºåÊó•ÂøóÊ†áÂ§¥Â∞ÜÂâçÁßªÔºåÂπ∂‰∏î‰∏Ä‰∫õÊó•ÂøóÁ©∫Èó¥ÂèØËÉΩ‰ºöÂèò‰∏∫ÂèØÈáçÊñ∞‰ΩøÁî®</td></tr><tr class="even"><td>3</td><td>ACTIVE_BACKUP_OR_ RESTORE</td><td>Êï∞ÊçÆÂ§á‰ªΩÊàñËøòÂéüÊ≠£Âú®ËøõË°åÔºàÊâÄÊúâÊÅ¢Â§çÊ®°ÂºèÔºâ„ÄÇÊï∞ÊçÆÂ§á‰ªΩ‰∏éÊ¥ªÂä®‰∫ãÂä°ÁöÑÂ∑•‰ΩúÂéüÁêÜÁõ∏ÂêåÔºõÊï∞ÊçÆÂ§á‰ªΩËøêË°åÊó∂ÔºåÂ∞ÜÈòªÊ≠¢Êà™Êñ≠</td></tr><tr class="odd"><td>4</td><td>ACTIVE_TRANSACTION</td><td>‰∫ãÂä°Â§Ñ‰∫éÊ¥ªÂä®Áä∂ÊÄÅÔºàÊâÄÊúâÊÅ¢Â§çÊ®°ÂºèÔºâ„ÄÇ ¬üÊúâ‰∏Ä‰∏™Áî®Êà∑ÂºÄÂêØ‰∫Ü‰∏Ä‰∏™ÈïøÊó∂Èó¥ËøêË°åÁöÑ‰∫ãÂä°„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂèØËÉΩÈúÄË¶ÅÈÇ£‰∏™Áî®Êà∑Â∞Ü‰∫ãÂä°Êèê‰∫§ÊàñËÄÖÂõûÊªö‰ª•ÂêéÔºåÊâçËÉΩÈáäÊîæÁ©∫Èó¥„ÄÇ¬ü‰∫ãÂä°Ë¢´Âª∂ËøüÔºà‰ªÖÈÄÇÁî®‰∫é SQL Server 2005 Enterprise EditionÂèäÊõ¥È´òÁâàÊú¨Ôºâ„ÄÇ‚ÄúÂª∂ËøüÁöÑ‰∫ãÂä°‚ÄùÊòØÊúâÊïàÁöÑÊ¥ªÂä®‰∫ãÂä°ÔºåÂõ†‰∏∫Êüê‰∫õËµÑÊ∫ê‰∏çÂèØÁî®ÔºåÂÖ∂ÂõûÊªöÂèóÈòª„ÄÇ</td></tr><tr class="even"><td>5</td><td>DATABASE_MIRRORING</td><td>Êï∞ÊçÆÂ∫ìÈïúÂÉèÊöÇÂÅúÔºåÊàñËÄÖÂú®È´òÊÄßËÉΩÊ®°Âºè‰∏ãÔºåÈïúÂÉèÊï∞ÊçÆÂ∫ìÊòéÊòæÊªûÂêé‰∫é‰∏ª‰ΩìÊï∞ÊçÆÂ∫ìÔºà‰ªÖÈôê‰∫éÂÆåÊï¥ÊÅ¢Â§çÊ®°ÂºèÔºâ</td></tr><tr class="odd"><td>6</td><td>REPLICATION</td><td>Âú®‰∫ãÂä°Â§çÂà∂ËøáÁ®ã‰∏≠Ôºå‰∏éÂèëÂ∏ÉÁõ∏ÂÖ≥ÁöÑ‰∫ãÂä°‰ªçÊú™‰º†ÈÄíÂà∞ÂàÜÂèëÊï∞ÊçÆÂ∫ìÔºà‰ªÖÈôê‰∫éÂÆåÊï¥ÊÅ¢Â§çÊ®°ÂºèÔºâ</td></tr><tr class="even"><td>7</td><td>DATABASE_SNAPSHOT_ CREATION</td><td>Ê≠£Âú®ÂàõÂª∫Êï∞ÊçÆÂ∫ìÂø´ÁÖßÔºàÊâÄÊúâÊÅ¢Â§çÊ®°ÂºèÔºâ</td></tr><tr class="odd"><td>8</td><td>LOG_SCAN</td><td>Ê≠£Âú®ËøõË°åÊó•ÂøóÊâ´ÊèèÔºàÊâÄÊúâÊÅ¢Â§çÊ®°ÂºèÔºâ</td></tr><tr class="even"><td>9</td><td>OTHER_TRANSIENT</td><td>Ê≠§ÂÄºÂΩìÂâçÊú™‰ΩøÁî®</td></tr></tbody></table></li><li><p>Ê£ÄÊü•ÊúÄËÄÅÁöÑÊ¥ªÂä®‰∫ãÂä°</p><ol type="1"><li><p>Â¶ÇÊûúÊó•ÂøóÁöÑÂ§ßÈÉ®ÂàÜÈÉΩÂú®‰ΩøÁî®‰∏≠ÔºåËÄå‰∏îÊó•ÂøóÈáçÁî®Á≠âÂæÖÁä∂ÊÄÅÊòØACTIVE_TRANSACTIONÔºåÈúÄË¶ÅÊ£ÄÊü•ÊúÄ‰πÖÊú™Êèê‰∫§ÁöÑ‰∫ãÂä°ÊòØË∞ÅÁî≥ËØ∑ÁöÑ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"># ËøîÂõûÁöÑÊòØÂΩìÂâçÊï∞ÊçÆÂ∫ìÊúÄ‰πÖÊú™Ë¢´Êèê‰∫§ÁöÑ‰∫ãÂä°<br>DBCC OPENTRAN<br>GO<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615150013988.png"alt="ÊúÄ‰πÖÊú™Ë¢´Êèê‰∫§ÁöÑ‰∫ãÂä°ÁªìÊûú" /><figcaption aria-hidden="true">ÊúÄ‰πÖÊú™Ë¢´Êèê‰∫§ÁöÑ‰∫ãÂä°ÁªìÊûú</figcaption></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"># Êü•ÁúãÊù•ËøûÊé•Âª∫Á´ãÊÉÖÂÜµ<br><span class="hljs-keyword">SELECT</span> st.text,t2.<span class="hljs-operator">*</span>                                                         <br>    <span class="hljs-keyword">FROM</span> sys.dm_exec_sessions <span class="hljs-keyword">AS</span> t2, sys.dm_exec_connections <span class="hljs-keyword">AS</span> t1<br>        <span class="hljs-keyword">CROSS</span> APPLY sys.dm_exec_sql_text(t1.most_recent_sql_handle) <span class="hljs-keyword">AS</span> st <br>    <span class="hljs-keyword">WHERE</span> t1.session_id <span class="hljs-operator">=</span> t2.session_id<br>        <span class="hljs-keyword">AND</span> t1.session_id <span class="hljs-operator">&gt;</span><span class="hljs-number">50</span>   <br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/15/SQL%20Server%202012%20%E5%AE%9E%E6%96%BD%E4%B8%8E%E7%AE%A1%E7%90%86%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97Note%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%A9%BA%E9%97%B4%E7%AE%A1%E7%90%86/image-20220615150143255.png"alt="ËøûÊé•Âª∫Á´ãÊÉÖÂÜµ" /><figcaption aria-hidden="true">ËøûÊé•Âª∫Á´ãÊÉÖÂÜµ</figcaption></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"># Â∞ùËØïÂÖ≥Èó≠ËøûÊé•<br># Â¶ÇÊûú‰∏Ä‰∏™ËøûÊé•Ê≠£Â§Ñ‰∫éÊèê‰∫§ÊàñËÄÖÂõûÊªöÁöÑËøáÁ®ã‰∏≠Ôºå<span class="hljs-keyword">SQL</span> Server‰ºöÂ∞äÈáçÂÆÉÁöÑÊâßË°åËÄå‰∏çÂéªÂº∫Ë°åÁªàÊ≠¢ÂÆÉ<br>      KILL <span class="hljs-number">52</span><br></code></pre></td></tr></table></figure></li></ol></li></ol><h2 id="Êñá‰ª∂Ëá™Âä®Â¢ûÈïøÂíåËá™Âä®Êî∂Áº©">Êñá‰ª∂Ëá™Âä®Â¢ûÈïøÂíåËá™Âä®Êî∂Áº©</h2><h3id="Êï∞ÊçÆÊñá‰ª∂ÂíåÊó•ÂøóÊñá‰ª∂Á©∫Èó¥Áî≥ËØ∑ÁâπÁÇπ">Êï∞ÊçÆÊñá‰ª∂ÂíåÊó•ÂøóÊñá‰ª∂Á©∫Èó¥Áî≥ËØ∑ÁâπÁÇπ</h3><p>Êï∞ÊçÆÊñá‰ª∂</p><ol type="1"><li>ÊåâÊâÄÊúâÊñá‰ª∂Á©∫Èó≤Á©∫Èó¥Â§ßÂ∞èÁöÑÊØî‰æãÂàÜÈÖç<ol type="1"><li>ÂÅáËÆæ3‰∏™Êñá‰ª∂Á©∫Èó≤Á©∫Èó¥ÊòØ200Ôºö100Ôºö100Ôºå40 MBÁöÑÊï∞ÊçÆÂ∞±ÊåâÁÖß20 MB:10 MB:10MBÁöÑÊØî‰æãÂÜôÂÖ•‰∫ÜËøô3‰∏™Êñá‰ª∂</li></ol></li><li>Âä†ÂÖ•Â§ö‰∏™Êï∞ÊçÆÊñá‰ª∂<ol type="1"><li>ÂøÖÈ°ª‰øùËØÅÂêå‰∏Ä‰∏™Êñá‰ª∂ÁªÑÈáåÁöÑÊâÄÊúâÊï∞ÊçÆÊñá‰ª∂ÈÉΩÊúâÂü∫Êú¨‰∏ÄÊ†∑Â§ßÂ∞èÁöÑÁ©∫Èó≤Á©∫Èó¥‰ª•ËææÂà∞ÂàÜÊï£I/OË¥üËΩΩÁöÑÁõÆÁöÑ</li></ol></li><li>Â¶ÇÊûúÊñá‰ª∂ÂÖ®ÈÉ®ÂÜôÊª°<ol type="1"><li>‰ºöÈÄâÂèñÂÖ∂‰∏≠‰∏Ä‰∏™Êñá‰ª∂ÔºàÂèØËÉΩÊòØ‰ªªÊÑè‰∏Ä‰∏™ÔºâÂÅöËá™Âä®Â¢ûÈïøÔºåÊâÄÊúâÂêéÈù¢ÁöÑÊï∞ÊçÆÈÉΩÂÜôÂÖ•Ëøô‰∏™ÂÅö‰∫ÜËá™Âä®Â¢ûÈïøÁöÑÊñá‰ª∂ÈáåÔºåÁõ¥Âà∞Ëøô‰∏™Êñá‰ª∂ÂÜçÊ¨°ÂÜôÊª°ÔºåSQLServerË¶ÅÂÅö‰∏ã‰∏ÄÊ¨°Ëá™Âä®Â¢ûÈïø‰∏∫Ê≠¢</li><li>ÂæàÈöæËææÂà∞I/OË¥üËΩΩÂπ≥Ë°°ÁöÑÊïàÊûú</li></ol></li></ol><p>Êó•ÂøóÊñá‰ª∂Ôºö</p><ol type="1"><li>ÊåâÁÖß‰∏•Ê†ºÁöÑÈ°∫Â∫èÂÜôÂÖ•<ol type="1"><li>Âú®‰∏Ä‰∏™Êó∂Èó¥ÁÇπÂè™ÂÜôÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™Êñá‰ª∂„ÄÇÂè™ÊúâËøô‰∏™Êñá‰ª∂ÂÜôÊª°‰∫ÜÔºåSQLServerÊâç‰ºöÂÜôÂÖ•Âè¶Â§ñ‰∏Ä‰∏™</li></ol></li><li>Âä†ÂÖ•Â§ö‰∏™Êó•ÂøóÊñá‰ª∂ÂØπÊÄßËÉΩÂü∫Êú¨‰∏ç‰ºöÊúâ‰ªÄ‰πàÂ∏ÆÂä©</li><li>Â¶ÇÊûúÊñá‰ª∂ÂÖ®ÈÉ®ÂÜôÊª°<ol type="1"><li>SQL ServerËá™Âä®Â¢ûÈïøÂΩìÂâçÁöÑÊó•ÂøóÊñá‰ª∂Ôºå‰ª•‰øùËØÅÊó•ÂøóËÆ∞ÂΩïÁöÑËøûÁª≠ÊÄß</li></ol></li></ol><h3 id="Êï∞ÊçÆÂ∫ìËá™Â¢ûÈïøËÆæÁΩÆ">Êï∞ÊçÆÂ∫ìËá™Â¢ûÈïøËÆæÁΩÆ</h3><ol type="1"><li>ÂΩìÊüê‰∏™Êìç‰ΩúËß¶Âèë‰∫ÜÊñá‰ª∂Ëá™Âä®Â¢ûÈïøÊó∂ÔºåSQLServer‰ºöËÆ©ÈÇ£‰∏™Êìç‰ΩúÁ≠âÂæÖ„ÄÇÁõ¥Âà∞Êñá‰ª∂Ëá™Âä®Â¢ûÈïøÁªìÊùü‰∫ÜÔºåÂéüÂÖàÁöÑÈÇ£‰∏™Êìç‰ΩúÊâçËÉΩÁªßÁª≠ËøõË°å</li><li>Ë¶ÅËÆæÁΩÆÊàêÊåâÂõ∫ÂÆöÂ§ßÂ∞èÂ¢ûÈïø‰ª•ÈÅøÂÖç‰∏ÄÊ¨°Â¢ûÈïøÂ§™Â§öÊàñËÄÖÂ§™Â∞ë</li><li>Ë¶ÅÂÆöÊúüÁõëÊµãÂêÑ‰∏™Êï∞ÊçÆÊñá‰ª∂ÁöÑ‰ΩøÁî®ÊÉÖÂÜµÔºåÂ∞ΩÈáè‰øùËØÅÊØè‰∏™Êñá‰ª∂Ââ©‰ΩôÁöÑÁ©∫Èó¥‰∏ÄÊ†∑Â§ßÔºåÊàñËÄÖÊòØÊúüÊúõÁöÑÊØî‰æã„ÄÇ</li><li>ËÆæÁΩÆÊñá‰ª∂ÊúÄÂ§ßÂÄº</li><li>ÂèëÁîüËá™Â¢ûÈïøÂêéÔºåË¶ÅÂèäÊó∂Ê£ÄÊü•Êñ∞ÁöÑÊï∞ÊçÆÊñá‰ª∂Á©∫Èó¥ÂàÜÈÖçÊÉÖÂÜµ</li></ol><h3 id="Êï∞ÊçÆÂ∫ìËá™Âä®Êî∂Áº©">Êï∞ÊçÆÂ∫ìËá™Âä®Êî∂Áº©</h3><ol type="1"><li>‰∏çÊé®Ëçê</li><li>Ê≤ªÊ†á‰∏çÊ≤ªÊú¨<ol type="1"><li>Êî∂Áº©ÂêéËøòÊòØ‰ºöÂ¢ûÈïø</li></ol></li><li>Êï∞ÊçÆÊñá‰ª∂Êî∂Áº©‰ºöÁªôÊñá‰ª∂Â∏¶Êù•Êõ¥Â§öÁöÑÁ¢éÁâá</li><li>ÂØπÊÄßËÉΩÊúâ‰∏çÂ∞èÂΩ±Âìç</li></ol>]]></content>
    
    
    <categories>
      
      <category>Reading</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Add Databases to an Availability Group</title>
    <link href="/2022/06/08/Add%20Database%20to%20an%20Availability%20Group/"/>
    <url>/2022/06/08/Add%20Database%20to%20an%20Availability%20Group/</url>
    
    <content type="html"><![CDATA[<h1 id="add-databases-to-an-availability-group">Add Databases to anAvailability Group</h1><p>In the primary replica, restore the database.</p><figure><imgsrc="/2022/06/08/Add%20Database%20to%20an%20Availability%20Group/image-20220608094437985.png"alt="image-20220608094437985" /><figcaption aria-hidden="true">image-20220608094437985</figcaption></figure><figure><imgsrc="/2022/06/08/Add%20Database%20to%20an%20Availability%20Group/image-20220608095913496.png"alt="image-20220608095913496" /><figcaption aria-hidden="true">image-20220608095913496</figcaption></figure><p>Change the <code>Recovery Model</code> to <strong>Full</strong>.</p><figure><imgsrc="/2022/06/08/Add%20Database%20to%20an%20Availability%20Group/image-20220608100229708.png"alt="image-20220608100229708" /><figcaption aria-hidden="true">image-20220608100229708</figcaption></figure><p>Run the script to make full backups and tlog backups.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--Full Backups</span><br>BACKUP DATABASE [WideWorldImporters] <span class="hljs-keyword">TO</span>  DISK <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.SQL1\MSSQL\Backup\WideWorldImporters_FullBackup_20220608.bak&#x27;</span> <br><span class="hljs-keyword">WITH</span> NOFORMAT, NOINIT,  <br>NAME <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;WideWorldImporters-Full Database Backup&#x27;</span>, <br><span class="hljs-keyword">SKIP</span>, NOREWIND, NOUNLOAD, COMPRESSION,  STATS <span class="hljs-operator">=</span> <span class="hljs-number">10</span>, CHECKSUM<br>GO<br><br><span class="hljs-comment">--Tlog Backups</span><br>BACKUP LOG [WideWorldImporters] <span class="hljs-keyword">TO</span>  DISK <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.SQL1\MSSQL\Backup\WideWorldImporters_TlogBackup_20220608.trn&#x27;</span> <br><span class="hljs-keyword">WITH</span> NOFORMAT, NOINIT,  <br>NAME <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;WideWorldImporters-Full Database Backup&#x27;</span>, <br><span class="hljs-keyword">SKIP</span>, NOREWIND, NOUNLOAD, COMPRESSION,  STATS <span class="hljs-operator">=</span> <span class="hljs-number">10</span>, CHECKSUM<br>GO<br></code></pre></td></tr></table></figure><p>In the <strong>Properties</strong> page of the AG, add the name ofthe database, then click on <code>OK</code>, if there is no warning,then we successfully added an additional database to the AG.</p><figure><imgsrc="/2022/06/08/Add%20Database%20to%20an%20Availability%20Group/image-20220608100051919.png"alt="image-20220608100051919" /><figcaption aria-hidden="true">image-20220608100051919</figcaption></figure><figure><imgsrc="/2022/06/08/Add%20Database%20to%20an%20Availability%20Group/image-20220608100634388.png"alt="image-20220608100634388" /><figcaption aria-hidden="true">image-20220608100634388</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Install Always On 2019 For Failover Clusters</title>
    <link href="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/"/>
    <url>/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/</url>
    
    <content type="html"><![CDATA[<h1 id="install-always-on-2019-for-failover-clusters">Install Always On2019 For Failover Clusters</h1><h2 id="configure-sql-server">Configure SQL Server</h2><p>On each of the node servers (replica), turn on <strong>SQL ServerConfiguration Manager</strong>, <strong>SQL Server Services --&gt; SQLServer (MSSQLSERVER) --&gt; Properties --&gt; Always on AvailabilityGroups --&gt; Enable Always on Availability Groups</strong>.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607094155497.png"alt="image-20220607094155497" /><figcaption aria-hidden="true">image-20220607094155497</figcaption></figure><p>Then we install a stand-alone SQL service for the two node servers(replica).</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607113534697.png"alt="image-20220607113534697" /><figcaption aria-hidden="true">image-20220607113534697</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607113818112.png"alt="image-20220607113818112" /><figcaption aria-hidden="true">image-20220607113818112</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607114135531.png"alt="image-20220607114135531" /><figcaption aria-hidden="true">image-20220607114135531</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607114435948.png"alt="image-20220607114435948" /><figcaption aria-hidden="true">image-20220607114435948</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607114540380.png"alt="image-20220607114540380" /><figcaption aria-hidden="true">image-20220607114540380</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607114626758.png"alt="image-20220607114626758" /><figcaption aria-hidden="true">image-20220607114626758</figcaption></figure><p>Also, we need to enable <strong>Always on AvailabilityGroups</strong> service as we did before for the two stand-alone SQLservices.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607132532145.png"alt="image-20220607132532145" /><figcaption aria-hidden="true">image-20220607132532145</figcaption></figure><p>Moreover, for the secondary replica, we need to make sure its localSQL service can be connected to the primary replica. In the <strong>SQLServer Configuration Manager</strong> of the secondary replica,<strong>SQL Server Network Configuration --&gt; Protocols for SQL2</strong>, enable <code>Named Pipes</code> and <code>TCP/IP</code>.</p><p>You need to restart the servers to make all the changes.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607151315019.png"alt="image-20220607151315019" /><figcaption aria-hidden="true">image-20220607151315019</figcaption></figure><h2 id="restore-and-backup-databases">Restore and Backup Databases</h2><p>If you have databases that need to be added to the AG, make sure thatthey are in <strong>Full Recovery Mode</strong> and remove thesedatabases from any <strong>tlog backup maintenance</strong>. Here I needto restore and back up <code>AdventureWorks2019</code> database.</p><p>Restore the database on the primary replica, SQL 1.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607151437088.png"alt="image-20220607151437088" /><figcaption aria-hidden="true">image-20220607151437088</figcaption></figure><p>Change the <code>Recovery Model</code> to <code>Full</code>.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607103723163.png"alt="image-20220607103723163" /><figcaption aria-hidden="true">image-20220607103723163</figcaption></figure><p>Take Full and tlog backups of all databases before adding them toAG.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">--Full Backups</span><br>BACKUP DATABASE [AdventureWorks2019] <span class="hljs-keyword">TO</span>  DISK <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.SQL1\MSSQL\Backup\AdventureWorks2019_FullBackup_20220607.bak&#x27;</span> <br><span class="hljs-keyword">WITH</span> NOFORMAT, NOINIT,  <br>NAME <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;AdventureWorks2019-Full Database Backup&#x27;</span>, <br><span class="hljs-keyword">SKIP</span>, NOREWIND, NOUNLOAD, COMPRESSION,  STATS <span class="hljs-operator">=</span> <span class="hljs-number">10</span>, CHECKSUM<br>GO<br><br><span class="hljs-comment">--Tlog Backups</span><br>BACKUP LOG [AdventureWorks2019] <span class="hljs-keyword">TO</span>  DISK <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;C:\Program Files\Microsoft SQL Server\MSSQL15.SQL1\MSSQL\Backup\Adventureworks2019_TlogBackup_20220607.trn&#x27;</span> <br><span class="hljs-keyword">WITH</span> NOFORMAT, NOINIT,  <br>NAME <span class="hljs-operator">=</span> N<span class="hljs-string">&#x27;AdventureWorks2019-Full Database Backup&#x27;</span>, <br><span class="hljs-keyword">SKIP</span>, NOREWIND, NOUNLOAD, COMPRESSION,  STATS <span class="hljs-operator">=</span> <span class="hljs-number">10</span>, CHECKSUM<br>GO<br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607140009216.png"alt="image-20220607140009216" /><figcaption aria-hidden="true">image-20220607140009216</figcaption></figure><h2 id="install-always-on">Install Always On</h2><p>Connect to your primary replica, and start the <strong>NewAvailability Group Wizard</strong>.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607142521671.png"alt="image-20220607142521671" /><figcaption aria-hidden="true">image-20220607142521671</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607101944506.png"alt="image-20220607101944506" /><figcaption aria-hidden="true">image-20220607101944506</figcaption></figure><p>If the <code>status</code> of the database is not<code>Meets prerequisites</code>, check detailed information.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607104426006.png"alt="image-20220607104426006" /><figcaption aria-hidden="true">image-20220607104426006</figcaption></figure><p>Add secondary replica.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607140235168.png"alt="image-20220607140235168" /><figcaption aria-hidden="true">image-20220607140235168</figcaption></figure><p>In the <code>Endpoints</code> tab, to avoid the following warning, weneed to set the <code>SQL Server Service Account</code> to the domainaccount instead of the local server service account. Note that the<code>Port Number</code> should be <strong>5022</strong></p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607141252469.png"alt="image-20220607141252469" /><figcaption aria-hidden="true">image-20220607141252469</figcaption></figure><p>In the <strong>SQL Service Configuration Manager</strong> of bothnode servers, change the account name into the <strong>domainaccount</strong> as the following.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607141542135.png"alt="image-20220607141542135" /><figcaption aria-hidden="true">image-20220607141542135</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607141623518-16545825841621-16545825852083.png"alt="image-20220607141623518" /><figcaption aria-hidden="true">image-20220607141623518</figcaption></figure><p>Now, back to the wizard, refresh the page, and the account issuccessfully changed.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607141929009.png"alt="image-20220607141929009" /><figcaption aria-hidden="true">image-20220607141929009</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607142141848.png"alt="image-20220607142141848" /><figcaption aria-hidden="true">image-20220607142141848</figcaption></figure><p>Note that the <code>Port</code> should be <strong>1433</strong> andthe <code>IP Address</code> should be an unused IP Address on thenetwork.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607142110076.png"alt="image-20220607142110076" /><figcaption aria-hidden="true">image-20220607142110076</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607142223919.png"alt="image-20220607142223919" /><figcaption aria-hidden="true">image-20220607142223919</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607142235554-16545829607005.png"alt="image-20220607142235554" /><figcaption aria-hidden="true">image-20220607142235554</figcaption></figure><p>If successfully installed, we can find an AG listener in the<strong>Failover Cluster Manager</strong>.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607143200288.png"alt="image-20220607143200288" /><figcaption aria-hidden="true">image-20220607143200288</figcaption></figure><h2 id="configure-read-only-route">Configure Read-Only Route</h2><h3 id="configuration">Configuration</h3><p>In the <strong>Object Explorer</strong>, open the<strong>Properties</strong> of the AG. Change<code>Readable Secondary</code> in <strong>AvailabilityReplicas</strong> to <code>Read-intent Only</code>.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607154139066.png"alt="image-20220607154139066" /><figcaption aria-hidden="true">image-20220607154139066</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220607161723678.png"alt="image-20220607161723678" /><figcaption aria-hidden="true">image-20220607161723678</figcaption></figure><p>For the two stand-alone SQL servers, in the <strong>SQL ServerConfiguration Manager</strong>, <strong>Protocols for SQL 1 --&gt;TCP/IP --&gt; Properties --&gt; IP Addresses --&gt; TPC DynamicPorts</strong>, change the port to an unused one for both services. Thisstep ensures we can find the servers using a Read-only routing URL withthe same port.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220608093558782.png"alt="image-20220608093558782" /><figcaption aria-hidden="true">image-20220608093558782</figcaption></figure><p>Fill in the <code>Read-Only Routing URL</code> with<code>TCP://ComputerName.domain:port</code>. The <code>port</code> hereshould be the number set in the previous step. Then, click on the firstinstance, there will be two available replicas shown, add SQL2 and thenadd SQL1. Then, click on the second instance, there will also be twoavailable replicas shown, add SQL1 and then add SQL2.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220608101300076.png"alt="image-20220608101300076" /><figcaption aria-hidden="true">image-20220608101300076</figcaption></figure><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220608101311244.png"alt="image-20220608101311244" /><figcaption aria-hidden="true">image-20220608101311244</figcaption></figure><p>Or, simply run the script.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE [master]<br> GO<br> <span class="hljs-keyword">ALTER</span> AVAILABILITY <span class="hljs-keyword">GROUP</span> [jiachengAG]<br> MODIFY REPLICA <span class="hljs-keyword">ON</span> N<span class="hljs-string">&#x27;TJXIEM405VM\SQL1&#x27;</span> <span class="hljs-keyword">WITH</span> (PRIMARY_ROLE(READ_ONLY_ROUTING_LIST <span class="hljs-operator">=</span> (N<span class="hljs-string">&#x27;TJXIEM406VM\SQL2&#x27;</span>,N<span class="hljs-string">&#x27;TJXIEM405VM\SQL1&#x27;</span>)))<br> GO<br> USE [master]<br> GO<br> <span class="hljs-keyword">ALTER</span> AVAILABILITY <span class="hljs-keyword">GROUP</span> [jiachengAG]<br> MODIFY REPLICA <span class="hljs-keyword">ON</span> N<span class="hljs-string">&#x27;TJXIEM406VM\SQL2&#x27;</span> <span class="hljs-keyword">WITH</span> (PRIMARY_ROLE(READ_ONLY_ROUTING_LIST <span class="hljs-operator">=</span> (N<span class="hljs-string">&#x27;TJXIEM405VM\SQL1&#x27;</span>,N<span class="hljs-string">&#x27;TJXIEM406VM\SQL2&#x27;</span>)))<br> GO<br></code></pre></td></tr></table></figure><h3 id="test">Test</h3><p>Connect the AG listener. Click <strong>Options</strong> to configurethe connection.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220608093733764.png"alt="image-20220608093733764" /><figcaption aria-hidden="true">image-20220608093733764</figcaption></figure><p>Note that the connected database needs to be specified in<code>Connection Properties</code></p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220608093829901.png"alt="image-20220608093829901" /><figcaption aria-hidden="true">image-20220608093829901</figcaption></figure><p>Also, add <code>ApplicationIntent=ReadOnly</code> as connectionstrings to enable Read-only routing.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220608093924655.png"alt="image-20220608093924655" /><figcaption aria-hidden="true">image-20220608093924655</figcaption></figure><p>New a query, run the script, the Read-only routing works as I amworking in the primary replica while it routes read-only connections tothe secondary replica.</p><figure><imgsrc="/2022/06/08/Install%20AlwaysOn%202019%20For%20Failover%20Clusters/image-20220608094019762.png"alt="image-20220608094019762" /><figcaption aria-hidden="true">image-20220608094019762</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Build a Failover Cluster on VMAS</title>
    <link href="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/"/>
    <url>/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/</url>
    
    <content type="html"><![CDATA[<h1 id="build-a-failover-cluster-on-vmas">Build a failover cluster onVMAS</h1><h2 id="preparation">Preparation</h2><h3 id="configure-domain-controller">Configure Domain Controller</h3><p>In the <strong>Server Manager</strong> of the server that you want touse as a Domain Controller, click on <strong>Add roles andfeatures</strong>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602103151680.png"alt="image-20220602103151680" /><figcaption aria-hidden="true">image-20220602103151680</figcaption></figure><p>Check <code>Active Directory Domain Services</code> and<code>DNS Server</code> tabs and continue the installation.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602102333211.png"alt="image-20220602102333211" /><figcaption aria-hidden="true">image-20220602102333211</figcaption></figure><h3 id="configure-domain-settings">Configure Domain Settings</h3><p>For the node servers, <strong>Control Panel --&gt; System andSecurity --&gt; System --&gt; Change settings --&gt; Change</strong>,set the <code>Domain</code> as you created. You may need to reboot themachine to make effects.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220607180631031.png"alt="image-20220607180631031" /><figcaption aria-hidden="true">image-20220607180631031</figcaption></figure><h3 id="configure-dns-settings">Configure DNS Settings</h3><p>For the node servers, change their DNS settings to the same as theDC, <strong>Control Panel --&gt; Network and Internet --&gt; NetworkConnections --&gt; Properties --&gt; Internet Protocol Version 4(TCP/IPv4)</strong>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220607181311498.png"alt="image-20220607181311498" /><figcaption aria-hidden="true">image-20220607181311498</figcaption></figure><h2 id="add-the-failover-clustering-feature-to-nodes">Add the FailoverClustering Feature to Nodes</h2><p>This should be done for all the servers that you want to join yourWSFC.</p><p>In the <strong>Server Manager</strong> of node servers, click<strong>Add roles and features</strong>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602103139638.png"alt="image-20220602103139638" /><figcaption aria-hidden="true">image-20220602103139638</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602102912334.png"alt="image-20220602102912334" /><figcaption aria-hidden="true">image-20220602102912334</figcaption></figure><p>Check <code>Failover Clustering</code>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602104348148.png"alt="image-20220602104348148" /><figcaption aria-hidden="true">image-20220602104348148</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602103048935.png"alt="image-20220602103048935" /><figcaption aria-hidden="true">image-20220602103048935</figcaption></figure><h2 id="running-the-failover-cluster-validation-wizard">Running theFailover Cluster Validation Wizard</h2><p>Before creating the cluster, it's better to validate first. This stepcan be done on any of your node servers.</p><p><strong>Server Manager --&gt; Tools --&gt; Failover ClusterManager</strong></p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602105158375.png"alt="image-20220602105158375" /><figcaption aria-hidden="true">image-20220602105158375</figcaption></figure><p>Select <strong>Validate Configuration</strong></p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602105248004.png"alt="image-20220602105248004" /><figcaption aria-hidden="true">image-20220602105248004</figcaption></figure><p>In the <code>Select Servers or a Cluster</code> section, you may findthe <code>Selected Servers</code> list is empty. Click<code>Browse</code> and search servers using their names.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602110339994.png"alt="image-20220602110339994" /><figcaption aria-hidden="true">image-20220602110339994</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602110303490.png"alt="image-20220602110303490" /><figcaption aria-hidden="true">image-20220602110303490</figcaption></figure><p>Run the test and see the test result.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602110507810.png"alt="image-20220602110507810" /><figcaption aria-hidden="true">image-20220602110507810</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602110705518.png"alt="image-20220602110705518" /><figcaption aria-hidden="true">image-20220602110705518</figcaption></figure><p>If all tests are successful, check the<code>Create the cluster now using the validated nodes</code> to startcreating clusters.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220607174119603.png"alt="image-20220607174119603" /><figcaption aria-hidden="true">image-20220607174119603</figcaption></figure><h2 id="create-wsfc">Create WSFC</h2><p>If you checked the<code>Create the cluster now using the validated nodes</code> box,simply continue installing would successfully create a failovercluster.</p><h3 id="configure-static-ip-address">Configure Static IP Address</h3><p>Double click on the cluster you've created, you will see thefollowing prompt, and check the <code>Static IP Address</code>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602121732074.png"alt="image-20220602121732074" /><figcaption aria-hidden="true">image-20220602121732074</figcaption></figure><h2 id="build-iscsi-virtual-disk">Build iSCSI Virtual Disk</h2><p>One DC as Disk Server.</p><p>Two node servers as clients.</p><h3 id="configure-disk-server">Configure Disk Server</h3><h4 id="install-iscsi-service">Install iSCSI service</h4><p>Again, in the <strong>Server Manager --&gt; Add Roles andFeatures</strong>. Expand the <code>File and Storage Services</code> andcheck boxes start with <code>iSCSI</code>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602123004600.png"alt="image-20220602123004600" /><figcaption aria-hidden="true">image-20220602123004600</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602123112170.png"alt="image-20220602123112170" /><figcaption aria-hidden="true">image-20220602123112170</figcaption></figure><h4 id="create-virtual-disk">Create virtual disk</h4><p>Click on <strong>TASKS</strong> and <strong>New iSCSI VirtualDisk</strong>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602123606013.png"alt="image-20220602123606013" /><figcaption aria-hidden="true">image-20220602123606013</figcaption></figure><p>Either <code>Select by volume</code> or<code>Type a custom path</code> works.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602123754160.png"alt="image-20220602123754160" /><figcaption aria-hidden="true">image-20220602123754160</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602123850625.png"alt="image-20220602123850625" /><figcaption aria-hidden="true">image-20220602123850625</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602124038768.png"alt="image-20220602124038768" /><figcaption aria-hidden="true">image-20220602124038768</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602124119537.png"alt="image-20220602124119537" /><figcaption aria-hidden="true">image-20220602124119537</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602124204011.png"alt="image-20220602124204011" /><figcaption aria-hidden="true">image-20220602124204011</figcaption></figure><p>Here I choose to query clients, as we did before in the creatingclusters section.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602124345269.png"alt="image-20220602124345269" /><figcaption aria-hidden="true">image-20220602124345269</figcaption></figure><p>Those are client servers that access the disk server.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602125418777.png"alt="image-20220602125418777" /><figcaption aria-hidden="true">image-20220602125418777</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602125735307.png"alt="image-20220602125735307" /><figcaption aria-hidden="true">image-20220602125735307</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602130013751.png"alt="image-20220602130013751" /><figcaption aria-hidden="true">image-20220602130013751</figcaption></figure><h4 id="configuration">Configuration</h4><p><strong>Server Manager --&gt; File and Storage Services --&gt; iSCSI--&gt; iSCSI</strong></p><p>We can add initiators here.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602130314511.png"alt="image-20220602130314511" /><figcaption aria-hidden="true">image-20220602130314511</figcaption></figure><h3 id="configure-client-servers">Configure Client Servers</h3><p>For each client server, configure it as the following.</p><p>Double click to start the <code>iSCSI Initiator</code> service.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602132228794.png"alt="image-20220602132228794" /><figcaption aria-hidden="true">image-20220602132228794</figcaption></figure><p>Since my initiator for the disk server is an IQN connection, I needto input the IP address here. Note that we can find the IP address ofthe disk server by typing <code>ipconfig</code> in the command line.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602132943178.png"alt="image-20220602132943178" /><figcaption aria-hidden="true">image-20220602132943178</figcaption></figure><p>In the <code>Volumes and Devices</code>, click<code>Auto Configure</code> to add the virtual disk to the volumelist.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602135943801.png"alt="image-20220602135943801" /><figcaption aria-hidden="true">image-20220602135943801</figcaption></figure><p>Now, we can bring the virtual disk online.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602133216522.png"alt="image-20220602133216522" /><figcaption aria-hidden="true">image-20220602133216522</figcaption></figure><p>In the <strong>Disk Management</strong>, we can check the status ofthe virtual disk.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602133526450.png"alt="image-20220602133526450" /><figcaption aria-hidden="true">image-20220602133526450</figcaption></figure><p>Note that for both clients and disk servers, we need to turn thestartup type of iSCSI service to <code>auto</code>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602133916305.png"alt="image-20220602133916305" /><figcaption aria-hidden="true">image-20220602133916305</figcaption></figure><h3 id="add-virtual-disk-to-cluster">Add Virtual Disk to Cluster</h3><p>Go to the Disk Management on any node server, initialize and create anew volume for the virtual disk.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602152433107.png"alt="image-20220602152433107" /><figcaption aria-hidden="true">image-20220602152433107</figcaption></figure><p>Then go to the <strong>Failover Cluster Manager</strong>, in the<strong>Disk</strong> tab, <code>Add Disk</code>. Choose the virtualdisk created before. Then, in the active node server, we can find a newvolume in the file explorer. You can click<code>Move Available Storage</code> to see whether the actionsucceeded.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602151901691.png"alt="image-20220602151901691" /><figcaption aria-hidden="true">image-20220602151901691</figcaption></figure><h2 id="configure-the-cluster-quorum-settings">Configure the ClusterQuorum Settings</h2><p>On the disk of the DC server, create a Witness file folder and shareit. Make sure to give permissions to your WSFC server.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606092732482.png"alt="image-20220606092732482" /><figcaption aria-hidden="true">image-20220606092732482</figcaption></figure><p>Right click on your cluster, <strong>More Actions --&gt; ConfigureCluster Quorum Settings</strong>. This can be done in any of your nodeservers.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606093158802.png"alt="image-20220606093158802" /><figcaption aria-hidden="true">image-20220606093158802</figcaption></figure><p>In the <code>Configure Cluster Quorum Wizard</code>,<code>Advanced quorum configuration --&gt; All Nodes --&gt; Configure a file share witness --&gt; Select the path of your shared folder</code></p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606093427113.png"alt="image-20220606093427113" /><figcaption aria-hidden="true">image-20220606093427113</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606093544405.png"alt="image-20220606093544405" /><figcaption aria-hidden="true">image-20220606093544405</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606093655628.png"alt="image-20220606093655628" /><figcaption aria-hidden="true">image-20220606093655628</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606093810393.png"alt="image-20220606093810393" /><figcaption aria-hidden="true">image-20220606093810393</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606093833067.png"alt="image-20220606093833067" /><figcaption aria-hidden="true">image-20220606093833067</figcaption></figure><h2id="install-a-sql-server-2019-failover-clustered-instance-fci">Install aSQL Server 2019 Failover Clustered Instance (FCI)</h2><p>Download the SQL Server 2019 installation media on the two nodeservers.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602164508936.png"alt="image-20220602164508936" /><figcaption aria-hidden="true">image-20220602164508936</figcaption></figure><h3 id="for-the-primary-node-server">For the primary node server</h3><p>Run the <strong>setup.exe</strong>,<code>New SQL Server failover cluster installation</code> in the<code>installation</code> tab.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606094314046.png"alt="image-20220606094314046" /><figcaption aria-hidden="true">image-20220606094314046</figcaption></figure><p>It will go through server checks.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602164925334.png"alt="image-20220602164925334" /><figcaption aria-hidden="true">image-20220602164925334</figcaption></figure><p>If you have successfully added the virtual disk to the cluster, yourvirtual disks will be shown here.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602165504291.png"alt="image-20220602165504291" /><figcaption aria-hidden="true">image-20220602165504291</figcaption></figure><p>Create an IP Address that is different from all IP addresses of yourservers and the cluster.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602165656261.png"alt="image-20220602165656261" /><figcaption aria-hidden="true">image-20220602165656261</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602165816089.png"alt="image-20220602165816089" /><figcaption aria-hidden="true">image-20220602165816089</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602165914386.png"alt="image-20220602165914386" /><figcaption aria-hidden="true">image-20220602165914386</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602165926475.png"alt="image-20220602165926475" /><figcaption aria-hidden="true">image-20220602165926475</figcaption></figure><h3 id="for-the-secondary-node-server">For the secondary nodeserver</h3><p>Run the <strong>setup.exe</strong>,<code>Add node to a SQL Server failover cluster</code> in the<code>installation</code> tab.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602174455520.png"alt="image-20220602174455520" /><figcaption aria-hidden="true">image-20220602174455520</figcaption></figure><p>Follow similar steps to add a node to the failover cluster.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220602174957642.png"alt="image-20220602174957642" /><figcaption aria-hidden="true">image-20220602174957642</figcaption></figure><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220606102320690.png"alt="image-20220606102320690" /><figcaption aria-hidden="true">image-20220606102320690</figcaption></figure><h2 id="testing-failover">Testing Failover</h2><p>In the <strong>Failover Cluster Manager</strong>, find the cluster,<strong>Simulate Failure</strong>.</p><figure><imgsrc="/2022/06/07/Build%20a%20failover%20cluster%20on%20VMAS/image-20220607174939143.png"alt="image-20220607174939143" /><figcaption aria-hidden="true">image-20220607174939143</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL Server Backup</title>
    <link href="/2022/06/06/SQL%20Server%20Backup/"/>
    <url>/2022/06/06/SQL%20Server%20Backup/</url>
    
    <content type="html"><![CDATA[<h1 id="sql-server-backup">SQL Server Backup</h1><p><strong>Full Backup</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">backup database AdventureWorks2019 <span class="hljs-keyword">to</span> disk <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;C:\Windows\AdventureWorks2019_20220602.bak&#x27;</span>;<br></code></pre></td></tr></table></figure><p>If get an error like this:</p><figure><img src="/2022/06/06/SQL%20Server%20Backup/image-20220606100125253.png"alt="image-20220606100125253" /><figcaption aria-hidden="true">image-20220606100125253</figcaption></figure><p>It means that the SQL server has no permission to the location. Tofix this, in the <strong>SQL Server Configuration Manager</strong>, wecan find that the SQL service is logged on as<code>NT Service\MSSQLSERVER</code>.</p><figure><img src="/2022/06/06/SQL%20Server%20Backup/image-20220606100346465.png"alt="image-20220606100346465" /><figcaption aria-hidden="true">image-20220606100346465</figcaption></figure><p>Then right-click on the folder you want to access, <strong>properties--&gt; security</strong>, and add permission to the<code>NT Service\MSSQLSERVER</code>.</p><figure><img src="/2022/06/06/SQL%20Server%20Backup/image-20220606100858530.png"alt="image-20220606100858530" /><figcaption aria-hidden="true">image-20220606100858530</figcaption></figure><p><strong>Backup with differential</strong></p><p>This will back up the changed pages from the previous fullbackup.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- backup changes start from last full backup, save changed page only</span><br>backup database AdventureWorks2019 <span class="hljs-keyword">to</span> disk <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;C:\Users\t-jxie\Downloads\AdventureWorks2019_20220602_2.bak&#x27;</span> <span class="hljs-keyword">with</span> differential;<br></code></pre></td></tr></table></figure><p><strong>Backup with copy_only</strong></p><p>This will leave the DCM (diff change map) unchanged, meaning that ifwe are back up with differential, it will also backup changes from thelast full backup.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- backup, leave (DCM) diff change map unchanged, compressed</span><br>backup database AdventureWorks2019 <span class="hljs-keyword">to</span> disk <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;C:\Users\t-jxie\Downloads\AdventureWorks2019_20220602_2.bak&#x27;</span> <span class="hljs-keyword">with</span> copy_only, compression;<br></code></pre></td></tr></table></figure><p>The DCM records the changes made to the page of the database, we canview the DCM of the specific database by</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">dbcc page(<span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>)<br></code></pre></td></tr></table></figure><figure><img src="/2022/06/06/SQL%20Server%20Backup/image-20220606101710464.png"alt="image-20220606101710464" /><figcaption aria-hidden="true">image-20220606101710464</figcaption></figure><p><strong>Backup log files</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">backup log AdventureWorks2019 <span class="hljs-keyword">to</span> disk <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;C:\Users\t-jxie\Downloads\AdventureWorks2019_20220602.trn&#x27;</span>;<br></code></pre></td></tr></table></figure><p>We can view the information of log files of databases by</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">dbcc sqlperf(logspace)<br></code></pre></td></tr></table></figure><figure><img src="/2022/06/06/SQL%20Server%20Backup/image-20220606101859208.png"alt="image-20220606101859208" /><figcaption aria-hidden="true">image-20220606101859208</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
      <tag>T-SQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Freeze SQL service manually using WinDbg</title>
    <link href="/2022/06/06/Freeze%20SQL%20service%20manually%20using%20WinDbg/"/>
    <url>/2022/06/06/Freeze%20SQL%20service%20manually%20using%20WinDbg/</url>
    
    <content type="html"><![CDATA[<h1 id="freeze-sql-service-manually-using-windbg">Freeze SQL servicemanually using WinDbg</h1><p>Currently, the SQL failover cluster works normally.</p><figure><imgsrc="/2022/06/06/Freeze%20SQL%20service%20manually%20using%20WinDbg/image-20220606132830651.png"alt="image-20220606132830651" /><figcaption aria-hidden="true">image-20220606132830651</figcaption></figure><p>In the SSMS (Microsoft SQL Server Management Studio), the followingquery returns the process id and other information related to the SQLserver service.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- Thread ID</span><br><span class="hljs-keyword">SELECT</span> kpid,<span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.sysprocesses <span class="hljs-keyword">where</span> program_name  <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;Microsoft¬Æ Windows¬Æ Operating System%&#x27;</span><br><span class="hljs-comment">-- Prrocess ID</span><br><span class="hljs-keyword">SELECT</span> process_id,<span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.dm_server_services <span class="hljs-keyword">WHERE</span> servicename <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;SQL Server (MSSQLSERVER)&#x27;</span><br></code></pre></td></tr></table></figure><p>Note that the thread ID here is the id for the system, we need toconvert the id before using it.</p><figure><imgsrc="/2022/06/06/Freeze%20SQL%20service%20manually%20using%20WinDbg/image-20220606164943627.png"alt="image-20220606164943627" /><figcaption aria-hidden="true">image-20220606164943627</figcaption></figure><p>In <strong>WinDbg</strong>, attach to the <code>sqlserver.exe</code>process. As you can see, the process id is the same as the query result.Note that make sure the WinDbg is running on the node server that is thecurrent host of the cluster, or you may not find the<code>sqlserver.exe</code> in the list.</p><figure><imgsrc="/2022/06/06/Freeze%20SQL%20service%20manually%20using%20WinDbg/image-20220606165000885.png"alt="image-20220606165000885" /><figcaption aria-hidden="true">image-20220606165000885</figcaption></figure><p>Convert the thread ID into hexadecimal, then enter<code>~~[HEX Thread ID]</code> to get the thread ID (debug ID) in thedebugger. Then we can freeze the SQL service by<code>~Debug ID f</code>.</p><figure><imgsrc="/2022/06/06/Freeze%20SQL%20service%20manually%20using%20WinDbg/image-20220606165508820.png"alt="image-20220606165508820" /><figcaption aria-hidden="true">image-20220606165508820</figcaption></figure><p>Now, we observe that the SQL service is frozen.</p><figure><imgsrc="/2022/06/06/Freeze%20SQL%20service%20manually%20using%20WinDbg/image-20220606170306322.png"alt="image-20220606170306322" /><figcaption aria-hidden="true">image-20220606170306322</figcaption></figure><p>To resume the service, detach the process from the debugger. Then theSQL server will be brought online.</p>]]></content>
    
    
    <categories>
      
      <category>Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
      <tag>WinDbg</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Change Vote Weight of WSFC Node Servers</title>
    <link href="/2022/06/06/Change%20Vote%20Weight%20of%20WSFC%20Node%20Servers/"/>
    <url>/2022/06/06/Change%20Vote%20Weight%20of%20WSFC%20Node%20Servers/</url>
    
    <content type="html"><![CDATA[<h1 id="change-vote-weight-of-wsfc-node-servers">Change Vote Weight ofWSFC Node Servers</h1><p>Currently, my node servers have the voting values as thefollowing.</p><figure><imgsrc="/2022/06/06/Change%20Vote%20Weight%20of%20WSFC%20Node%20Servers/image-20220606171346007.png"alt="image-20220606171346007" /><figcaption aria-hidden="true">image-20220606171346007</figcaption></figure><p>In <strong>Windows PowerShell</strong>, we can view the node serversby <code>get-clusternode</code>.</p><figure><imgsrc="/2022/06/06/Change%20Vote%20Weight%20of%20WSFC%20Node%20Servers/image-20220606171619268.png"alt="image-20220606171619268" /><figcaption aria-hidden="true">image-20220606171619268</figcaption></figure><p>Then, to change the vote weight,</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># (get-clusternode NODE_NAME).nodeweight = VALUE</span><br>(<span class="hljs-built_in">get-clusternode</span> tjxiem406VM).nodeweight = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><figure><imgsrc="/2022/06/06/Change%20Vote%20Weight%20of%20WSFC%20Node%20Servers/image-20220606172036812.png"alt="image-20220606172036812" /><figcaption aria-hidden="true">image-20220606172036812</figcaption></figure>]]></content>
    
    
    <categories>
      
      <category>Note</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL Server</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
